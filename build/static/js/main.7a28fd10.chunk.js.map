{"version":3,"sources":["redux/settings.js","redux/app/appSlice.js","utils/getMenuMedia.js","utils/getMenuDocuments.js","utils/getMenuLatest.js","utils/getMenuTrash.js","utils/getMenuSearch.js","utils/getMenuChildren.js","Admin/app/primaryAction.js","Admin/app/index.js","Admin/app/app.js","Admin/app/theme.js","Admin/app/menu.js","redux/modelsById/modelsByIdSlice.js","schemas/article/section/mediaSize.js","schemas/article/section/mediaFormat.js","schemas/article/section/schema.js","schemas/article/section/sectionType.js","schemas/article/section/sectionText.js","schemas/article/section/sectionMedia.js","schemas/article/section/media.js","schemas/article/section/sectionDm.js","schemas/article/section/ekultur.js","schemas/article/section/sectionLinks.js","schemas/article/section/sectionAttachments.js","schemas/article/section/attachments.js","schemas/article/section/sectionQuote.js","redux/editor/editorSlice.js","redux/searchById/searchByIdSlice.js","components/ParentIdField/ParentIdField.js","components/KpPage/KpPageField.js","components/KpPage/KpAnnotateArrayField.js","components/KpPage/KpAnnotateImageField.js","components/KpLink/KpLink.model.js","components/KpLink/KpLink.schema.js","components/KpLink/KpLink.uiSchema.js","components/KpLink/KpLinkButtons.js","components/KpLink/KpLinkMediaLayout.js","components/KpLink/KpLinkReferenceLayout.js","components/KpLink/KpLinkContentField.js","components/KpLink/KpLinkField.js","components/KpLink/KpLinkCollapsed.js","components/KpLink/KpLinkExpanded.js","components/KpLink/KpLinkLayout.js","components/KpDevice/KpDeviceField.js","components/KpDevice/KpDeviceLinkField.js","components/PageEditor/PageEditorField.js","components/PageEditor/PageEditorLayout.js","components/PageEditor/PageContentField.js","components/PageEditor/PageMenu.js","components/PageEditor/PageContentLayout.js","components/PageEditor/PageSettingsField.js","components/PageEditor/PageSettingsLayout.js","components/PageEditor/registry.js","components/registry.js","Dialog/DialogBase.js","Dialog/DialogFooter.js","Dialog/DialogSearch.js","Dialog/DialogTabs.js","Dialog/DialogHeader.js","Dialog/DialogSection.js","Dialog/ResultsLoader.js","Dialog/ResultsFooter.js","Dialog/DialogModel.js","Dialog/ResultsList.js","Dialog/ResultsGallery.js","Dialog/ResultsHeader.js","Dialog/ResultsUploads.js","Dialog/MediaResults.js","Dialog/DocumentsResults.js","Dialog/SearchResultsDefault.js","Dialog/SearchResults.js","Dialog/SearchDialog.js","Dialog/FavouritesDialog.js","Dialog/DialogUpload.js","Dialog/UploadDialog.js","Dialog/MediaDialog.js","Dialog/DocumentsDialog.js","Dialog/Dialog.js","Editor/EditorDialog.js","Editor/EditorPreview.js","Editor/Editor.js","Editor/EditorLoader.js","schemas/article/index.js","schemas/article/schema.js","schemas/article/uiSchema.js","schemas/article/uiPreview.js","schemas/article/settings/uiSchema.js","schemas/article/header/uiSchema.js","schemas/article/body/uiSchema.js","schemas/article/section/uiSchema.js","schemas/article/section/uiPreview.js","schemas/article/section/mediaUi.js","schemas/article/section/attachmentsUi.js","schemas/article/section/ekulturUi.js","schemas/article/section/linksUi.js","schemas/article/isPartOf/uiSchema.js","schemas/page/schema.js","schemas/page/documentType/schema.js","schemas/page/linksLayout/schema.js","schemas/page/links/schema.js","schemas/page/links/items.js","schemas/pageMap/schema.js","schemas/page/icons/index.js","schemas/page/uiPreview.js","schemas/page/settings/uiSchema.js","schemas/page/links/uiSchema.js","schemas/page/links/itemsUi.js","schemas/page/pageBody/uiSchema.js","schemas/pageMap/uiSchema.js","schemas/pageMap/uiPreview.js","schemas/pageMap/header/uiSchema.js","schemas/pageMap/body/uiSchema.js","Preview/Page/PageLayout.js","Preview/Page/PageMedia.js","Preview/Page/PageHeader.js","Preview/Page/PageBody.js","Preview/PageMap/DefaultMapMarker.js","Preview/PageMap/DefaultMap.js","Preview/PageMap/RoundtripMapMarker.js","Preview/PageMap/RoundtripMap.js","Preview/PageMap/PageMap.js","schemas/pageMap/index.js","schemas/pageTopic/index.js","schemas/pageTopic/schema.js","schemas/pageTopic/uiSchema.js","schemas/pageTopic/uiPreview.js","schemas/pageTopic/header/uiSchema.js","schemas/pageTopic/body/uiSchema.js","schemas/pageGrid/schema.js","schemas/pageGrid/uiPreview.js","schemas/page/pageHeader/uiSchema.js","schemas/pageGrid/gridHeader/uiSchema.js","schemas/page/pageMedia/uiSchema.js","schemas/pageGrid/gridMedia/uiSchema.js","schemas/pageGrid/gridLinks/uiSchema.js","schemas/pageGrid/uiSchema.js","schemas/pageGrid/gridBody/uiSchema.js","Preview/KioskPreview/ArticleBase.js","Preview/KioskPreview/ArticleGrid.js","Preview/KioskPreview/ArticleTitle.js","Preview/KioskPreview/ArticleBodytext.js","Preview/KioskPreview/LayoutList.js","Preview/KioskPreview/LayoutGrid.js","Preview/KioskPreview/LayoutSlideshow.js","Preview/KioskPreview/LayoutFormat.js","Preview/KioskPreview/ModuleMedia.js","Preview/KioskPreview/ArticleMedia.js","Preview/KioskPreview/ModuleEkultur.js","Preview/KioskPreview/ArticleReferences.js","Preview/KioskPreview/ArticleLinks.js","Preview/KioskPreview/ArticleHead.js","Preview/KioskPreview/ArticleBody.js","Preview/KioskPreview/ArticleLeadtext.js","Preview/KioskPreview/ArticleSection.js","Preview/KioskPreview/Article.js","Preview/KioskPreview/PreviewFormat.js","Preview/KioskPreview/utils/getPreviewItem.js","Preview/KioskPreview/Menu.js","Preview/KioskPreview/PageHeader.js","Preview/KioskPreview/GridModule.js","Preview/KioskPreview/Grid.js","Preview/KioskPreview/TimelineModule.js","Preview/KioskPreview/Timeline.js","Preview/KioskPreview/AnnotateImagemap.js","Preview/KioskPreview/utils/getContrastColor.js","Preview/KioskPreview/AnnotateLegends.js","Preview/KioskPreview/Page.js","Preview/KioskPreview/PreviewKiosk.js","Preview/KioskPreview/index.js","schemas/index.js","schemas/pageGrid/index.js","schemas/pageList/index.js","schemas/pageList/schema.js","schemas/pageList/uiSchema.js","schemas/pageList/uiPreview.js","schemas/pageList/listHeader/uiSchema.js","schemas/pageList/listMedia/uiSchema.js","schemas/pageList/listBody/uiSchema.js","schemas/pageTimeline/index.js","schemas/pageTimeline/schema.js","schemas/pageTimeline/uiSchema.js","schemas/pageTimeline/uiPreview.js","schemas/pageTimeline/timelineHeader/uiSchema.js","schemas/pageTimeline/timelineMedia/uiSchema.js","schemas/pageTimeline/timelineBody/uiSchema.js","schemas/pageAnnotate/index.js","schemas/pageAnnotate/schema.js","schemas/pageAnnotate/uiSchema.js","schemas/pageAnnotate/uiPreview.js","schemas/pageAnnotate/annotateHeader/uiSchema.js","schemas/pageAnnotate/annotateBody/uiSchema.js","schemas/pageAnnotate/annotateImage/uiSchema.js","schemas/pageAnnotate/annotateLinks/uiSchema.js","schemas/pageMedia/index.js","schemas/pageMedia/schema.js","schemas/pageMedia/uiSchema.js","schemas/pageMedia/uiPreview.js","schemas/pageMedia/mediaHeader/uiSchema.js","schemas/pageMedia/mediaBody/uiSchema.js","schemas/pageMedia/mediaLinks/uiSchema.js","schemas/device/index.js","schemas/device/schema.js","schemas/device/uiSchema.js","schemas/device/uiPreview.js","schemas/device/settings/uiSchema.js","schemas/device/header/uiSchema.js","schemas/device/media/uiSchema.js","schemas/device/hasPages/uiSchema.js","schemas/schemasByName.js","Admin/DocumentEditor.js","Admin/MediaPreview.js","Admin/MediaEditor.js","redux/uploadById/uploadByIdSlice.js","Finder/FinderLayout.js","Finder/ResultsLoader.js","Finder/ResultsFooter.js","components/ButtonSelect/ButtonSelect.js","components/Preview/PreviewBase.js","components/Preview/PreviewScale.js","components/Masonry/MasonryModule.js","components/PreviewIframe/PreviewIframe.js","Finder/FinderModel.js","Finder/ListLayout.js","Upload/UploadDropzone.js","Admin/MediaUpload.js","components/Masonry/Masonry.js","Finder/MasonryLayout.js","Finder/ResultsHeader.js","Finder/GalleryLayout.js","Finder/FinderQuery.js","Finder/Finder.js","Admin/AdminRoutes.js","Admin/index.js","Admin/Admin.js","AppRoutes.js","App.js","redux/rootReducer.js","redux/store.js","serviceWorker.js","index.js","schemas/page/icons/pageMedia.svg","schemas/page/icons/pageList.svg","schemas/page/icons/pageTimeline.svg","schemas/page/icons/pageMosaic.svg","schemas/page/icons/pageAnnotate.svg"],"names":["API","appSlice","createSlice","name","initialState","isLoading","header","search","sidebar","expanded","reducers","requestApp","state","action","receiveApp","payload","toggleSearch","toggleHeader","toggleSidebar","requestSchemasByName","schemasByName","receiveSchemasByName","requestMenu","menu","receiveMenu","requestMenuByUrl","menuByUrl","receiveMenuByUrl","requestParents","receiveParents","parents","getApp","schemas","data","dispatch","getMenuByUrl","getSchemasByName","getAppLayout","layout","getParents","pathname","pathnames","split","url","forEach","path","title","push","map","schema","getMenuUrls","children","urls","level","child","item","actions","getMenuMedia","mediaType","query","mediaTypes","template","props","length","status","q","join","icon","models","getMenuDocuments","documentTypes","documentType","Array","isArray","getMenuLatest","getMenuTrash","getMenuSearch","getMenuChildren","root","parent","type","getMenuEkultur","role","hidden","collectionId","undefined","startsWith","rootUrl","getMenuChild","app","theme","siteId","subtitle","primaryAction","languages","modelsByIdSlice","requestModel","uniqueId","receiveModel","receiveStatus","toggleSelected","selected","requestSave","isSaving","receiveSave","getModel","modelName","fetch","method","headers","then","response","json","error","console","log","formData","loadModel","addDocumentSource","model","callback","source","toLowerCase","schemaId","JSON","stringify","body","addMediaSource","mediaSize","mediaFormat","editorSlide","currentId","dialog","requestEdit","receiveEdit","receiveCurrentId","requestDialog","receiveDialog","id","uiSchema","onChange","editModel","saveModel","searchByIdSlice","requestSearch","page","receiveError","toString","receiveSearch","results","receivePage","nextPage","prevPage","start","rows","count","pages","Math","ceil","currentPage","resultsByPage","resultsLoaded","Object","values","concat","p","getQuery","sq","qs","getUiOptions","utils","ParentIdField","formContext","uiQuery","fl","useDispatch","useEffect","useState","enumOptions","setEnumOptions","enumNames","setEnumNames","searchById","useSelector","currentSearch","optionsEnum","optionsNames","label","getOptions","StringField","registry","fields","newSchema","enum","getDefaultFormState","FieldKioskPage","handleChange","newFormData","definitions","annotateImage","backgroundImage","imageAnnotations","links","newRegistry","onAnnotateArrayChange","onAnnotateImageChange","newUiSchema","preview","ObjectField","ImageAnnotateArrayField","ArrayField","KioskAnnotateImageField","media","mediaId","imageFilters","ImageAnnotations","imageUrl","prepare","index","referenceId","reference","localeId","currentLocale","defaultLocale","typeLabel","metadata","useStyles","makeStyles","buttongroup","margin","spacing","button","fontFamily","fontSize","fontWeight","textTransform","letterSpacing","borderRadius","minWidth","minHeight","marginRight","SectionButton","color","variant","size","classes","Button","data-size","data-variant","disableElevation","className","Icon","SectionButtons","buttons","ButtonGroup","key","defaultProps","display","position","backgroundColor","opacity","zIndex","top","right","bottom","left","alignItems","justifyContent","KpLinkMediaLayout","onDialog","mediaButtons","onClick","data-name","ImagePreview","KpLinkButtons","border","borderColor","palette","divider","KpLinkReferenceLayout","LinkAddButton","IconButton","LinkRemoveButton","startAdornment","untitled","KpLinKContentField","referenceTitle","referenceDescription","description","_onMediaChange","_onReferenceChange","properties","linkContent","runningHead","KpLinkField","imageFocalpoint","imageCropdata","uiOptions","fieldset","uiPreview","content","KpLinkContentField","cropdata","handleCropdata","focalpoint","handleFocalpoint","filters","handleFilters","pageType","link","getUiSchema","hex","Color","isLight","titleColor","module","userSelect","cursor","pointerEvents","paddingLeft","paddingRight","borderTop","borderTopColor","boxShadow","shadows","badge","settings","flexWrap","marginLeft","toolbar","flexGrow","maxWidth","flexDirection","overflow","width","footer","StartAdornment","badgeContent","Badge","ListModule","statusLabel","author","datetime","ModuleBase","height","ModuleTitle","onEdit","ModuleStatus","ModuleByline","ModuleLabel","ModuleMetadata","ModuleDescription","NavSettings","NavToolbar","editable","selectable","deletable","restorable","marginTop","padding","ExpandedModule","elevation","ModuleFormat","ModuleHeader","ModuleBody","ModuleFooter","ModuleButtons","KpLinkLayout","onSave","KpLinkExpanded","KpLinkCollapsed","KpDeviceField","startPageId","setStartPageId","KpDeviceLinkField","isStartPage","toggleStartPage","ButtonBase","PageEditorField","idSchema","statusCode","statusMessage","createdAt","updatedAt","deletedAt","onExpand","onSelect","onCollapse","onLocale","onSubmit","useTranslation","t","i18n","disabled","primary","secondary","getPrimaryAction","idPrefix","$id","primaryId","secondaryId","setCurrentLocale","locale","_onLocale","PageEditor","collapsible","overlay","onToggle","EditorBase","EditorHeader","EditorBody","EditorFooter","OverlayTemplate","EditorOverlay","renderOverlay","PageContentField","menuWidth","transition","overflowY","menuList","PageMenu","aria-expanded","NavMenuList","NavMenuItem","NavMenuLink","background","default","transform","wrapper","PageContent","EditorSection","SidebarTemplate","EditorSidebar","renderSidebar","PreviewTemplate","renderPreview","EditorContent","PageSettingsField","KpPageField","KpAnnotateArrayField","KpAnnotateImageField","pageEditor","DialogBase","marginBottom","navigation","Menu","withStyles","BottomNavigation","MenuItem","BottomNavigationAction","DialogFooter","tabIndex","value","setValue","Paper","component","square","event","showLabels","DialogSearch","placeholder","onReset","AppSearch","DialogTabpanel","indicator","Tabs","DialogTab","Tab","disableRipple","text","DialogLabel","Typography","DialogTabs","tabs","indicatorColor","textColor","tab","DialogHeader","section","withResizeDetector","onScroll","parentRef","useRef","handleScroll","_","debounce","current","offsetHeight","addEventListener","removeEventListener","ref","loader","ResultsLoader","replace","ResultsFooter","onPage","from","to","layouts","TableModule","GridModule","GalleryModule","ModuleLoader","modelsSelected","onAdd","onRemove","modelsById","modelsBySource","sourceId","modelSchema","appDocumentType","sourceDocumentType","setPreview","uniqueModel","getUiPreview","newModel","newImageUrl","uploadStatus","uploadProgress","imageUrlParts","imageParams","parse","newImageParams","dimension","getImageUrl","createdByName","updatedByName","deletedByName","LayoutTemplate","includes","ListLayout","ResultsList","DialogModel","ResultsGallery","paddingTop","mediaHeight","mediaLayout","Gallery","mediaWidth","imageWidth","imageHeight","floor","ResultsUploads","uploads","templates","MediaResults","itemSchema","items","setModelsSelected","getSelected","addModel","ResultsTemplate","identifier","mimeType","getMediaSource","filter","removeItem","DocumentsResults","getDocumentSource","connect","uploadById","bindActionCreators","SearchResults","SearchDialog","onClose","userQ","setUserQ","handleQuery","trim","sortOptions","sort","setSort","sortSettings","dmOwnerOptions","dmOwner","setDmOwner","dmOwnerSettings","owner","sections","queryId","getMediaType","getMediaSections","getDocumentType","getDocumentSections","setTabIndex","currentTab","nextToken","handleTab","currentQuery","setPages","setCurrentPage","setNextPage","getPages","FavouritesDialog","favourites","uniqueIds","getFavouritesQuery","documents","upload","closeButton","dropzone","dropButton","DialogUpload","accept","multiple","onUpload","onCancel","currentUpload","requested","received","ButtonClose","onDrop","acceptedFiles","rejectedFiles","getRootProps","getInputProps","UploadDialog","setQ","handleReset","uploadSession","setUploadSession","uploadModels","uploadResults","uploadData","getUpload","session","MediaDialog","setTemplate","mediaFavourites","mediaUploads","FavouriteBadge","invisible","UploadBadge","DocumentsDialog","EditorDialog","setFormData","documentSchema","getReferenceQuery","mediaSchema","getMediaQuery","DialogTemplate","Dialog","EditorPreview","Editor","history","useHistory","editorRef","editor","hashId","location","hash","_onCurrentId","hashUrl","_onToggle","parentId","pop","expandId","_onExpand","_onCollapse","setDialog","_onDialog","Schema","EditorLoader","AppLoader","EditorIcon","schemaType","titleImage","isPartOf","lat","lng","address","sectionType","bodytext","references","attachments","cite","quote","pageMedia","pageList","pageTimeline","pageMosaic","pageAnnotate","pageIcon","icons","marker","MapLink","Map","defaultCenter","defaultZoom","KEY","markers","setMarkers","setOrigin","setDestination","setWaypoints","center","setCenter","uuidv4","mapId","setMapId","mapRef","newWaypoints","style","bootstrapURLKeys","yesIWantToUseGoogleMapApiInternals","onGoogleApiLoaded","google","bounds","maps","LatLngBounds","extend","LatLng","fitBounds","backgroundSize","image","origin","destination","waypoints","directions","setDirections","drawDirections","Polyline","geodesic","strokeColor","strokeOpacity","strokeWeight","setMap","directionsService","DirectionsService","route","travelMode","TravelMode","WALKING","result","DirectionsStatus","OK","overviewPath","routes","overview_path","resultsPath","getDirections","mapTypes","DefaultMap","referenceModel","newLinks","setNewLinks","mapLayout","MapTemplate","article","boxSizing","lineHeight","ArticleBase","ArticleGrid","ArticleTitle","language","listStyle","fontStyle","ArticleBodytext","list","LayoutList","gridColumns","React","cloneElement","grid","LayoutGrid","slideshow","slider","dots","backButton","nextButton","LayoutSlideshow","totalSlides","format","naturalSlideWidth","naturalSlideHeight","paddingBottom","ratio","LayoutFormat","w","data-minHeight","data-ratio","data-format","caption","headline","byline","license","ModuleMedia","ArticleMedia","renderMedia","flexBasis","maxHeight","objectCount","imageCount","videoCount","audioCount","commentCount","src","ArticleReferences","renderReference","referenceType","ModuleTemplate","ArticleLinks","href","renderLink","head","ArticleHead","leadtext","ArticleBody","ArticleLeadtext","ArticleSection","sectionLayout","Article","headerImage","PreviewFormat","getPreviewItem","itemType","m","cols","PreviewTimeline","menuItem","figure","textAlign","pageHeader","pageTitle","KioskPageHeader","titleSize","skin","placement","getTextPlacement","Card","ImageBase","objectFit","CardContent","gridTemplateColumns","templateCols","gridTemplateRows","templateRows","gridColumnGap","colGap","gridRowGap","rowGap","gridItem","gridColumnStart","gridColumnEnd","colEnd","gridRowStart","gridRowEnd","rowEnd","MosaicGrid","onCurrentId","rowHeight","repeat","GridItem","itemProps","PreviewMosaic","card","cardMedia","cardContent","MosaicModule","CardMedia","alt","overflowX","timeline","timelineItem","Timeline","TimelineItem","TimelineModule","borderSize","ImagemapPreview","contentTitle","annotateColor","contrastColor","ImageAnnotationsBase","markerTemplate","line","Imagemap","MarkerModule","data-index","Fragment","Grid","backgroundImageUrl","backgroundPosition","PreviewPage","annotateLayout","Page","PreviewKiosk","pageMap","pageTopic","parallaxImage","localTitle","linkMedia","hasPages","deviceTitle","deviceId","deviceType","mediaSchemas","DocumentEditor","match","params","onBack","goBack","onEditReference","referenceUrl","modelType","_onHistory","MediaPreview","PreviewMedia","MediaEditor","uploadByIdSlice","requestUpload","receiveUpload","requestUploadModel","receiveUploadModel","receiveUploadProgress","progress","receiveUploadStatus","file","getUploadUrl","filename","getUploadData","uploadUrl","FormData","append","xhr","XMLHttpRequest","lengthComputable","round","loaded","total","_onProgress","open","send","finder","FinderLayout","NavPath","flexDirecton","select","main","contrastText","ButtonSelect","aria-selected","aria-label","base","scale","frame","other","useTheme","ready","setState","instanceRef","handleRef","useCallback","contentDocument","node","contentWindow","NoSsr","defer","contentDidMount","jss","create","plugins","jssPreset","rtl","insertionPoint","sheetsManager","container","window","contentDidUpdate","dir","direction","StylesProvider","MasonryModule","stopPropagation","FinderModel","_onLink","_onEdit","_onDelete","deleteModel","_onRestore","restoreModel","_onErase","eraseModel","documentModel","selectModel","DocumentsList","UploadDropzone","MediaUpload","masonry","row","col","colWidth","columns","debug","itemsByColumn","c","getItemsByColumn","MasonryLayout","ResultsHeader","MediaGallery","List","Masonry","FinderQuery","Template","Finder","AdminRoutes","AdminTemplate","Admin","appData","date","view","_onSearchQuery","_onSearchReset","AppLayout","currentUrl","AppRoutes","App","jsx","global","combineReducers","appReducer","editorReducer","modelsByIdReducer","searchByIdReducer","uploadByIdReducer","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","logger","configureStore","reducer","rootReducer","Boolean","hostname","ReactDOM","render","StrictMode","store","document","getElementById","navigator","serviceWorker","registration","unregister","catch","message","exports"],"mappings":"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","file":"static/js/main.7a28fd10.chunk.js","sourcesContent":["let API = \"https://kompass.dimu.org\";\n\nexport {\n    API,\n}","import { API } from \"../settings\"\nimport { createSlice } from '@reduxjs/toolkit'\n\nconst appSlice = createSlice({\n    name: 'app',\n    initialState: {\n        isLoading: false,\n        header: {\n        },\n        search: {\n//            expanded: false\n        },\n        sidebar: {\n            expanded: true\n        }\n    }, \n    reducers: {\n        requestApp(state, action) {\n            return {\n                ...state,\n                isLoading: true,\n            }\n        },\n        receiveApp(state, action) {\n            return {\n                ...state,\n                isLoading: false,\n                ...action.payload\n            }\n        },\n        toggleSearch(state, action) {\n//            const { expanded } = action.payload\n\n            return {\n                ...state,\n                search: {\n                    ...state.search,\n                    expanded: !state.search.expanded,\n                }\n            }\n        },\n        toggleHeader(state, action) {\n            const { expanded } = action.payload\n\n            return {\n                ...state,\n                header: {\n                    ...state.header,\n                    expanded: expanded\n                }\n            }\n        },\n        toggleSidebar(state, action) {\n            const { expanded } = action.payload\n\n            return {\n                ...state,\n                sidebar: {\n                    ...state.sidebar,\n                    expanded: expanded\n                }\n            }\n        },\n        requestSchemasByName(state, action) {\n            return {\n                ...state,\n                schemasByName: {}\n            }\n        },\n        receiveSchemasByName(state, action) {\n            const {schemasByName } = action.payload\n            return {\n                ...state,\n                schemasByName: schemasByName\n            }\n        },\n        requestMenu(state, action) {\n            return {\n                ...state,\n                menu: []\n            }\n        },\n        receiveMenu(state, action) {\n            const { menu } = action.payload\n            return {\n                ...state,\n                menu: menu\n            }\n        },\n        requestMenuByUrl(state, action) {\n            return {\n                ...state,\n                menuByUrl: {}\n            }\n        },\n        receiveMenuByUrl(state, action) {\n            const {menuByUrl } = action.payload\n            return {\n                ...state,\n                menuByUrl: menuByUrl\n            }\n        },\n        requestParents(state, action) {\n            return state            \n        },\n        receiveParents(state, action) {\n            const { parents } = action.payload\n            return {\n                ...state,\n                parents: parents\n            }\n        }\n    }\n})\n\nexport const getApp = ({menu = [], schemas = [], ...data}) => dispatch => {\n\n    dispatch(requestApp())\n\n    dispatch(receiveApp({\n        ...data,\n        menu: menu,\n    }))\n\n    menu && dispatch(getMenuByUrl({menu}))\n    schemas && dispatch(getSchemasByName({schemas}))\n    \n}\n\n    export const getAppLayout = (layout = \"default\") => dispatch => {\n\n    if (layout === \"editor\") {\n        dispatch(toggleHeader({expanded: false}))\n        dispatch(toggleSidebar({expanded: false}))\n    }\n\n    if (layout === \"finder\") {\n        dispatch(toggleHeader({expanded: true}))\n        dispatch(toggleSidebar({expanded: true}))\n    }\n\n}\n\nexport const getAppSearch = ({expanded, q}) => dispatch => {\n    dispatch(toggleSearch({expanded, q}))  \n}\n\nexport const getParents = ({menuByUrl, pathname}) => dispatch => {\n\n    dispatch(requestParents())\n\n    let parents = [];\n  \n    const pathnames = pathname.split('/');\n  \n    let url = '';\n  \n    pathnames.forEach((path) => {\n\n        if (path) {\n            url = url + '/' + path;\n        } else {\n            url = '/';\n        }\n    \n        if (menuByUrl && menuByUrl[url] && menuByUrl[url].title) {\n            parents.push(menuByUrl[url]);\n        }\n        \n        if (url == '/') {\n            url = '';\n        }\n\n    });\n\n    dispatch(receiveParents({parents:parents}))\n  \n}\n\nexport const getSchemasByName = ({schemas = []}) => dispatch => {\n\n    dispatch(requestSchemasByName())\n\n    let schemasByName = {}\n\n    schemas.map(schema => {\n\n        if (schema.name) {\n            schemasByName[schema.name] = schema\n        }\n\n    })\n\n    dispatch(receiveSchemasByName({schemasByName}))\n    \n}\n\n\nconst getMenuUrls = ({children = [], urls = {}, level = 0}) => {\n\n    if (!urls) {\n        urls = {}\n    }\n\n    children.forEach((child) => {\n\n        let item = {\n            ...child,\n            level: level\n        }\n\n        if (item.url) {\n            urls[item.url] = item;\n        }\n      \n        if (item.children) {\n            urls = getMenuUrls({children: item.children, urls: urls, level: level++});\n        }\n    });\n\n    return urls\n\n}\n\n\nexport const getMenuByUrl = ({menu = []}) => dispatch => {\n\n    dispatch(requestMenuByUrl())\n\n    const menuByUrl = getMenuUrls({children: menu})\n\n    dispatch(receiveMenuByUrl({menuByUrl: menuByUrl}))\n    \n}\n\n\nexport const { requestApp, receiveApp, toggleHeader, toggleSearch, toggleSidebar, requestSchemasByName, receiveSchemasByName, requestMenu, receiveMenu, requestMenuByUrl, receiveMenuByUrl, requestParents, receiveParents } = appSlice.actions\nexport default appSlice.reducer","export function getMenuMedia({query = {}, mediaTypes = [], template = \"media\", layout, ...props}) {\n\n    /*\n    const mediaType = query && query.mediaType\n\n    if (mediaType && Array.isArray(mediaType)) {\n        mediaTypes = mediaType\n    }*/\n\n    let mediaType\n\n    if (mediaTypes && mediaTypes.length === 1) {\n        mediaType = mediaTypes[0] + \"*\"\n    } else {\n        mediaType = \"*\"\n    }\n\n    if (!query.status) {\n        query.status = \"NOT trash\"\n    }\n\n    let q = []\n\n    q.push(\"parentId:NOT *\")\n    query.q && q.push(query.q)\n    mediaTypes && mediaTypes.length > 1 && q.push(\"mediaType:(\" + mediaTypes.join(\" OR \") + \")\")\n\n    q = q.join(\" \")\n\n    return {\n        ...props,\n        icon: \"image\",\n        template: template,\n        layout: layout,\n        query: {\n            ...query,\n            models: \"media\",\n            mediaType: mediaType,\n            q: q,\n        }\n    }\n\n}\n\nexport default getMenuMedia","export function getMenuDocuments({query, documentTypes = [], template = \"documents\", ...props}) {\n\n    const documentType = query && query.documentType\n\n    if (documentType && Array.isArray(documentType)) {\n        documentTypes = documentType\n    }\n\n    return {\n        ...props,\n        template: template,\n        query: {\n            ...query,\n            models: \"documents\",\n            documentType: documentTypes && documentTypes.length === 1 && documentTypes[0] ||\"*\",\n            q: documentTypes && documentTypes.length > 1 && \"documentType:(\" + documentTypes.join(\" OR \") + \")\" ||\"\"\n        }\n    }\n\n}\n\nexport default getMenuDocuments","export function getMenuLatest({query, ...props}) {\n\n    return {\n        ...props,\n        icon: \"access_time\",\n        query: {\n            ...query,\n            models: \"documents\",\n            status: \"NOT trash\",\n            models: \"documents\",\n            sort: \"updatedAt DESC\"\n        }\n    }\n\n}\n\nexport default getMenuLatest","export function getMenuTrash({query, documentTypes = [], ...props}) {\n\n    return {\n        ...props,\n        icon: \"delete\",\n        query: {\n//            ...query,\n            models: \"documents\",\n            status: \"trash\",\n            models: \"documents\",\n            sort: \"deletedAt DESC\",\n        }\n    }\n\n}\n\nexport default getMenuTrash","export function getMenuSearch({query, ...props}) {\n\n    return {\n        ...props,\n        query: {\n            ...query,\n//            models: models,\n//            documentType: models === \"documents\" && \"*\"\n        }\n    }\n\n}\n\nexport default getMenuSearch","import getMenuMedia from \"./getMenuMedia\"\nimport getMenuDocuments from \"./getMenuDocuments\"\nimport getMenuEkultur from \"./getMenuDocuments\"\nimport getMenuLatest from \"./getMenuLatest\"\nimport getMenuTrash from \"./getMenuTrash\"\nimport getMenuSearch from \"./getMenuSearch\"\n\nexport function getMenuChildren(props) {\n    let children = []\n  \n    props.children.forEach((child) => {\n        child = getMenuChild(child, props);\n        children.push(child);\n    });\n    \n    return children\n    \n}\n\nexport function getMenuChild(child, props) {\n    let { root, parent } = props;\n\n    if (!child) {\n        return false;\n    }\n    \n    let { type } = child;\n\n    // url based on type\n\n    if (type === \"search\") {\n        child = getMenuSearch({...child})\n\n    } else if (type === \"documents\") {\n        child = getMenuDocuments({...child})\n\n    } else if (type === \"media\") {\n        child = getMenuMedia({...child, pathname: \"media\", mediaTypes: [\"*\"]})\n\n    } else if (type === \"media/image\") {\n        child = getMenuMedia({pathname: \"image\", ...child, mediaTypes: [\"image\"]})\n\n    } else if (type === \"media/video\") {\n        child = getMenuMedia({pathname: \"video\", ...child, mediaTypes: [\"video\"]})\n\n    } else if (type === \"media/audio\") {\n        child = getMenuMedia({pathname: \"audio\", ...child, mediaTypes: [\"audio\"]})\n\n    } else if (type === \"media/misc\") {\n        child = getMenuMedia({pathname: \"misc\", ...child, mediaTypes: [\"misc\"]})\n\n    } else if (type === \"media/application\") {\n        child = getMenuMedia({pathname: \"apps\", ...child, mediaTypes: [\"application\"]})\n\n    } else if (type === \"media/upload\") {\n        child = getMenuMedia({pathname: \"upload\", ...child, mediaTypes: [\"*\"], template: \"upload\", layout: \"uploads\"})\n\n    } else if (type === \"ekultur\") {\n        child = getMenuEkultur({...child})\n\n    } else if (type === \"latest\") {\n        child = getMenuLatest({...child})\n\n    } else if (type === \"trash\") {\n        child = getMenuTrash({...child})\n\n    }\n    \n    // child props\n\n    let { role, url, pathname, children, hidden, query } = child\n\n    // query\n\n    if (query && !query.collectionId) {\n        query.collectionId = props.collectionId\n    }\n\n    // parent & role\n\n    if (!parent && role) {\n        role = role\n    } else {\n        role = undefined\n    }\n\n    // url based on pathname\n    \n    if (!url && pathname && pathname.startsWith('/')) {\n        url = pathname;\n    }\n\n    if (!url && root && pathname) {\n        url = root + '/' + pathname;\n    }\n  \n    if (!url && root) {\n        url = root;\n    }\n\n    // icon\n\n    let { icon } = child\n\n    if (parent && !parent.hidden) {\n        icon = undefined\n    }\n\n    // hidden\n\n    if (hidden) {\n//        url = undefined\n    }\n\n    // rootUrl\n\n    const rootUrl = url ||root\n\n    child = {\n        ...child,\n        icon: icon,\n        url: url,\n        role: role,\n        query: query,\n        children: children && children.length && getMenuChildren({...props, children: children, root: rootUrl, parent: child}) ||null\n    }\n      \n    return child;\n    \n  }\n\n  export default getMenuChildren","\nconst kpPages = {\n    role: \"group\",\n    children: [\n        {\n            icon: \"event\",\n            title: \"Nytt kart\",\n            url: \"/admin/pageMap/new\"\n        },\n        {\n            icon: \"event\",\n            title: \"Nytt tema\",\n            url: \"/admin/pageTopic/new\"\n        },\n    ]\n}\n\nconst kioskPages = {\n    role: \"group\",\n    children: [\n        {\n            icon: \"event\",\n            title: \"Ny mosaikkk\",\n            url: \"/admin/pageGrid/new\"\n        },\n        {\n            icon: \"event\",\n            title: \"Ny tidslinje\",\n            url: \"/admin/pageTimeline/new\"\n        },\n        {\n            icon: \"event\",\n            title: \"Nytt bildekart\",\n            url: \"/admin/pageAnnotate/new\"\n        },\n        {\n            icon: \"event\",\n            title: \"Ny media\",\n            url: \"/admin/pageMedia/new\"\n        },\n        {\n            icon: \"event\",\n            title: \"Ny liste\",\n            url: \"/admin/pageList/new\"\n        },\n    ]\n}\n\nconst kioskDevice = {\n    role: \"group\",\n    children: [\n        {\n            icon: \"bug_report\",\n            title: \"Ny enhet\",\n            url: \"/admin/device/new\"\n        },\n    ]\n}\n\nexport default {\n    title: \"Nytt innhold\",\n    \"children\": [\n        {\n            icon: \"event\",\n            title: \"Ny artikkel\",\n            url: \"/admin/article/new\"\n        },\n        kpPages,\n        kioskPages,\n        kioskDevice\n    ]\n\n}","import app from \"./app\"\n\nexport default app","import getMenuChildren from \"../../utils/getMenuChildren\"\n\nimport menu from \"./menu\"\nimport primaryAction from \"./primaryAction\"\nimport theme from \"./theme\"\n\nexport default {\n    theme: theme,\n    root: \"/kp\",\n    siteId: 1,\n    collectionId: 54,\n    title: \"KulturPunkt\",\n    subtitle: \"Museum\",\n    menu: getMenuChildren({root: \"/kp\", children: menu}),\n    primaryAction: primaryAction,\n    languages: [\n        \"no\", \"sv\", \"en\", \"de\", \"es\", \"fr\"\n    ],\n    search: {\n        \"expanded\": false,\n        \"placeholder\": \"Sk i KulturPunkt\"\n    }\n}","export default {\n    \"palette\": {\n        \"primary\": {\n            \"main\": \"#D94353\",\n            \"light\": \"#EE7E8F\",\n            \"dark\": \"#AE3552\"\n        }\n    }\n}","const kpPages = {\n    role: \"group\",\n    hidden: true,\n    pathname: \"pages\",\n    children: [\n        {\n            role: \"group\",\n            title: \"Tema\",\n            icon: \"view_stream\",\n            pathname: \"topic\",\n            query: {\n                models: \"documents\",\n                documentType: \"pageTopic\",\n                status: \"NOT trash\"\n            }\n        },\n        {\n            role: \"group\",\n            title: \"Kart\",\n            icon: \"view_stream\",\n            pathname: \"map\",\n            query: {\n                models: \"documents\",\n                documentType: \"pageMap\",\n                status: \"NOT trash\"\n            }\n        }\n    ]\n}\n\nconst media = {\n    role: \"group\",\n    type: \"media\",\n    title: \"Media\",\n    children: [\n        {\n            type: \"media/image\",\n            title: \"Images\"\n        },\n        {\n            type: \"media/video\",\n            title: \"Video\"\n        },\n        {\n            type: \"media/audio\",\n            title: \"Audio\"\n        },\n        {\n            type: \"media/misc\",\n            title: \"Misc\"\n        },\n        {\n            type: \"media/application\",\n            title: \"Apps\"\n        },\n        {\n            type: \"media/upload\",\n            title: \"Upload\"\n        }\n    ]\n}\n\nconst kpArticles = {\n    role: \"group\",\n    title: \"Artikler\",\n    icon: \"view_stream\",\n    pathname: \"article\",\n    query: {\n        models: \"documents\",\n        documentType: \"article\",\n        status: \"NOT trash\"\n    }\n}\n\nconst kioskPages = {\n    role: \"group\",\n    hidden: true,\n    title: \"Kiosk\",\n    pathname: \"kiosk\",\n    children: [\n        {\n            role: \"group\",\n            title: \"Mosaikk\",\n            icon: \"view_stream\",\n            pathname: \"grid\",\n            query: {\n                models: \"documents\",\n                documentType: \"pageGrid\",\n                status: \"NOT trash\"\n            }\n        },\n        {\n            role: \"group\",\n            title: \"Tidslinje\",\n            icon: \"view_stream\",\n            pathname: \"timeline\",\n            query: {\n                models: \"documents\",\n                documentType: \"pageTimeline\",\n                status: \"NOT trash\"\n            }\n        },\n        {\n            role: \"group\",\n            title: \"Bildekart\",\n            icon: \"view_stream\",\n            pathname: \"annotate\",\n            query: {\n                models: \"documents\",\n                documentType: \"pageAnnotate\",\n                status: \"NOT trash\"\n            }\n        },\n        {\n            role: \"group\",\n            title: \"Media\",\n            icon: \"view_stream\",\n            pathname: \"media\",\n            query: {\n                models: \"documents\",\n                documentType: \"pageMedia\",\n                status: \"NOT trash\"\n            }\n        },\n        {\n            role: \"group\",\n            title: \"Liste\",\n            icon: \"view_stream\",\n            pathname: \"list\",\n            query: {\n                models: \"documents\",\n                documentType: \"pageList\",\n                status: \"NOT trash\"\n            }\n        }\n    ]\n}\n\nexport default [\n    {\n        type: \"documents/tree\",\n        role: \"group\",\n        title: \"KulturPunkt\",\n        icon: \"home\",\n        pathname: \"\",\n        query: {\n            models: \"documents\",\n            status: \"NOT trash\",\n            documentType: \"page*\",\n            q: \"NOT parentId:*\"\n        },\n    },\n    kpArticles,\n    kpPages,\n    kioskPages,\n    {\n        role: \"group\",\n        title: \"Enheter\",\n        icon: \"bug_report\",\n        pathname: \"device\",\n        query: {\n            models: \"documents\",\n            documentType: \"device\",\n            status: \"NOT trash\"\n        }\n    },\n    media,\n    {\n        role: \"group\",\n        title: \"Ekultur\",\n        icon: \"link\",\n        pathname: \"ekultur\",\n        query: {\n            models: \"documents\",\n            documentType: \"ekultur*\",\n            status: \"NOT trash\"\n        }\n    },\n    {\n        role: \"group\",\n        type: \"latest\",\n        title: \"Latest\",\n        pathname: \"latest\"\n    },\n    {\n        role: \"group\",\n        type: \"trash\",\n        title: \"Trash\",\n        pathname: \"trash\"\n    }\n\n]","import { API } from \"../settings\"\nimport { createSlice } from '@reduxjs/toolkit'\n\nconst modelsByIdSlice = createSlice({\n    name: 'modelsById',\n    initialState: {\n    }, \n    reducers: {\n        requestModel(state, action) {\n            const { uniqueId } = action.payload\n\n            return {\n                ...state,\n                [uniqueId]: {\n                    isLoading: true,\n                }\n            }\n\n        },\n        receiveModel(state, action) {\n            const { uniqueId } = action.payload\n\n            return {\n                ...state,\n                [uniqueId]: {\n                    isLoading: false,\n                    ...action.payload\n                }\n            }\n\n        },\n        receiveStatus(state, action) {\n            const { uniqueId, status } = action.payload\n\n            return {\n                ...state,\n                [uniqueId]: {\n                    ...state[uniqueId],\n                    status: status\n                }\n            }\n\n        },\n        toggleSelected(state, action) {\n            const { uniqueId } = action.payload\n\n            const selected = state[uniqueId] && state[uniqueId].selected\n\n            return {\n                ...state,\n                [uniqueId]: {\n                    ...state[uniqueId],\n                    selected: !selected\n                }\n            }\n\n        },\n        requestSave(state, action) {\n            const { uniqueId } = action.payload\n\n            return {\n                ...state,\n                [uniqueId]: {\n                    ...state[uniqueId],\n                    isSaving: true\n                }\n\n            }\n\n        },\n        receiveSave(state, action) {\n            const { uniqueId } = action.payload\n\n            return {\n                ...state,\n                [uniqueId]: {\n                    isSaving: false,\n                    ...action.payload\n                }\n            }\n        }        \n    }\n})\n\n/** Get model from uniqueId */\n\nexport const getModel = ({modelName = \"documents\", uniqueId}) => dispatch => {\n\n    const url = API + '/admin/api/' + modelName + '/' + uniqueId;\n\n    dispatch(requestModel({uniqueId}))\n\n    fetch(url, {\n        method: \"GET\",\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json; charset=utf-8\",\n        }})\n        .then(\n            response => response.json(),\n            error => console.log('An error occurred.', error)\n        )\n        .then(formData => {\n            dispatch(receiveModel(formData))\n        })\n\n}\n/** Load model from uniqueId */\n\nexport const loadModel = ({modelName = \"documents\", uniqueId}) => dispatch => {\n\n    const url = API + '/admin/api/' + modelName + '/' + uniqueId;\n\n    dispatch(requestModel({uniqueId}))\n\n    fetch(url, {\n        method: \"GET\",\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json; charset=utf-8\",\n        }})\n        .then(\n            response => response.json(),\n            error => console.log('An error occurred.', error)\n        )\n        .then(formData => {\n            dispatch(receiveModel(formData))\n        })\n\n}\n\n/** Save model from formData  */\n\nexport const saveModel = ({modelName = \"documents\", ...formData}) => dispatch => {\n    const url = API + '/admin/api/' + modelName;\n\n    formData && formData.uniqueId && dispatch(requestSave({uniqueId: formData.uniqueId}))\n\n    fetch(url, {\n        method: \"POST\",\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json; charset=utf-8\",\n        },\n        body: JSON.stringify(formData)\n    })\n    .then(\n        response => response.json(),\n        error => console.log('An error occurred.', error)\n    )\n    .then(formData => {\n        dispatch(receiveSave(formData))\n    })\n\n}\n\n/** Delete */\n\nexport const deleteModel = ({modelName, uniqueId}) => dispatch => {\n    const url = API + '/admin/api/' + modelName + '/' + uniqueId;\n  \n    fetch(url, {\n        method: \"DELETE\",\n    })\n    .then(\n        error => console.log('An error occurred.', error)\n    )\n    .then(data =>\n        dispatch(loadModel({modelName, uniqueId}))\n    )\n\n}\n\n/** Restore */\n\nexport const restoreModel = ({modelName, uniqueId}) => dispatch => {\n    const url = API + '/admin/api/' + modelName + '/restore/' + uniqueId;\n  \n    fetch(url, {\n        method: \"POST\",\n    })\n    .then(\n        error => console.log('An error occurred.', error)\n    )\n    .then(data =>\n        dispatch(loadModel({modelName, uniqueId}))\n    )\n\n}\n\n/** Erase */\n\nexport const eraseModel = ({modelName, uniqueId}) => dispatch => {\n    const url = API + '/admin/api/' + modelName + '/' + uniqueId + \"?erase=true\";\n  \n    fetch(url, {\n        method: \"DELETE\",\n    })\n    .then(\n        error => console.log('An error occurred.', error)\n    )\n    .then(data =>\n        dispatch(receiveStatus({modelName, uniqueId, status: \"erased\"}))\n    )\n\n}\n\n/** Select */\n\nexport const selectModel = ({modelName, uniqueId}) => dispatch => {\n    dispatch(toggleSelected({modelName, uniqueId}))\n}\n\n/** Document source */\n\nexport const getDocumentSource = (model, callback = undefined) => dispatch => {\n    const { collectionId, sourceId } = model;    \n\n    let url = API + '/admin/api/documents/search?collectionId=' + collectionId + \"&sourceId=\" +sourceId;\n\n    fetch(url, {\n        method: \"GET\",\n        headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json; charset=utf-8\",\n        },\n    })\n    .then(\n        response => response.json(),\n        error => console.log('An error occurred.', error)\n    )\n    .then(data => {\n\n        if (data.models && data.models[0]) {\n            dispatch(receiveModel(data.models[0]))\n            callback && callback(data.models[0])\n        } else {\n            dispatch(addDocumentSource(model, callback))\n        }\n\n    })\n\n}\n\nexport const addDocumentSource = (model, callback = undefined) => dispatch => {\n    const url = API + '/admin/api/documents'\n\n    model = {\n        ...model,\n        source: model.source.toLowerCase(),\n        schemaId: 1\n    }\n\n    delete model.uniqueId\n    \n    const payload = JSON.stringify(model);\n\n    console.log(payload);\n\n    return function (dispatch) {\n        fetch(url, {\n            method: \"POST\",\n            headers: {\n                \"Accept\": \"application/json\",\n                \"Content-Type\": \"application/json; charset=utf-8\",\n            },\n            body: payload\n        })\n        .then(\n            response => response.json(),\n            error => console.log('An error occurred.', error)\n        )\n        .then(data => {\n            dispatch(receiveModel(data))\n            callback && callback(data)\n        })\n    }\n\n}\n\n/** Media source */\n\nexport const getMediaSource = (model, callback = undefined) => dispatch => {\n    const { collectionId, sourceId } = model;    \n\n    let url = API + '/admin/api/media/search?collectionId=' + collectionId + \"&sourceId=\" +sourceId;\n\n    fetch(url, {\n        method: \"GET\",\n        headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json; charset=utf-8\",\n        },\n    })\n    .then(\n        response => response.json(),\n        error => console.log('An error occurred.', error)\n    )\n    .then(data => {\n\n        if (data.models && data.models[0]) {\n            dispatch(receiveModel(data.models[0]))\n            callback && callback(data.models[0])\n        } else {\n            dispatch(addMediaSource(model, callback))\n        }\n\n    })\n\n}\n\nexport const addMediaSource = (model, callback = undefined) => dispatch => {\n    const url = API + '/admin/api/media'\n\n    model = {\n        ...model,\n        source: model.source.toLowerCase(),\n        schemaId: 1\n    }\n\n    delete model.uniqueId\n    \n    const payload = JSON.stringify(model);\n\n    console.log(payload);\n\n    return function (dispatch) {\n        fetch(url, {\n            method: \"POST\",\n            headers: {\n                \"Accept\": \"application/json\",\n                \"Content-Type\": \"application/json; charset=utf-8\",\n            },\n            body: payload\n        })\n        .then(\n            response => response.json(),\n            error => console.log('An error occurred.', error)\n        )\n        .then(data => {\n            dispatch(receiveModel(data))\n            callback && callback(data)\n        })\n    }\n\n}\n\nexport const { requestModel, receiveModel, receiveStatus, toggleSelected, requestSave, receiveSave } = modelsByIdSlice.actions\nexport default modelsByIdSlice.reducer","export default {\n    \"type\": \"string\",\n    \"format\": \"size\",\n    \"enum\": [\n      \"small\",\n      \"medium\",\n      \"large\",\n      \"xl\"\n    ],\n    \"enumNames\": [\n      \"Small\",\n      \"Medium\",\n      \"Large\",\n      \"XL\"\n    ],\n    \"default\" : \"small\"\n}","export default {\n    \"type\": \"string\",\n    \"enum\": [\n        \"1:1\",\n        \"2:1\",\n        \"4:3\"\n    ],\n    \"default\" : \"1:1\"\n}","import sectionType from './sectionType';\nimport sectionText from './sectionText';\nimport sectionMedia from './sectionMedia';\nimport sectionDm from './sectionDm';\nimport sectionLinks from './sectionLinks';\nimport sectionAttachments from './sectionAttachments';\nimport sectionQuote from './sectionQuote';\n  \nexport default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"sectionType\": sectionType,\n        \"title\": {\n            \"type\" : \"localizedString\"\n        },\n        \"titleHidden\": {\n            \"type\" : \"boolean\"\n        }\n    },\n    \"dependencies\": {\n        \"sectionType\" : {\n            \"oneOf\": [\n                sectionText,\n                sectionMedia,\n                sectionDm,\n                sectionLinks,\n                sectionAttachments,\n                sectionQuote,\n            ]\n        }\n    }\n}","export default {\n    \"type\": \"string\",\n    \"enum\": [\n        \"text\",\n        \"media\",\n        \"dm\",\n        \"links\",\n        \"attachments\",\n        \"quote\"\n    ],\n    \"enumNames\": [\n        \"Tekst\",\n        \"Media\",\n        \"DM\",\n        \"Lenker\",\n        \"Vedlegg\",\n        \"Sitat\"\n    ],\n    \"default\" : \"text\"\n}","import media from \"./media\"\n\nexport default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"sectionType\": {\n            \"enum\": [\"text\"]\n        },\n        \"leadtext\": {\n            \"type\": \"localizedString\"\n        },\n        \"bodytext\": {\n            \"type\": \"localizedString\"\n        }\n    }\n}","import media from \"./media\"\n\nexport default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"sectionType\": {\n            \"enum\": [\"media\"]\n        },\n        \"sectionLayout\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"list\",\n                \"grid\",\n                \"slideshow\",\n            ],\n            \"enumNames\": [\n                \"Liste\",\n                \"Grid\",\n                \"Slideshow\",\n            ],\n            \"default\" : \"grid\"\n          },\n        \"media\": media\n    }\n}","import mediaSize from \"./mediaSize\"\nimport mediaFormat from \"./mediaFormat\"\n\nexport default {\n    \"type\": \"array\",\n    \"items\": {\n        \"type\": \"media\",\n        \"properties\": {\n            \"mediaSize\": mediaSize,\n            \"mediaFormat\": mediaFormat,\n            \"mediaLayout\": {\n                \"type\": \"string\",\n                \"default\": \"frame\"\n            },\n            \"content\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"headline\": {\n                        \"type\": \"localizedString\"\n                    },\n                    \"caption\": {\n                        \"type\": \"localizedString\"\n                    }\n                }\n            }\n        }\n    }\n}","import ekultur from \"./ekultur\"\n\nexport default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"sectionType\": {\n            \"enum\": [\"dm\"]\n        },\n        \"sectionLayout\": {\n            \"type\": \"string\",\n            \"enum\": [\n              \"grid\",\n              \"grid-wide\",\n              \"slideshow\",\n              \"slideshow-wide\"\n            ],\n            \"enumNames\": [\n              \"Grid\",\n              \"Grid Wide\",\n              \"Slideshow\",\n              \"Slideshow Wide\"\n            ],\n            \"default\" : \"grid\"\n          },\n        \"references\": ekultur\n    }\n}","export default {\n    \"type\": \"array\",\n    \"items\": {\n        \"type\": \"reference\",\n        \"referenceType\": \"ekultur\"\n    }\n}","export default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"sectionType\": {\n            \"enum\": [\"links\"]\n        },\n        \"links\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"title\": {\n                        \"type\": \"string\"\n                    },\n                    \"url\": {\n                        \"type\": \"string\"\n                    }\n                }\n            }\n        }\n    }\n}","import attachments from \"./attachments\"\n\nexport default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"sectionType\": {\n            \"enum\": [\"attachments\"]\n        },\n        \"attachments\": attachments\n    }\n}","import mediaSize from \"./mediaSize\"\nimport mediaFormat from \"./mediaFormat\"\n\nexport default {\n    \"type\": \"array\",\n    \"items\": {\n        \"type\": \"media\",\n        \"properties\": {\n            \"mediaSize\": mediaSize,\n            \"mediaFormat\": mediaFormat,\n            \"mediaLayout\": {\n                \"type\": \"string\",\n                \"default\": \"frame\"\n            },\n            \"content\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"headline\": {\n                        \"type\": \"localizedString\"\n                    },\n                    \"caption\": {\n                        \"type\": \"localizedString\"\n                    }\n                }\n            }\n        }\n    }\n}","export default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"sectionType\": {\n            \"enum\": [\"quote\"]\n        },\n        \"quote\": {\n            \"type\": \"localizedString\"\n        },\n        \"cite\": {\n            \"type\": \"string\"\n        }\n    }\n}","import { API } from \"../settings\"\nimport { createSlice } from '@reduxjs/toolkit'\n\nimport { requestModel, receiveModel } from \"../modelsById\"\nimport schema from \"../../schemas/article/section/schema\"\n\nconst editorSlide = createSlice({\n    name: 'editor',\n    initialState: {\n        isLoading: false,\n        isSaving: false,\n        currentId: undefined,\n        formData: {},\n        dialog: {}\n    }, \n    reducers: {\n        requestEdit(state, action) {\n            const { uniqueId } = action.payload\n\n            return {\n                isLoading: true,\n                formData: {\n                    uniqueId: uniqueId\n                }\n            }\n\n        },\n        receiveEdit(state, action) {\n            const { uniqueId, ...formData } = action.payload\n\n            if (uniqueId) {\n                return {\n                    ...state,\n                    isLoading: false,\n                    formData: {\n                        ...formData,\n                        uniqueId: uniqueId\n                    }\n                }\n            } else {\n                return {\n                    ...state,\n                    isLoading: false,\n                    formData: formData\n                }\n            }\n\n        },\n        requestSave(state, action) {\n           return {\n                ...state,\n                isSaving: true,\n            }\n\n        },\n        receiveSave(state, action) {\n            const { uniqueId, ...formData } = action.payload\n\n            return {\n                isSaving: false,\n                formData: {\n                    ...formData,\n                    uniqueId: uniqueId\n                }\n            }\n        },\n        receiveCurrentId(state, action) {\n            const { currentId } = action.payload\n            return {\n                ...state,\n                currentId: currentId,\n            }\n        },\n        requestDialog(state, action) {\n            return {\n                ...state,\n                dialog: {},\n            }\n        },\n        receiveDialog(state, action) {\n            const { id, schema, uiSchema, formData, onChange } = action.payload\n            return {\n                ...state,\n                dialog: {\n                    id: id,\n                    expanded: true,\n                    schema: schema,\n                    uiSchema: uiSchema,\n                    formData: formData,\n                    onChange: onChange\n                },\n            }\n        }        \n    }\n})\n\n/** Edit model from uniqueId */\n\nexport const editModel = ({modelName = \"documents\", uniqueId, ...formData}) => dispatch => {\n\n    const url = API + '/admin/api/' + modelName + '/' + uniqueId;\n\n    if (uniqueId) {\n        dispatch(requestEdit({uniqueId}))\n        \n        fetch(url, {\n            method: \"GET\",\n            headers: {\n                \"Accept\": \"application/json\",\n                \"Content-Type\": \"application/json; charset=utf-8\",\n            }})\n            .then(\n                response => response.json(),\n                error => console.log('An error occurred.', error)\n            )\n            .then(formData => {\n                dispatch(receiveEdit(formData))\n                dispatch(receiveModel(formData))\n            })\n\n    } else if (formData) {\n        dispatch(receiveEdit(formData))\n    }\n\n}\n\n/** Save model from formData  */\n\nexport const saveModel = ({modelName = \"documents\", ...formData}) => dispatch => {\n    const url = API + '/admin/api/' + modelName;\n\n    dispatch(requestSave())\n\n    fetch(url, {\n        method: \"POST\",\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json; charset=utf-8\",\n        },\n        body: JSON.stringify(formData)\n    })\n    .then(\n        response => response.json(),\n        error => console.log('An error occurred.', error)\n    )\n    .then(formData => {\n        dispatch(receiveSave(formData))\n        dispatch(receiveModel(formData))\n    })\n\n}\n\nexport const { requestEdit, receiveEdit, requestSave, receiveSave, receiveCurrentId, requestDialog, receiveDialog } = editorSlide.actions\nexport default editorSlide.reducer","import { API } from \"../settings\"\nimport { createSlice } from '@reduxjs/toolkit'\nimport qs from 'query-string';\n\nconst searchByIdSlice = createSlice({\n    name: 'search',\n    initialState: {\n    }, \n    reducers: {\n        requestSearch(state, action) {\n            const { models, id, page, url, query } = action.payload\n\n            if (state[id] && state[id].page) {\n                return {\n                    ...state,\n                    [id]: {\n                        ...state[id],\n                        isLoading: true,\n                        url: url,\n                        query: {\n                            ...query,\n                            models: models,\n                            id: id\n                        }\n                    }\n                }\n            }\n\n            return {\n                ...state,\n                [id]: {\n                    isLoading: true,\n                    url: url,\n                    query: {\n                        ...query,\n                        models: models,\n                        id: id\n                    }\n                }\n            }\n        },\n        receiveError(state, action) {\n            const { id, error } = action.payload\n\n            return {\n                ...state,\n                [id]: {\n                    isLoading: false,\n                    error: error.toString()\n                }\n            }\n\n        },\n        receiveSearch(state, action) {\n            const { id, results } = action.payload\n\n            return {\n                ...state,\n                [id]: {\n                    ...state[id],\n                    isLoading: false,\n                    results: results\n                }\n            }\n        },\n        receivePage(state, action) {\n            const { id, page, results } = action.payload\n\n            const { start, rows, count } = results\n\n            const pages = Math.ceil(count/rows)\n            const currentPage = Math.ceil((start+rows)/rows)\n\n            const resultsByPage = {\n                ...state[id].resultsByPage,\n                [page]: results.models\n            }\n\n            let resultsLoaded = []\n\n            Object.values(resultsByPage).map(page => {\n                resultsLoaded = resultsLoaded.concat(page)\n            })\n\n            let nextPage, prevPage\n\n            for (let p = page; p <= pages; p++) {\n                if (!resultsByPage[p]) {\n                    nextPage = p\n                    break\n                }\n            }    \n\n            for (let p = page; p >= 1; p--) {\n                if (!resultsByPage[p]) {\n                    prevPage = p\n                    break\n                }\n            }    \n\n            return {\n                ...state,\n                [id]: {\n                    ...state[id],\n                    count: count,\n                    start: start,\n                    rows: rows,\n                    page: currentPage,\n                    pages: pages,\n                    nextPage: nextPage,\n                    prevPage: prevPage,\n                    resultsByPage: resultsByPage,\n                    resultsLoaded: resultsLoaded\n                }\n            }\n\n        }\n    }\n})\n\nexport const getQuery = ({models, id, page = 1, ...query}) => dispatch => {\n    let url = API + '/admin/api/' + models + '/search';\n\n    if (page > 1 && query.rows) {\n        query.start = query.rows * (page-1)\n    }\n    \n    const sq = qs.stringify(query)\n\n    if (sq) {\n        url = url + '?' + sq;\n    }\n\n//    if (page === 1) {\n        dispatch(requestSearch({models, id, page, url, query}))\n//    }\n    \n    fetch(url, {\n        method: \"GET\",\n        headers: {\n            \"Accept\": \"application/json\",\n        },\n    })\n    .then(\n        response => response.json(),\n        error => console.log('An error occurred.', error)\n    )\n    .then(results => {\n        dispatch(receiveSearch({id, results}))\n        dispatch(receivePage({id, page, results}))\n    })\n\n}\n\n\nexport const { requestSearch, receiveSearch, receivePage, receiveError } = searchByIdSlice.actions\nexport default searchByIdSlice.reducer","import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getQuery } from '../../redux/searchById';\nimport { utils } from '@kit-ui/schema';\nconst { getUiOptions } = utils\n\nconst ParentIdField = (props) => {\n    const { formContext, schema, uiSchema } = props;\n\n    const uiOptions = getUiOptions(uiSchema)\n    const uiQuery = uiOptions.query ||{}\n\n    const collectionId = formContext && formContext.collectionId\n    const uniqueId = formContext && formContext.uniqueId\n\n    const query = {\n        id: \"/editor/\" + uniqueId + \"/parentId\",\n        models: \"documents\",\n        collectionId: collectionId,\n        fl: \"id,parentId,uniqueId,title\",\n        q: \"uniqueId:NOT \" + uniqueId,\n        ...uiQuery\n    }\n\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        uniqueId && dispatch(getQuery(query))\n    }, [uniqueId])\n\n    const [enumOptions, setEnumOptions] = useState([])\n    const [enumNames, setEnumNames] = useState([])\n\n    const searchById = useSelector(state => state.searchById)\n    const currentSearch = searchById && searchById[query.id]\n\n    const getOptions = () => {\n        const resultsLoaded = currentSearch && currentSearch.resultsLoaded ||[]\n        // const options = models.length && getOptionsTree(models) ||[]\n\n        let optionsEnum = [\n            undefined\n        ], optionsNames = [\n            \"No parentId\"\n        ]\n\n\n        resultsLoaded && resultsLoaded.map(model => {\n            const label = model.title + \" (\"+model.id+\")\"\n            optionsEnum.push(model.id)\n            optionsNames.push(label)\n        })\n\n        setEnumOptions(optionsEnum)\n        setEnumNames(optionsNames)\n\n    }\n\n    useEffect(() => {\n        getOptions()\n    }, [currentSearch])\n\n    const {StringField } = props.registry.fields;\n\n    const newSchema = {\n        ...schema,\n        enum: enumOptions,\n        enumNames: enumNames\n    }\n\n    return (\n        <StringField {...props} schema={newSchema} />\n    )\n\n}\n\nexport default ParentIdField","import React, { useState, useEffect } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { utils } from \"@rjsf/core\"\nconst { getUiOptions, getDefaultFormState } = utils\n\n\nconst FieldKioskPage = (props) => {\n    const {registry, formData, schema, uiSchema, formContext } = props;\n\n    const handleChange = (formData) => {\n        const newFormData = getDefaultFormState(schema, formData, registry.definitions);\n        props.onChange(newFormData)\n    }\n\n    const _onAnnotateArrayChange = (links = []) => {\n        console.log('onAnnotateArrayChange', links)\n\n        handleChange({\n            ...formData,\n            links: links\n        })\n\n    }\n\n    const _onAnnotateImageChange = (links = []) => {\n        console.log('onAnnotateImageChange', links)\n\n        handleChange({\n            ...formData,\n            links: links\n        })\n \n    }\n\n    const annotateImage = formData && formData.backgroundImage\n    const imageAnnotations = formData && formData.links\n\n    let newRegistry = {\n        ...registry,\n        formContext: {\n            ...registry.formContext,\n            annotateImage: annotateImage,\n            imageAnnotations: imageAnnotations,\n            onAnnotateArrayChange: _onAnnotateArrayChange,\n            onAnnotateImageChange: _onAnnotateImageChange,\n        }\n    }\n\n    useEffect(() => {\n        newRegistry.formContext.imageAnnotations = imageAnnotations\n    }, [imageAnnotations])\n\n    const newUiSchema = {\n        ...uiSchema,\n        \"ui:dialog\": formContext.dialog,\n        \"ui:preview\": formContext.preview,\n        \"ui:sidebar\": {\n            ...formContext.dialog,\n            ...formContext.sidebar\n        },\n        \"ui:layout\": \"pageContent\",\n\n    }\n\n    const { ObjectField } = registry.fields;\n\n    return (\n        <ObjectField {...props} registry={newRegistry} uiSchema={newUiSchema} onChange={handleChange} />\n    )\n\n\n}\n\nexport default FieldKioskPage","import React from 'react';\n\nconst ImageAnnotateArrayField = ({registry, ...props}) => {\n    const { ArrayField } = registry.fields;\n    const { onAnnotateArrayChange } = registry.formContext\n\n    return (\n        <ArrayField {...props} registry={registry} onChange={onAnnotateArrayChange} />\n    )\n\n}\n\nexport default ImageAnnotateArrayField;","import React, {useState, useEffect } from 'react';\nimport { ImageAnnotations } from \"@kit-ui/admin\"\n\nconst KioskAnnotateImageField = ({registry, formContext, ...props}) => {\n    const { annotateImage, imageAnnotations, onAnnotateImageChange } = registry.formContext\n    const { mediaId, media, imageFilters } = annotateImage\n\n    return (\n        <ImageAnnotations imageUrl={media.imageUrl} imageFilters={imageFilters} imageAnnotations={imageAnnotations} onChange={onAnnotateImageChange} />\n    )\n\n}\n\nexport default KioskAnnotateImageField;","import schema from \"./KpLink.schema\"\nimport uiSchema from \"./KpLink.uiSchema\"\n\nexport default {\n    schema: schema,\n    uiSchema: uiSchema\n}","export default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"referenceId\": {\n            \"type\": \"string\"\n        },\n        \"referenceType\": {\n            \"type\": \"string\",\n            \"default\": \"pageLink\"\n        },\n        \"reference\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"uniqueId\": {\n                    \"type\": \"string\"\n                },\n                \"documentType\": {\n                    \"type\": \"string\"\n                }\n            }\n        },\n        \"mediaId\": {\n            \"type\": \"string\"\n        },\n        \"media\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"uniqueId\": {\n                    \"type\": \"string\"\n                }\n            }\n        },\n        \"imageFilters\": {\n            \"type\": \"imageFilters\",\n            \"filters\": [\"opacity\"]\n        },\n        \"imageCropdata\": {\n            \"type\": \"imageCropdata\"\n        },\n        \"imageFocalpoint\": {\n            \"type\": \"imageFocalpoint\"\n        },\n        \"runningHead\": {\n            \"type\": \"localizedString\"\n        },\n        \"title\": {\n            \"type\": \"localizedString\"\n        },\n        \"titleColor\": {\n            \"type\": \"string\",\n            \"format\": \"textColor\",\n            \"enum\": [\"black\",\"white\"],\n            \"default\": \"black\"\n        },\n        \"titleSize\": {\n            \"type\": \"string\",\n            \"enum\": [\"small\",\"medium\",\"large\"],\n            \"default\": \"medium\"\n        },\n        \"description\": {\n            \"type\": \"localizedString\"\n        },\n        \"top\": {\n            \"type\": \"string\",\n            \"default\": 50,\n            \"readonly\": true\n        },\n        \"left\": {\n            \"type\": \"string\",\n            \"default\": 50,\n            \"readonly\": true\n        },\n        \"x\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"readonly\": true\n        },\n        \"y\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"readonly\": true\n        },\n        \"backgroundColor\": {\n            \"type\": \"string\",\n            \"format\": \"color\",\n            \"enum\": [\"black\",\"#7f7f7f\",\"white\"],\n            \"default\": \"#7f7f7f\"\n        },\n        \"color\": {\n            \"type\": \"string\",\n            \"format\": \"textColor\",\n            \"enum\": [\"black\",\"white\"],\n            \"default\": \"black\"\n        },\n        \"skin\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"dark\",\n                \"light\",\n                \"dark/light\",\n                \"light/dark\"\n            ],\n            \"default\": \"dark\"\n        },\n        \"placement\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"top-left\",\n                \"top\",\n                \"top-right\",\n                \"left\",\n                \"center\",\n                \"right\",\n                \"bottom-left\",\n                \"bottom\",\n                \"bottom-right\"\n            ],\n            \"default\": \"top-left\"\n        },\n        \"grid\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"1:1\",\n                \"1:2\",\n                \"1:3\",\n                \"2:1\",\n                \"2:2\",\n                \"2:3\",\n                \"3:1\",\n                \"3:2\",\n                \"3:3\",\n                \"4:1\",\n                \"4:2\",\n                \"4:3\",\n                \"5:1\",\n                \"5:2\",\n                \"5:3\"\n            ],\n            \"default\": \"1:1\"\n        },\n    }\n}","export default {\n    \"ui:field\": \"kpLink\",\n    \"ui:layout\": \"module\",\n    \"ui:options\": {\n        \"minHeight\": 256,\n        \"editable\": true\n    },\n    \"ui:nav\": true,\n    \"ui:fieldset\": [\n        \"link\",\n    ],\n    \"ui:preview\": {\n        \"select\": {\n            \"imageUrl\": \"imageUrl\",\n            \"typeLabel\": \"typeLabel\",\n            \"title\": \"title\",\n            \"metadata\": \"metadata\",\n        },\n        prepare({formData, formContext, index}) {\n            const { mediaId, media, referenceId, reference } = formData\n\n            const locale = formContext.currentLocale ||formContext.defaultLocale;\n            const localeId = \"locale:\" + locale\n\n            const title = formData.title && formData.title[localeId] \n\n            const imageUrl = media && media.imageUrl ||reference && reference.imageUrl\n\n            const typeLabel = referenceId && reference && reference.documentType\n\n            let metadata = []\n\n            referenceId && reference && reference.title && metadata.push(reference.title)\n\n            return {\n                imageUrl: imageUrl,\n                typeLabel: typeLabel,\n                title: title || referenceId && reference && reference.title,\n                metadata: metadata,\n            }\n\n        }\n    },\n    \"imageFilters\": {\n        \"ui:title\": \"Filters\",\n        \"ui:field\": \"imageFilters\"\n    },\n    \"imageCropdata\": {\n        \"ui:title\": \"Crop\",\n        \"ui:field\": \"imageCropdata\"\n    },\n    \"imageFocalpoint\": {\n        \"ui:title\": \"Fokuspunkt\",\n        \"ui:field\": \"imageFocalpoint\"\n    },\n    \"link\": {\n        \"ui:title\": \"Innhold\",\n        \"ui:layout\": \"kioskLink\",\n        \"ui:fieldset\": [\n            \"linkMedia\",\n            \"linkContent\",\n            \"linkReference\",\n        ],\n        \"ui:options\": {\n            \"padding\": 2,\n            \"spacing\": 2\n        },\n        \"linkMedia\": {\n            \"ui:fieldset\": [\n                \"mediaId\",\n                \"media\"\n            ],\n            \"ui:sidebar\": {\n                \"query\": {\n                    \"models\": \"media\",\n                    \"mediaType\": \"image\"\n                }\n            },\n            \"ui:layout\": \"kioskLinkMedia\",\n            \"ui:buttons\": [\n                \"sidebar\"\n            ],\n        },\n        \"linkReference\": {\n            \"ui:fieldset\": [\n                \"referenceId\",\n                \"reference\"\n            ],\n            \"ui:sidebar\": {\n                \"query\": {\n                    \"models\": \"documents\",\n                    \"documentType\": [\"page*\",\"article\"]\n                }\n            },\n            \"ui:layout\": \"kioskLinkReference\",\n            \"ui:options\": {\n                \"editable\": true,\n                \"deletable\": true,\n                \"restorable\": true\n            }\n        },\n        \"linkContent\": {\n            \"ui:layout\": \"kioskLinkContent\",\n            \"ui:grid\": true,\n            \"ui:padding\": 2,\n            \"ui:spacing\": 2,\n            \"ui:fieldset\": [\n                \"runningHead\",\n                \"title\",\n                \"description\",\n            ],\n            \"runningHead\": {\n                \"ui:title\": \"Stikktittel\"\n            },\n            \"title\": {\n                \"ui:title\": \"Tittel\"\n            },\n            \"description\": {\n                \"ui:title\": \"Beskrivelse\",\n            },\n        },\n    },\n    \"imageAnnotations\": {\n        \"ui:title\": \"Markr\",\n        \"ui:fieldset\": [\n            \"coords\"\n        ],\n        \"coords\": {\n            \"ui:fieldset\": [\n                \"x\", \"y\", \"top\", \"left\"\n            ],\n            \"ui:grid\": true,\n            \"ui:padding\": 2,\n            \"ui:spacing\": 2,\n            \"x\": {\n                \"ui:gridCols\": 6\n            },\n            \"y\": {\n                \"ui:gridCols\": 6\n            },\n            \"top\": {\n                \"ui:gridCols\": 6\n            },\n            \"left\": {\n                \"ui:gridCols\": 6\n            }\n        }\n    }\n}","import React from 'react';\nimport PropTypes from \"prop-types\"\nimport ButtonGroup from \"@material-ui/core/ButtonGroup\"\nimport Button from '@material-ui/core/Button';\nimport Icon from '@material-ui/core/Icon';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    buttongroup: {\n        margin: props => { return theme.spacing(props.spacing/2 * -1) },\n        \"& > *\": {\n            margin: props => { return theme.spacing(props.spacing/2) },\n        }\n    },\n    button: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"14px\",\n        fontWeight: \"bold\",\n        textTransform: \"none\",\n        letterSpacing: 0,\n        borderRadius: 1,\n        minWidth: theme.spacing(12),\n        minHeight: theme.spacing(7),\n    },\n    icon: {\n        marginRight: theme.spacing(1),\n        \"& + $label\": {\n            marginRight: theme.spacing(1)\n        }\n    },\n    label: {\n\n    }\n}));\n\nconst SectionButton = ({icon, title, color=\"primary\", variant=\"outlined\", size=\"large\", ...props}) => {\n    const classes = useStyles()\n    \n    return (\n        <Button {...props} type=\"button\" data-size={size} data-variant={variant} disableElevation={true} color={color} variant={variant} size={size} className={classes.button}>\n            { icon && <Icon className={classes.icon}>{icon}</Icon>}\n            <b className={classes.label}>{title}</b>\n        </Button>\n    )\n\n}\n\n\nconst SectionButtons = ({className, spacing = 1, buttons = []}) => {\n\n    const classes = useStyles({spacing})\n\n    if (!buttons.length) {\n        return null\n    }\n\n    return (\n        <ButtonGroup color=\"primary\" className={className ||classes.buttongroup}>\n            { buttons && buttons.map((button, index) => {\n                return (\n                    <SectionButton {...button} key={index} />\n                )\n            })}\n        </ButtonGroup>\n    )\n    \n}\n\nSectionButtons.defaultProps = {\n    \"spacing\": 1\n}\n\nSectionButtons.propTypes = {\n    buttons: PropTypes.array,\n    buttonGroupProps: PropTypes.object,\n    buttonProps: PropTypes.object\n}\n\nexport default SectionButtons;","import React, { Component } from 'react';\nimport { ImagePreview } from \"@kit-ui/admin\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport KpLinkButtons from './KpLinkButtons';\n\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: \"block\",\n        position: \"relative\",\n        backgroundColor: \"#333\",\n        color: \"white\",\n\n        minHeight: 256,\n\n        \"&:hover $preview\": {\n            opacity: .5,\n        }\n\n    },\n    buttons: {\n        zIndex: 2,\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n    },\n    preview: {\n        margin: 0\n    }\n}));\n\nconst KpLinkMediaLayout = (props) => {\n\n    const {mediaId, media, referenceId, reference, onChange, onDialog } = props;\n\n    const classes = useStyles()\n\n    const mediaButtons = [\n        {\n            icon: \"remove_circle\",\n            title: \"Remove\",\n            variant: \"text\",\n            size: \"small\",\n            onClick: () => onChange({mediaId: undefined, media: {}})\n        }\n    ]\n\n    const buttons = [\n        {\n            icon: \"search\",\n            title: \"Finn media\",\n            color: \"inherit\",\n            size: \"small\",\n            onClick: () => onDialog(props)\n        }\n    ]\n\n    const imageUrl = mediaId && media && media.imageUrl || referenceId && reference && reference.imageUrl;\n\n    if (media && media.imageUrl) {\n        return (\n            <div className={classes.root} data-name=\"media\">\n                <ImagePreview className={classes.preview} imageUrl={media.imageUrl} />\n                <KpLinkButtons className={classes.buttons} buttons={mediaButtons} />\n            </div>\n        )\n    }\n\n    if (referenceId && reference && reference.imageUrl) {\n        return (\n            <div className={classes.root} data-name=\"media\">\n                <ImagePreview className={classes.preview} imageUrl={reference.imageUrl} />\n                <KpLinkButtons className={classes.buttons} buttons={buttons} />\n            </div>\n        )\n    }\n\n    return (\n        <div className={classes.root} data-name=\"media\">\n            <KpLinkButtons className={classes.buttons} buttons={buttons} />\n        </div>\n    )\n\n}\n\nexport default KpLinkMediaLayout","import React, { Component } from 'react';\nimport { ListModule } from \"@kit-ui/admin\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport LinkIcon from '@material-ui/icons/Link';\nimport LinkOffIcon from '@material-ui/icons/LinkOff';\n\n\nconst useStyles = makeStyles(theme => ({\n    reference: {\n        border: \"1px solid\",\n        borderColor: theme.palette.divider,\n        \n        \"&:hover $preview\": {\n            opacity: .5,\n        }\n\n    },\n}));\n\nconst KpLinkReferenceLayout = (props) => {\n\n    const {referenceId, reference, onChange, onDialog } = props;\n\n    const classes = useStyles()\n\n    const _onAddLink = () => {\n        onDialog && onDialog(props)\n    }\n\n    const _onRemoveLink = () => {\n        onChange && onChange({\n            referenceId: undefined, \n            reference: {}\n        })\n    }\n\n    const LinkAddButton = ({onClick}) => {\n        return (\n            <IconButton onClick={onClick}>\n                <LinkIcon />\n            </IconButton>\n        )\n    }\n\n    const LinkRemoveButton = ({onClick}) => {\n        return (\n            <IconButton onClick={onClick}>\n                <LinkOffIcon />\n            </IconButton>\n        )\n    }\n\n\n    if (referenceId && reference) {\n        return (\n            <div className={classes.reference}>\n                <ListModule {...reference} startAdornment={<LinkRemoveButton onClick={_onRemoveLink} />} />\n            </div>\n        )\n    }\n\n    return (\n        <div className={classes.reference} onClick={_onAddLink}>\n            <ListModule untitled=\"Add a link\" startAdornment={<LinkAddButton />} />\n        </div>\n    )\n\n}\n\nexport default KpLinkReferenceLayout","import React, { Component } from 'react';\n\n//import KpLinkContentLayout from \"./KpLinkContentLayout\"\nimport KpLinkMediaLayout from \"./KpLinkMediaLayout\"\nimport KpLinkReferenceLayout from \"./KpLinkReferenceLayout\"\n\nimport { utils } from \"@rjsf/core\"\nconst { getUiOptions, getDefaultFormState } = utils\n\nconst KpLinKContentField = (props) => {\n\n    const { formData, formContext, schema, uiSchema, registry} = props\n\n    const mediaId = formData && formData.mediaId\n    const media = formData && formData.media\n    const mediaType = media && media.mediaType\n\n    const referenceId = formData && formData.referenceId\n    const reference = formData && formData.reference\n    const referenceTitle = reference && reference.title\n    const referenceDescription = reference && reference.description\n\n    /*\n    const imageUrl = media.imageUrl || reference.imageUrl;\n    const imageFocalpoint = formData && formData.imageFocalpoint\n    const imageCropdata = formData && formData.imageCropdata\n    const imageFilters = formData && formData.imageFilters\n    */\n\n    const backgroundColor = formData && formData.backgroundColor;\n    const color = formData && formData.color;\n\n    const _onMediaChange = ({mediaId, media}) => {\n\n        console.log('MEDIA change', media)\n\n        const newFormData = getDefaultFormState(schema, {\n            ...formData,\n            mediaId: mediaId,\n            media: media\n        }, registry.definitions);\n\n        props.onChange && props.onChange(newFormData)\n\n    }\n\n    const _onMediaDialog = (props) => {\n\n        formContext.onDialog && formContext.onDialog({\n            ...props,\n            schema: {\n                type: \"object\",\n                properties: {\n                    mediaId: schema.properties.mediaId,\n                    media: schema.properties.media\n                }\n            },\n            formData: {\n                mediaId: mediaId,\n                media: media\n            },\n            onChange: _onMediaChange\n        })\n\n    }\n\n    const _onReferenceChange = ({referenceId, reference}) => {\n\n        const newFormData = getDefaultFormState(schema, {\n            ...formData,\n            referenceId: referenceId,\n            reference: reference\n        }, registry.definitions);\n\n        props.onChange && props.onChange(newFormData)\n\n    }\n\n    const _onReferenceDialog = (props) => {\n\n        formContext.onDialog && formContext.onDialog({\n            ...props,\n            schema: {\n                type: \"object\",\n                properties: {\n                    referenceId: schema.properties.referenceId,\n                    reference: schema.properties.reference\n                }\n            },\n            onChange: _onReferenceChange\n        })\n\n    }\n    \n    const newUiSchema = {\n        \"ui:fieldset\": [\n            \"linkMedia\",\n            \"linkContent\",\n            \"linkReference\",\n        ],\n        \"ui:options\": {\n            \"spacing\": 2,\n            \"grid\": true,\n        },\n        \"linkMedia\": {\n            \"ui:layout\": KpLinkMediaLayout,\n            \"ui:fieldset\": [\n                \"mediaId\",\n                \"media\",\n                \"referenceId\",\n                \"reference\"\n            ],\n            \"ui:xs\": 4,\n            \"ui:mediaId\": mediaId,\n            \"ui:media\": media,\n            \"ui:referenceId\": referenceId,\n            \"ui:reference\": reference,\n            \"ui:onDialog\": _onMediaDialog,\n            \"ui:onChange\": _onMediaChange,\n        },\n        \"linkContent\": {\n            \"ui:xs\": 8,\n            \"ui:spacing\": 2,\n            \"ui:fieldset\": [\n                \"runningHead\",\n                \"title\",\n                \"description\",\n            ],\n            \"runningHead\": {\n                \"ui:title\": \"Stikktittel\",\n                ...uiSchema.linkContent.runningHead,\n                \"color\": {\n                    \"ui:widget\": \"color\"\n                }\n            },\n            \"title\": {\n                \"ui:title\": \"Tittel\",\n                \"ui:placeholder\": referenceTitle,\n                ...uiSchema.linkContent.title,\n                \"titleColor\": {\n                    \"ui:widget\": \"color\"\n                }\n            },\n            \"description\": {\n                \"ui:title\": \"Beskrivelse\",\n                \"ui:placeholder\": referenceDescription,\n                \"ui:widget\": \"textarea\"\n            },\n        },\n        \"linkReference\": {\n            \"ui:layout\": KpLinkReferenceLayout,\n            \"ui:xs\": 12,\n            \"ui:fieldset\": [\n                \"referenceId\",\n                \"reference\"\n            ],\n            \"ui:referenceId\": referenceId,\n            \"ui:reference\": reference,\n            \"ui:dialog\": {\n                \"query\": {\n                    \"models\": \"documents\",\n                    \"documentType\": [\"page*\",\"article\"]\n                }\n            },\n            \"ui:onDialog\": _onReferenceDialog,\n            \"ui:onChange\": _onReferenceChange,\n        },\n    }\n\n    const {ObjectField } = registry.fields\n\n\n    return <ObjectField {...props} uiSchema={newUiSchema} />\n\n    return (\n        <p>{JSON.stringify(uiSchema)}</p>\n    )\n\n}\n\nexport default KpLinKContentField","import React, { Component } from 'react';\nimport Color from 'color';\nimport model from \"./KpLink.model\"\n\nimport KpLinkContentField from \"./KpLinkContentField\"\n\nimport { utils } from \"@rjsf/core\"\nconst { getUiOptions, getDefaultFormState } = utils\n\n\n\nconst KpLinkField = (props) => {\n    const {formData, formContext, registry } = props\n\n\n    const schema = {\n        ...model.schema,\n//        ...props.schema\n    }\n\n    const uiSchema = {\n        ...model.uiSchema,\n        ...props.uiSchema,\n        \"ui:layout\": \"kpLink\"\n    }\n\n    const mediaId = formData && formData.mediaId\n    const media = formData && formData.media\n\n    const referenceId = formData && formData.referenceId\n    const reference = formData && formData.reference\n    const referenceTitle = reference && reference.title\n\n    const imageUrl = media.imageUrl || referenceId && reference && reference.imageUrl;\n    const imageFocalpoint = formData && formData.imageFocalpoint\n    const imageCropdata = formData && formData.imageCropdata\n    const imageFilters = formData && formData.imageFilters\n\n    const backgroundColor = formData && formData.backgroundColor;\n    const color = formData && formData.color;\n\n    const getContrastColor = (hex) => {\n        const color = Color(hex)\n        return color.isLight() && \"black\" || \"white\"\n    }\n\n    const handleChange = (formData) => {\n\n        if (formData.backgroundColor !== backgroundColor) {\n            formData.color = getContrastColor(formData.backgroundColor)\n        }\n\n        if (formData.color !== color) {\n            formData.titleColor = formData.color\n        }\n\n        const newFormData = getDefaultFormState(schema, formData, registry.definitions);\n        props.onChange && props.onChange(newFormData)\n    }\n\n\n\n    const handleCropdata = (imageCropdata) => {\n        props.onChange && props.onChange({\n            ...formData,\n            imageCropdata: imageCropdata\n        })\n    }\n\n    const handleFocalpoint = (imageFocalpoint) => {\n        props.onChange && props.onChange({\n            ...formData,\n            imageFocalpoint: imageFocalpoint\n        })\n    }\n\n    const handleFilters = (imageFilters) => {\n        props.onChange && props.onChange({\n            ...formData,\n            imageFilters: imageFilters\n        })\n     }\n    \n    const getUiSchema = () => {\n        const uiOptions = getUiOptions(uiSchema);\n\n        let fieldset = []\n\n        const uiPreview = {\n            \"ui:mediaId\": mediaId,\n            \"ui:media\": mediaId,\n            \"ui:referenceId\": referenceId,\n            \"ui:reference\": reference,\n            \"ui:imageUrl\": imageUrl,\n            \"ui:imageCropdata\": imageCropdata,\n            \"ui:imageFilters\": imageFilters,\n            \"ui:imageFocalpoint\": imageFocalpoint,\n        }\n\n        let newUiSchema = {}\n\n        if (uiSchema.content) {\n            newUiSchema.content = {\n                ...uiSchema.content,\n                ...uiPreview,\n\n                \"ui:field\": KpLinkContentField,\n\n            }\n\n            fieldset.push('content')\n\n        }\n\n        if (uiSchema.imageCropdata && imageUrl) {\n            newUiSchema.imageCropdata = {\n                ...uiSchema.imageCropdata,\n                ...uiPreview,\n                \"ui:onChange\": (cropdata) => handleCropdata(cropdata),\n            }\n\n            fieldset.push('imageCropdata')\n        }\n\n        if (uiSchema.imageFocalpoint && imageUrl) {\n            newUiSchema.imageFocalpoint = {\n                ...uiSchema.imageFocalpoint,\n                ...uiPreview,\n                \"ui:onChange\": (focalpoint) => handleFocalpoint(focalpoint),\n            }\n\n            fieldset.push('imageFocalpoint')\n\n        }\n\n        if (uiSchema.imageFilters && imageUrl) {\n            newUiSchema.imageFilters = {\n                ...uiSchema.imageFilters,\n                ...uiPreview,\n                \"ui:onChange\": (filters) => handleFilters(filters),\n            }\n\n            fieldset.push('imageFilters')\n        }\n\n        if (formContext.pageType === \"annotate\") {\n            newUiSchema.imageAnnotations = {\n                ...uiSchema.imageAnnotations,\n                ...uiPreview\n            }\n\n            fieldset.push('imageAnnotations')\n        }\n\n        return {\n            ...uiSchema,\n            ...newUiSchema,\n            \"ui:options\": uiOptions,\n            \"ui:fieldset\": fieldset,\n            \"color\": {\n                ...uiSchema.color,\n                \"ui:backgroundColor\": formData && formData.backgroundColor\n            },\n            \"link\": {\n                ...newUiSchema.link,\n                \"linkContent\": {\n                    ...newUiSchema.content.linkContent,\n                    \"titleColor\": {\n                        \"ui:backgroundColor\": formData && formData.backgroundColor\n                    }\n                }\n            }\n        }\n\n    }\n\n    const newUiSchema = getUiSchema()\n\n    const { ObjectField } = registry.fields;\n\n    return (\n        <ObjectField {...props} schema={schema} uiSchema={newUiSchema} onChange={handleChange} />\n    )\n\n}\n\nexport default KpLinkField","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Badge from '@material-ui/core/Badge';\n\nimport {\n    ModuleBase,\n    ModuleMedia,\n    ModuleTitle,\n    ModuleLabel,\n    ModuleMetadata,\n    ModuleDescription,\n    ModuleStatus,\n    ModuleByline,\n    NavToolbar,\n    NavSettings\n} from \"@kit-ui/admin\"\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    module: {\n        position: \"relative\",\n        display: \"flex\",\n        minHeight: theme.spacing(8),\n        justifyContent: \"flex-start\",\n        alignItems: \"center\",\n        userSelect: \"none\",\n\n        \"&[aria-selected=true]\": {\n            backgroundColor: theme.palette.action.selected,\n        },\n\n        \"&[role=button]\": {\n            cursor: \"pointer\",\n\n            \"& *\": {\n                pointerEvents: \"none\"\n            },\n\n            \"&[aria-selected=true]\": {\n            },\n\n        },\n\n        \"&[data-elevated=true]\": {\n            paddingLeft: theme.spacing(1),\n            paddingRight: theme.spacing(1)\n        },\n\n        \"& + $module\": {\n            borderTop: \"1px solid\",\n            borderColor: theme.palette.divider\n        },\n\n        \"&.sortable-helper\": {\n            borderTopColor: \"transparent\",\n            boxShadow: theme.shadows[12],\n            zIndex: 2000,\n            \"& $settings\": {\n                display: \"none\"\n            },\n            \"& $toolbar\": {\n                display: \"none\"\n            }\n        },\n\n        \"&[data-status=erased]\": {\n\n            \"& figure\": {\n                opacity: \"0.5\"\n            },\n\n            \"& $content\": {\n                opacity: \"0.5\"\n            }\n\n        },\n\n        \"&[data-status=trash]\": {\n\n            \"& figure\": {\n                opacity: \"0.5\"\n            },\n\n            \"& $content\": {\n                opacity: \"0.5\"\n            }\n\n        },\n\n    },\n    badge: {\n        \"& .MuiBadge-badge\": {\n            pointerEvents: \"none\",\n            margin: theme.spacing(1)\n        }\n    },\n    settings: {\n        zIndex: 3,\n        display: \"flex\",\n        flexWrap: \"none\",\n\n        \"& > * + *\": {\n            marginLeft: theme.spacing(-1)\n        }\n        \n    },\n    toolbar: {\n        zIndex: 3,\n        display: \"flex\",\n        flexWrap: \"none\",\n\n        \"& > * + *\": {\n            marginLeft: theme.spacing(-1)\n        },\n\n        \"& button\": {\n            opacity: .5,\n\n            \"&:hover\": {\n                opacity: 1\n            }\n\n        }        \n    },\n    media: {\n        display: \"flex\",\n    },\n    content: {\n        flexGrow: 1,\n        maxWidth: \"100%\",\n        flexDirection: \"column\",\n        overflow: \"hidden\",\n        alignItems: \"flex-start\",\n        justifyContent: \"flex-start\",\n        margin: theme.spacing(1)\n    },\n    header: {\n        width: \"100%\",\n        maxWidth: \"100%\",\n        overflow: \"hidden\",\n        display: \"flex\",\n        alignItems: \"baseline\",\n        justifyContent: \"flex-start\",\n        \"& * + *\": {\n            marginLeft: theme.spacing(.5)\n        }\n    },\n    footer: {\n        width: \"100%\",\n        maxWidth: \"100%\",\n        overflow: \"hidden\",\n        display: \"flex\",\n        alignItems: \"baseline\",\n        justifyContent: \"flex-start\",\n        \"& * + *\": {\n            marginLeft: theme.spacing(.5)\n        }\n    },\n}));\n\n/** ListModule for listing documents */\n\nconst StartAdornment = ({startAdornment, badgeContent}) => {\n\n    const classes = useStyles({})\n\n    return (\n        <Badge className={classes.badge} badgeContent={badgeContent} color=\"primary\">\n            {startAdornment}\n        </Badge>\n    )\n\n}\n\nconst ListModule = ({imageUrl, untitled, typeLabel, type, title, description, metadata, status, statusLabel, author, datetime, selected, onClick, ...props }) => {\n    const classes = useStyles({})\n\n    return (\n        <ModuleBase {...props} className={classes.module} role={onClick && \"button\"} status={status} selected={selected} onClick={onClick}>\n            <StartAdornment {...props} />\n            <div className={classes.media}>\n                <ModuleMedia backgroundColor=\"transparent\" imageUrl={imageUrl} width=\"48px\" height=\"48px\" />\n            </div>\n            <div className={classes.content}>\n                <header className={classes.header}>\n                    <ModuleTitle status={status} untitled={untitled} title={title} onClick={!onClick && props.onEdit} />\n                    <ModuleStatus statusLabel={statusLabel} status={statusLabel ||status} />\n                    <ModuleByline author={author} datetime={datetime} />\n                </header>\n                <footer className={classes.footer}>\n                    <ModuleLabel label={typeLabel || type} />\n                    <ModuleMetadata metadata={metadata} />\n                    <ModuleDescription description={description} />\n                </footer>\n            </div>\n            <NavSettings {...props} className={classes.settings} />\n            <NavToolbar {...props} className={classes.toolbar} />\n        </ModuleBase>\n    )    \n\n}\n\nListModule.propTypes = {\n    selectable: PropTypes.bool,\n    selected: PropTypes.bool,\n    onSelect: PropTypes.func,\n    editable: PropTypes.bool,\n    onEdit: PropTypes.func,\n    deletable: PropTypes.bool,\n    onDelete: PropTypes.func,\n    restorable: PropTypes.bool,\n    onRestore: PropTypes.func,\n    imageUrl: PropTypes.string,\n    title: PropTypes.string,\n    description: PropTypes.string,\n    type: PropTypes.string,\n    typeLabel: PropTypes.string,\n    metadata: PropTypes.array,\n    status: PropTypes.string,\n    statusLabel: PropTypes.string,\n    author: PropTypes.string,\n    datetime: PropTypes.string,\n    /** Whole object is clickable, will override any other onClick events */\n    onClick: PropTypes.func,\n}\n\nListModule.defaultProps = {\n//    size: \"small\",\n    editable: false,\n    selectable: false,\n    selected: false,\n    deletable: false,\n    restorable: false\n}\n\nexport default ListModule;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n    ModuleBase,\n    ModuleFormat,\n    ModuleHeader,\n    ModuleBody,\n    ModuleFooter,\n    ModuleButtons,\n} from \"@kit-ui/admin\"\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    module: {\n        position: \"relative\",\n        zIndex: 2,\n\n        \"& + *\": {\n            zIndex: 1\n        },\n\n        display: \"flex\",\n        flexDirection: \"column\",\n        minHeight: props => { return props.minHeight }\n\n    },\n    header: {\n        position: \"absolute\",\n        zIndex: 2,\n        top: 0,\n        right: 0,\n        bottom: \"auto\",\n        left: 0,\n        display: \"flex\",\n        zIndex: 2,\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n        height: theme.spacing(6),\n        marginLeft: theme.spacing(1),\n        marginRight: theme.spacing(1),\n        color: \"inherit\",\n\n        \"& + *\": {\n            zIndex: 1,\n            marginTop: theme.spacing(6)\n        }\n\n    },\n    body: {\n        position: \"relative\",\n        flexGrow: 1,\n        padding: theme.spacing(2)\n    },\n    footer: {\n        borderTop: \"1px solid\",\n        borderColor: theme.palette.divider,\n        padding: props => { return theme.spacing(props.padding) }\n    }\n\n}));\n\nconst ExpandedModule = ({id, children, buttons, ...props }) => {\n    const classes = useStyles(props)\n\n    return (\n        <ModuleBase className={classes.module} id={id} expanded={true} elevation={4}>\n            <ModuleFormat {...props}>\n                <ModuleHeader {...props} className={classes.header} />\n                <ModuleBody className={classes.body}>\n                    {children}\n                </ModuleBody>\n            </ModuleFormat>\n            <ModuleFooter {...props} className={classes.footer}>\n                {buttons && <ModuleButtons buttons={buttons} />}\n            </ModuleFooter>\n        </ModuleBase>\n    )    \n\n}\n\nExpandedModule.propTypes = {\n    title: PropTypes.string,\n    menu: PropTypes.array,\n    buttons: PropTypes.array,\n    children: PropTypes.node\n}\n\nexport default ExpandedModule;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport KpLinkCollapsed from \"./KpLinkCollapsed\"\nimport KpLinkExpanded from \"./KpLinkExpanded\"\n\nconst KpLinkLayout = ({\n    editable,\n    expanded,\n    buttons,\n    onSave,\n    children,\n    ...props\n}) => {\n\n    if (editable && expanded) {\n\n        if (!buttons || !buttons.length) {\n            buttons = [\n                {\n                    title: \"Save\",\n                    onClick: onSave\n                }\n            ]\n        }\n\n        return (\n            <KpLinkExpanded {...props} buttons={buttons}>\n                {children}\n            </KpLinkExpanded>\n        )\n    }\n\n    return (\n        <KpLinkCollapsed\n            {...props}\n            editable={editable}\n        />\n    )\n\n}\n\nKpLinkLayout.defaultProps = {\n    padding: 2,\n    editable: true\n}\n\nKpLinkLayout.propTypes = {\n    editable: PropTypes.bool,\n    editing: PropTypes.bool\n}\n\nexport default KpLinkLayout;\n","import React from 'react';\n\nconst KpDeviceField = (props) => {\n    const { uiSchema, formData, formContext, registry } = props;\n\n    const setStartPageId = (startPageId) => {\n        props.onChange({\n            ...formData,\n            startPageId: startPageId\n        })\n    }\n\n    const startPageId = formData && formData.startPageId\n\n    const newRegistry = {\n        ...registry,\n        formContext: {\n            ...registry.formContext,\n            startPageId: startPageId,\n            setStartPageId: setStartPageId\n        }\n    }\n\n    const newUiSchema = {\n        ...uiSchema,\n        \"ui:dialog\": formContext.dialog,\n        \"ui:preview\": formContext.preview,\n        \"ui:sidebar\": {\n            ...formContext.dialog,\n            ...formContext.sidebar\n        },\n        \"ui:layout\": \"pageContent\",\n\n    }\n\n    const { ObjectField } = registry.fields;\n\n    return (\n        <ObjectField {...props} uiSchema={newUiSchema} registry={newRegistry} />\n    )\n\n\n}\n\nexport default KpDeviceField","import React from 'react';\nimport { ListModule, ExpandedModule, ModuleLabel } from \"@kit-ui/admin\"\nimport ButtonBase from \"@material-ui/core/ButtonBase\"\n\nconst KpDeviceLinkField = ({\n    formData,\n    formContext,\n    children,\n    ...props\n}) => {\n\n    const { startPageId, setStartPageId } = formContext\n    const { referenceId, reference }= formData\n\n    const isStartPage = startPageId && referenceId === startPageId\n\n    const toggleStartPage = (id) => {\n        setStartPageId && setStartPageId(id)\n    }\n\n\n\n    const StartPageSettings = () => {\n\n        if (isStartPage) {\n            return (\n                <ButtonBase onClick={() => toggleStartPage(undefined)}>\n                    <ModuleLabel backgroundColor=\"black\">Startpage</ModuleLabel>\n                </ButtonBase>\n            )\n        }\n\n        return (\n            <ButtonBase onClick={() => toggleStartPage(referenceId)}>\n                <ModuleLabel>Startpage</ModuleLabel>\n            </ButtonBase>\n        )\n    }\n\n    const settings = [\n        StartPageSettings\n    ]\n\n    if (props.editable && props.expanded) {\n        return (\n            <ExpandedModule {...props}>\n                {children}\n            </ExpandedModule>\n        )\n    }\n\n    return (\n        <ListModule\n            {...reference}\n            onEdit={undefined}\n            elevation={1}\n            settings={settings}\n        />\n    )\n\n}\n\nexport default KpDeviceLinkField;\n","import React, {useState } from 'react'\nimport { useTranslation } from 'react-i18next';\nimport { utils } from \"@rjsf/core\";\nconst { getUiOptions } = utils;\n\nconst PageEditorField = (props) => {\n    const { idSchema, schema, uiSchema, formData, formContext, registry } = props;\n    const { isLoading, isSaving, uniqueId, status, statusCode, statusMessage, title, createdAt, updatedAt, deletedAt } = formData;\n    const { currentId, onExpand, onCollapse, onSelect, onLocale, onSubmit } = formContext;\n\n    const { t, i18n } = useTranslation(['editor'])\n\n    const getPrimaryAction = () => {\n\n        if (isLoading) {\n            return {\n                label: t(\"Loading\") + \" ...\",\n                disabled: true\n            }\n        } else if (isSaving) {\n            return {\n                label: t(\"Saving\") + \" ...\",\n                disabled: true\n            }\n        }\n\n        let primary = {\n            role: \"group\",\n            children: [\n                {\n                    label: t(\"Save as draft\"),\n                    onClick: () => onSubmit('draft'),\n                },\n                {\n                    label: t(\"Save and publish\"),\n                    onClick: () => onSubmit('publish'),\n                },\n            ]\n        }\n\n        let secondary = {\n            role: \"group\",\n            children: [\n                {\n                    label: t(\"Save and exit\"),\n                }\n            ]\n\n        }\n\n        if (uniqueId) {\n            secondary.children.push({\n                label: t(\"Save as\") + \" ...\",\n            })\n        }\n        \n\n        return {\n            type: \"save\",\n            label: t(\"Save\"),\n            onClick: () => onSubmit(),\n            children: [\n                primary,\n                secondary\n            ]\n        }\n    \n    }\n\n    // primary + secondary actions\n\n    const primaryAction = formContext.primaryAction || getPrimaryAction()\n\n    // toggle fieldset\n\n    const uiOptions = getUiOptions(uiSchema)\n\n    const { fieldset } = uiOptions\n\n    const idPrefix = idSchema && idSchema.$id\n    const primaryId = fieldset && fieldset[0] && idPrefix + \"_\" + fieldset[0]\n    const secondaryId = fieldset && fieldset[1] && idPrefix + \"_\" + fieldset[1]\n    const expanded = secondaryId && currentId && currentId.startsWith(secondaryId)\n\n    const _onToggle = () => {\n\n        if (!expanded) {\n            secondaryId && onExpand && onExpand({id: secondaryId})\n        } else {\n            primaryId && onExpand && onExpand({id: \"\"})\n        }\n\n    }\n\n    const defaultLocale = formContext.defaultLocale ||formContext.languages && formContext.languages[0]\n    const [currentLocale, setCurrentLocale] = useState(defaultLocale)\n\n    const _onLocale = (locale) => {\n        onLocale && onLocale(locale)\n        setCurrentLocale(locale)\n    }\n\n    const newUiSchema = {\n        ...uiSchema,\n        \"ui:title\": title,\n        \"ui:expanded\": expanded,\n        \"ui:primaryAction\": primaryAction,\n        \"ui:status\": status,\n        \"ui:statusDate\": updatedAt || createdAt || deletedAt,\n        \"ui:statusCode\": statusCode,\n        \"ui:statusMessage\": statusMessage,\n        \"ui:layout\": \"pageEditor\",\n        \"ui:onSelect\": (item) => onSelect(item),\n        \"ui:currentLocale\": currentLocale,\n        \"ui:onLocale\": (locale) => _onLocale(locale),\n        \"ui:onToggle\": () => _onToggle()\n    }\n\n    const { ObjectField } = registry.fields;\n\n    const newRegistry = {\n        ...registry,\n        formContext: {\n            ...formContext,\n            currentLocale: currentLocale\n        }\n    }\n\n    return (\n        <ObjectField {...props} registry={newRegistry} uiSchema={newUiSchema} />\n    )\n\n}\n\nexport default PageEditorField;","import React from 'react'\nimport {EditorBase, EditorHeader, EditorBody, EditorFooter, EditorOverlay } from \"@kit-ui/admin\"\n\nconst PageEditor = ({collapsible, expanded, overlay, onToggle, onSelect, children, ...props}) => {\n\n    const renderOverlay = () => {\n        const OverlayTemplate = overlay && overlay.template;\n\n        return (\n            <EditorOverlay position=\"fixed\" expanded={overlay && overlay.expanded}>\n                { OverlayTemplate && <OverlayTemplate {...overlay} /> }\n            </EditorOverlay>\n        )\n    }\n\n    return (\n        <EditorBase>\n            <EditorHeader {...props} collapsible={collapsible} expanded={expanded} onToggle={onToggle} onSelect={onSelect} />\n            <EditorBody elevation={1} expanded={expanded}>\n                {children}\n            </EditorBody>\n            <EditorFooter {...props} />\n            { overlay && renderOverlay() }\n        </EditorBase>\n    )\n}\n\nexport default PageEditor;","import React, { useState } from 'react'\n\nconst PageContentField = (props) => {\n    const { uiSchema, formContext, registry } = props\n    const { dialog, preview } = formContext;\n\n    const newUiSchema = {\n        ...uiSchema,\n        \"ui:dialog\": dialog,\n        \"ui:preview\": preview,\n        \"ui:layout\": \"pageContent\"\n    }\n\n    const { ObjectField } = registry.fields;\n\n    return (\n        <ObjectField {...props} uiSchema={newUiSchema} />\n    )\n\n}\n\nexport default PageContentField;","import React from 'react';\nimport { NavMenuList, NavMenuItem, NavMenuLink } from \"@kit-ui/admin\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    menu: {\n        position: \"absolute\",\n        zIndex: 1,\n        top: 0,\n        right: \"auto\",\n        left: 0,\n        bottom: 0,\n        margin: 0,\n        width: props => { return props.menuWidth },\n        transition: \".125s ease-out\",\n\n        \"& + *\": {\n            position: \"absolute\",\n            zIndex: 1,\n            top: 0,\n            right: 0,\n            left: 0,\n            bottom: 0,\n            margin: 0,\n            overflowY: \"scroll\"\n        },\n\n        \"&[aria-expanded=true] + *\":  {\n            marginLeft: props => { return props.menuWidth },\n        }\n    },\n    menuList: {\n        margin: theme.spacing(2, 0),\n        \"& > li + li\": {\n            marginTop: theme.spacing(1)\n        }\n    }\n}));\n\nconst PageMenu = ({className, menuWidth = 224, menu = undefined}) => {\n    const classes = useStyles({menuWidth});\n\n    if (!menu) {\n        return false\n    }\n\n    return (\n        <aside className={className ||classes.menu} aria-expanded={true}>\n            <NavMenuList className={classes.menuList}>\n                {menu.map((item, index) => {\n                    return (\n                        <NavMenuItem key={index}>\n                            <NavMenuLink {...item} />\n                        </NavMenuItem>\n                    )\n                })}\n            </NavMenuList>\n        </aside>\n    )\n\n}\n\nexport default PageMenu;","import React from 'react';\nimport { EditorSection, EditorContent, EditorPreview, EditorSidebar } from \"@kit-ui/admin\"\n\nimport PageMenu from \"./PageMenu\"\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    content: {\n        backgroundColor: theme.palette.background.default,\n        position: \"absolute\",\n        zIndex: 2,\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        width: \"100%\",\n        overflow: \"hidden\",\n\n        transition: \".125s ease-out\",\n        transform: \"translateY(100%)\",\n\n        \"&[aria-expanded=true]\": {\n            transform: \"translateY(0)\",\n        }\n    },\n    wrapper: {\n        backgroundColor: \"inherit\", \n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n    }\n}));\n\nconst PageContent = ({id, selected = true, sidebar, preview, menuWidth, menu = undefined, children}) => {\n    const classes = useStyles();\n\n    const renderSidebar = () => {\n        const SidebarTemplate = sidebar && sidebar.template;\n\n        return (\n            <EditorSidebar expanded={sidebar && sidebar.expanded}>\n                { SidebarTemplate && <SidebarTemplate {...sidebar} /> }\n            </EditorSidebar>\n        )\n    }\n\n    const renderPreview = () => {\n        const PreviewTemplate = preview && preview.template;\n        return (\n            <EditorPreview expanded={true}>\n                { PreviewTemplate && <PreviewTemplate {...preview} /> }\n            </EditorPreview>\n        )\n    }  \n\n    return (\n        <EditorSection id={id} expanded={selected} className={classes.content}>\n            { sidebar && renderSidebar() }\n            <EditorSection elevation={0} className={classes.wrapper}>\n                { preview && renderPreview() }\n                <EditorContent elevation={0}>\n                    { menu && <PageMenu menuWidth={menuWidth} menu={menu} /> }\n                    {children}\n                </EditorContent>\n            </EditorSection>\n        </EditorSection>\n    )\n\n}\n\nexport default PageContent;","import React, { useState } from 'react'\n\nconst PageSettingsField = (props) => {\n    const { uiSchema, formData, formContext, registry } = props\n    const { dialog } = formContext;\n\n    const newUiSchema = {\n        ...uiSchema,\n        \"ui:layout\": \"pageSettings\",\n        \"ui:field\": undefined\n    }\n\n    const { ObjectField } = registry.fields;\n\n    return (\n        <ObjectField {...props} uiSchema={newUiSchema} />\n    )\n\n}\n\nexport default PageSettingsField;","import React from 'react';\n\nimport { EditorSection, EditorContent, EditorOverlay } from \"@kit-ui/admin\"\n\nimport PageMenu from \"./PageMenu\"\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    settings: {\n        backgroundColor: theme.palette.background.default,\n        zIndex: 1,\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n\n        \"&[aria-expanded=true]\": {\n            top: 0\n        }\n\n    },\n}));\n\nconst PageSettings = ({id, expanded = true, menuWidth, menu = undefined, children}) => {\n    const classes = useStyles();\n\n    /*\n\n    const renderDialog = () => {\n        const DialogTemplate = dialog && dialog.template;\n\n        return (\n            <EditorOverlay position=\"fixed\" expanded={dialog && dialog.expanded}>\n                { DialogTemplate && <DialogTemplate {...dialog} /> }\n            </EditorOverlay>\n        )\n    }\n\n    */\n\n    return (\n        <EditorSection id={id} elevation={0} className={classes.settings} aria-expanded={expanded}>\n            {menu && <PageMenu menuWidth={menuWidth} menu={menu} /> }\n            <EditorContent expanded={true}>\n                {children}\n            </EditorContent>\n        </EditorSection>\n    )\n\n}\n\nexport default PageSettings;","import PageEditorField from \"./PageEditorField\"\nimport PageEditor from \"./PageEditorLayout\"\nimport PageContentField from \"./PageContentField\"\nimport PageContent from \"./PageContentLayout\"\nimport PageSettingsField from \"./PageSettingsField\"\nimport PageSettings from \"./PageSettingsLayout\"\n\nexport default {\n    fields: {\n        \"pageEditor\": PageEditorField,\n        \"pageEditorLayout\": PageEditor,\n        \"pageContent\": PageContentField,\n        \"pageContentLayout\": PageContent,\n        \"pageSettings\": PageSettingsField,\n        \"pageSettingsLayout\": PageSettings\n    }\n\n}","\nimport ParentIdField from \"./ParentIdField/ParentIdField\"\n\nimport KpPageField from \"./KpPage/KpPageField\"\nimport KpAnnotateArrayField from \"./KpPage/KpAnnotateArrayField\"\nimport KpAnnotateImageField from \"./KpPage/KpAnnotateImageField\"\n\nimport KpLinkField from \"./KpLink/KpLinkField\"\nimport KpLinkLayout from \"./KpLink/KpLinkLayout\"\n\nimport KpLinkMediaLayout from \"./KpLink/KpLinkMediaLayout\"\n\nimport KpDeviceField from \"./KpDevice/KpDeviceField\"\nimport KpDeviceLinkField from \"./KpDevice/KpDeviceLinkField\"\n\nimport pageEditor from \"./PageEditor/registry\"\n\nexport default {\n    \"fields\": {\n        \"parentId\": ParentIdField,\n        \"kpPage\": KpPageField,\n        \"kpAnnotateArray\": KpAnnotateArrayField,\n        \"kpAnnotateImage\": KpAnnotateImageField,\n        \"kpLink\": KpLinkField,\n        \"kpLinkLayout\": KpLinkLayout,\n        \"kpLinkMediaLayout\": KpLinkMediaLayout,\n        \"kpDevice\": KpDeviceField,\n        \"kpDeviceLink\": KpDeviceLinkField,\n        ...pageEditor.fields\n    },\n    \"widgets\": {\n//        \"colorSettings\": ColorSettingsWidget,\n//        \"listSettings\": ListSettingsWidget,\n//        \"gridSettings\": GridSettingsWidget,\n//        \"sizeSettings\": SizeSettingsWidget,\n//        \"placementSettings\": PlacementSettingsWidget\n    },\n    \"models\": {\n    }\n}","import React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    dialog: {\n        backgroundColor: theme.palette.background.default,\n        backgroundColor: \"#eee\",\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n    }\n}));\n\n\nconst DialogBase = ({children}) => {\n    const classes = useStyles()\n\n    return (\n        <section className={classes.dialog}>\n            {children}\n        </section>\n    )\n}\n\nexport default DialogBase","import React, { useState } from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\n\nconst useStyles = makeStyles(theme => ({\n    footer: {\n        position: \"absolute\",\n        zIndex: 2,\n        bottom: 0,\n        left: 0,\n        right: 0,\n\n        backgroundColor: \"inherit\",\n\n        \"& + *\": {\n            marginBottom: theme.spacing(8)\n        }\n\n    },\n    navigation: {\n        backgroundColor: \"inherit\",\n        width: \"100%\"\n    },\n}));\n\nconst Menu = withStyles(theme => ({\n    root: {\n        minHeight: theme.spacing(8)\n    }\n}))(BottomNavigation);\n\nconst MenuItem = withStyles(theme => ({\n    root: {\n    },\n    label: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"12px !important\",\n    },\n    selected: {\n    },\n}))(BottomNavigationAction);\n\nconst DialogFooter = ({menu = [], tabIndex = 0}) => {\n \n    const classes = useStyles();\n\n    const [value, setValue] = useState(tabIndex);\n\n    const handleChange = (event, index) => {\n        setValue(index)\n\n        if (menu[index].onClick) {\n            menu[index].onClick()\n        }\n\n    }\n    \n    return (\n        <Paper component=\"footer\" elevation={4} square={true} className={classes.footer}>\n            <Menu \n                value={value} \n                onChange={handleChange}\n                showLabels\n                className={classes.navigation}>\n                    { menu && menu.map((item, index) => {\n                        return (\n                            <MenuItem {...item} key={index} />\n                        )\n                    })}\n            </Menu>\n        </Paper>\n    )\n}\n\nexport default DialogFooter","import React, { useState, useEffect } from 'react';\nimport { AppSearch, NavTabs } from '@kit-ui/admin';\nimport { makeStyles } from '@material-ui/core/styles';\nimport _ from \"lodash\"\n\nconst useStyles = makeStyles(theme => ({\n    search: {\n        position: \"absolute\",\n        zIndex: 2,\n        top: 0,\n        right: 0,\n        bottom: \"auto\",\n        left: 0,\n        display: \"flex\",\n        backgroundColor: \"inherit\",\n        color: \"black\",\n        width: \"100%\",\n        height: theme.spacing(8),\n        overflow: \"hidden\",\n\n        transition: \".125s ease-out\",\n        marginTop: theme.spacing(-8),\n\n        \"&[aria-expanded=true]\": {\n            marginTop: 0,\n \n            \"& + *\": {\n                marginTop: theme.spacing(8),\n            }\n    \n        },\n\n \n    },\n}));\n\n\nconst DialogSearch = ({placeholder, q, onChange, onReset, expanded = false}) => {\n    const classes = useStyles()\n\n    return (\n        <AppSearch className={classes.search} placeholder={placeholder} onChange={onChange} onReset={onReset} expanded={expanded} />\n    )\n}\n\nexport default DialogSearch","import React, { useState } from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\n\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nimport Typography from '@material-ui/core/Typography';\n\nconst DialogTabpanel = withStyles(theme => ({\n    root: {\n        minHeight: theme.spacing(3),\n    },\n    indicator: {\n        bottom: \"auto\",\n        top: 0\n    },\n}))(Tabs);\n\nconst DialogTab = withStyles(theme => ({\n    root: {\n        textTransform: 'none',\n        letterSpacing: 0,\n        minWidth: 0,\n        minHeight: theme.spacing(3),\n        paddingLeft: 0,\n        paddingRight: 0,\n        marginLeft: 0,\n        marginRight: theme.spacing(2),\n        color: \"inherit\",\n        '&:hover': {\n          color: \"inherit\",\n          opacity: 1,\n        },\n        '&$selected': {\n          opacity: 1,\n        },\n        '&:focus': {\n          opacity: 1,\n        },\n    },\n    selected: {},\n\n}))(props => <Tab disableRipple label={<DialogLabel {...props} />} {...props} />);\n\nconst useStyles = makeStyles(theme => ({\n    label: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"14px\",\n    },\n    title: {\n        fontWeight: \"bold\",\n    },\n    count: {\n        color: theme.palette.text.secondary,\n        marginLeft: theme.spacing(.5)\n    }\n\n}))\n\nconst DialogLabel = ({title, count}) => {\n\n    const classes = useStyles()\n\n    return (\n        <Typography className={classes.label}>\n            <b className={classes.title}>{title}</b>\n            { count && <i className={classes.count}>({count})</i> || \"\" }\n        </Typography>\n    )\n}\n\n\nconst DialogTabs = ({tabs = [], tabIndex = 0}) => {\n    const [value, setValue] = useState(tabIndex);\n\n    const handleChange = (event, index) => {\n        setValue(index)\n\n        if (tabs[index].onClick) {\n            tabs[index].onClick()\n        }\n\n    }\n\n    return (\n        <DialogTabpanel\n            value={tabIndex ||value}\n            onChange={handleChange}\n            indicatorColor=\"primary\"\n            textColor=\"inherit\">\n            { tabs && tabs.map((tab, index) => {\n                return (\n                    <DialogTab {...tab} value={index} key={index} />\n                )\n            })}\n        </DialogTabpanel>        \n    )\n\n}\n\nexport default DialogTabs;","import React, { Component } from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\n\nimport DialogTabs from \"./DialogTabs\"\n\nimport { NavSettings } from \"@kit-ui/admin\"\n\nconst useStyles = makeStyles(theme => ({\n    header: {\n        position: \"sticky\",\n        zIndex: 2,\n        top: 0,\n        padding: 0,\n        marginLeft: theme.spacing(2),\n        marginRight: theme.spacing(2),\n//        minHeight: theme.spacing(4.5),\n        borderTop: \"1px solid\",\n        borderColor: theme.palette.divider,\n    },\n    tabs: {\n\n    },\n    settings: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        margin: theme.spacing(.75,.5)\n\n    }\n}))\n\nconst DialogHeader = ({tabs, tabIndex, settings}) => {\n\n    const classes = useStyles()\n\n    return (\n        <header className={classes.header}>\n            { tabs && <DialogTabs className={classes.tabs} tabs={tabs} tabIndex={tabIndex} /> }\n            { settings && <NavSettings className={classes.settings} settings={settings} /> }\n        </header>\n    )\n}\n\n\nexport default DialogHeader;","import React, { useRef, useState, useEffect } from 'react';\nimport { withResizeDetector } from 'react-resize-detector';\nimport { makeStyles } from '@material-ui/core/styles';\nimport _ from \"lodash\"\n\nconst useStyles = makeStyles(theme => ({\n    section: {\n        position: \"absolute\",\n        zIndex: 1,\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        overflowY: \"scroll\",\n    }\n}));\n\nconst DialogSection = ({height, onScroll, children}) => {\n    const classes = useStyles()\n\n    const parentRef = useRef()\n\n    const handleScroll = _.debounce((event) => {\n        onScroll && onScroll(event)\n    }, 500)\n\n    useEffect(() => {\n        const ph = parentRef.current && parentRef.current.offsetHeight\n        const ch = parentRef.current && parentRef.current.children && parentRef.current.children[0] && parentRef.current.children[0].offsetHeight\n\n        parentRef.current.addEventListener(\"scroll\", handleScroll);\n\n        if (ph < ch) {\n//            setOverflow(true)\n        }\n\n        return () => {\n            parentRef.current.removeEventListener(\"scroll\", handleScroll);\n        };\n\n    }, [children, height]);\n\n\n    return (\n        <section className={classes.section} ref={parentRef}>\n            {children}\n        </section>\n    )\n}\n\nexport default withResizeDetector(DialogSection)","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyles = makeStyles(theme => ({\n    loader: {\n        display: \"flex\",\n        alignItems: \"baseline\",\n        color: theme.palette.text.secondary,\n        margin: theme.spacing(2),\n    },\n    title: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"14px\",\n        color: theme.palette.text.primary\n    }\n}));\n\nconst ResultsLoader = ({query = {}, results = {}, children}) => {\n    const { t, i18n } = useTranslation('search');\n\n    const classes = useStyles()\n\n    const { models = [], count, rows } = results\n\n    let title;\n\n    const q = query.q && query.q.replace('*', '')\n\n    if (rows && !count) {\n        title = t('No hits')\n    } else if (!models.length) {\n        title = t('Searching, please wait', {q}) + \"...\";\n    }\n\n    if (title) {\n        return (\n            <div className={classes.loader}>\n                <Typography className={classes.title}>{title}</Typography>\n            </div>\n        )\n    }\n\n    return children\n\n}\n\nexport default ResultsLoader","import React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useTranslation } from 'react-i18next';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport MoreIcon from '@material-ui/icons/MoreHoriz';\n\nconst useStyles = makeStyles(theme => ({\n    footer: {\n        position: \"relative\",\n        width: \"100%\",\n        minHeight: theme.spacing(16),\n\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n\n    },\n    button: {\n        flexGrow: 1,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n\n        \"&:hover\": {\n            cursor: \"pointer\"\n        },\n\n        /*\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        */\n        border: \"1px solid\",\n        borderColor: theme.palette.divider,\n        backgroundColor: theme.palette.background.default,\n        backgroundColor: \"#eee\",\n        color: theme.palette.text.secondary,\n\n        minHeight: theme.spacing(12),\n        padding: 0,\n        margin: theme.spacing(2),\n\n        \"& > *\": {\n            margin: theme.spacing(.5)\n        },\n\n    },\n    label: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"14px\",\n        fontWeight: \"normal\"\n    },\n\n}));\n\nconst ResultsFooter = ({start, rows, count, page, pages, nextPage, onPage}) => {\n    const { t, i18n } = useTranslation(['search']);\n    const classes = useStyles()\n\n    if (!nextPage) {\n        return false\n    }\n\n    const from = start+rows+1\n    const to = from+rows-1\n\n    const label = t('Get results {{from}}{{to}}', {from, to}) + \" ...\"\n\n    return (\n        <footer className={classes.footer}>\n            <Paper elevation={1} square={true} component=\"button\" className={classes.button} onClick={() => onPage(nextPage)}>\n                {/* <MoreIcon className={classes.icon} /> */}\n                <Typography className={classes.label}>{label}</Typography>\n            </Paper>\n        </footer>\n    )    \n}\n\nexport default ResultsFooter;","import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { loadModel } from '../redux/modelsById';\n\nimport { ListModule, TableModule, GridModule, GalleryModule } from '@kit-ui/admin';\nimport { getUiPreview } from '@kit-ui/schema/lib';\n\nimport { useTranslation } from 'react-i18next';\nimport qs from 'query-string';\n\nconst layouts = {\n    \"table\": TableModule,\n    \"list\": ListModule,\n    \"grid\": GridModule,     \n    \"gallery\": GalleryModule,\n}\n\nconst ModuleLoader = ({app, dialog, query, model, layout = \"table\", size = \"medium\", modelsSelected = [], onAdd, onRemove, ...props}) => {\n    const { t, i18n } = useTranslation(['dialog']);\n    const dispatch = useDispatch()\n\n    const schemasByName = {}\n\n    const modelsById = useSelector(state => state.modelsById)\n    const modelsBySource = {}\n\n    const { uniqueId, source, sourceId, documentType, mediaType } = model;\n\n    useEffect(() => {\n        if (modelName && uniqueId && !modelsById[uniqueId]) {\n            dispatch(loadModel({modelName: modelName, uniqueId: uniqueId}))\n        }\n    }, [uniqueId])\n\n    const appDocumentType = documentType && app && app.root + \"/\" + documentType\n    const sourceDocumentType = source && \"document/\" + source\n\n    let modelName = model.modelName === \"doc_schemas\" && \"schemas\" ||model.modelName\n    let modelSchema;\n\n    if (modelName === \"users\") {\n        modelSchema = schemasByName['user']\n    } else if (modelName === \"sites\") {\n        modelSchema = schemasByName['site']\n    } else if (modelName === \"collections\") {\n        modelSchema = schemasByName['collection']\n    } else if (modelName === \"doc_schemas\") {\n        modelSchema = schemasByName['schema']\n    }else if (modelName === \"documents\" || documentType) {\n        if (schemasByName[appDocumentType]) {\n            modelSchema = schemasByName[appDocumentType]\n        } else if (source && schemasByName[sourceDocumentType]) {\n            modelSchema = schemasByName[sourceDocumentType]\n        } else if (documentType) {\n            modelSchema = schemasByName[documentType]\n        }\n    } else if (modelName === \"media\" ||mediaType) {\n        modelSchema = mediaType && schemasByName[\"media/\"+mediaType]\n    }\n\n\n    const [preview, setPreview] = useState(model)\n\n    const getImageUrl = (model) => {\n        const { imageUrl, uploadStatus, uploadProgress } = model\n\n        const imageUrlParts = imageUrl && imageUrl.split(\"?\")\n        const imageParams = imageUrlParts && imageUrlParts[1] && qs.parse(imageUrlParts[1])\n\n        if (!imageParams) {\n            return imageUrl\n        }\n\n        const newImageParams = qs.stringify({\n            ...imageParams,\n            uploadStatus: uploadStatus,\n            uploadProgress: uploadProgress,\n            dimension: \"250x250\"\n        })\n\n        const newImageUrl = imageUrlParts[0] + \"?\" + newImageParams\n        \n        return newImageUrl\n\n    }\n\n    const uniqueModel = source && sourceId && modelsBySource && modelsBySource[source + \"/\" + sourceId] || uniqueId && modelsById && modelsById[uniqueId]; //  || model\n\n    useEffect(() => {\n        let uiPreview = {}\n\n        if (modelSchema && uniqueModel) {\n            uiPreview = getUiPreview({...modelSchema, formData: uniqueModel, formContext: {t:t}})\n        }\n\n        const newModel = {\n            ...uniqueModel,\n            ...model,\n            ...uiPreview,\n        }\n\n        const newImageUrl = getImageUrl(newModel)\n\n        setPreview({\n            ...newModel,\n            imageUrl: newImageUrl,\n        })\n\n    }, [uniqueModel])\n\n    const {status, createdAt, createdByName, updatedAt, updatedByName, deletedAt, deletedByName } = preview;\n\n    const author = deletedByName ||updatedByName || createdByName ||\"N/A\"\n    const datetime = deletedAt ||updatedAt || createdAt\n\n    const statusLabel = t(\"status:\"+status ||undefined)\n    const LayoutTemplate = layout && layouts[layout]\n\n    let selected;\n\n    if (source && sourceId) {\n        selected = modelsSelected && modelsSelected.includes(source + \"/\" + sourceId)\n    } else if (uniqueId) {\n        selected = modelsSelected && modelsSelected.includes(uniqueId)\n    }\n\n    const handleSelect = () => {\n\n        console.log(\"ADD/REMOVE\", uniqueModel)\n\n        if (selected) {\n            onRemove && onRemove(uniqueModel)\n        } else {\n            onAdd && onAdd(uniqueModel)\n        }\n\n    }\n\n    const selectable = uniqueModel && true || false\n    const onClick = selectable ? handleSelect : undefined\n\n    return (\n        <LayoutTemplate {...preview} size={size} \n            statusLabel={statusLabel} author={author} datetime={datetime}\n            selectable={selectable} selected={selected} onClick={onClick} />\n    )\n\n}\n\nexport default ModuleLoader","import React from 'react';\n//import { ListLayout } from \"@kit-ui/admin\"\n\nimport ResultsLoader from \"./ResultsLoader\"\nimport ResultsFooter from \"./ResultsFooter\"\nimport DialogModel from \"./DialogModel\"\n\nconst ListLayout = ({children}) => {\n    return <div>{children}</div>\n}\n\nconst ResultsList = ({layout = \"list\", query = {}, results = {}, resultsLoaded = [], selected = [], onPage, ...props}) => {\n\n    return (\n        <ResultsLoader query={query} results={results}>\n            <ListLayout padding={2}>\n                {resultsLoaded && resultsLoaded.map((model, index) => {\n                    return (\n                        <DialogModel model={model} layout={layout} modelsSelected={selected} {...props} key={index} />\n                    )\n                })}\n            </ListLayout>\n            <ResultsFooter {...results} onPage={onPage} />\n        </ResultsLoader>\n    )\n\n}\n\nexport default ResultsList","import React, { useEffect, useState } from 'react';\nimport PropTypes from \"prop-types\";\nimport { Gallery } from \"@kit-ui/admin\"\n\nimport DialogModel from \"./DialogModel\"\nimport ResultsLoader from \"./ResultsLoader\"\nimport ResultsHeader from \"./ResultsHeader\"\nimport ResultsFooter from \"./ResultsFooter\"\n\nconst LayoutGallery = ({children}) => {\n    return children\n}\n\n\nconst ResultsGallery = ({layout = \"gallery\", query = {}, results = {}, resultsLoaded = [], selected = [], onPage, mediaHeight = 120, mediaLayout = \"cover\", spacing = 1, padding = 2, ...props}) => {\n\n    return (\n        <ResultsLoader query={query} results={results}>\n            <Gallery padding={padding} spacing={spacing}>\n                { resultsLoaded && resultsLoaded.map((model, index) => {\n\n                    let width, height;\n                        \n                    if (model.mediaWidth && model.mediaHeight) {\n                        width = model.mediaWidth\n                        height = model.mediaHeight\n                    } else if (model.imageWidth && model.imageHeight) {\n                        width = model.imageWidth\n                        height = model.imageHeight\n                    }\n\n                    model = {\n                        ...model,\n                        width: Math.floor(mediaHeight * (width / height)) || mediaHeight,\n                        mediaHeight: mediaHeight,\n                        mediaLayout: mediaLayout\n                    }\n\n                    return (\n                        <DialogModel {...props} layout=\"gallery\" model={model} modelsSelected={selected} width={model.width} key={index} />\n                    )\n                })}\n            </Gallery>\n            <ResultsFooter {...results} onPage={onPage} />\n        </ResultsLoader>\n    )    \n}\n\nResultsGallery.propTypes = {\n    spacing: PropTypes.number,\n    padding: PropTypes.number,\n    models: PropTypes.array \n}\n\nexport default ResultsGallery;","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: \"flex\",\n        alignItems: \"baseline\",\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"14px\",\n        color: theme.palette.text.primary,\n        \"& * + *\": {\n            marginLeft: theme.spacing(.5)\n        },\n        marginLeft: theme.spacing(2),\n        marginRight: theme.spacing(2),\n        borderTop: \"1px solid\",\n        borderColor: theme.palette.divider,\n        paddingTop: theme.spacing(1)\n    },\n    title: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"14px\",\n        fontWeight: \"bold\"\n    },\n    description: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"14px\",\n    }\n}));\n\nconst ResultsHeader = ({resultsLoaded = [], count, start, rows, pages, page, onPage}) => {\n    const { t, i18n } = useTranslation('search');\n\n    rows = resultsLoaded.length;\n\n    let title;\n\n    if (count > rows) {\n        title = t('{{rows}} of {{count}} hits', { pages, page, count,rows });\n    } else {\n        title = t('{{count}} hits', { pages, page, count, rows });\n    }\n    \n    const classes = useStyles()\n\n    return (\n        <header className={classes.root}>\n            <Typography className={classes.title}>{title}</Typography>\n        </header>\n    )\n\n}\n\nexport default ResultsHeader","import React from 'react';\n//import { ListLayout } from \"@kit-ui/admin\"\nimport { useTranslation } from 'react-i18next';\n\nimport ResultsLoader from \"./ResultsLoader\"\nimport ResultsFooter from \"./ResultsFooter\"\nimport DialogModel from \"./DialogModel\"\n\nconst ListLayout = ({children}) => {\n    return children\n}\n\n\nconst ResultsUploads = ({layout = \"list\", query = {}, results = {}, ...props}) => {\n    const { uploads, resultsLoaded, selected } = results\n    const { t, i18n } = useTranslation('upload');\n\n    if (query.q) {\n\n        return (\n            <ResultsLoader {...props}>\n                <ListLayout padding={2} title=\"Searching uploads\">\n                    {resultsLoaded && resultsLoaded.map((model, index) => {\n                        return (\n                            <DialogModel model={model} layout={layout} modelsSelected={selected} {...props} key={index} />\n                        )\n                    })}\n                </ListLayout>\n                <ResultsFooter {...props} />\n            </ResultsLoader>\n        )\n        \n    }\n\n    if (!uploads.length) {\n        return false\n    }\n\n    const count = uploads.length;\n    const title = t('{{count}} new uploads today', {count});\n\n    return (\n        <ListLayout padding={2}>\n            { uploads && uploads.map((model, index) => {\n                return (\n                    <DialogModel {...props} model={model} modelsSelected={selected} layout=\"list\" key={index} />\n                )\n            })}\n        </ListLayout>\n    )\n\n}\n\nexport default ResultsUploads;","import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport { getMediaSource } from '../redux/modelsById';\n\nimport ResultsList from \"./ResultsList\"\nimport ResultsGallery from \"./ResultsGallery\"\nimport ResultsUploads from \"./ResultsUploads\"\n\nimport { utils } from '@kit-ui/schema';\nconst { getDefaultFormState } = utils\n\nconst templates = {\n    \"list\": ResultsList,\n    \"gallery\": ResultsGallery,\n    \"uploads\": ResultsUploads\n}\n\nconst MediaResults = ({schema, formData, onChange, query = {}, search = {}, layout = \"list\", ...props}) => {\n    const { t, i18n } = useTranslation(['dialog']);\n    const dispatch = useDispatch()\n\n    // schema\n\n    let itemSchema;\n\n    if (schema.type === \"array\") {\n        itemSchema = schema.items\n    } else {\n        itemSchema = schema\n    }\n\n    // set selected\n\n    const [modelsSelected, setModelsSelected] = useState([])\n\n    const getSelected = (formData) => {\n        let items = []\n\n        if (schema.type === \"array\") {\n            items = formData ||[]\n        } else {\n            items = formData && [formData] ||[]\n        }\n\n        const selected = items.map(({media, mediaId}) => { \n\n            if (media.source && media.sourceId) {\n                return media.source + \"/\" + media.sourceId\n            }\n\n            return mediaId\n        })\n\n        setModelsSelected(selected)\n    }\n\n    useEffect(() => {\n        getSelected(formData)\n    }, [formData])\n\n    // change\n\n    const handleChange = (formData) => {\n        const newFormData = getDefaultFormState(schema, formData)\n        onChange(newFormData);\n    }\n\n    // add\n\n    const addModel = (model) => {\n        \n        const item = getDefaultFormState(itemSchema, {\n            mediaId: model.uniqueId,\n            media: model\n        })\n\n        let newFormData;\n\n        if (schema.type === \"array\") {\n            newFormData = [].concat(formData, item);\n        } else {\n            newFormData = item\n        }\n\n        handleChange(newFormData);\n\n    }\n\n    const handleAdd = (model) => {\n        const { uniqueId, sourceId, mediaType } = model;\n\n        console.log('addModel', model)\n\n        if (sourceId) {\n            console.log('sourceId', sourceId)\n\n            const source = {\n                ...model,\n                identifier: sourceId,\n                mimeType: mediaType,\n                collectionId: query.collectionId\n            }\n\n            console.log('source', source)\n\n            dispatch(getMediaSource({\n                ...model,\n                identifier: sourceId,\n                mimeType: mediaType,\n                collectionId: query.collectionId\n            }, (model) => addModel(model)))\n\n        } else if (uniqueId) {\n            addModel(model)\n        }\n     \n    }\n\n    // remove\n\n    const removeItem = ({uniqueId, source, sourceId}) => {\n        return formData.filter(item => item.mediaId !== uniqueId)\n    }\n    \n    const handleRemove = (model) => {\n        const uniqueId = model && model.uniqueId\n\n        console.log('remove', model)\n\n        let newFormData;\n\n        if (schema.type === \"array\") {\n            newFormData = removeItem({uniqueId})\n        } else {\n            newFormData = getDefaultFormState(itemSchema, {\n                mediaId: undefined,\n                media: {}\n            })\n        }\n\n        handleChange(newFormData);\n\n    }\n\n    // get template\n\n    const ResultsTemplate = templates && templates[layout]\n\n    if (!ResultsTemplate) {\n        return (\n            <p>No template for {layout}</p>\n        )\n    }\n\n    return (\n        <ResultsTemplate \n            {...props}\n            {...search}\n            selected={modelsSelected}\n            query={query}\n            onAdd={handleAdd}\n            onRemove={handleRemove} />\n    )\n\n    \n}\n\nexport default MediaResults","import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport { getDocumentSource } from '../redux/modelsById';\n\nimport ResultsList from \"./ResultsList\"\nimport ResultsGallery from \"./ResultsGallery\"\n\nimport { utils } from '@kit-ui/schema';\nconst { getDefaultFormState } = utils;\n\nconst templates = {\n    \"list\": ResultsList,\n    \"gallery\": ResultsGallery\n}\n\nconst DocumentsResults = ({schema, formData, onChange, query = {}, search = {}, layout = \"list\", ...props}) => {\n    const { t, i18n } = useTranslation(['dialog']);\n    const dispatch = useDispatch()\n\n    let itemSchema;\n\n    if (schema.type === \"array\") {\n        itemSchema = schema.items\n    } else {\n        itemSchema = schema\n    }\n\n    const [modelsSelected, setModelsSelected] = useState([])\n\n    const getSelected = (formData) => {\n        let items = []\n\n        if (schema.type === \"array\") {\n            items = formData ||[]\n        } else {\n            items = formData && [formData] ||[]\n        }\n\n        console.log('ITEMS', items)\n\n        const selected = items.map(({reference, referenceId}) => { \n\n            const uniqueId = reference && reference.uniqueId\n\n            if (reference.source && reference.sourceId) {\n                return reference.source + \"/\" + reference.sourceId\n            }\n\n            return uniqueId\n        })\n\n        setModelsSelected(selected)\n\n        \n    }\n\n    useEffect(() => {\n        getSelected(formData)\n    }, [formData])\n\n    const handleChange = (formData) => {\n        const newFormData = getDefaultFormState(schema, formData)\n        console.log(\"NEW\", newFormData)\n        onChange && onChange(newFormData);\n        getSelected(newFormData);\n    }\n\n    const addModel = (model) => {\n\n        console.log(itemSchema)\n\n        const item = getDefaultFormState(itemSchema, {\n            referenceId: model.uniqueId,\n            reference: model\n        })\n\n        let newFormData;\n\n        if (schema.type === \"array\") {\n            newFormData = formData && formData.length && [].concat(formData, item) ||[item];\n        } else {\n            newFormData = item\n        }\n\n        handleChange(newFormData);\n\n    }\n\n    const handleAdd = (model) => {\n        const { source, sourceId, uniqueId, mediaType } = model;\n\n        console.log('addModel', model)\n\n        if (sourceId) {\n\n            console.log('sourceId', sourceId)\n\n            props.addDocumentSource({\n                ...model,\n                collectionId: query.collectionId\n            }, (model) => addModel(model))\n\n        }else if (source && uniqueId) {\n\n            delete model.uniqueId\n            \n            console.log('sourceId', sourceId)\n\n            dispatch(getDocumentSource({\n                ...model,\n                sourceId: uniqueId,\n                collectionId: query.collectionId\n            }, (model) => addModel(model)))\n\n        } else if (uniqueId) {\n            addModel(model)\n        }\n     \n    }\n\n    const removeItem = ({uniqueId}) => {\n        return formData.filter(item => item.referenceId !== uniqueId)\n    }\n    \n    const handleRemove = (model) => {\n        const uniqueId = model && model.uniqueId\n\n        console.log('remove', model)\n\n        let newFormData;\n\n        if (schema.type === \"array\") {\n            newFormData = removeItem({uniqueId})\n        } else {\n            newFormData = getDefaultFormState(itemSchema, {\n                referenceId: undefined,\n                reference: {}\n            })\n        }\n\n        handleChange(newFormData);\n\n    }\n\n    // get template\n\n    const ResultsTemplate = templates && templates[layout]\n\n    if (!ResultsTemplate) {\n        return (\n            <p>No template for {layout}</p>\n        )\n    }\n\n    return (\n        <ResultsTemplate \n            {...props}\n            {...search}\n            selected={modelsSelected}\n            query={query}\n            onAdd={handleAdd}\n            onRemove={handleRemove} />\n    )    \n\n}\n\nexport default DocumentsResults","import React, { useState, useEffect } from 'react';\nimport { getDefaultFormState } from '@kit-ui/schema/lib';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { useTranslation } from 'react-i18next';\n\nimport ResultsList from \"./ResultsList\"\nimport ResultsGallery from \"./ResultsGallery\"\nimport ResultsUploads from \"./ResultsUploads\"\n\nconst templates = {\n    \"list\": ResultsList,\n    \"gallery\": ResultsGallery,\n    \"uploads\": ResultsUploads\n}\n\nconst SearchResultsDefault = ({schema, formData, onChange, query = {}, results = {}, layout = \"list\", ...props}) => {\n    const { t, i18n } = useTranslation(['dialog']);\n\n    // schema\n\n    let itemSchema;\n\n    if (schema.type === \"array\") {\n        itemSchema = schema.items\n    } else {\n        itemSchema = schema\n    }\n\n    // set selected\n\n    const [modelsSelected, setModelsSelected] = useState([])\n\n    const getSelected = (formData) => {\n        let items = []\n\n        if (schema.type === \"array\") {\n            items = formData\n        } else {\n            items = [formData]\n        }\n\n        const selected = items.map(({uniqueId}) => { \n            return uniqueId\n        })\n\n        setModelsSelected(selected)\n    }\n\n    useEffect(() => {\n        getSelected(formData)\n    }, [formData])\n\n    // change\n\n    const handleChange = (formData) => {\n        const newFormData = getDefaultFormState(schema, formData)\n        onChange(newFormData);\n        getSelected(newFormData);\n    }\n\n    // add\n\n    const addModel = (model) => {\n\n        const item = getDefaultFormState(itemSchema, {\n            uniqueId: model.uniqueId,\n            model: model\n        })\n\n        let newFormData;\n\n        if (schema.type === \"array\") {\n            newFormData = [].concat(formData, item);\n        } else {\n            newFormData = item\n        }\n\n        handleChange(newFormData);\n\n    }\n\n    const handleAdd = (model) => {\n        addModel(model)\n    }\n\n    // remove\n\n    const removeItem = ({uniqueId}) => {\n        return formData.filter(item => item.uniqueId !== uniqueId)\n    }\n    \n    const handleRemove = (model) => {\n        const uniqueId = model && model.uniqueId\n\n        console.log('remove', model)\n\n        let newFormData;\n\n        if (schema.type === \"array\") {\n            newFormData = removeItem({uniqueId})\n        } else {\n            newFormData = getDefaultFormState(itemSchema, {\n                uniqueId: undefined,\n            })\n        }\n\n        handleChange(newFormData);\n\n    }\n\n    // get template\n\n    const ResultsTemplate = templates && templates[layout]\n\n    if (!ResultsTemplate) {\n        return (\n            <p>No template for {layout}</p>\n        )\n    }\n\n    return (\n        <ResultsTemplate \n            {...props}\n            results={{\n                ...results,\n                selected: modelsSelected\n            }}\n            query={query}\n            onAdd={handleAdd}\n            onRemove={handleRemove} />\n    )\n\n    \n}\n\nconst mapDispatchToProps = (dispatch) =>\n    bindActionCreators({\n    }, \ndispatch);\n\nconst mapStateToProps = (state) => {\n\treturn {\n        searchById: state.searchById,\n        uploadById: state.uploadById\n\t};\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps,\n)(SearchResultsDefault);","import React from 'react';\n\nimport MediaResults from \"./MediaResults\"\nimport DocumentsResults from \"./DocumentsResults\"\nimport ResultsDefault from \"./SearchResultsDefault\"\n\nconst templates = {\n    \"default\": ResultsDefault,\n    \"media\": MediaResults,\n    \"youtube\": MediaResults,\n    \"vimeo\": MediaResults,\n    \"sketchfab\": MediaResults,\n    \"documents\": DocumentsResults,\n    \"ekultur\": DocumentsResults\n}\n\nconst SearchResults = ({query = {}, ...props}) => {\n\n    const ResultsTemplate = query.models && templates && templates[query.models] ||templates['default']\n\n    if (!ResultsTemplate) {\n        return (\n            <p>No template for {query.models}</p>\n        )\n    }\n\n    return (\n        <ResultsTemplate \n            {...props}\n            query={query} />\n    )\n\n    \n}\n\nexport default SearchResults","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getQuery } from '../redux/searchById';\n\nimport DialogBase from \"./DialogBase\"\nimport DialogSearch from \"./DialogSearch\"\n\nimport DialogHeader from \"./DialogHeader\"\nimport DialogSection from \"./DialogSection\"\n\nimport SearchResults from \"./SearchResults\"\n\nimport qs from 'query-string';\nimport _ from \"lodash\"\n\nconst SearchDialog = ({schema, formData, onChange, onClose, query = {}, ...props}) => {\n    const { t, i18n } = useTranslation(['dialog']);\n    const dispatch = useDispatch()\n\n    const searchById = useSelector(state => state.searchById)\n\n    console.log('query', query)\n\n    // user query\n\n    const [userQ, setUserQ] = useState(\"\")\n\n    const handleQuery = _.debounce((q, event) => {\n        setUserQ(q)\n    }, 500)\n\n    const handleReset = () => {\n        if (q) {\n            setUserQ(\"\")\n        } else if (onClose) {\n            onClose()\n        }\n    }\n\n    // set q\n\n    let q\n\n    if (query.q && userQ) {\n        q = query.q + \" \" + userQ.trim() + \"*\";\n    } else if (userQ) {\n        q = userQ.trim() + \"*\"\n    } else if (query.q) {\n        q = query.q\n    }\n\n    // sort\n\n    const sortOptions = [\n        \"updatedAt DESC\",\n        \"title\", \n    ]\n\n    const [sort, setSort] = useState(sortOptions[0])\n\n    const sortSettings =  {\n        \"name\": \"sort\",\n        \"value\": sort,\n        \"onChange\": (name, value) => setSort(value),\n        \"options\": sortOptions.map(value => {\n            return {\n                label: t(\"sort:\"+value || value),\n                value: value\n            }\n        })\n    }\n\n    // base query\n\n    query = {\n        ...query,\n        id: \"/dialog/search\",\n        start: 0,\n        rows: 20,\n        sort: sort,\n        status: \"NOT trash\",\n        fl: \"uniqueId,source,sourceId,documentType,mediaType,imageUrl,title,description,status,mediaWidth,mediaHeight,updatedAt,updatedByName\",\n        q: q,\n    }\n\n    // dm\n\n    const dmOwnerOptions = [\n        \"*\",\n        \"AHS\",\n        \"NF\", \n    ]\n\n    const [dmOwner, setDmOwner] = useState(dmOwnerOptions[0])\n\n    const dmOwnerSettings =  {\n        \"name\": \"dmOwner\",\n        \"value\": dmOwner,\n        \"onChange\": (name, value) => setDmOwner(value),\n        \"options\": dmOwnerOptions.map(value => {\n            return {\n                label: \"owner:\" + value,\n                value: value\n            }\n        })\n    }\n\n\n    const getMediaSource = (source) => {\n        const queryId = query.id + \"/\" + source + \"/\" + query.q\n\n        return {\n            title: \"media/\" + source,\n            layout: \"gallery\",\n            query: {\n                id: queryId,\n                models: source,\n                siteId: query.siteId,\n                collectionId: query.collectionId,\n                rows: query.rows,\n                q: query.q\n            }\n        }\n\n    }\n\n    const getMediaType = (mediaType) => {\n        const queryId = query.id + \"/\" + mediaType + \"/\" + query.q\n\n        return {\n            title: \"media/\" + mediaType,\n            layout: mediaType.includes(\"audio\") && \"list\" ||\"gallery\",\n            settings: [\n                sortSettings\n            ],\n            query: {\n                ...query,\n                id: queryId,\n                mediaType: mediaType\n            }\n        }\n\n    }\n\n    const getMediaSections = () => {\n\n        let mediaTypes = []\n\n        if (Array.isArray(query.mediaType)) {\n            mediaTypes = query.mediaType\n        } else if (query.mediaType) {\n            mediaTypes = [query.mediaType]\n        } else if (query.models === \"media\") {\n            mediaTypes = ['image*','video*','audio*']\n        }\n\n        return mediaTypes && mediaTypes.map(mediaType => {\n            if (mediaType === \"youtube\" || mediaType == \"vimeo\" || mediaType === \"sketchfab\") {\n                return getMediaSource(mediaType)\n            } else {\n                return getMediaType(mediaType)\n            }\n        })\n\n    }\n\n    // get documentSections\n\n    const getDocumentSource = (source) => {\n        return {\n            title: \"documents/\" + source,\n            layout: \"list\",\n            settings: [\n                dmOwnerSettings\n            ],\n            query: {\n                models: source,\n                id: query.id + \"/\" + source + \"/\" + query.q,\n                owner: dmOwner,\n                siteId: query.siteId,\n                collectionId: query.collectionId,\n                rows: query.rows,\n                q: query.q\n            }\n        }\n        \n    }    \n\n    const getDocumentType = (documentType) => {\n        return {\n            title: \"documents/\" + documentType,\n            layout: \"list\",\n            settings: [\n                sortSettings\n            ],\n            query: {\n                ...query,\n                id: query.id + \"/\" + documentType + \"/\" + query.q,\n                documentType: documentType\n            }\n        }\n    }\n\n    const getDocumentSections = () => {\n        let documentTypes = []\n\n        if (Array.isArray(query.documentType)) {\n            documentTypes = query.documentType\n        } else if (query.documentType) {\n            documentTypes = [query.documentType]\n        } else if (query.models === \"documents\") {\n            documentTypes = ['*']\n        }\n\n        return documentTypes && documentTypes.map(documentType => {\n            if (documentType === \"ekultur\") {\n                return getDocumentSource(documentType)\n            } else {\n                return getDocumentType(documentType)\n            }\n        })   \n\n    }\n\n\n    let sections = []\n\n    if (query.models === \"media\") {\n        sections = getMediaSections()\n    } else if (query.models === \"documents\") {\n        sections = getDocumentSections()\n    } else if (query.models === \"ekultur\") {\n        sections = [getDocumentSource(\"ekultur\")]\n    } else if (query.models) {\n        sections = [\n            {\n                title: query.models,\n                query: {\n                    ...query,\n                    models: query.models,\n                    id: query.id + \"/\" + query.models + \"/\" + query.q,\n                }\n            }\n        ]\n    }\n    // get tabs\n\n    const [tabIndex, setTabIndex] = useState(0)\n    const currentTab = sections[tabIndex]\n\n    // get search count\n\n    const getSearchCount = () => {\n        sections.map((section, index) => {\n            const { query } = section;\n\n            if (query.models === \"media\" && tabIndex !== index) {\n                dispatch(getQuery({...query, rows: 0}))\n            }\n\n            if (query.models === \"documents\" && tabIndex !== index) {\n                dispatch(getQuery({...query, rows: 0}))\n            }\n\n        })\n        \n    }\n\n    // setup tabs\n\n    const handleTab = (index) => {\n        setTabIndex(index)\n    }\n\n    const tabs = sections.map((section, index) => {\n        const { title, query } = section;\n\n        const currentSearch = searchById && searchById[query.id]\n        const resultsLoaded = currentSearch && currentSearch.resultsLoaded\n        \n        let count;\n\n        if (section.layout === \"uploads\") {\n            count = section.count\n        } else if (currentSearch && currentSearch.count) {\n            count = currentSearch && currentSearch.count\n        } else if (resultsLoaded && resultsLoaded.length && currentSearch.nextToken) {\n            count = resultsLoaded && resultsLoaded.length && resultsLoaded.length + \"+\";\n        } else if (resultsLoaded && resultsLoaded.length) {\n            count = resultsLoaded && resultsLoaded.length && resultsLoaded.length;\n        }\n\n        return {\n            title: t(title),\n            count: count,\n            onClick: () => handleTab(index)\n        }\n\n    })\n\n    const getSearch = () => {\n        currentTab && currentTab.query && dispatch(getQuery(currentTab.query))\n    }\n\n    useEffect(() => {\n        getSearch()\n    }, [tabIndex, query.q, query.sort, dmOwner])\n\n    // current query and search \n\n    const currentQuery = currentTab && currentTab.query\n    const currentSearch = currentQuery.id && searchById && searchById[currentQuery.id];\n\n    useEffect(() => {\n        getSearchCount()\n    }, [query.q])\n\n    // handle page\n\n    const handlePage = (page) => {\n        dispatch(getQuery({\n            ...currentQuery,\n            page: page,\n            start: currentQuery.rows * (page-1),\n            nextToken: currentSearch && currentSearch.nextToken\n        }))\n    }\n\n    // pages\n    \n    const [pages, setPages] = useState(0)\n    const [currentPage, setCurrentPage] = useState(0)\n    const [nextPage, setNextPage] = useState(0)\n\n    const getPages = () => {\n        const pages = Math.ceil(currentSearch.count/currentSearch.rows)\n        const page = Math.ceil((currentSearch.start+currentSearch.rows)/currentSearch.rows)\n\n        setPages(pages)\n        setCurrentPage(page)\n\n        let nextPage = 0\n\n        for (let p = page; p <= pages; p++) {\n            if (!currentSearch.resultsByPage[p]) {\n                nextPage = p\n                break\n            }\n        }    \n\n        setNextPage(nextPage)\n    \n    }\n\n    useEffect(() => {\n        currentSearch && currentSearch.count && getPages()\n    }, [currentSearch])\n\n    // search\n\n    let search = {\n        placeholder: \"Search\"\n    }\n\n    if (!search.placeholder) {\n\n        if (tabs.length === 1 && currentQuery.models === \"media\" && currentQuery.mediaType) {\n            search.placeholder = t(\"Search media/\" + currentQuery.mediaType)\n        } else if (tabs.length === 1 && currentQuery.models === \"ekultur\" ) {\n            search.placeholder = t(\"Search ekultur\")\n        } else if (query.models === \"media\") {\n            search.placeholder = t(\"Search media\")\n        } else if (query.models === \"documents\") {\n            search.placeholder = t(\"Search documents\")\n        } else {\n            search.placeholder = t(\"Search models\")\n        }\n\n    }\n\n    return (\n        <DialogBase>\n            <DialogSection>\n                <DialogSearch \n                    {...search} \n                    expanded={true}\n                    onChange={handleQuery}\n                    onReset={handleReset} />\n                <DialogHeader \n                    tabs={tabs}\n                    tabIndex={tabIndex}\n                    settings={currentTab && currentTab.settings} />\n                <SearchResults \n                    schema={schema}\n                    formData={formData}\n                    onChange={onChange}\n                    query={currentQuery}\n                    layout={currentTab && currentTab.layout}\n                    search={currentSearch}\n                    results={{\n                        ...currentSearch,\n                        pages: pages,\n                        page: currentPage,\n                        nextPage: nextPage\n                    }}\n                    onPage={handlePage}                    \n                    />\n            </DialogSection>\n        </DialogBase>        \n    )\n\n}\n\n\nexport default SearchDialog","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport DialogBase from \"./DialogBase\"\nimport SearchDialog from \"./SearchDialog\"\n\nconst FavouritesDialog = ({query, favourites, ...props}) => {\n    const { t, i18n } = useTranslation(['dialog']);\n\n    const search = {\n        placeholder: t('Search favorites')\n    }\n\n    const getFavouritesQuery = (uniqueIds = []) => {\n\n        if (uniqueIds.length) {\n            return {\n                ...query,\n                q: \"uniqueId:\" + uniqueIds.join(\" OR \")\n            }\n        } else {\n            return {\n                ...query,\n                q: \"uniqueId:false\"\n            }\n\n        }\n\n        return query\n\n    }\n\n    if (query.models && favourites[query.models]) {\n        query = getFavouritesQuery(favourites[query.models])\n    }\n\n    return (\n        <DialogBase>\n            <SearchDialog query={query} search={search} {...props} />\n        </DialogBase>\n    )\n\n}\n\nFavouritesDialog.defaultProps = {\n    favourites: {\n        media: [],\n        documents: []\n    }\n}\n\nconst mapDispatchToProps = (dispatch) =>\n    bindActionCreators({\n    }, \ndispatch);\n\nconst mapStateToProps = (state) => {\n\treturn {\n        favourites: state.favourites,\n\t};\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps,\n)(FavouritesDialog);","import React from 'react';\nimport PropTypes from \"prop-types\"\nimport Dropzone from 'react-dropzone'\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Paper from '@material-ui/core/Paper';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport CloudDoneIcon from '@material-ui/icons/CloudDone';\n\nimport Typography from '@material-ui/core/Typography';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyles = makeStyles(theme => ({\n    upload: {\n        position: \"sticky\",\n        zIndex: 2,\n        bottom: 0,\n        color: \"inherit\",\n\n        minHeight: theme.spacing(16),\n\n        \"&[aria-expanded=true]\": {\n            top: 0,\n            height: \"100%\",\n\n            \"& $dropzone\": {\n                margin: 0\n            },\n\n            \"& $dropButton\": {\n                border: 0\n            }\n\n        },\n\n       \"& + *\": {\n            marginTop: theme.spacing(8),\n        }\n   \n    },\n    closeButton: {\n        position: \"absolute\",\n        zIndex: \"2\",\n        top: \"0\",\n        right: \"0\",\n        margin: theme.spacing(1),\n    },\n    dropzone: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        flexGrow: 1,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        color: \"inherit\",\n//        overflow: \"hidden\",\n        margin: theme.spacing(2),\n    },\n    dropButton: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        flexGrow: 1,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        border: \"1px solid\",\n        borderColor: theme.palette.divider,\n        backgroundColor: theme.palette.background.default,\n        backgroundColor: \"#eee\",\n        color: theme.palette.text.secondary,\n\n        \"&:hover\": {\n            cursor: \"pointer\"\n        },\n\n        \"& > *\": {\n            margin: theme.spacing(.5)\n        },\n\n    },\n    label: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"14px\",\n        fontWeight: \"normal\"\n    },\n\n}));\n\nconst DialogUpload = ({className, accept, multiple, onUpload, onCancel, currentUpload = {}, children, expanded = false, ...props}) => {\n    const { t, i18n } = useTranslation('dialog');\n    const classes = useStyles()\n\n    const handleDrop = (acceptedFiles, rejectedFiles) => {\n        onUpload && onUpload(acceptedFiles)\n        console.log('acceptedFiles', acceptedFiles)\n        console.log('rejectedFiles', rejectedFiles)\n    }\n\n    const { requested, received } = currentUpload;\n\n    let label\n\n    if (!expanded) {\n        label = t('Upload more');\n    } else if (received > 0 && requested < received) {\n        label = t('Uploading {{requested}} of {{received}}', { requested, received }) + \"...\";\n    } else {\n        label = t('Click or drop files to upload');\n    }\n\n    const ButtonClose = ({className, onClick}) => {\n        return (\n            <IconButton className={className} onClick={onClick}>\n                <CloseIcon />\n            </IconButton>\n        )\n    }\n\n    return (\n        <div className={classes.upload} aria-expanded={expanded}>\n            <Dropzone multiple={multiple} accept={accept} onDrop={handleDrop}>\n                {({getRootProps, getInputProps}) => (\n                    <div className={classes.dropzone} {...getRootProps()}>\n                        <input {...getInputProps()} />\n                        <Paper className={classes.dropButton} elevation={1} square={true}>\n                            <CloudUploadIcon className={classes.icon} />\n                            <Typography className={classes.label}>{label}</Typography>\n                        </Paper>\n                    </div>\n                )}\n            </Dropzone>\n            {expanded && <ButtonClose className={classes.closeButton} onClick={onCancel} /> }\n        </div>\n    )\n    \n}\n\nDialogUpload.propTypes = {\n    onUpload: PropTypes.func\n}\n\nDialogUpload.defaultProps = {\n    multiple: true,\n    accept: \"image/*, video/*, audio/*\",\n}\n\nexport default DialogUpload","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getQuery } from '../redux/searchById';\n\nimport DialogBase from \"./DialogBase\"\nimport DialogSearch from \"./DialogSearch\"\nimport DialogUpload from \"./DialogUpload\"\n\nimport DialogHeader from \"./DialogHeader\"\nimport DialogSection from \"./DialogSection\"\n\nimport SearchResults from \"./SearchResults\"\n\nimport qs from 'query-string';\n\nconst UploadDialog = ({schema, formData, onChange, onClose, query, upload, ...props}) => {\n    const { t, i18n } = useTranslation(['dialog']);\n    const dispatch = useDispatch()\n\n    const searchById = useSelector(state => state.searchById)\n    const uploadById = {}\n\n    const [q, setQ] = useState(\"\")\n\n    const handleQuery = (q) => {\n        setQ(q)\n    }\n\n    const handleReset = () => {\n        if (q) {\n            setQ(\"\")\n        } else if (onClose) {\n            onClose()\n        }\n    }\n\n    const search = {\n        placeholder: t(\"Search uploads\"),\n    }\n\n    // handle upload\n\n    const [uploadSession, setUploadSession] = useState(false)\n\n    const handleUpload = (acceptedFiles = []) => {\n\n        const uploadData = {\n            collectionId: query.collectionId,\n            status: \"upload\"\n        }\n\n        props.getUpload({id: upload.id, session: uploadSession, acceptedFiles, uploadData})\n\n        setUploadSession(true)\n\n    }\n    \n    // current uploads \n\n    const currentUpload = upload.id && uploadById && uploadById[upload.id];\n    const uploadModels = currentUpload && currentUpload.models \n\n    const uploadResults = uploadModels && q && uploadModels.filter((model) => { \n        const { title } = model\n\n        if (title.includes(q)) {\n            return true\n        }\n\n        return false\n    }) ||uploadModels\n\n\n    let placeholder = t(\"Search uploads\")\n\n    const tabs = uploadResults && [\n        {\n            title: t(\"media\"),\n            count: uploadResults.length             \n        }\n    ]\n\n    return (\n        <DialogBase>\n           <DialogSection>\n                <DialogSearch {...search} \n                    placeholder={placeholder}\n                    expanded={uploadResults && true}\n                    onChange={handleQuery}\n                    onReset={handleReset}\n                    \n                />\n                <DialogHeader tabs={tabs}></DialogHeader>\n                <SearchResults \n                    schema={schema}\n                    formData={formData}\n                    onChange={onChange}\n                    query={query}\n                    layout=\"uploads\"\n                    results={{\n                        ...currentUpload,\n                        uploads: uploadResults ||[],\n//                        resultsLoaded: currentUpload && currentUpload.models,\n//                        pages: pages,\n//                        page: currentPage,\n//                        nextPage: nextPage\n                    }}\n                />\n                <DialogUpload \n                    {...upload} \n                    currentUpload={currentUpload} expanded={!currentUpload} onUpload={handleUpload} onCancel={handleReset}></DialogUpload>\n            </DialogSection>\n       </DialogBase>        \n    )\n\n}\n\nUploadDialog.defaultProps = {\n    upload: {\n        id: \"/dialog/upload\",\n        accept: [\n            \"image/*\",\n        ],\n    },\n    query: {\n//        mediaType: \"*\"\n    }\n}\n\nexport default UploadDialog","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport DialogBase from \"./DialogBase\"\nimport DialogFooter from \"./DialogFooter\"\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport FavouriteIcon from '@material-ui/icons/Favorite';\nimport UploadIcon from '@material-ui/icons/CloudUpload';\nimport UploadDoneIcon from '@material-ui/icons/CloudDone';\n\nimport Badge from '@material-ui/core/Badge';\n\n\nimport SearchDialog from \"./SearchDialog\"\nimport FavoritesDialog from './FavouritesDialog';\nimport UploadDialog from \"./UploadDialog\"\n\nconst MediaDialog = ({query, favourites, uploadById, ...props}) => {\n    const { t, i18n } = useTranslation(['dialog']);\n\n    const [template, setTemplate] = useState(\"search\")\n\n    // get mediaTypes\n\n    let mediaTypes = []\n\n    if (Array.isArray(query.mediaType)) {\n        mediaTypes = query.mediaType\n    } else if (query.mediaType) {\n        mediaTypes = [query.mediaType]\n    } else if (query.models === \"media\") {\n        mediaTypes = ['image*','video*','audio*']\n    }\n\n    // get upload\n\n    let upload = {\n        id: \"/dialog/upload\",\n        accept: []\n    }\n\n    mediaTypes && mediaTypes.map(mediaType => {\n\n        if (mediaType.includes('image')) {\n            upload.accept.push('image/*')\n        }\n    \n        if (mediaType.includes(\"video\")) {\n            upload.accept.push('video/*')\n        }\n    \n        if (mediaType.includes(\"audio\")) {\n            upload.accept.push('audio/*')\n        }\n    \n    })    \n\n    const mediaFavourites = favourites && favourites[\"media\"] && favourites[\"media\"].length\n    const mediaUploads = uploadById && uploadById[upload.id] && uploadById[upload.id].models\n\n    const FavouriteBadge = () => {\n        return (\n            <Badge badgeContent={2} variant=\"dot\" invisible={!mediaFavourites && true} color=\"primary\">\n                <FavouriteIcon />\n            </Badge>\n        )\n    }\n\n    const UploadBadge = () => {\n        return (\n            <Badge badgeContent={2} variant=\"dot\" invisible={!mediaUploads && true} color=\"primary\">\n                { mediaUploads && <UploadDoneIcon /> || <UploadIcon /> }\n            </Badge>\n        )\n    }\n\n    const menu = [\n        {\n            label: t(\"Search\"),\n            icon: <SearchIcon />,\n            onClick: () => setTemplate('search')\n        },\n        {\n            label: t(\"Favorites\"),\n            icon: <FavouriteBadge />,\n            onClick: () => setTemplate('favourites')\n        },\n        {\n            label: t(\"Upload\"),\n            icon: <UploadBadge />,\n            onClick: () => setTemplate('upload')\n        }\n    ]\n\n    return (\n        <DialogBase>\n            <DialogFooter menu={menu} />\n            { template === \"search\" && <SearchDialog query={query} {...props} /> }\n            { template === \"favourites\" && <FavoritesDialog query={query} favourites={favourites} {...props} /> }\n            { template === \"upload\" && <UploadDialog upload={upload} query={query} {...props} /> }\n        </DialogBase>\n    )\n\n}\n\nMediaDialog.defaultProps = {\n    query: {\n        models: \"media\",\n        mediaType: \"*\"\n    }\n}\n\nconst mapDispatchToProps = (dispatch) =>\n    bindActionCreators({\n    }, \ndispatch);\n\nconst mapStateToProps = (state) => {\n\treturn {\n        favourites: state.favourites,\n        uploadById: state.uploadById\n\t};\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps,\n)(MediaDialog);","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport SearchDialog from \"./SearchDialog\"\n\nconst DocumentsDialog = ({schema, formData, ...props}) => {\n\n    return (\n        <SearchDialog schema={schema} formData={formData} {...props} />\n    )\n\n}\n\nDocumentsDialog.defaultProps = {\n    query: {\n        models: \"documents\",\n        documentType: \"*\"\n    }\n}\n\nexport default DocumentsDialog","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getApp } from '../redux/app';\n\nimport MediaDialog from \"./MediaDialog\"\nimport DocumentsDialog from \"./DocumentsDialog\"\nimport SearchDialog from \"./SearchDialog\"\n\nimport { utils } from '@kit-ui/schema';\nconst { getUiOptions } = utils\n\nconst templates = {\n    \"media\": MediaDialog,\n    \"documents\": DocumentsDialog,\n    \"search\": SearchDialog\n}\n\nconst EditorDialog = (props) => {\n    const dispatch = useDispatch()\n\n    console.log(\"DIALOG\", props)\n\n    \n\n    const { schema = {}, uiSchema = {}, onChange, onClose } = props;\n\n    const [formData, setFormData] = useState(props.formData)\n\n    useEffect(() => {\n        setFormData(props.formData)\n    }, [props.formData])\n\n    const _onChange = (formData) => {\n        setFormData(formData)\n        onChange(formData);\n    }\n\n    const app = useSelector(state => state.app)\n\n    let itemSchema;\n\n    if (schema && schema.type === \"array\") {\n        itemSchema = schema.items\n    } else if (schema) {\n        itemSchema = schema\n    }\n\n    const getReferenceQuery = (query) => {\n        const documentSchema = itemSchema && itemSchema.properties && itemSchema.properties.reference\n        const documentType = documentSchema && documentSchema.properties.documentType\n    \n        query.documentType = \"*\"\n    \n        if (documentType && documentType.enum) {\n            query.documentType = documentType.enum\n        }\n    \n        if (documentType && documentType.default) {\n            query.documentType = documentType.default\n        }\n\n        return {\n            ...query,\n            models: \"documents\"\n        } \n        \n    }\n\n    const getMediaQuery = (query) => {\n        const mediaSchema = itemSchema && itemSchema.properties && itemSchema.properties.media\n        const mediaType = mediaSchema && mediaSchema.properties.mediaType\n    \n//        query.mediaType = \"*\"\n\n        if (mediaType && mediaType.enum) {\n            query.mediaType = mediaType.enum\n        }\n    \n        if (mediaType && mediaType.default) {\n            query.mediaType = mediaType.default\n        }\n\n        return {\n            ...query,\n            models: \"media\"\n        }\n        \n    }\n\n    const getQuery = () => {\n\n        const uiOptions = uiSchema && getUiOptions(uiSchema)\n\n        const { dialog } = uiOptions\n\n        if (dialog && dialog.query) {\n            return {\n                ...dialog.query,\n                siteId: app.siteId,\n                collectionId: app.collectionId\n            }\n        }\n\n\n        if (itemSchema.properties && itemSchema.properties.referenceId) {\n            return getReferenceQuery({\n                siteId: app.siteId,\n                collectionId: app.collectionId\n            })\n        }\n\n        if (itemSchema.properties && itemSchema.properties.mediaId) {\n            return getMediaQuery({\n                siteId: app.siteId,\n                collectionId: app.collectionId\n            })\n        }\n\n        return {\n        }\n\n    }\n\n    const query = getQuery()\n    const template = query.models;\n\n    const DialogTemplate = template && templates[template]; // ||templates[\"search\"]\n\n    if (!DialogTemplate) {\n        return (\n            <div>\n                Missing template for {JSON.stringify(props)}.\n                <button onClick={onClose}>Close</button>\n            </div>\n        )\n    }\n\n    return (\n        <DialogTemplate query={query} schema={schema} formData={formData} onChange={_onChange} onClose={onClose} /> \n    )\n\n}\n\nexport default EditorDialog","import React from \"react\"\n\nimport Dialog from \"../Dialog/Dialog\"\n\n\nconst EditorDialog = (props) => {\n\n    const { expanded, schema = {}, uiSchema = {}, formData = {}, formContext, onChange, onClose } = props\n\n    if (!expanded) {\n        return false\n    }\n\n    return <Dialog {...props} />\n\n    const _addImage = () => {\n        onChange && onChange({\n            mediaId: 1,\n            media: {\n                mediaType: \"image\",\n                imageUrl: \"https://akamai.vgc.no/drfront/images/2020/09/22/c=144,24,404,232;w=362;h=208;557008.jpg\"\n            }\n        })\n    }\n\n    return (\n        <div>\n            {JSON.stringify(schema)}\n            {JSON.stringify(formData)}\n\n            <button onClick={() => _addImage()}>Add img</button>\n\n            <button onClick={() => onClose()}>Close</button>\n\n        </div>\n    )\n\n\n}\n\nexport default EditorDialog","import React from \"react\"\nimport { useSelector, useDispatch } from 'react-redux';\nimport { receiveEdit, receiveCurrentId, requestDialog, receiveDialog } from '../redux/editor';\n\nconst EditorPreview = ({formData = {}, formContext}) => {\n    \n    return (\n        <div>\n            {JSON.stringify(formData)}\n        </div>\n    )\n\n\n}\n\nexport default EditorPreview","import React, { useRef, useState, useEffect } from \"react\"\nimport { SchemaBase } from \"@kit-ui/schema\"\nimport { useHistory } from \"react-router-dom\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { receiveEdit, receiveCurrentId, requestDialog, receiveDialog } from '../redux/editor';\n\nimport registry from \"../components/registry\"\n\nimport EditorDialog from \"./EditorDialog\"\nimport EditorPreview from \"./EditorPreview\"\n\nconst Editor = ({schema, uiSchema, onSubmit, ...props}) => {\n\n    let history = useHistory();\n\n    const editorRef = useRef(null)\n\n    const dispatch = useDispatch()\n\n    const editor = useSelector(state => state.editor)\n\n    const { formData, currentId } = editor\n\n//    const formData = useSelector(state => state.editor.formData)\n//    const currentId = useSelector(state => state.editor.currentId)\n\n    const onChange = ({formData}) => {\n        console.log('onChange', formData)\n        dispatch(receiveEdit(formData))\n\n        //        setFormData(formData)\n    }\n\n    const [languages, setLanguages] = useState([\"en\"])\n    const [currentLocale, setCurrentLocale] = useState(null)\n\n    const _onLocale = (locale) => {\n\n    }\n\n    // hashId toggling\n\n    const hashId = props.location.hash && props.location.hash.replace('#','') ||null\n\n    useEffect(() => {\n        dispatch(receiveCurrentId({currentId: hashId}))\n    }, [hashId])\n\n    const _onCurrentId = (currentId) => {\n        console.log('editor:onCurrentId', currentId);\n        dispatch(receiveCurrentId({currentId: currentId}))\n        const hashUrl = props.location.pathname + \"#\" + currentId; \n        history.replace(hashUrl);\n\n    }\n\n    const _onToggle = ({id, ...props}) => {\n        console.log('onToggle', props)\n\n        let parentId = id.split('_');\n        parentId.pop();\n        parentId = parentId.join('_');\n        \n        let expandId = undefined\n\n        if (id && currentId && currentId.startsWith(id)) {\n            expandId = parentId;            \n        } else {\n            expandId = id;\n        }\n\n        _onCurrentId(expandId)\n\n    }\n    \n    const _onSelect = (props) => {\n        console.log(\"select\", props)\n    }\n\n    const _onExpand = ({id}) => {\n        console.log('onExpand', props)\n        _onCurrentId(id)\n    }\n\n    const _onCollapse = ({id}) => {\n        console.log('onCollapse', props)\n        _onToggle({id})\n    }\n\n//    const dialog = useSelector(state => state.editor.dialog)\n    const [dialog, setDialog] = useState({})\n\n    const _onDialog = (props) => {\n\n        const {id, formData, schema, uiSchema, onChange} = props\n\n        console.log(\"Editor:onDialog\", props)\n\n        if (dialog && dialog.id) {\n//            dispatch(requestDialog())\n            setDialog({})\n        } else {\n            setDialog({\n                id: id,\n                formData: formData,\n                schema: schema,\n                uiSchema: uiSchema,\n                onChange: onChange,\n                expanded: true\n            })\n            /*\n            dispatch(receiveDialog({\n                ...props,\n                expanded: true\n            }))\n            */\n        }\n\n    }\n\n    // formContext\n\n    const formContext = {\n        isLoading: editor.isLoading,\n        isSaving: editor.isSaving,\n\n        languages: languages,\n        currentLocale: currentLocale,\n        onLocale: _onLocale,\n\n        currentId: currentId,\n        onToggle: _onToggle,\n\n        onExpand: _onExpand,\n        onCollapse: _onCollapse,\n\n        onEdit: _onExpand,\n        onSave: _onCollapse,\n\n        onSubmit: (status) => onSubmit && onSubmit({formData: {...formData, status: status ||formData.status}}), // (e) => editorRef && editorRef.current && editorRef.current.onSubmit(e),\n\n        preview: {\n            template: props.preview && props.preview.template ||EditorPreview,\n            formData: formData,\n            formContext: {\n                currentId,\n                onToggle: _onToggle\n            }\n        },\n\n        ...props.formContext,\n\n        onDialog: _onDialog,\n\n        sidebar: {\n            ...dialog,\n            onClose: () => _onDialog({}),\n            template: EditorDialog\n        },\n\n    }    \n\n    return (\n        <SchemaBase\n            {...registry}\n            ref={editorRef}\n            schema={schema}\n            uiSchema={uiSchema}\n            formData={formData}\n            formContext={formContext}\n            onChange={onChange}\n            onSubmit={onSubmit}\n            />\n    )\n\n\n}\n\nEditor.defaultProps = {\n    schema: {},\n    formData: {},\n    formContext: {}\n}\n\nexport default Editor","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getAppLayout } from '../redux/app';\n\nimport { AppLoader } from \"@kit-ui/admin\"\nimport { EditorIcon } from \"@kit-ui/icons\"\n\nconst EditorLoader = ({formData = {}, schema, uiSchema, children}) => {\n    const app = useSelector(state => state.app)\n    const editor = useSelector(state => state.editor)\n\n    const title = formData.title ||app && app.title || \"Editor\"\n    const description = app.isLoading && \"Loading app\" || editor.isLoading && \"Loading editor\" ||!schema && \"Loading schema\" ||!uiSchema && \"Loading uiSchema\" ||\"Editor loaded\"\n\n    const isLoading = app.isLoading || editor.isLoading || !schema || !uiSchema || false\n    const isSaving = editor.isSaving\n\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        dispatch(getAppLayout(\"editor\"))\n    }, [isLoading, isSaving])\n\n    return (\n        <AppLoader\n            isLoading={isLoading}\n            icon={<EditorIcon />}\n            title={title}\n            description={description}>\n                {children}\n        </AppLoader>\n)\n\n}\n\nEditorLoader.defaultProps = {\n}\n\nexport default EditorLoader","import schema from \"./schema\";\nimport uiSchema from \"./uiSchema\";\nimport formData from \"./formData\"\n//import PreviewTemplate from \"@frontend-components/admin/lib/components/AppKp/preview/Article\"\n\nexport default {\n    id: 1,\n    schemaType: \"documents\",\n    name: 'article',\n    schema: schema,\n    uiSchema: uiSchema,\n    formData: formData,\n    preview: {\n//        template: PreviewTemplate\n    }\n}","import section from './section/schema'\n\nexport default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"locale\": {\n            \"type\": \"string\",\n            \"default\": \"no\"\n        },\n        \"schemaId\": {\n            \"type\": \"number\",\n            \"default\": 1\n        },\n        \"title\": {\n            \"type\": \"string\"\n        },\n        \"content\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"importId\": {\n                    \"type\": \"string\",\n                },\n                \"location\": {\n                    \"type\": \"geopoint\"\n                },\n                \"keywords\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"string\",\n                        \"enum\": [],\n                    },\n                    \"uniqueItems\": true\n                },\n                \"license\": {\n                    \"type\": \"string\"\n                },\n                \"titleImage\": {\n                    \"type\": \"image\",\n                    \"properties\": {\n                        \"content\": {\n                            \"type\": \"object\",\n                            \"properties\": {\n                                \"headline\": {\n                                    \"type\": \"localizedString\"\n                                },\n                                \"caption\": {\n                                    \"type\": \"localizedString\"\n                                }\n                            }\n                        }\n                    }\n                },\n                \"title\": {\n                    \"type\": \"localizedString\"\n                },\n                \"leadtext\": {\n                    \"type\": \"localizedString\"\n                },\n                \"author\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"name\": {\n                            \"type\": \"string\"\n                        },\n                        \"description\": {\n                            \"type\": \"string\"\n                        }\n                    }\n                },\n                \"bodytext\": {\n                    \"type\": \"localizedString\"\n                },\n                \"sections\" : {\n                    \"type\": \"array\",\n                    \"items\": section\n                },\n                \"isPartOf\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"reference\",\n                        \"documentType\": \"topic\",\n                        \"referenceType\": \"articleIsPartOf\",\n                        \"_reverseReferenceType\": \"topicHasArticles\",\n                        \"_reverseReference\": \"hasArticles[]\"\n                    }\n                }\n            }\n        }\n    }\n}","import header from \"./header/uiSchema\";\nimport body from \"./body/uiSchema\";\nimport isPartOf from \"./isPartOf/uiSchema\";\nimport settings from \"./settings/uiSchema\";\nimport uiPreview from \"./uiPreview\"\n\nexport default {\n    \"ui:field\": \"pageEditor\",\n    \"ui:collapsible\": true,\n    \"ui:preview\": uiPreview,\n    \"ui:fieldset\": [\n        \"content\",\n        \"settings\",\n    ],\n    \"settings\": settings,\n    \"content\": {\n        \"ui:layout\": \"pageContent\",\n        \"ui:fieldset\": [\n            \"header\",\n            \"body\",\n            \"isPartOf\"\n        ],\n        \"header\": header,\n        \"body\": body,\n        \"isPartOf\": isPartOf\n    }\n}","export default {\n  \"select\": {\n    \"imageUrl\" : \"imageUrl\",\n    \"title\" : \"title\",\n    \"description\" : \"description\",\n    \"metadata\" : \"metadata\",\n    \"typeLabel\": \"typeLabel\"\n  },\n  prepare({formData, formContext}) {\n    let { documentType, title, content, description } = formData\n\n    const defaultLocale = formContext && formContext.defaultLocale\n    const currentLocale = formContext && formContext.currentLocale\n    const locale = defaultLocale ||currentLocale ||formData.locale\n    const localeId =  \"locale:\" + locale\n\n    let metadata = []\n\n    const titleImage = content && content.titleImage\n    const imageUrl = titleImage && titleImage.media && titleImage.media.imageUrl\n    \n    if (content) {\n\n        title = content.title && content.title[localeId]\n        description = content.description && content.description[localeId]\n\n        const { location, sections, isPartOf } = content\n\n        if (location && location.lat && location.lng) {\n            \n            if (location.address) {\n                metadata.push(location.address)\n            } else {\n                metadata.push(\"Sted\")\n            }\n            \n        }\n\n        if (sections && sections.length) {\n            metadata.push(sections.length + ' seksjoner')\n        }\n\n        if (isPartOf && isPartOf.length) {\n            metadata.push(isPartOf.length + ' tema')\n        }\n        \n                \n    }\n\n    return {\n        imageUrl: imageUrl,\n        untitled: \"Ny artikkel\",\n        title: title || \"Uten tittel\",\n        description: description,\n        metadata: metadata,\n        typeLabel: documentType\n    }\n    \n  }\n  \n}","export default {\n    \"ui:field\": \"pageSettings\",\n    \"ui:nav\": true,\n    \"ui:fieldset\": [\n        \"metadata\",\n        \"geocoder\",\n    ],\n    \"metadata\": {\n        \"ui:layout\": \"section\",\n        \"ui:icon\": \"label\",\n        \"ui:title\": \"Metadata\",\n        \"ui:fieldset\": [\n            \"content\"\n        ],\n        \"content\": {\n            \"ui:fieldset\": [\n                \"keywords\",\n                \"license\",\n                \"location\"\n            ],\n            \"keywords\": {\n                \"ui:widget\": \"tags\",\n                \"ui:title\": \"Nkkelord\",\n                \"ui:help\": \"Beskrivende stikkord.\",\n            },\n            \"license\": {\n//                \"ui:widget\": \"selectLicense\",\n                \"ui:title\": \"Lisens\",\n                \"ui:help\": \"Velg en lisens for dette innholdet.\",\n            },\n            \"location\": {\n                \"ui:layout\": \"thumbnail\",\n                \"ui:options\": {\n                    \"minWidth\": 200,\n                    \"minHeight\": 200\n                },\n                \"ui:fieldset\": [\n                    \"map\",\n                    \"info\"\n                ],\n                \"map\": {\n                    \"ui:fieldset\": [\n                        \"lat\",\n                        \"lng\",\n                        \"zoom\"\n                    ],\n                    \"ui:options\": {\n                        \"minWidth\": 200,\n                        \"minHeight\": 200\n                    },\n                    \"ui:layout\": \"geopointPreview\"\n                },\n                \"info\": {\n                    \"ui:fieldset\": [\n                        \"lat\",\n                        \"lng\",\n                        \"zoom\"\n                    ],\n                }\n            }\n        }\n    },\n    \"geocoder\": {\n        \"ui:layout\": \"section\",\n        \"ui:title\": \"Lokasjon\",\n        \"ui:icon\": \"near_me\",\n        \"ui:options\": {\n            \"position\": \"absolute\",\n            \"padding\": 2,\n            \"grid\": false\n        },\n        \"ui:fieldset\": [\n            \"content\"\n        ],\n        \"content\": {\n            \"ui:fieldset\": [\n                \"location\"\n            ],\n            \"location\": {\n                \"ui:field\": \"geopoint\",\n                \"ui:layout\": \"geocoder\",\n            }\n        }\n    }\n}","export default {\n    \"ui:fieldset\": [\n        \"titleImage\",\n        \"content\",\n    ],\n    \"ui:layout\": \"section\",\n    \"ui:options\" : {\n        \"collapsible\": true,\n        \"expanded\": true,\n        \"grid\": true,\n        \"spacing\": 2\n    },\n    \"ui:title\": \"Header\",\n    \"ui:preview\": {\n        \"select\": {\n            \"description\": \"description\"\n        },\n        prepare({formData, formContext}) {\n            const localeId = \"locale:\" + formContext.currentLocale\n            const description = formData.title && formData.title[localeId]  \n    \n            return {\n                description: description\n            }\n    \n        }\n    },\n    \"titleImage\": {\n        \"ui:xs\": 4,\n        \"ui:field\": \"media\",\n//        \"ui:minHeight\": 240,\n        \"ui:options\": {\n            \"editable\": true,\n            \"hotspot\": true\n        },\n        \"ui:buttons\": [\n            {\n                \"title\": \"Finn hovedbilde\",\n                \"icon\": \"search\",\n                \"type\": \"sidebar\"\n            },\n        ],\n        \"ui:fieldset\": [\n            \"media\",\n            \"content\",\n        ],\n        \"content\": {\n            \"ui:title\": \"Innhold\",\n            \"ui:options\": {\n                \"grid\": true,\n                \"padding\": 2,\n                \"spacing\": 2\n            },\n            \"ui:fieldset\": [\n                \"headline\",\n                \"caption\",\n            ],\n            \"headline\": {\n                \"ui:title\": \"Bildetekst, overskrift\"\n            },\n            \"caption\": {\n                \"ui:title\": \"Bildetekst\",\n                \"ui:widget\": \"textarea\"\n            }\n        }\n    },\n    \"content\": {\n        \"ui:xs\": 8,\n        \"ui:fieldset\": [\n            \"title\",\n            \"leadtext\",\n            \"author\"\n        ],\n        \"ui:options\": {\n            \"spacing\": 2,\n        },\n        \"title\": {\n            \"ui:title\": \"Tittel\"\n        },\n        \"leadtext\": {\n            \"ui:title\": \"Ingress\",\n            \"ui:widget\": \"textarea\"\n        },\n        \"author\": {\n            \"fieldset\": [\n                \"name\",\n                \"description\"\n            ],\n            \"name\": {\n                \"ui:title\": \"Forfatter\"\n            },\n            \"description\": {\n                \"ui:title\": \"Forfatter, beskrivelse\",\n            },\n        }        \n    }\n\n}","import section from \"../section/uiSchema\";\n\nexport default {\n    \"ui:fieldset\": [\n        \"sections\"\n    ],\n    \"sections\": {\n        \"ui:layout\": \"section\",\n        \"ui:title\": \"Innhold\",\n        \"ui:preview\": {\n            \"select\": {\n                \"description\": \"description\" \n            },\n            prepare({formData = []}) {\n    \n                let description;\n    \n                if (formData.length && formData.length === 1) {\n                    description = formData.length + \" seksjon\"\n                } else if (formData.length) {\n                    description = formData.length + \" seksjoner\"\n                } else {\n                    description = \"Ingen seksjoner\"\n                }\n    \n                return {\n                    \"description\": description\n                }\n            }\n        },\n        \"ui:options\" : {\n            \"collapsible\": true,\n            \"expanded\": true,\n            \"draggable\": true,\n            \"spacing\": 2,\n        },\n        \"ui:buttons\" : [\n            {\n                \"icon\": \"subject\",\n                \"title\" : \"Tekst\",\n                \"item\" : {\n                    \"sectionType\" : \"text\"\n                }\n            },\n            {\n                \"icon\": \"insert_photo\",\n                \"title\" : \"Media\",\n                \"item\" : {\n                    \"sectionType\" : \"media\"\n                }\n            },\n            {\n                \"icon\": \"fingerprint\",\n                \"title\" : \"DM\",\n                \"item\" : {\n                    \"sectionType\" : \"dm\"\n                }\n            },\n            {\n                \"icon\": \"insert_link\",\n                \"title\" : \"Lenker\",\n                \"item\" : {\n                    \"sectionType\" : \"links\"\n                }\n            },\n            {\n                \"icon\": \"attach_file\",\n                \"title\" : \"Vedlegg\",\n                \"item\" : {\n                    \"sectionType\" : \"attachments\"\n                }\n            },\n            {\n                \"icon\": \"format_quote\",\n                \"title\" : \"Sitat\",\n                \"item\" : {\n                    \"sectionType\" : \"quote\"\n                }\n            }\n        ],\n        \"items\": section\n    }\n}","import media from \"./mediaUi\"\nimport attachments from \"./attachmentsUi\"\nimport links from \"./linksUi\"\nimport ekultur from \"./ekulturUi\"\nimport uiPreview from \"./uiPreview\"\n\nexport default {\n    \"ui:layout\": \"section\",\n    \"ui:preview\": uiPreview,\n    \"ui:options\": {\n        \"editable\": true,\n        \"hideable\": true,\n        \"removable\": true,\n        \"spacing\": 2\n    },\n    \"ui:settings\": [\n        \"sectionType\",\n        \"sectionLayout\"\n    ],\n    \"sectionType\": {\n        \"ui:enumIcons\": {\n            \"text\": \"subject\",\n            \"media\": \"insert_photo\",\n            \"links\": \"insert_link\",\n            \"attachments\": \"attach_file\",\n            \"quote\": \"format_quote\",\n            \"dm\": \"fingerprint\"\n        }\n    },\n    \"ui:fieldset\": [\n        \"head\",\n        \"body\"\n    ],\n    \"head\": {\n        \"ui:fieldset\": [\n            \"title\",\n            \"titleHidden\",\n            \"description\"\n        ],\n        \"ui:options\": {\n            \"grid\": true,\n            \"spacing\": 2\n        },\n        \"title\": {\n            \"ui:xs\": 9,\n            \"ui:label\": false,\n            \"ui:placeholder\": \"Tittel\"\n        },\n        \"titleHidden\": {\n            \"ui:gridCols\": 3,\n            \"ui:title\": \"Skjul tittel\",\n            \"ui:widget\": \"switch\"\n        },\n        \"description\" : {\n            \"ui:gridCols\": 12,\n            \"ui:title\": \"Beskrivelse\",\n            \"ui:widget\" : \"textarea\",\n        }\n    },\n    \"body\": {\n        \"ui:fieldset\": [\n            \"media\",\n            \"attachments\",\n            \"references\",\n            \"bodytext\",\n            \"links\",\n            \"quote\",\n            \"cite\"\n        ],\n        \"ui:options\": {\n            \"spacing\": 2\n        },\n        \"media\": media,\n        \"attachments\": attachments,\n        \"references\": ekultur,\n        \"bodytext\" : {\n            \"ui:title\": \"Brdtekst\",\n            \"ui:widget\" : \"texteditor\"\n        },\n        \"quote\" : {\n            \"ui:title\": \"Sitat\",\n            \"ui:widget\" : \"textarea\"\n        },\n        \"cite\" : {\n            \"ui:title\": \"Byline\",\n        },\n        \"links\" : links\n    }\n}","export default {\n    \"select\": {\n        \"title\": \"title\",\n        \"untitled\": \"untitled\",\n        \"description\": \"description\"\n    },\n    prepare({formData, formContext}) {\n        const localeId = \"locale:no\"\n        const title = formData.title && formData.title[localeId]\n\n        const sectionType = formData.sectionType\n        const untitled = \"Untitled \" + sectionType\n\n        const {bodytext, media, references, links, attachments, cite, quote } = formData\n\n        let description;\n\n        if (sectionType === \"text\") {\n            description = bodytext && bodytext[localeId]\n        }\n\n        if (sectionType === \"media\") {\n            description = media && media.length + \" media\"\n        }\n\n        if (sectionType === \"dm\") {\n            description = references && references.length + \" referanser\"\n        }\n\n        if (sectionType === \"links\") {\n            description = links && links.length + \" lenker\"\n        }\n\n        if (sectionType === \"attachments\") {\n            description = attachments && attachments.length + \" vedlegg\"\n        }\n\n        if (sectionType === \"quote\") {\n            description = []\n\n            cite && description.push(cite)\n            quote && quote[localeId] && description.push(quote[localeId])\n\n            description = description.join(\": \")\n        }\n\n        return {\n            title: title,\n            untitled: untitled,\n            description: description\n        }\n\n    }\n}","export default {\n    \"ui:title\": \"Media\",\n    \"ui:options\": {\n        \"draggable\": true\n    },\n    \"ui:sidebar\": {\n        \"query\": {\n            \"models\": \"media\",\n            \"mediaType\": [\"image\",\"video/*\",\"audio/*\",\"youtube\",\"vimeo\",\"sketchfab\"]\n        }\n    },\n    \"ui:buttons\": [\n        {\n            \"type\": \"sidebar\",\n            \"icon\": \"search\",\n            \"title\": \"Finn media\"\n        }\n    ],\n    \"items\": {\n        \"ui:layout\": \"module\",\n        \"ui:options\": {\n            \"editable\": true,\n            \"hideable\": true\n        },\n        \"ui:settings\": [\n            \"mediaSize\",\n            \"mediaFormat\"\n        ],\n        \"ui:fieldset\": [\n            \"content\",\n            \"media\"\n        ],\n        \"content\": {\n            \"ui:title\": \"Innhold\",\n            \"ui:options\": {\n                \"grid\": true,\n                \"padding\": 2,\n                \"spacing\": 2\n            },\n            \"ui:fieldset\": [\n                \"headline\",\n                \"caption\",\n            ],\n            \"headline\": {\n                \"ui:title\": \"Bildetekst, overskrift\"\n            },\n            \"caption\": {\n                \"ui:title\": \"Bildetekst\",\n                \"ui:widget\": \"textarea\"\n            }\n        }\n    }\n}","export default {\n    \"ui:title\": \"Vedlegg\",\n    \"ui:options\": {\n        \"draggable\": true\n    },\n    \"ui:sidebar\": {\n        \"query\": {\n            \"models\": \"media\",\n            \"mediaType\": [\"misc\"]\n        }\n    },\n    \"ui:buttons\": [\n        {\n            \"type\": \"sidebar\",\n            \"icon\": \"search\",\n            \"title\": \"Finn vedlegg\"\n        },\n    ],\n    \"items\": {\n        \"ui:layout\": \"module\",\n        \"ui:options\": {\n            \"editable\": true,\n            \"hideable\": true\n        },\n        \"ui:fieldset\": [\n            \"media\"\n        ],\n        \"content\": {\n            \"ui:title\": \"Innhold\",\n            \"ui:options\": {\n                \"grid\": true,\n                \"padding\": 2,\n                \"spacing\": 2\n            },\n            \"ui:fieldset\": [\n                \"headline\",\n                \"caption\",\n            ],\n            \"headline\": {\n                \"ui:title\": \"Bildetekst, overskrift\"\n            },\n            \"caption\": {\n                \"ui:title\": \"Bildetekst\",\n                \"ui:widget\": \"textarea\"\n            }\n        }\n    }\n}","export default {\n    \"ui:title\": \"Referanser\",\n    \"ui:options\": {\n        \"draggable\": true\n    },\n    \"ui:sidebar\": {\n        \"query\": {\n            \"models\": \"documents\",\n            \"documentType\": \"ekultur\"\n        }\n    },\n    \"ui:buttons\": [\n        {\n            \"type\": \"sidebar\",\n            \"icon\": \"search\",\n            \"title\": \"Finn referanse\"\n        },\n    ],\n    \"items\": {\n        \"ui:layout\": \"module\",\n        \"ui:preview\": {\n            \"select\": {\n                \"imageUrl\": \"imageUrl\",\n                \"title\": \"title\"\n            },\n            prepare({formData}) {\n                const { imageUrl, title } = formData.reference;\n\n                return {\n                    imageUrl: imageUrl,\n                    title: title\n                }\n\n            }\n        }\n    }\n}","export default {\n    \"ui:title\": \"Lenker\",\n    \"ui:options\": {\n        \"draggable\": true\n    },\n    \"ui:buttons\": [\n        {\n            \"type\": \"add\",\n            \"title\": \"Legg til\"\n        }\n    ],\n    \"items\": {\n        \"ui:preview\": {\n            \"select\": {\n                \"description\": \"description\"\n            },\n            prepare({formData}) {\n                return {\n                    description: formData.url\n                }\n            }\n        },\n        \"ui:layout\": \"module\",\n        \"ui:options\": {\n            \"editable\": true,\n            \"hideable\": true\n        },\n        \"ui:fieldset\": [\n            \"content\",\n        ],\n        \"content\": {\n            \"ui:options\": {\n                \"grid\": true,\n                \"spacing\": 2\n            },\n            \"ui:fieldset\": [\n                \"title\",\n                \"url\"\n            ],\n            \"title\": {\n                \"ui:title\": \"Tittel\"\n            },\n            \"url\": {\n                \"ui:title\": \"URL\",\n            }\n        }\n    }\n}","export default {\n    \"ui:layout\": \"section\",\n    \"ui:title\": \"Er en del av\",\n    \"ui:preview\": {\n        \"select\": {\n            \"description\": \"description\" \n        },\n        prepare({formData = []}) {\n\n            let description;\n\n            if (formData.length) {\n                description = formData.length + \" tema\"\n            } else {\n                description = \"Ingen tema\"\n            }\n\n            return {\n                \"description\": description\n            }\n        }\n    },\n    \"ui:options\" : {\n        \"draggable\": true,\n        \"collapsible\": true,\n    },\n    \"ui:buttons\": [\n        {\n            \"type\": \"sidebar\",\n            \"icon\": \"search\",\n            \"title\": \"Finn tema\"\n        },\n        {\n            \"title\": \"Legg til\"\n        }\n    ]\n}","import documentType from \"./documentType/schema\"\nimport links from \"./links/schema\"\nimport linksLayout from \"./linksLayout/schema\"\n\nexport default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"documentType\": documentType,\n        \"locale\": {\n            \"type\": \"string\",\n            \"default\": \"no\"\n        },\n        \"parentId\": {\n            \"type\": \"string\"\n        },\n        \"schemaId\": {\n            \"type\": \"number\",\n            \"default\": 1\n        },\n        \"title\": {\n            \"type\": \"string\"\n        },\n        \"content\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"importId\": {\n                    \"type\": \"string\",\n                },\n                \"title\": {\n                    \"type\": \"localizedString\"\n                },\n                \"titleImage\": {\n                    \"type\": \"image\"\n                },\n                \"leadtext\": {\n                    \"type\": \"localizedString\"\n                },\n                \"bodytext\": {\n                    \"type\": \"localizedString\"\n                },\n                \"mapLayout\": {\n                    \"type\": \"string\",\n                    \"enum\": [\"default\",\"roundtrip\"],\n                    \"default\": \"default\"\n                },\n                \"mediaLayout\": {\n                    \"type\": \"string\",\n                    \"enum\": [\"gallery\",\"autoplay\"],\n                    \"default\": \"gallery\"\n                },\n                \"annotateLayout\": {\n                    \"type\": \"string\",\n                    \"enum\": [\"imagemap\",\"legends\"],\n                    \"default\": \"imagemap\"\n                },\n                \"annotateColor\": {\n                    \"type\": \"color\",\n                    \"enum\": [\"red\",\"green\",\"blue\",\"black\",\"white\"]\n                },\n                \"backgroundImage\": {\n                    \"type\": \"image\",\n                    \"annotations\": true,\n                    \"cropdata\": true,\n                    \"filters\": [\"opacity\"],\n                },\n                \"parallaxImage\": {\n                    \"type\": \"image\",\n                    \"cropdata\": true,\n                    \"filters\": [\"opacity\"],\n                },\n                \"linksLayout\": linksLayout,\n                \"links\": links,\n                \"isPartOf\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"reference\",\n                        \"documentType\": \"presentation\",\n                        \"referenceType\": \"pageIsPartOf\",\n                        \"_reverseReferenceType\": \"presentationHasPages\",\n                        \"_reverseReference\": \"hasPages[]\"\n                    }\n                }\n\n            }\n        }\n    }\n}","export default {\n    \"type\": \"string\",\n    \"enum\": [\n        \"page/topic\",\n        \"page/map\"\n    ],\n    \"enumNames\": [\n        \"Tema\",\n        \"Kart\"\n    ]\n}","export default {\n    \"type\": \"string\",\n    \"enum\": [\n        \"list\",\n        \"mosaic\",\n        \"imagelegend\",\n        \"imagemap\",\n        \"gallery\",\n        \"autoplay\",\n        \"timeline\"\n    ],\n    \"enumNames\": [\n        \"Liste\",\n        \"Mosaikk\",\n        \"Bildeforklaring\",\n        \"Bildekart\",\n        \"Mediagalleri\",\n        \"Autoplay\",\n        \"Tidslinje\"\n    ],\n    \"default\" : \"list\"\n}","import items from \"./items\"\n\nexport default {\n    \"type\": \"array\",\n    \"items\": items\n}","export default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"referenceId\": {\n            \"type\": \"string\"\n        },\n        \"referenceType\": {\n            \"type\": \"string\",\n            \"default\": \"pageLink\"\n        },\n        \"reference\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"uniqueId\": {\n                    \"type\": \"string\"\n                },\n                \"documentType\": {\n                    \"type\": \"string\"\n                }\n            }\n        },\n        \"mediaId\": {\n            \"type\": \"string\"\n        },\n        \"media\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"uniqueId\": {\n                    \"type\": \"string\"\n                }\n            }\n        },\n        \"imageFilters\": {\n            \"type\": \"imageFilters\"\n        },\n        \"imageCropdata\": {\n            \"type\": \"imageCropdata\"\n        },\n        \"imageFocalpoint\": {\n            \"type\": \"imageFocalpoint\"\n        },\n        \"runningHead\": {\n            \"type\": \"localizedString\"\n        },\n        \"title\": {\n            \"type\": \"localizedString\"\n        },\n        \"titleColor\": {\n            \"type\": \"string\",\n            \"format\": \"color\",\n            \"enum\": [\"black\",\"white\"],\n            \"default\": \"black\"\n        },\n        \"titleSize\": {\n            \"type\": \"string\",\n            \"enum\": [\"small\",\"medium\",\"large\"],\n            \"default\": \"medium\"\n        },\n        \"description\": {\n            \"type\": \"localizedString\"\n        },\n        \"top\": {\n            \"type\": \"string\",\n            \"default\": 50,\n            \"readonly\": true\n        },\n        \"left\": {\n            \"type\": \"string\",\n            \"default\": 50,\n            \"readonly\": true\n        },\n        \"x\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"readonly\": true\n        },\n        \"y\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"readonly\": true\n        },\n        \"backgroundColor\": {\n            \"type\": \"string\",\n            \"format\": \"color\",\n            \"enum\": [\"black\",\"#7f7f7f\",\"white\"],\n            \"default\": \"#7f7f7f\"\n        },\n        \"color\": {\n            \"type\": \"string\",\n            \"format\": \"color\",\n            \"enum\": [\"black\",\"white\"],\n            \"default\": \"black\"\n        },\n        \"skin\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"dark\",\n                \"light\",\n                \"dark/light\",\n                \"light/dark\"\n            ],\n            \"default\": \"dark\"\n        },\n        \"placement\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"top-left\",\n                \"top\",\n                \"top-right\",\n                \"left\",\n                \"center\",\n                \"right\",\n                \"bottom-left\",\n                \"bottom\",\n                \"bottom-right\"\n            ],\n            \"default\": \"top-left\"\n        },\n        \"grid\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"1:1\",\n                \"1:2\",\n                \"1:3\",\n                \"2:1\",\n                \"2:2\",\n                \"2:3\",\n                \"3:1\",\n                \"3:2\",\n                \"3:3\",\n                \"4:1\",\n                \"4:2\",\n                \"4:3\",\n                \"5:1\",\n                \"5:2\",\n                \"5:3\"\n            ],\n            \"default\": \"1:1\"\n        },\n    }\n}","import schema from \"../page/schema\"\nexport default schema","import pageMedia from './pageMedia.svg';\nimport pageList from './pageList.svg';\nimport pageTimeline from './pageTimeline.svg';\nimport pageMosaic from './pageMosaic.svg';\nimport pageAnnotate from './pageAnnotate.svg';\n\n\nexport default {\n    \"page/media\": pageMedia,\n    \"page/list\": pageList,\n    \"page/timeline\": pageTimeline,\n    \"page/mosaic\": pageMosaic,\n    \"page/annotate\": pageAnnotate\n}","import icons from \"./icons\"\n\nexport default {\n    \"select\": {\n        \"imageUrl\" : \"imageUrl\",\n        \"title\" : \"title\",\n        \"description\" : \"description\",\n        \"metadata\" : \"metadata\",\n        \"typeLabel\": \"typeLabel\"\n    },\n    prepare({formData, formContext}) {\n        const { documentType, content } = formData\n        const defaultLocale = formContext && formContext.defaultLocale\n        const currentLocale = formContext && formContext.currentLocale\n        const locale = defaultLocale ||currentLocale ||formData.locale\n        const localeId =  \"locale:\" + locale\n\n        let metadata = []\n\n        const pageIcon = documentType && icons[documentType]\n        const backgroundImage = content && content.backgroundImage\n\n        const imageUrl = backgroundImage && backgroundImage.media && backgroundImage.media.imageUrl\n\n        const title = content && content.title && content.title[localeId] ||formData.title\n        const description = content && content.description && content.description[localeId]\n\n        return {\n            imageUrl: imageUrl || pageIcon,\n            title: title ||\"Untitled\",\n            description: description,\n            metadata: metadata,\n            typeLabel: documentType\n        }\n    \n    }\n  \n}","export default {\n    \"ui:layout\": \"pageSettings\",\n    \"ui:nav\": true,\n    \"ui:fieldset\": [\n        \"metadata\",\n    ],\n    \"metadata\": {\n        \"ui:layout\": \"section\",\n        \"ui:icon\": \"label\",\n        \"ui:title\": \"Metadata\",\n        \"ui:fieldset\": [\n            \"documentType\",\n            \"parentId\"\n        ],\n        \"documentType\": {\n            \"ui:title\": \"Sidetype\"\n        },\n        \"parentId\": {\n            \"ui:field\": \"parentId\",\n            \"ui:documentType\": \"page*\",\n//            \"ui:widget\": \"autocomplete\",\n            \"ui:title\": \"ParentId\"\n        }\n    }\n}","import items from \"./itemsUi\"\n\nexport default {\n    \"ui:title\": \"Lenker\",\n    \"ui:preview\": {\n        \"select\": {\n            \"title\": \"title\"\n        },\n        prepare({formData =[]}) {\n            return {\n                title: formData.length + \" lenker\"\n            }\n        }\n    },\n    \"ui:options\": {\n        \"draggable\": true\n    },\n    \"ui:dialog\": {\n        \"query\": {\n            \"models\": \"documents\",\n            \"documentType\": [\"page*\",\"article\"]\n        }\n    },\n    \"ui:buttons\": [\n        {\n            \"type\": \"sidebar\",\n            \"icon\": \"search\",\n            \"title\": \"Finn innhold\",\n        },\n        {\n            \"type\": \"add\",\n            \"title\": \"Legg til\"\n        }\n    ],\n    \"items\": items\n}","export default {\n    \"ui:field\": \"kpLink\",\n    \"ui:layout\": \"module\",\n    \"ui:options\": {\n        \"minHeight\": 256,\n        \"editable\": true\n    },\n    \"ui:nav\": true,\n    \"ui:fieldset\": [\n        \"content\",\n    ],\n    \"ui:preview\": {\n        \"select\": {\n            \"imageUrl\": \"imageUrl\",\n            \"typeLabel\": \"typeLabel\",\n            \"title\": \"title\",\n            \"metadata\": \"metadata\",\n        },\n        prepare({formData, formContext, index}) {\n            const { mediaId, media, referenceId, reference } = formData\n\n            const locale = formContext.currentLocale ||formContext.defaultLocale;\n            const localeId = \"locale:\" + locale\n\n            const title = formData.title && formData.title[localeId] \n\n            const imageUrl = media && media.imageUrl ||reference && reference.imageUrl\n\n            const typeLabel = referenceId && reference && reference.documentType\n\n            let metadata = []\n\n            referenceId && reference && reference.title && metadata.push(reference.title)\n\n            return {\n                imageUrl: imageUrl,\n                typeLabel: typeLabel,\n                title: title || referenceId && reference && reference.title,\n                metadata: metadata,\n            }\n\n        }\n    },\n    \"backgroundColor\": {\n        \"ui:widget\": \"color\"\n    },\n    \"color\": {\n        \"ui:widget\": \"color\",\n        \"ui:settingsVariant\": \"text\"\n    },\n    \"grid\": {\n        \"ui:widget\": \"grid\",\n        \"ui:maxCols\": 5,\n        \"ui:maxRows\": 3\n    },\n    \"placement\": {\n        \"ui:widget\": \"placement\",\n    },\n    \"imageFilters\": {\n        \"ui:title\": \"Filters\",\n        \"ui:field\": \"imageFilters\"\n    },\n    \"imageCropdata\": {\n        \"ui:title\": \"Crop\",\n        \"ui:field\": \"imageCropdata\"\n    },\n    \"imageFocalpoint\": {\n        \"ui:title\": \"Fokuspunkt\",\n        \"ui:field\": \"imageFocalpoint\"\n    },\n    \"content\": {\n        \"ui:title\": \"Innhold\",\n        \"ui:layout\": \"kioskLink\",\n        \"ui:fieldset\": [\n            \"linkMedia\",\n            \"linkContent\",\n            \"linkReference\",\n        ],\n        \"ui:options\": {\n            \"padding\": 2,\n            \"spacing\": 2\n        },\n        \"linkMedia\": {\n            \"ui:fieldset\": [\n                \"mediaId\",\n                \"media\"\n            ],\n            \"ui:sidebar\": {\n                \"query\": {\n                    \"models\": \"media\",\n                    \"mediaType\": \"image\"\n                }\n            },\n            \"ui:layout\": \"kioskLinkMedia\",\n            \"ui:buttons\": [\n                \"sidebar\"\n            ],\n        },\n        \"linkReference\": {\n            \"ui:fieldset\": [\n                \"referenceId\",\n                \"reference\"\n            ],\n            \"ui:sidebar\": {\n                \"query\": {\n                    \"models\": \"documents\",\n                    \"documentType\": [\"page*\",\"article\"]\n                }\n            },\n            \"ui:layout\": \"kioskLinkReference\",\n            \"ui:options\": {\n                \"editable\": true,\n                \"deletable\": true,\n                \"restorable\": true\n            }\n        },\n        \"linkContent\": {\n            \"ui:layout\": \"kioskLinkContent\",\n            \"ui:grid\": true,\n            \"ui:padding\": 2,\n            \"ui:spacing\": 2,\n            \"ui:fieldset\": [\n                \"runningHead\",\n                \"title\",\n                \"description\",\n            ],\n            \"runningHead\": {\n                \"ui:title\": \"Stikktittel\",\n                \"ui:settings\": [\n                    \"color\"\n                ]\n            },\n            \"title\": {\n                \"ui:title\": \"Tittel\"\n            },\n            \"titleColor\": {\n                \"ui:widget\": \"color\"\n            },\n            \"description\": {\n                \"ui:title\": \"Beskrivelse\",\n            },\n        },\n    },\n    \"imageAnnotations\": {\n        \"ui:title\": \"Markr\",\n        \"ui:fieldset\": [\n            \"coords\"\n        ],\n        \"coords\": {\n            \"ui:fieldset\": [\n                \"x\", \"y\", \"top\", \"left\"\n            ],\n            \"ui:grid\": true,\n            \"ui:padding\": 2,\n            \"ui:spacing\": 2,\n            \"x\": {\n                \"ui:gridCols\": 6\n            },\n            \"y\": {\n                \"ui:gridCols\": 6\n            },\n            \"top\": {\n                \"ui:gridCols\": 6\n            },\n            \"left\": {\n                \"ui:gridCols\": 6\n            }\n        }\n    }\n}","import links from \"../links/uiSchema\"\n\nexport default {\n    \"ui:layout\": \"section\",\n    \"ui:title\": \"Innhold\",\n    \"ui:icon\": \"link\",\n    \"ui:fieldset\": [\n        \"links\"\n    ],\n    \"ui:settings\": [\n//        \"linksLayout\"\n    ],\n    \"links\": links\n}","import uiPreview from \"./uiPreview\"\nimport settings from \"../page/settings/uiSchema\"\nimport header from \"./header/uiSchema\"\nimport body from \"./body/uiSchema\"\n\nexport default {\n    \"ui:field\": \"pageEditor\",\n    \"ui:preview\": uiPreview,\n    \"ui:options\": {\n        \"collapsible\": true\n    },\n    \"ui:fieldset\": [\n        \"content\",\n        \"settings\"\n    ],\n    \"content\": {\n//        \"ui:field\": \"kioskPage\",\n        \"ui:layout\": \"pageContent\",\n        \"ui:fieldset\": [\n            \"header\",\n            \"body\"\n        ],\n        \"header\": header,\n        \"body\": body\n    },\n    \"settings\": settings\n}","import uiPreview from \"../page/uiPreview\"\nexport default uiPreview","export default {\n    \"ui:layout\": \"section\",\n    \"ui:title\": \"Tema\",\n    \"ui:preview\": {\n        \"select\": {\n            \"description\": \"description\"\n        },\n        prepare({formData, formContext}) {\n            const { title } = formData;\n\n            const localeId = \"locale:\" + formContext.currentLocale\n            const description = title && title[localeId]\n\n            return {\n                description: description\n            }\n\n        }\n    },\n    \"ui:fieldset\": [\n        \"title\",\n        \"leadtext\",\n        \"bodytext\"\n    ],\n    \"ui:options\": {\n        \"expanded\": true,\n        \"collapsible\": true,\n        \"spacing\": 2,\n    },\n    \"title\": {\n        \"ui:title\": \"Tittel\"\n    },\n    \"leadtext\": {\n        \"ui:title\": \"Ingress\",\n        \"ui:widget\": \"textarea\"\n    },\n    \"bodytext\": {\n        \"ui:title\": \"Brdtekst\",\n        \"ui:widget\": \"textarea\"\n    }\n}","import body from \"../../page/pageBody/uiSchema\"\n\nexport default {\n    ...body,\n    \"ui:settings\": [\n        \"mapLayout\",\n    ],\n}","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    page: {\n        backgroundColor: \"white\",\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        overflowY: \"scroll\"\n    },\n}));\n\nconst PageLayout = ({children}) => {\n\n    const classes = useStyles()\n\n    return (\n        <main className={classes.page}>\n            {children}\n        </main>\n    )\n\n}\n\nexport default PageLayout","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles(theme => ({\n    media: {\n        margin: theme.spacing(2)\n    },\n}));\n\nconst PageImage = ({imageUrl = undefined, language}) => {\n    const classes = useStyles()\n\n    if (!imageUrl) {\n        return false\n    }\n\n    return (\n        <figure className={classes.media}>\n            <img src={imageUrl} />\n        </figure>\n    )\n\n}\n\nexport default PageImage","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\nimport PageMedia from \"./PageMedia\"\n\nconst useStyles = makeStyles(theme => ({\n    header: {\n        margin: theme.spacing(2)\n    },\n}));\n\nconst PageHeader = ({title, leadtext, media, language}) => {\n    const classes = useStyles()\n\n    const localeId = \"locale:\" + language;\n\n    if (typeof title === \"object\") {\n        title = title[localeId] || undefined\n    }\n    \n    if (typeof leadtext === \"object\") {\n        leadtext = leadtext[localeId] || undefined\n    }\n\n    return (\n        <header className={classes.header}>\n            <Typography variant=\"h2\">{title}</Typography>\n            { media && <PageMedia {...media} /> }\n            <Typography>{leadtext}</Typography>\n        </header>\n    )\n\n}\n\nexport default PageHeader","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles(theme => ({\n    body: {\n        margin: theme.spacing(2)\n    },\n}));\n\nconst PageHeader = ({bodytext, language}) => {\n    const classes = useStyles()\n\n    const localeId = \"locale:\" + language;\n\n    if (typeof bodytext === \"object\") {\n        bodytext = bodytext[localeId] || undefined\n    }\n\n    return (\n        <div className={classes.body}>\n            <Typography>{bodytext}</Typography>\n        </div>\n    )\n\n}\n\nexport default PageHeader","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport PlaceIcon from '@material-ui/icons/Place';\n\nconst useStyles = makeStyles(theme => ({\n    link: {\n        position: \"absolute\",\n        left: -theme.spacing(1.5),\n        top: -theme.spacing(3),\n    },\n    marker: {\n\n    }\n}));\n\nconst MapLink = ({title}) => {\n    const classes = useStyles()\n\n    return (\n        <div className={classes.link}>\n            <PlaceIcon />\n        </div>\n    )\n\n    return (\n        <div className={classes.link}>\n            <IconButton>\n                <PlaceIcon />\n            </IconButton>\n        </div>\n    )\n\n}\n\n\nexport default MapLink;","import React, { useState, useEffect, useRef } from 'react';\nimport GoogleMapReact from 'google-map-react';\nimport Marker from \"./DefaultMapMarker\"\nimport { v4 as uuidv4 } from 'uuid';\n\nconst Map = ({defaultCenter, defaultZoom, KEY, links = []}) => {\n\n    const [markers, setMarkers] = useState(links)\n    const [origin, setOrigin] = useState(undefined)\n    const [destination, setDestination] = useState(undefined)\n    const [waypoints, setWaypoints] = useState([])\n    const [directions, setDirections] = useState([])\n    const [center, setCenter] = useState(undefined)\n    const [mapId, setMapId] = useState(uuidv4())\n\n    const mapRef = useRef(null)\n    \n    useEffect(() => {\n        const lat = links && links[0] && links[0].lat \n        const lng = links && links[0] && links[0].lng\n    \n        setCenter({\n            lat: lat,\n            lng: lng\n        })\n\n        let markers = []\n\n        links && links.map(link => {\n            if (link.lat && link.lng) {\n                markers.push({\n                    ...link,\n                    lat: link.lat,\n                    lng: link.lng\n                })\n            }\n        })\n\n        setOrigin(markers && markers[0])\n        setDestination(markers && markers[markers.length-1])\n\n        let newWaypoints = [];\n\n        markers && markers.map((marker, index) => {\n\n            if (index > 0 && index < markers.length-1) {\n                newWaypoints.push({\n                    location: marker.lat + \",\" + marker.lng\n                })\n            }\n\n        })\n\n        setWaypoints(newWaypoints)\n        setMarkers(markers)\n        setMapId(uuidv4())\n    \n    }, [links])\n\n\n\n    useEffect(() => {\n\n        console.log(\"mapRef\", mapRef.current)\n\n    }, [mapRef.current])\n    \n    const renderMarker = ({lat, lng, ...props}, index) => {\n\n        return (\n            <Marker lat={lat} lng={lng} index={index} {...props} />\n        )\n\n    }\n\n    const drawDirections = (google, result) => {\n\n        const path = result.routes[0].overview_path\n\n        const roundTripPath = new google.maps.Polyline({\n            map: google.map,\n            path: path,\n            geodesic: true,\n            strokeColor: \"#FF0000\",\n            strokeOpacity: 1.0,\n            strokeWeight: 2\n        });\n\n        roundTripPath.setMap(google.map);        \n\n    }\n\n    const getDirections = (google) => {\n\n        const directionsService = new google.maps.DirectionsService();\n\n        console.log('WAYPOINTS', waypoints)\n\n        directionsService.route(\n            {\n              origin: origin,\n              waypoints: waypoints,\n              destination: destination,\n              travelMode: google.maps.TravelMode.WALKING\n            },\n            (result, status) => {\n              if (status === google.maps.DirectionsStatus.OK) {\n                  drawDirections(google, result)\n                  setDirections(result)\n              } else {\n                setDirections(\"FAIL:\" + result)\n                //console.error(`error fetching directions ${result}`);\n              }\n            }\n          );        \n    }\n\n    const handleApiLoaded = (google) => {\n\n//        getDirections(google)\n\n        const bounds = new google.maps.LatLngBounds();\n\n        markers.map(marker => {\n\n            const lat = marker.lat\n            const lng = marker.lng\n\n            if (lat && lng) {\n                bounds.extend(new google.maps.LatLng(lat, lng))\n            }\n\n\n        })\n\n        google.map.fitBounds(bounds);\n\n    }\n\n    return (\n        <div style={{ height: '100%', width: '100%' }}>\n            <GoogleMapReact\n                ref={mapRef}\n                key={mapId}\n                bootstrapURLKeys={{ key: KEY }}\n                defaultCenter={defaultCenter}\n                defaultZoom={defaultZoom}\n                center={center}\n                yesIWantToUseGoogleMapApiInternals\n                onGoogleApiLoaded={handleApiLoaded}\n                >\n                {markers && markers.map(renderMarker)}\n            </GoogleMapReact>\n        </div>\n      );\n\n}\n\nMap.defaultProps = {\n    KEY: \"AIzaSyA0UKwjqalA0BdK5GBh8RPR9HJjtifWLAg\",\n    defaultCenter: {\n        lat: 59.95,\n        lng: 30.33\n    },\n    defaultZoom: 14\n}\n\n\nexport default Map;","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport PlaceIcon from '@material-ui/icons/Place';\n\nconst useStyles = makeStyles(theme => ({\n    link: {\n        position: \"absolute\",\n        left: -theme.spacing(1.5),\n        top: -theme.spacing(3),\n\n        \"& $media\": {\n            transition: \".125s ease-out\",\n            transform: \"scale(1)\"\n        },\n\n        \"&[aria-expanded=true] $media\": {\n            transform: \"scale(2)\"\n        },\n\n        \"&:hover $media\": {\n            transform: \"scale(2)\"\n        }\n\n    },\n    label: {\n        position: \"absolute\",\n        width: theme.spacing(2),\n        height: theme.spacing(2),\n        margin: theme.spacing(0, .5),\n        borderRadius: \"100%\",\n        backgroundColor: \"red\",\n        color: \"white\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n    },\n    media: {\n        position: \"absolute\",\n        width: theme.spacing(3),\n        height: theme.spacing(3),\n        margin: theme.spacing(-.5, 0),\n        borderRadius: \"100%\",\n        backgroundColor: \"red\",\n        color: \"white\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        backgroundSize: \"cover\",\n\n    },\n    image: {\n\n    }\n}));\n\nconst MapLink = ({reference, media, index}) => {\n    const classes = useStyles()\n\n    const imageUrl = media && media.imageUrl ||reference && reference.imageUrl\n\n    return (\n        <div className={classes.link} aria-expanded={index === 0}>\n            <figure className={classes.media} style={{backgroundImage: \"url(\"+imageUrl+\")\"}}></figure>\n            <i className={classes.label}>{index+1}</i>\n            <PlaceIcon />\n        </div>\n    )\n\n}\n\n\nexport default MapLink;","import React, { useState, useEffect, useRef } from 'react';\nimport GoogleMapReact from 'google-map-react';\nimport Marker from \"./RoundtripMapMarker\"\nimport { v4 as uuidv4 } from 'uuid';\n\nconst Map = ({defaultCenter, defaultZoom, KEY, links = []}) => {\n\n    const [markers, setMarkers] = useState(links)\n    const [origin, setOrigin] = useState(undefined)\n    const [destination, setDestination] = useState(undefined)\n    const [waypoints, setWaypoints] = useState([])\n    const [directions, setDirections] = useState([])\n    const [center, setCenter] = useState(undefined)\n    const [mapId, setMapId] = useState(uuidv4())\n\n    const mapRef = useRef(null)\n    \n    useEffect(() => {\n        const lat = links && links[0] && links[0].lat \n        const lng = links && links[0] && links[0].lng\n    \n        setCenter({\n            lat: lat,\n            lng: lng\n        })\n\n        let markers = []\n\n        links && links.map(link => {\n            if (link.lat && link.lng) {\n                markers.push({\n                    ...link,\n                    lat: link.lat,\n                    lng: link.lng\n                })\n            }\n        })\n\n        setOrigin(markers && markers[0])\n        setDestination(markers && markers[markers.length-1])\n\n        let newWaypoints = [];\n\n        markers && markers.map((marker, index) => {\n\n            if (index > 0 && index < markers.length-1) {\n                newWaypoints.push({\n                    location: marker.lat + \",\" + marker.lng\n                })\n            }\n\n        })\n\n        setWaypoints(newWaypoints)\n        setMarkers(markers)\n        setMapId(uuidv4())\n    \n    }, [links])\n\n\n\n    useEffect(() => {\n\n        console.log(\"mapRef\", mapRef.current)\n\n    }, [mapRef.current])\n    \n    const renderMarker = ({lat, lng, ...props}, index) => {\n\n        return (\n            <Marker lat={lat} lng={lng} count={index+1} index={index} {...props} />\n        )\n\n    }\n\n    const drawDirections = (google, path) => {\n\n        setDirections(path)\n\n        const roundTripPath = new google.maps.Polyline({\n            map: google.map,\n            path: path,\n            geodesic: true,\n            strokeColor: \"#FF0000\",\n            strokeOpacity: 1.0,\n            strokeWeight: 2\n        });\n\n        roundTripPath.setMap(google.map);        \n\n    }\n\n    const getDirections = (google) => {\n\n        const directionsService = new google.maps.DirectionsService();\n\n        console.log('WAYPOINTS', waypoints)\n\n        directionsService.route(\n            {\n              origin: origin,\n              waypoints: waypoints,\n              destination: destination,\n              travelMode: google.maps.TravelMode.WALKING\n            },\n            (result, status) => {\n              if (status === google.maps.DirectionsStatus.OK) {\n                  const overviewPath = result.routes[0].overview_path\n                  const resultsPath = overviewPath.length && overviewPath ||markers\n                  drawDirections(google, resultsPath)\n              } else {\n                drawDirections(google, markers)\n                setDirections(\"FAIL:\" + result)\n                //console.error(`error fetching directions ${result}`);\n              }\n            }\n          );        \n    }\n\n    const handleApiLoaded = (google) => {\n\n        getDirections(google)\n\n        const bounds = new google.maps.LatLngBounds();\n\n        markers.map(marker => {\n\n            const lat = marker.lat\n            const lng = marker.lng\n\n            if (lat && lng) {\n                bounds.extend(new google.maps.LatLng(lat, lng))\n            }\n\n\n        })\n\n        google.map.fitBounds(bounds);\n\n    }\n\n    return (\n        <div style={{ height: '100%', width: '100%' }}>\n            <GoogleMapReact\n                ref={mapRef}\n                key={mapId}\n                bootstrapURLKeys={{ key: KEY }}\n                defaultCenter={defaultCenter}\n                defaultZoom={defaultZoom}\n                center={center}\n                yesIWantToUseGoogleMapApiInternals\n                onGoogleApiLoaded={handleApiLoaded}\n                >\n                {markers && markers.map(renderMarker)}\n            </GoogleMapReact>\n            Debug:\n            {JSON.stringify(directions)}\n        </div>\n      );\n\n}\n\nMap.defaultProps = {\n    KEY: \"AIzaSyA0UKwjqalA0BdK5GBh8RPR9HJjtifWLAg\",\n    defaultCenter: {\n        lat: 59.95,\n        lng: 30.33\n    },\n    defaultZoom: 14\n}\n\n\nexport default Map;","import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getModel } from '../../redux/modelsById';\n\nimport PageLayout from \"../Page/PageLayout\"\nimport PageHeader from \"../Page/PageHeader\"\nimport PageBody from \"../Page/PageBody\"\n\n\nimport DefaultMap from \"./DefaultMap\"\nimport RoundtripMap from \"./RoundtripMap\"\n\nconst mapTypes = {\n    \"default\": DefaultMap,\n    \"roundtrip\": RoundtripMap\n}\n\nconst PageMap = ({formData, formContext, ...props}) => {\n\n    const dispatch = useDispatch()\n    const modelsById = useSelector(state => state.modelsById)\n   \n    const links = formData && formData.content && formData.content.links\n\n    useEffect(() => {\n\n        links && links.map(link => {\n            const referenceId = link && link.referenceId;\n            const referenceModel = referenceId && modelsById[referenceId]\n\n            if (referenceId && !referenceModel) {\n                dispatch(getModel({modelName: \"documents\", uniqueId: referenceId}))\n            }\n        })\n\n    }, [links])\n\n    const [newLinks, setNewLinks] = useState([])\n\n    useEffect(() => {\n\n        const newLinks = links && links.map(link => {\n            const referenceId = link && link.referenceId;\n            const referenceModel = referenceId && modelsById[referenceId]\n\n            const location = referenceModel && referenceModel.content && referenceModel.content.location\n\n            return {\n                ...link,\n                ...location,\n                reference: referenceModel\n            }\n\n        })\n\n        setNewLinks(newLinks)        \n\n    }, [modelsById, links])\n\n    const language = formContext && formContext.currentLocale\n    const content = formData && formData.content\n\n    const mapLayout = content && content.mapLayout\n    const MapTemplate = mapLayout && mapTypes[mapLayout] || DefaultMap\n\n    return <MapTemplate links={newLinks} />\n    \n    return (\n        <PageLayout>\n            <PageHeader {...content} language={language}></PageHeader>\n            {newLinks && newLinks.length && <MapTemplate links={newLinks} /> }\n            <PageBody {...content} language={language} />\n        </PageLayout>\n    )\n\n}\n\nexport default PageMap\n\n","import schema from \"./schema\";\nimport uiSchema from \"./uiSchema\";\nimport PreviewTemplate from \"../../Preview/PageMap\"\n\nexport default {\n    id: 1,\n    schemaType: 'documents',\n    name: 'pageMap',\n    schema: schema,\n    uiSchema: uiSchema,\n    preview: {\n        template: PreviewTemplate\n    }\n}","import schema from \"./schema\";\nimport uiSchema from \"./uiSchema\";\n//import PreviewTemplate from \"../../preview/PageTopic\"\n\nexport default {\n    id: 1,\n    schemaType: 'documents',\n    name: 'pageTopic',\n    schema: schema,\n    uiSchema: uiSchema,\n    preview: {\n//        template: PreviewTemplate\n    }\n}","import schema from \"../page/schema\"\nexport default schema","import uiPreview from \"./uiPreview\"\nimport settings from \"../page/settings/uiSchema\"\nimport header from \"./header/uiSchema\"\nimport body from \"./body/uiSchema\"\n\nexport default {\n    \"ui:field\": \"pageEditor\",\n    \"ui:preview\": uiPreview,\n    \"ui:fieldset\": [\n        \"content\",\n        \"settings\"\n    ],\n    \"content\": {\n//        \"ui:field\": \"kioskPage\",\n        \"ui:layout\": \"pageContent\",\n        \"ui:fieldset\": [\n            \"header\",\n            \"body\"\n        ],\n        \"header\": header,\n        \"body\": body\n    },\n    \"settings\": settings\n}","import uiPreview from \"../page/uiPreview\"\nexport default uiPreview","export default {\n    \"ui:layout\": \"section\",\n    \"ui:title\": \"Tema\",\n    \"ui:preview\": {\n        \"select\": {\n            \"description\": \"description\"\n        },\n        prepare({formData, formContext}) {\n            const { title } = formData;\n\n            const localeId = \"locale:\" + formContext.currentLocale\n            const description = title && title[localeId]\n\n            return {\n                description: description\n            }\n\n        }\n    },\n    \"ui:fieldset\": [\n        \"titleImage\",\n        \"content\"\n    ],\n    \"ui:options\": {\n        \"expanded\": true,\n        \"collapsible\": true,\n        \"grid\": true,\n        \"spacing\": 2,\n    },\n    \"titleImage\": {\n        \"ui:xs\": 4,\n        \"ui:layout\": \"media\",\n        \"ui:buttons\": [\n            {\n                \"type\": \"sidebar\",\n                \"icon\": \"search\",\n                \"title\": \"Finn hovedbilde\"\n            }\n        ],\n        \"ui:fieldset\": [\n            \"media\"\n        ],\n        \"media\": {\n            \"ui:title\": \"Hovedbilde\"\n        }\n\n    },\n    \"content\": {\n        \"ui:xs\": 8,\n        \"ui:options\": {\n            \"spacing\": 2,\n        },\n        \"ui:fieldset\": [\n            \"title\",\n            \"leadtext\",\n            \"bodytext\"\n        ],\n        \"title\": {\n            \"ui:title\": \"Tittel\"\n        },\n        \"leadtext\": {\n            \"ui:title\": \"Ingress\",\n            \"ui:widget\": \"textarea\"\n        },\n        \"bodytext\": {\n            \"ui:title\": \"Brdtekst\",\n            \"ui:widget\": \"textarea\"\n        }\n    },\n\n}","import body from \"../../page/pageBody/uiSchema\"\n\nexport default {\n    ...body\n}","import schema from \"../page/schema\"\nexport default schema","import uiPreview from \"../page/uiPreview\"\nexport default uiPreview","export default {\n    \"ui:layout\": \"section\",\n    \"ui:title\": \"Presentasjon\",\n    \"ui:preview\": {\n        \"select\": {\n            \"description\": \"description\"\n        },\n        prepare({formData, formContext}) {\n            const { title } = formData;\n\n            const localeId = \"locale:\" + formContext.currentLocale\n            const description = title && title[localeId]\n\n            return {\n                description: description\n            }\n\n        }\n    },\n    \"ui:fieldset\": [\n        \"title\",\n    ],\n    \"ui:options\": {\n        \"expanded\": true,\n        \"collapsible\": true,\n        \"spacing\": 2,\n    },\n    \"title\": {\n        \"ui:title\": \"Tittel\"\n    },\n}","import uiSchema from \"../../page/pageHeader/uiSchema\"\nexport default {\n    ...uiSchema,\n    \"ui:title\": \"Mosaikk\",\n}","export default {\n    \"ui:layout\": \"section\",\n    \"ui:title\": \"Media\",\n    \"ui:fieldset\": [\n        \"media\",\n    ],\n    \"ui:options\": {\n        \"collapsible\": true,\n        \"spacing\": 2,\n    },\n    \"media\": {\n        \"ui:options\": {\n//            \"grid\": true,\n            \"spacing\": 2\n        },\n        \"ui:fieldset\": [\n            \"backgroundImage\"\n        ],\n        \"backgroundImage\": {\n            \"ui:layout\": \"media\",\n            \"ui:buttons\": [\n                {\n                    \"type\": \"sidebar\",\n                    \"icon\": \"search\",\n                    \"title\": \"Finn bakgrunnsbilde\"\n                }\n            ],\n            \"ui:fieldset\": [\n                \"media\",\"imageCropdata\",\"imageFilters\"\n            ],\n            \"media\": {\n                \"ui:title\": \"Bakgrunnsbilde\"\n            }\n        },\n        \"parallaxImage\": {\n            \"ui:layout\": \"media\",\n            \"ui:buttons\": [\n                {\n                    \"type\": \"sidebar\",\n                    \"icon\": \"search\",\n                    \"title\": \"Finn parallaxbilde\"\n                }\n            ],\n            \"media\": {\n                \"ui:title\": \"Parallaxbilde\"\n            }\n        }        \n    }\n}","import uiSchema from \"../../page/pageMedia/uiSchema\"\n\nexport default {\n    ...uiSchema,\n    \"ui:title\": \"Bakgrunnsbilde\"\n}","import links from \"../../page/links/uiSchema\"\n\nexport default {\n    ...links,\n    \"items\": {\n        ...links.items,\n        \"ui:settings\": [\n            \"grid\",\n            \"placement\",\n            \"backgroundColor\",\n            \"color\"\n        ],\n    \n\n        \"content\": {\n            ...links.items.content,\n            \"linkContent\": {\n                ...links.items.content.linkContent,\n                \"title\": {\n                    ...links.items.content.linkContent.title,\n                    \"ui:settings\": [\n                        \"titleSize\",\n                        \"titleColor\",\n                    ],\n                }\n            }\n        }\n    }\n}","import uiPreview from \"./uiPreview\"\nimport settings from \"../page/settings/uiSchema\"\nimport header from \"./gridHeader/uiSchema\"\nimport media from \"./gridMedia/uiSchema\"\nimport body from \"./gridBody/uiSchema\"\n\nexport default {\n    \"ui:field\": \"pageEditor\",\n    \"ui:preview\": uiPreview,\n    \"ui:fieldset\": [\n        \"content\",\n        \"settings\"\n    ],\n    \"content\": {\n        \"ui:field\": \"kpPage\",\n        \"ui:fieldset\": [\n            \"header\",\n            \"media\",\n            \"body\"\n        ],\n        \"header\": header,\n        \"media\": media,\n        \"body\": body\n    },\n    \"settings\": settings\n}","import body from \"../../page/pageBody/uiSchema\"\nimport links from \"../gridLinks/uiSchema\"\n\nexport default {\n    ...body,\n    \"links\": links\n}","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    article: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n\n        margin: theme.spacing(1),\n        overflowY: \"scroll\",\n\n        \"& *\": {\n            boxSizing: \"border-box\"\n        },\n\n        backgroundColor: \"white\",\n        fontFamily: \"Akkurat, sans-serif\",\n        lineHeight: 1.5,\n\n        \"& h1\": {\n            fontSize: \"1.5em\",\n            fontWeight: \"bold\",\n            lineHeight: 1.25,\n            margin: \".5em 0\"\n        },\n\n        \"& h2\": {\n            fontSize: \"1.25em\",\n            fontWeight: \"bold\",\n            lineHeight: 1.25,\n            margin: \".5em 0\"\n        },\n\n    }\n}));\n\nconst ArticleBase = ({className, children}) => {\n    const classes = useStyles()\n    return (\n        <article className={className ||classes.article}>\n            {children}\n        </article>\n    )\n}\n\nexport default ArticleBase","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    wrapper: {\n        maxWidth: props => { return props.maxWidth },\n        margin: \"auto\"\n    },\n}));\n\n\nconst ArticleGrid = ({className, maxWidth = 720, children}) => {\n    const classes = useStyles({maxWidth})\n\n    return (\n        <section className={className ||classes.wrapper}>\n            {children}\n        </section>\n    )\n\n}\n\nexport default ArticleGrid","import React from \"react\"\nimport Typography from \"@material-ui/core/Typography\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    title: {\n        fontFamily: \"Akkurat, sans-serif\",\n\n        \"&.h1\": {\n            fontSize: \"1.5em\",\n            fontWeight: \"bold\",\n            lineHeight: 1.25,\n            margin: \".5em 0\"\n        },\n\n        \"&.h2\": {\n            fontSize: \"1.25em\",\n            fontWeight: \"bold\",\n            lineHeight: 1.25,\n            margin: \".5em 0\"\n        },\n\n    },\n}));\n\nconst ArticleTitle = ({className, component = \"h1\", language = \"no\", children}) => {\n\n    const classes = useStyles()\n\n    const localeId = \"locale:\" + language;\n        \n    if (typeof children === \"object\") {\n        children = children[localeId] || undefined\n    }\n\n    return (\n        <Typography className={className ||classes.title} component={component}>{children}</Typography    >\n    )\n}\n\nexport default ArticleTitle","import React from \"react\"\nimport ReactMarkdown from 'react-markdown';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    bodytext: {\n        \"& p\": {\n            margin: \"1em 0\"\n        },\n\n        \"& ul\": {\n            listStyle: \"disc\",\n            margin: \"1em 0\"\n        },\n\n        \"& ol\": {\n            listStyle: \"upper-roman\",\n            margin: \"1em 0\"\n        },\n\n        \"& strong\": {\n            fontWeight: \"bold\"\n        },\n        \"& em\": {\n            fontStyle: \"italic\"\n        }\n    },\n}));\n\nconst ArticleBodytext = ({className, language = \"no\", children}) => {\n    const localeId = \"locale:\" + language;\n    const classes = useStyles()\n        \n    if (typeof children === \"object\") {\n        children = children[localeId] || undefined\n    }\n\n    return (\n        <ReactMarkdown className={className ||classes.bodytext} source={children} />             \n    )\n}\n\nexport default ArticleBodytext","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    wrapper: {\n        maxWidth: props => { return props.maxWidth },\n//        overflow: \"hidden\",\n        margin: \"auto\"\n    },\n    list: {\n        margin: props => { return theme.spacing(-props.spacing/2) },\n        display: \"flex\",\n        flexDirection: \"column\",\n    },\n    item: {\n        width: props => { return props.maxWidth+theme.spacing(props.spacing) },\n        padding: props => { return theme.spacing(props.spacing/2) },\n\n        /*\n        width: props => { return (props.maxWidth+theme.spacing(props.spacing))/props.gridColumns },\n        padding: props => { return theme.spacing(props.spacing/2) },\n        \"&[data-size=medium]\": {\n            width: props => { return (props.maxWidth+theme.spacing(props.spacing))/props.gridColumns*2 },\n        },\n        \"&[data-size=large]\": {\n            width: props => { return (props.maxWidth+theme.spacing(props.spacing))/props.gridColumns*4 },\n        },\n        \"&[data-size=xl]\": {\n            width: props => { return props.maxWidth+theme.spacing(props.spacing) },\n        }\n        */\n    }\n\n}));\n\n\nconst LayoutList = ({className, spacing = 2, padding = 0, maxWidth = 720, gridColumns = 4, mediaFormat = \"2:1\", children}) => {\n    const classes = useStyles({maxWidth, gridColumns, spacing, padding})\n\n    return (\n        <section className={className ||classes.wrapper}>\n            <div className={className ||classes.list}>\n                {children.map((child, index) => {\n                    const item = React.cloneElement(child, {\n                        mediaFormat: mediaFormat\n                    })\n                    return (\n                        <div className={classes.item} data-size={item.props.size} key={index}>\n                            { item }\n                        </div>\n                    )\n                })}\n            </div>\n        </section>\n    )\n\n}\n\nexport default LayoutList","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    wrapper: {\n        maxWidth: props => { return props.maxWidth },\n        overflow: \"hidden\",\n        margin: \"auto\"\n    },\n    grid: {\n        margin: props => { return theme.spacing(-props.spacing/2) },\n        display: \"flex\",\n        flexWrap: \"wrap\",\n    },\n    item: {\n        width: props => { return (props.maxWidth+theme.spacing(props.spacing))/props.gridColumns },\n        padding: props => { return theme.spacing(props.spacing/2) },\n        \"&[data-size=medium]\": {\n            width: props => { return (props.maxWidth+theme.spacing(props.spacing))/props.gridColumns*2 },\n        },\n        \"&[data-size=large]\": {\n            width: props => { return (props.maxWidth+theme.spacing(props.spacing))/props.gridColumns*4 },\n        },\n        \"&[data-size=xl]\": {\n            width: props => { return props.maxWidth+theme.spacing(props.spacing) },\n        }\n    }\n\n}));\n\n\nconst LayoutGrid = ({className, spacing = 2, padding = 0, maxWidth = 720, gridColumns = 4, children}) => {\n    const classes = useStyles({maxWidth, gridColumns, spacing, padding})\n\n    return (\n        <section className={className ||classes.wrapper}>\n            <div className={className ||classes.grid}>\n                {children.map((child, index) => {\n                    const item = React.cloneElement(child)\n                    return (\n                        <div className={classes.item} data-size={item.props.size} key={index}>\n                            { item }\n                        </div>\n                    )\n                })}\n            </div>\n        </section>\n    )\n\n}\n\nexport default LayoutGrid","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport { CarouselProvider, Slider, Slide, ButtonBack, ButtonNext, DotGroup } from 'pure-react-carousel';\nimport 'pure-react-carousel/dist/react-carousel.es.css';\n\n\nconst useStyles = makeStyles(theme => ({\n    slideshow: {\n        position: \"relative\",\n        maxWidth: props => { return props.maxWidth },\n        margin: \"auto\"\n    },\n    slider: {\n        \"& ul\": {\n//            margin: 0\n        }\n    },\n    navigation: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n    },\n    dots: {\n        position: \"absolute\",\n        right: 0,\n        left: 0,\n        bottom: 0,\n        display: \"flex\",\n        justifyContent: \"center\",\n    },\n    backButton: {\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        bottom: 0,\n    },\n    nextButton: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n\n    }\n}));\n\n\nconst LayoutSlideshow = ({className, spacing = 2, padding = 0, maxWidth = 720, mediaFormat = \"2:1\", children}) => {\n    const classes = useStyles({spacing, padding, maxWidth})\n\n    const totalSlides = children && children.length\n    const format = mediaFormat.split(':')\n\n    return (\n        <CarouselProvider className={className ||classes.slideshow}\n            naturalSlideWidth={format[0]}\n            naturalSlideHeight={format[1]}\n            totalSlides={totalSlides}>\n                <Slider className={classes.slider}>\n                    {children.map((child, index) => {\n                        const item = React.cloneElement(child, {\n                            mediaFormat: mediaFormat\n                        })\n                        return (\n                            <Slide index={index}>\n                                { item }\n                            </Slide>\n                        )\n                    })}\n                </Slider>\n                <nav className={classes.navigation}>\n                    <DotGroup className={classes.dots} />\n                    <ButtonBack className={classes.backButton}>Back</ButtonBack>\n                    <ButtonNext className={classes.nextButton}>Next</ButtonNext>\n                </nav>\n        </CarouselProvider>\n    )\n\n}\n\nexport default LayoutSlideshow","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    format: {\n        position: \"relative\",\n        width: \"100%\",\n        minHeight: props => { return props.minHeight },\n        paddingBottom: props => { return props.ratio * 100 + \"%\" },\n    }\n}));\n\nconst LayoutFormat = ({format, minHeight, children}) => {\n\n    let ratio;\n\n    if (format) {\n        const size = format.split(\":\");\n        const w = size[0];\n        const h = size[1];\n        ratio = h/w;\n    }\n\n    const classes = useStyles({ratio, minHeight})\n\n    if (ratio ||minHeight) {\n\n        return (\n            <div className={classes.format}\n                data-minHeight={minHeight}\n                data-ratio={ratio} \n                data-format={format}>\n                { children }\n            </div>\n        )\n           \n    }\n\n    return children\n\n}\n\nexport default LayoutFormat","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport LayoutFormat from \"./LayoutFormat\"\nimport {MediaPreview } from \"@kit-ui/admin\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    module: {\n        position: \"relative\",\n        width: \"100%\",\n//        paddingBotton: \"100%\",\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"13px\",\n        lineHeight: 1.5,\n        display: \"flex\",\n        flexDirection: \"column\",\n    },\n    media: {\n        backgroundColor: \"grey\",\n        position: \"relative\",\n        width: \"100%\"\n    },\n    content: {\n        fontFamily: \"Akkurat, sans-serif\",\n        marginTop: \".25em\",\n    },\n    caption: {\n    },\n    headline: {\n        fontWeight: \"bold\",\n    },\n    byline: {\n        fontStyle: \"italic\"\n    },\n    license: {\n        \n    }\n}));\n\nconst ModuleMedia = ({mediaType, mediaFormat = \"1:1\", imageUrl, headline, caption, byline, license, ...props}) => {\n    const classes = useStyles()\n\n    return (\n        <article className={classes.module}>\n            <figure className={classes.media}>\n                <LayoutFormat format={mediaFormat}>\n                    <MediaPreview mediaType={mediaType} imageUrl={imageUrl} {...props} />\n                </LayoutFormat>\n            </figure>\n            <Typography component=\"figcaption\" className={classes.content}>\n                {headline && <strong className={classes.headline}>{headline}:</strong>}\n                {headline && \" \"}\n                {caption && <span className={classes.caption}>{caption}</span>}\n                {byline && \" \"}\n                {byline && <em className={classes.byline}>({byline})</em>}\n                {license && \" \"}\n                {license && <em className={classes.license}>{license}</em>}\n            </Typography>\n        </article>\n    )\n\n}\n\n\nexport default ModuleMedia;","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport LayoutList from \"./LayoutList\"\nimport LayoutGrid from \"./LayoutGrid\"\nimport LayoutSlideshow from \"./LayoutSlideshow\"\n\n\nimport ModuleMedia from \"./ModuleMedia\"\n\nconst layouts = {\n    \"list\": LayoutList,\n    \"grid\": LayoutGrid,\n    \"slideshow\": LayoutSlideshow\n}\n\nconst useStyles = makeStyles(theme => ({\n    media: {\n        position: \"relative\"\n    },\n}));\n\nconst ArticleMedia = ({className, language = \"no\", layout = \"grid\", media = [], mediaWidth = 180, mediaHeight = 180}) => {\n    const localeId = \"locale:\" + language;\n    const classes = useStyles({mediaWidth, mediaHeight})\n\n    const renderMedia = ({media, mediaSize, mediaFormat, content}) => {\n        const mediaType = media && media.mediaType;\n\n        let headline = content && content.headline || media && media.content && media.content.headline ||undefined\n        let caption = content && content.caption || media && media.content && media.content.caption ||undefined\n\n        const byline = content && content.byline || media && media.content && media.content.byline ||undefined\n        const license = content && content.license || media && media.content && media.content.license ||undefined\n\n        if (typeof headline === \"object\") {\n            headline = headline[localeId] || undefined\n        }\n\n        if (typeof caption === \"object\") {\n            caption = caption[localeId] || undefined\n        }\n       \n        return (\n            <ModuleMedia {...media}\n                size={mediaSize} \n                mediaFormat={mediaFormat} \n                headline={headline} \n                caption={caption}\n                byline={byline}\n                license={license} />\n        )\n    \n    }\n        \n    if (!media.length) {\n        return false\n    }\n\n    const LayoutTemplate = layout && layouts[layout]\n\n    if (LayoutTemplate) {\n        return (\n            <LayoutTemplate>\n                { media.map(media => renderMedia(media))}\n            </LayoutTemplate>\n        )\n    }\n\n    return (\n        <div className={className}>\n            { media.map(media => renderMedia(media))}\n        </div>\n    )\n\n}\n\nexport default ArticleMedia","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    module: {\n        position: \"relative\",\n        width: \"100%\",\n//        minHeight: \"240px\",\n        backgroundColor: \"#f2f2f2\",\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"13px\",\n        lineHeight: 1.5,\n        display: \"flex\",\n        flexDirection: \"column\",\n    },\n    media: {\n        position: \"relative\",\n        width: \"100%\",\n        paddingBottom: \"100%\",\n        flexBasis: 0,\n        flexGrow: 1,\n        margin: 0\n    },\n    image: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        maxWidth: \"90%\",\n        maxHeight: \"90%\",\n        margin: \"auto\"\n    },\n    content: {\n        flexBasis: 0,\n        flexGrow: 1,\n        padding: theme.spacing(.5),\n        minHeight: \"5em\"\n    },\n    title: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"1em\",\n        lineHeight: 1.25,\n        maxHeight: \"3.75em\",\n        overflow: \"hidden\",\n        display: \"-webkit-box\",\n        \"-webkit-line-clamp\": 3,\n        \"-webkit-box-orient\": \"vertical\",\n    },\n    footer: {\n        flexBasis: 0,\n        flexGrow: 0\n    }\n}));\n\nconst ModuleEkultur = ({size, documentType, imageUrl, title, author, objectCount, imageCount, videoCount, audioCount, commentCount}) => {\n    const classes = useStyles()\n\n    let metadata = [];\n\n    if (objectCount) {\n      metadata.push(objectCount + ' objekter'); \n    }\n    \n    if (imageCount) {\n      metadata.push(imageCount + ' bilder'); \n    }\n\n    if (videoCount) {\n      metadata.push(videoCount + ' videoer'); \n    }\n\n    if (audioCount) {\n      metadata.push(audioCount + ' lydklipp'); \n    }\n    \n    metadata = metadata.length && metadata.join(', ');    \n\n    return (\n        <article className={classes.module}>\n            <figure className={classes.media}>\n                <img className={classes.image} src={ imageUrl } />\n            </figure>\n            <div className={classes.content}>\n                <header className={classes.header}>\n                    <Typography className={classes.title}>{title}</Typography>\n                </header>\n                <footer className={classes.footer}>\n                    <p></p>\n                    <b className=\"comments__label\">{ commentCount }</b>\n                </footer>\n            </div>\n        </article>\n    )\n\n}\n\n\nexport default ModuleEkultur;","import React from \"react\"\nimport LayoutGrid from \"./LayoutGrid\"\nimport ModuleEkultur from \"./ModuleEkultur\"\n\nconst layouts = {\n    \"grid\": LayoutGrid\n}\n\nconst templates = {\n    \"ekultur\": ModuleEkultur\n}\n\nconst ArticleReferences = ({className, language = \"no\", layout = \"grid\", references = []}) => {\n    const localeId = \"locale:\" + language;\n\n    const renderReference = ({referenceType, reference, content}) => {\n        let title = content && content.title || reference && reference.title ||undefined\n\n        if (typeof title === \"object\") {\n            title = title[localeId] || undefined\n        }\n\n        const ModuleTemplate = referenceType && templates[referenceType]\n\n        if (ModuleTemplate) {\n            return (\n                <ModuleTemplate {...reference} title={title} />\n            )\n        }\n\n        return (\n            <li>{title}</li>\n        )\n    \n    }\n        \n\n    if (!references.length) {\n        return false\n    }\n\n    const LayoutTemplate = layout && layouts[layout]\n\n    if (LayoutTemplate) {\n        return (\n            <LayoutTemplate>\n                { references.map(reference => renderReference(reference))}\n            </LayoutTemplate>\n        )\n    }\n\n    return (\n        <div className={className}>\n            { references.map(reference => renderReference(reference))}\n        </div>\n    )\n\n}\n\nexport default ArticleReferences","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    links: {\n        \"& ul\": {\n            listStyle: \"disc\",\n            margin: \"1em 0\"\n        },\n        \"& ol\": {\n            listStyle: \"upper-roman\",\n            margin: \"1em 0\"\n        },\n        \"& strong\": {\n            fontWeight: \"bold\"\n        },\n        \"& em\": {\n            fontStyle: \"italic\"\n        }\n    },\n}));\n\nconst ArticleLinks = ({className, language = \"no\", links = []}) => {\n    const localeId = \"locale:\" + language;\n    const classes = useStyles()\n\n    const renderLink = ({title, url}) => {\n\n        if (typeof title === \"object\") {\n            title = title[localeId] || undefined\n        }\n\n        return (\n            <li><a href={url}>{title}</a></li>\n        )\n    \n    }\n        \n\n    if (!links.length) {\n        return false\n    }\n\n    return (\n        <div className={className ||classes.links}>\n            <ul>\n                { links.map(link => renderLink(link))}\n            </ul>\n        </div>\n    )\n\n}\n\nexport default ArticleLinks","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport ArticleGrid from \"./ArticleGrid\"\nimport ArticleTitle from \"./ArticleTitle\"\nimport ArticleBodytext from \"./ArticleBodytext\"\nimport ArticleMedia from \"./ArticleMedia\"\nimport ArticleReferences from \"./ArticleReferences\"\nimport ArticleLinks from \"./ArticleLinks\"\n\nconst useStyles = makeStyles(theme => ({\n    head: {\n\n    }\n}));\n\nconst ArticleHead = ({className, language, title, leadtext, media}) => {\n\n    const classes = useStyles()\n\n    return (\n        <header className={className || classes.head}>\n           <ArticleGrid>\n                <ArticleTitle language={language}>{title}</ArticleTitle>\n\n                { media && \n                    <ArticleMedia media={media} layout=\"list\" mediaFormat=\"2:1\" />\n                }\n\n                <ArticleBodytext language={language}>{leadtext}</ArticleBodytext>\n            </ArticleGrid>\n        </header>\n    )\n}\n\nexport default ArticleHead","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    body: {\n\n    }\n}));\n\nconst ArticleBody = ({className, children}) => {\n    const classes = useStyles()\n    return (\n        <div className={className || classes.body}>\n            {children}\n        </div>\n    )\n}\n\nexport default ArticleBody","import React from \"react\"\nimport ReactMarkdown from 'react-markdown';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    leadtext: {\n        \"& strong\": {\n            fontWeight: \"bold\"\n        },\n        \"& em\": {\n            fontStyle: \"italic\"\n        }\n    },\n}));\n\nconst ArticleLeadtext = ({className, language = \"no\", children}) => {\n    const localeId = \"locale:\" + language;\n    const classes = useStyles()\n        \n    if (typeof children === \"object\") {\n        children = children[localeId] || undefined\n    }\n\n    return (\n        <ReactMarkdown className={className ||classes.leadtext} source={children} />             \n    )\n}\n\nexport default ArticleLeadtext","import React from \"react\"\nimport ArticleGrid from \"./ArticleGrid\"\nimport ArticleTitle from \"./ArticleTitle\"\nimport ArticleLeadtext from \"./ArticleLeadtext\"\nimport ArticleBodytext from \"./ArticleBodytext\"\nimport ArticleMedia from \"./ArticleMedia\"\nimport ArticleReferences from \"./ArticleReferences\"\nimport ArticleLinks from \"./ArticleLinks\"\n\nconst ArticleSection = ({sectionType, sectionLayout, language = \"no\", title, leadtext, bodytext, links = [], media = [], references = []}) => {\n\n    if (sectionType === \"media\") {\n        return (\n            <ArticleGrid>\n                <ArticleTitle component=\"h2\" language={language}>{title}</ArticleTitle>\n                <ArticleMedia layout={sectionLayout} language={language} media={media} />\n                <ArticleBodytext language={language}>{bodytext}</ArticleBodytext>\n            </ArticleGrid>\n        )\n    }\n\n    if (sectionType === \"references\") {\n        return (\n            <ArticleGrid>\n                <ArticleTitle component=\"h2\" language={language}>{title}</ArticleTitle>\n                <ArticleLeadtext language={language}>{leadtext}</ArticleLeadtext>\n                <ArticleReferences language={language} references={references} />\n            </ArticleGrid>\n        )\n    }\n\n    return (\n        <ArticleGrid>\n            <ArticleTitle component=\"h2\" language={language}>{title}</ArticleTitle>\n            <ArticleMedia layout={sectionLayout} language={language} media={media} />\n            <ArticleLeadtext language={language}>{leadtext}</ArticleLeadtext>\n            <ArticleReferences language={language} references={references} />\n            <ArticleBodytext language={language}>{bodytext}</ArticleBodytext>\n            <ArticleLinks language={language} links={links} />\n        </ArticleGrid>\n    )\n\n}\n\nexport default ArticleSection","import React from \"react\"\n\nimport ArticleBase from \"./ArticleBase\"\nimport ArticleHead from \"./ArticleHead\"\nimport ArticleBody from \"./ArticleBody\"\nimport ArticleSection from \"./ArticleSection\"\n\nconst Article = ({formData, formContext}) => {\n    const language = formContext.currentLocale ||formContext.defaultLocale ||formData.locale\n    const content = formData && formData.content;\n\n    const { title, leadtext, headerImage, sections } = content;\n\n    return (\n        <ArticleBase>\n            <ArticleHead language={language} title={title} leadtext={leadtext} media={headerImage && [headerImage]} />\n            <ArticleBody>\n                { sections && sections.map((section, index) => <ArticleSection {...section} language={language} /> )}\n            </ArticleBody>\n        </ArticleBase>\n    )\n\n}\n\nArticle.defaultProps = {\n    formData: {},\n    formContext: {}\n}\n\nexport default Article","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n    },\n    /*\n    perspective: {\n        perspective: \"1000px\",\n        perspectiveOriginX: \"25%\",\n        perspectiveOriginY: \"75%\",\n    },\n    transform: {\n        transform: \"rotateY(-45deg)\",\n    },\n    */\n    format: {\n        position: \"relative\",\n        width: \"100%\",\n        paddingBottom: props => { return props.paddingBottom },\n    }\n}));\n\nconst PreviewFormat = ({format, children}) => {\n\n    let paddingBottom;\n\n    if (format) {\n        const size = format.split(\":\");\n        const w = size[0];\n        const h = size[1];\n        const ratio = h/w;\n\n        paddingBottom = ratio * 100 + \"%\";\n    }\n\n    const classes = useStyles({paddingBottom})\n\n    if (paddingBottom) {\n        return (\n            <div className={classes.root}>\n                <div className={classes.format} data-format={format}>\n                    { children }\n                </div>\n            </div>\n        )\n    }\n\n    return children\n\n}\n\nexport default PreviewFormat","import Color from 'color';\n\nexport const getPreviewItem = (item) => {\n    const { index, referenceId, reference, mediaId, media, grid, localeId, backgroundColor, color } = item;\n\n//    const primaryColor = Color(backgroundColor)\n//    const contrastColor = primaryColor.isLight() && \"black\" || \"white\"\n\n\n    const imageUrl = media && media.imageUrl || referenceId && reference && reference.imageUrl;\n    const runningHead = item.runningHead && item.runningHead[localeId];\n    const title = item.title && item.title[localeId] || referenceId && reference && reference.title || \"Untitled\";\n    const description = item.description && item.description[localeId];\n\n    let itemType;\n\n    if (referenceId) {\n        itemType = \"link\"\n    } else if (mediaId) {\n        itemType = \"media\"\n    }    \n\n    // grid\n    const m = grid && grid.split(':');\n    const cols = m && m[0] || 1\n    const rows = m && m[1] || 1\n\n    // id\n    const id = \"root_content_body_links_\" + index\n\n    // colors\n\n    return {\n        ...item,\n        id: id,\n        itemType: itemType,\n        imageUrl: imageUrl,\n        runningHead: runningHead,\n        title: title,\n        description: description,\n        cols: cols,\n        rows: rows\n    }\n    \n}","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport { getPreviewItem } from \"./utils\"\n\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n    },\n    menuList: {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        margin: \"0 3.5em\",\n    },\n    menuItem: {\n        position: \"relative\",\n        width: '8em',\n        margin: \".5em\"\n    },\n    figure: {\n        paddingBottom: \"100%\",\n        borderRadius: \"100%\",\n        backgroundColor: \"white\"\n    },\n    title: {\n        color: \"white\", \n        textAlign: \"center\",\n        lineHeight: 1.25,\n        height: \"2.5em\",\n        margin: theme.spacing(1)\n    }\n}));\n\nconst MenuItem = ({title}) => {\n\n    const classes = useStyles()\n\n    return (\n        <article className={classes.menuItem}>\n            <figure className={classes.figure}>\n\n            </figure>\n            <Typography className={classes.title}>{title}</Typography>\n        </article>\n    )\n\n\n}\n\nconst Menu = ({items, onCurrentId}) => {\n\n    const classes = useStyles()\n\n\n    const TimelineItem = ({cols, rows, index, ...item}) => {\n        const id = \"root_content_pageLinks_\" + index\n        return (\n            <MenuItem {...item} onClick={() => onCurrentId(id)} />\n        )\n    }\n    \n    return (\n        <div className={classes.menuList}>\n            { items && items.map((item, index) => {\n                const itemProps = getPreviewItem({...item, index: index})\n                return (\n                    <TimelineItem {...itemProps} key={index} />\n                )\n            })}\n        </div>\n    )\n\n}\n\nconst PreviewTimeline = ({formData, formContext, width, height}) => {\n\n    return (\n        <p>{JSON.stringify(formData)}</p>\n    )\n\n\n    const { pageTitle, backgroundImage, hasPages } = formData.content;\n    const currentLocale = formContext && formContext[currentLocale];\n    const title = pageTitle && pageTitle[currentLocale] ||formData.title\n\n    const onCurrentId = formContext.onCurrentId\n\n    const classes = useStyles()\n\n    return (\n        <div className={classes.root}>\n            <Menu items={hasPages} width={width} height={height} onCurrentId={onCurrentId} />\n        </div>\n    )\n\n}\n\nexport default PreviewTimeline","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles(theme => ({\n    pageHeader: {\n        position: props => { return props.position },\n        zIndex: 2,\n        height: \"6em\",\n        padding: \"2em 4em\",\n        color: \"white\",\n        display: \"flex\",\n        alignItems: \"center\"\n    },\n    pageTitle: {\n        fontSize: \"2em\",\n    }\n}));\n\nconst KioskPageHeader = ({title, position = \"relative\"}) => {\n\n    const classes = useStyles({position})\n\n    return (\n        <header className={classes.pageHeader}>\n            <Typography className={classes.pageTitle}>{ title }</Typography>\n        </header>\n    )\n}\n\nexport default KioskPageHeader","import React, { useState, useEffect } from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport { ImageBase } from \"@kit-ui/admin\"\n\nconst useStyles = makeStyles(theme => ({\n    module: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        backgroundColor: props => { return props.backgroundColor },\n        color: props => { return props.color},\n    },\n    media: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n    },\n    content: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        display: \"flex\",\n        flexDirection: \"column\",\n        padding: \"0.5em 1em\",\n        justifyContent: props => { return props.justifyContent},\n        alignItems: props => { return props.alignItems}\n    },\n    runningHead: {\n        fontSize: props => {return props.titleSize === \"large\" && \"1.25em\" ||props.titleSize === \"medium\" && \"1em\" ||\"0.875em\" },\n        color: props => {return props.titleColor ||props.color },\n        textTransform: \"uppercase\",\n        lineHeight: 1.5\n    },\n    title: {\n        fontSize: props => {return props.titleSize === \"large\" && \"2em\" ||props.titleSize === \"medium\" && \"1.5em\" ||\"1.25em\" },\n        color: props => {return props.titleColor ||props.color },\n        lineHeight: 1.2,\n        \"& + $description\": {\n            marginTop: theme.spacing(1)\n        }\n    },\n    description: {\n        fontSize: \"1em\",\n        opacity: 0.8\n    }\n}));\n\nconst getTextPlacement = ({placement = \"top-left\"}) => {\n\n    let justifyContent = \"center\"\n    let alignItems = \"center\"\n\n    // horizontal\n\n    if (placement.includes('left')) {\n        alignItems = \"flex-start\"\n    } else if (placement.includes('right')) {\n        alignItems = \"flex-end\"\n    }\n\n    // vertical\n\n    if (placement.includes('top')) {\n        justifyContent = \"flex-start\"\n    } else if (placement.includes('bottom')) {\n        justifyContent = \"flex-end\"\n    }\n    \n    return {\n        justifyContent: justifyContent,\n        alignItems: alignItems\n    }\n\n}\n\nconst GridModule = ({imageUrl, mediaWidth, mediaHeight, imageCropdata, imageFilters, runningHead, title, description, skin, width, height, onClick, ...props}) => {\n    const { justifyContent, alignItems } = getTextPlacement(props)\n\n    const classes = useStyles({...props, justifyContent, alignItems})\n\n    return (\n        <Card className={classes.module} onClick={onClick}>\n            { imageUrl && <ImageBase imageUrl={imageUrl} imageFilters={imageFilters} imageCropdata={imageCropdata} objectFit=\"cover\" /> }\n\n            <CardContent className={classes.content}>\n                {runningHead && <Typography className={classes.runningHead} component=\"h3\">{runningHead}</Typography> }\n                <Typography className={classes.title} component=\"h2\">{title}</Typography>\n                { description && <Typography className={classes.description} component=\"p\">{description}</Typography> }\n            </CardContent>\n\n        </Card>\n    )\n\n}\n\nexport default GridModule","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport PageHeader from \"./PageHeader\"\nimport KioskMosaicModule from \"./GridModule\"\nimport { getPreviewItem } from \"./utils\"\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n    },\n    body: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        margin: \"5.5em 3.5em 1.5em 3.5em\",\n    },\n    grid: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        display: \"grid\",\n        gridTemplateColumns: props => { return props.templateCols },\n        gridTemplateRows: props => { return props.templateRows },\n        gridColumnGap: props => { return props.colGap },\n        gridRowGap: props => { return props.rowGap },\n    },\n    gridItem: {\n        gridColumnStart: \"auto\",\n        gridColumnEnd: props => { return props.colEnd },\n        gridRowStart: \"auto\",\n        gridRowEnd: props => { return props.rowEnd },\n        position: \"relative\",\n        margin: \".5em\"\n    }\n}));\n\nconst MosaicGrid = ({localeId, items, cols = 5, rows = 3, onCurrentId}) => {\n\n    const colWidth = (100/cols);\n    const rowHeight = (100/rows);\n\n    const classes = useStyles({\n        templateCols: (colWidth + \"% \").repeat(cols),\n        templateRows: (rowHeight + \"% \").repeat(rows),\n    })\n\n    const GridItem = ({id, cols, rows, index, ...item}) => {\n\n        const classes = useStyles({\n            colEnd: \"span \" + cols,\n            rowEnd: \"span \" + rows\n        })\n        \n        return (\n            <div className={classes.gridItem}>\n                <KioskMosaicModule {...item} onClick={() => onCurrentId(id)} />\n            </div>\n        )\n    \n    }\n    \n    return (\n        <div className={classes.grid}>\n            { items && items.map((item, index) => {\n                const itemProps = getPreviewItem({...item, index: index, localeId: localeId})\n                return (\n                    <GridItem {...itemProps} key={index} />\n                )\n            })}\n        </div>\n    )\n\n}\n\nconst PreviewMosaic = ({formData, formContext, width, height}) => {\n    const { title, links, backgroundImage } = formData.content;\n    const locale = formContext && formContext.currentLocale || formContext && formContext.defaultLocale;\n    const localeId = \"locale:\"+locale\n    const pageTitle = title && title[localeId] ||formData.title\n\n    const onCurrentId = formContext.onCurrentId\n\n    const classes = useStyles()\n\n    return (\n        <div className={classes.root}>\n            <PageHeader title={pageTitle} />\n            <div className={classes.body}>\n                <MosaicGrid localeId={localeId} items={links} width={width} height={height} onCurrentId={onCurrentId} />\n            </div>\n        </div>\n    )\n\n}\n\nexport default PreviewMosaic","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles(theme => ({\n    card: {\n        width: '16em',\n        backgroundColor: props => { return props.backgroundColor },\n    },\n    cardMedia: {\n        width: \"100%\",\n        paddingBottom: props => { return 9/16 * 100 + \"%\" },\n    },\n    cardContent: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        padding: \"0.5em 1em\",\n        justifyContent: props => { return props.justifyContent},\n        alignItems: props => { return props.alignItems}\n    },\n    title: {\n        fontSize: \"2em\",\n        lineHeight: 1.2,\n        \"& + $description\": {\n            marginTop: theme.spacing(1)\n        }\n    },\n    description: {\n        fontSize: \"1em\",\n        opacity: 0.8\n    }\n}));\n\nconst getTextPlacement = ({placement = \"top-left\"}) => {\n\n    let justifyContent = \"center\"\n    let alignItems = \"center\"\n\n    // horizontal\n\n    if (placement.includes('left')) {\n        alignItems = \"flex-start\"\n    } else if (placement.includes('right')) {\n        alignItems = \"flex-end\"\n    }\n\n    // vertical\n\n    if (placement.includes('top')) {\n        justifyContent = \"flex-start\"\n    } else if (placement.includes('bottom')) {\n        justifyContent = \"flex-end\"\n    }\n    \n    return {\n        justifyContent: justifyContent,\n        alignItems: alignItems\n    }\n\n}\n\nconst MosaicModule = ({imageUrl, title, description, skin, width, height, onClick, ...props}) => {\n    const { justifyContent, alignItems } = getTextPlacement(props)\n    const classes = useStyles({...props, backgroundColor: \"white\", justifyContent, alignItems})\n   \n    return (\n        <Card className={classes.card} onClick={onClick}>\n            { imageUrl && \n                <CardMedia\n                    className={classes.cardMedia}\n                    alt={title}\n                    image={imageUrl}\n                    title={title} />\n            }\n            <CardContent className={classes.cardContent}>\n                <Typography className={classes.title} variant=\"h6\" component=\"h2\">\n                    {title}\n                </Typography>\n                {description &&\n                    <Typography className={classes.description} variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                        {description}\n                    </Typography>\n                }\n            </CardContent>\n        </Card>\n    )\n\n}\n\nexport default MosaicModule","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport { getPreviewItem } from \"./utils\"\n\nimport PageHeader from \"./PageHeader\"\nimport TimelineModule from \"./TimelineModule\"\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        display: \"flex\",\n        flexDirection: \"column\",\n    },\n    body: {\n        overflowX: \"scroll\",\n    },\n    timeline: {\n        display: \"flex\",\n        margin: \"0 3.5em\",\n    },\n    timelineItem: {\n        position: \"relative\",\n        margin: \".5em\"\n    }\n}));\n\nconst Timeline = ({localeId, items, onCurrentId}) => {\n\n    const classes = useStyles()\n\n    const TimelineItem = ({id, cols, rows, index, ...item}) => {\n        return (\n            <div className={classes.timelineItem}>\n                <TimelineModule {...item} onClick={() => onCurrentId(id)} />\n            </div>\n        )\n    }\n    \n    return (\n        <div className={classes.timeline}>\n            { items && items.map((item, index) => {\n                const itemProps = getPreviewItem({...item, localeId: localeId, index: index})\n                return (\n                    <TimelineItem {...itemProps} key={index} />\n                )\n            })}\n        </div>\n    )\n\n}\n\nconst PreviewTimeline = ({formData, formContext, width, height}) => {\n    const { title, links, backgroundImage } = formData.content;\n    const locale = formContext && formContext.currentLocale || formContext && formContext.defaultLocale;\n    const localeId = \"locale:\"+locale\n    const pageTitle = title && title[localeId] ||formData.title\n\n    const onCurrentId = formContext.onCurrentId\n\n    const classes = useStyles()\n\n    return (\n        <div className={classes.root}>\n            <PageHeader title={pageTitle}  />\n            <div className={classes.body}>\n                <Timeline localeId={localeId} items={links} width={width} height={height} onCurrentId={onCurrentId} />\n            </div>\n        </div>\n    )\n\n}\n\nexport default PreviewTimeline","import React, { Component } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ImageAnnotationsBase } from \"@kit-ui/admin\"\nimport PageHeader from \"./PageHeader\"\nimport { getPreviewItem, getContrastColor } from \"./utils\"\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n    },\n    body: {\n        position: \"absolute\",\n        zIndex: 1,\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n//        margin: \"6em\"\n    },\n    marker: {\n        position: \"absolute\",\n        zIndex: props => { return props.zIndex },\n        top: props => { return props.top + \"%\" ||\"50%\"},\n        left: props => { return props.left + \"%\" ||\"50%\"},\n    },\n    label: {\n        width: props => { return theme.spacing(props.size) },\n        height: props => { return theme.spacing(props.size) },\n        top: \"0\",\n        left: \"0\",\n        position: \"absolute\",\n        display: \"block\",\n        transform: \"translate(-50%, -50%)\",\n        backgroundColor: props => { return props.backgroundColor },\n        color: props => { return props.color },\n        borderSize: \".25em\",\n        borderRadius: \"50%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        fontFamily: \"Akkurat Mono, monspace\",\n        fontSize: \"14px\",\n    }\n}));\n\nconst ImagemapPreview = ({formData = {}, formContext}) => {\n    const locale = formContext && formContext.currentLocale || formContext && formContext.defaultLocale;\n    const localeId = \"locale:\"+locale\n    const onCurrentId = formContext.onCurrentId\n\n    const contentTitle = formData && formData.content && formData.content.title;\n    const title = contentTitle && contentTitle[localeId] ||formData.title\n\n    const classes = useStyles()\n\n    const annotateImage = formData.content && formData.content.backgroundImage;\n    const annotateColor = formData.content && formData.content.annotateColor;\n    const imageAnnotations = formData && formData.content && formData.content.links\n    const imageFilters = annotateImage && annotateImage.imageFilters;\n    const imageUrl = annotateImage && annotateImage.media && annotateImage.media.imageUrl;\n\n    const contrastColor = annotateColor && getContrastColor(annotateColor)\n\n    if (!imageUrl) {\n        return (\n            <p>No imageUrl</p>\n        )\n    }\n\n    const MarkerTemplate = ({id, index, top = 50, left = 50, size = 4}) => {\n\n        const classes = useStyles({size, zIndex: index, top, left, backgroundColor: annotateColor, color: contrastColor})\n    \n        return (\n            <div className={classes.marker} onClick={() => onCurrentId(id)}>\n                <div className={classes.label}>\n                    {index+1}\n                </div>\n            </div>\n        )\n    }\n    \n\n    return (\n        <div className={classes.root}>\n            <PageHeader title={title} position=\"absolute\" />\n            <div className={classes.body}>\n                <ImageAnnotationsBase {...annotateImage} imageUrl={imageUrl} imageFilters={imageFilters} imageAnnotations={imageAnnotations}  markerTemplate={MarkerTemplate} />\n            </div>\n        </div>\n    )\n\n}\n\n\nexport default ImagemapPreview;","import Color from 'color';\n\nexport const getContrastColor = (hex) => {\n    const color = Color(hex)\n    return color.isLight() && \"black\" || \"white\"\n}","import React, { Component } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ImageAnnotationsBase } from \"@kit-ui/admin\"\nimport PageHeader from \"./PageHeader\"\nimport { getPreviewItem } from \"./utils\"\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n    },\n    body: {\n        position: \"absolute\",\n        zIndex: 1,\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n//        margin: \"6em 1em\"\n    },\n    line: {\n        position: \"absolute\",\n        zIndex: props => { return props.zIndex },\n        top: props => { return props.top + \"%\" ||\"50%\"},\n        right: props => { return props.left <= 50 && 100-props.left + \"%\" ||\"0\" },\n        left: props => { return props.left > 50 && props.left + \"%\" || \"0\" },\n        height: \"2px\",\n        backgroundColor: \"white\"\n    },\n    module: {\n        position: \"absolute\",\n        transform: \"translateY(-50%)\",\n        zIndex: props => { return props.zIndex },\n        top: props => { return props.top + \"%\" ||\"50%\"},\n        right: props => { return props.left > 50 && \"0\" },\n        left: props => { return props.left <= 50 && \"0\" },\n        width: \"12em\",\n        backgroundColor: \"white\",\n        color: \"black\",\n        padding: \"1em\"\n    },\n    marker: {\n        position: \"absolute\",\n        zIndex: props => { return props.zIndex },\n        top: props => { return props.top + \"%\" ||\"50%\"},\n        left: props => { return props.left + \"%\" ||\"50%\"},\n    },\n    border: {\n        width: \"1.5em\",\n        height: \"1.5em\",\n        backgroundColor: \"white\",\n        display: \"block\",\n        transform: \"translate(-50%, -50%)\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        borderRadius: \"50%\",\n        padding: \".25em\"\n    },\n    label: {\n        width: \"100%\",\n        height: \"100%\",\n        backgroundColor: props => { return props.color },\n        color: \"transparent\",\n        borderRadius: \"50%\",\n    },\n}));\n\nconst ImagelegendPreview = ({formData = {}, formContext}) => {\n    const locale = formContext && formContext.currentLocale || formContext && formContext.defaultLocale;\n    const localeId = \"locale:\"+locale\n    const onCurrentId = formContext.onCurrentId\n\n    const contentTitle = formData && formData.content && formData.content.title;\n    const title = contentTitle && contentTitle[localeId] ||formData.title\n\n    const classes = useStyles()\n\n    const annotateImage = formData.content && formData.content.backgroundImage;\n    const annotateColor = formData.content && formData.content.annotateColor;\n    const imageAnnotations = formData && formData.content && formData.content.links\n    const imageFilters = annotateImage && annotateImage.imageFilters;\n    const imageUrl = annotateImage && annotateImage.media && annotateImage.media.imageUrl;\n\n    if (!imageUrl) {\n        return (\n            <p>No imageUrl</p>\n        )\n    }\n\n    const MarkerModule = ({id, index, top = 50, left = 50, size = 4, runningHead, title, description, ...props}) => {\n        const classes = useStyles({size, zIndex: index, top, left})\n\n        return (\n            <div className={classes.module} data-index={index} onClick={() => onCurrentId(id)}>\n                {runningHead && <h3>{runningHead}</h3> }\n                <h2>{title}</h2>\n                {description && <p>{description}</p> }\n            </div>\n        )\n\n    }\n\n    const MarkerTemplate = ({id, index, top = 50, left = 50, size = 4, ...props}) => {\n        const classes = useStyles({size, zIndex: index, top, left, color: annotateColor})\n\n        return (\n            <React.Fragment>\n                <div className={classes.line} data-index={index}></div>\n                <div className={classes.marker} onClick={() => onCurrentId(id)}>\n                    <div className={classes.border}>\n                        <div className={classes.label}>\n                            {index+1}\n                        </div>\n                    </div>\n                </div>\n            </React.Fragment>\n        )\n    }\n    \n    return (\n        <div className={classes.root}>\n            <PageHeader title={title} position=\"absolute\" />\n            <div className={classes.body}>\n                <ImageAnnotationsBase imageUrl={imageUrl} imageFilters={imageFilters} imageAnnotations={imageAnnotations} overflow=\"visible\" markerTemplate={MarkerTemplate} />\n                { imageAnnotations && imageAnnotations.map((item, index) => {\n                    const itemProps = getPreviewItem({...item, index: index, localeId: localeId})\n                    return (\n                        <MarkerModule {...itemProps} key={index} />\n                    )\n                })}\n            </div>\n        </div>\n    )\n\n}\n\n\nexport default ImagelegendPreview;","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport { withResizeDetector } from 'react-resize-detector';\n\nimport PreviewFormat from \"./PreviewFormat\"\n\nimport Menu from \"./Menu\"\nimport Grid from \"./Grid\"\nimport Timeline from \"./Timeline\"\nimport Imagemap from \"./AnnotateImagemap\"\nimport Legends from \"./AnnotateLegends\"\n\nconst templates = {\n    \"device\": Menu,\n    \"pageAnnotate/imagemap\": Imagemap,\n    \"pageAnnotate/legends\": Legends,\n    \"pageTimeline\": Timeline,\n    \"pageList\": Grid,\n    \"pageGrid\": Grid,\n    \"pageMedia\": Grid,\n    \"pageMedia/gallery\": Grid,\n    \"pageMedia/autoplay\": Grid,\n    \"page\": Grid\n}\n\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        backgroundImage: props => { return 'url('+props.backgroundImageUrl+')' },\n        backgroundPosition: \"50% 50%\",\n        backgroundSize: \"cover\",\n        fontSize: props => { return props.fontSize },\n    },\n    page: {\n        display: \"flex\",\n        alignItems: \"flex-start\",\n        justifyContent: \"space-between\",\n        flexDirection: \"column\",\n        width: \"100%\",\n        height: \"100%\",\n    },\n    header: {\n        width: \"100%\",\n        display: \"flex\",\n        margin: theme.spacing(2)\n    },\n    title: {\n        fontSize: \"3em\"\n    },\n    body: {\n        flexBasis: \"100%\",\n        flexGrow: 1,\n        width: \"100%\",\n        position: \"relative\"\n    },\n    footer: {\n        flexBasis: \"15%\",\n        width: \"100%\",\n        margin: theme.spacing(2)\n    },\n}));\n\n\n\nconst PreviewPage = ({width, height, ...props}) => {\n\n    const fontSize = width / 64 + \"px\";\n\n    const classes = useStyles({\n        fontSize: fontSize,\n    })\n    \n    const formData = props.formData;\n\n    const { documentType, content } = formData;\n\n    let layout;\n\n    if (documentType === \"pageAnnotate\") {\n        layout = content && content.annotateLayout\n    }\n\n    if (documentType === \"pageMedia\") {\n        layout = content && content.mediaLayout\n    }\n\n    let template;\n\n    if (layout) {\n        template = documentType + \"/\" + layout\n    } else {\n        template = documentType\n    }\n\n    let PreviewTemplate = templates && templates[template]\n\n    if (!PreviewTemplate) {\n        return (<p>No preview for {template}</p>)\n    }\n\n\n    return (\n        <PreviewFormat format=\"16:9\">\n            <div className={classes.root}>\n                <PreviewTemplate {...props} />\n            </div>\n        </PreviewFormat>\n    )\n\n}\n\nPreviewPage.defaultProps = {\n    formData: {},\n    formContext: {}\n}\n\nexport default withResizeDetector(PreviewPage)","import React from \"react\"\nimport Article from \"./Article\"\nimport Page from \"./Page\"\n\nconst templates = {\n    \"device\": Page,\n    \"page\": Page,\n    \"article\": Article\n}\n\nconst PreviewKiosk = (props) => {\n    const documentType = props && props.formData && props.formData.documentType;\n\n    let template;\n\n    if (documentType && documentType.startsWith('page')) {\n        template = \"page\"\n    } else {\n        template = documentType\n    }\n\n    let PreviewTemplate = templates && templates[template]\n\n    if (!PreviewTemplate) {\n        return (<p>No preview for {documentType}</p>)\n    }\n\n    return (\n        <PreviewTemplate {...props} />\n    )\n\n}\n\nexport default PreviewKiosk","import PreviewKiosk from \"./PreviewKiosk\"\nexport default PreviewKiosk","import article from './article';\n\nimport pageMap from './pageMap';\nimport pageTopic from './pageTopic';\n\nimport pageGrid from './pageGrid';\nimport pageList from './pageList';\nimport pageTimeline from './pageTimeline';\nimport pageAnnotate from './pageAnnotate';\nimport pageMedia from './pageMedia';\n\nimport device from './device';\n\nexport default [\n    article,\n    pageMap,\n    pageTopic,\n    pageGrid,\n    pageList,\n    pageTimeline,\n    pageAnnotate,\n    pageMedia,\n    device\n]","import schema from \"./schema\";\nimport uiSchema from \"./uiSchema\";\nimport formData from \"./formData\"\nimport PreviewTemplate from \"../../Preview/KioskPreview\"\n\nexport default {\n    id: 1,\n    schemaType: 'documents',\n    name: 'pageGrid',\n    schema: schema,\n    uiSchema: uiSchema,\n    formData: formData,\n    preview: {\n        template: PreviewTemplate\n    }\n}","import schema from \"./schema\";\nimport uiSchema from \"./uiSchema\";\nimport PreviewTemplate from \"../../Preview/KioskPreview\"\n\nexport default {\n    id: 1,\n    schemaType: 'documents',\n    name: 'pageList',\n    schema: schema,\n    uiSchema: uiSchema,\n    preview: {\n        template: PreviewTemplate\n    }\n}","import schema from \"../page/schema\"\nexport default schema","import uiPreview from \"./uiPreview\"\nimport settings from \"../page/settings/uiSchema\"\nimport header from \"./listHeader/uiSchema\"\nimport media from \"./listMedia/uiSchema\"\nimport body from \"./listBody/uiSchema\"\n\nexport default {\n    \"ui:field\": \"pageEditor\",\n    \"ui:preview\": uiPreview,\n    \"ui:fieldset\": [\n        \"content\",\n        \"settings\"\n    ],\n    \"content\": {\n        \"ui:field\": \"kpPage\",\n        \"ui:fieldset\": [\n            \"header\",\n            \"media\",\n            \"body\"\n        ],\n        \"header\": header,\n        \"media\": media,\n        \"body\": body\n    },\n    \"settings\": settings\n}","import uiPreview from \"../page/uiPreview\"\nexport default uiPreview","import uiSchema from \"../../page/pageHeader/uiSchema\"\nexport default {\n    ...uiSchema,\n    \"ui:title\": \"Liste\",\n}","import uiSchema from \"../../page/pageMedia/uiSchema\"\n\nexport default {\n    ...uiSchema,\n    \"ui:title\": \"Bakgrunnsbilde\"\n}","import body from \"../../page/pageBody/uiSchema\"\n\nexport default {\n    ...body\n}","import schema from \"./schema\";\nimport uiSchema from \"./uiSchema\";\nimport PreviewTemplate from \"../../Preview/KioskPreview\"\n\nexport default {\n    id: 1,\n    schemaType: 'documents',\n    name: 'pageTimeline',\n    schema: schema,\n    uiSchema: uiSchema,\n    preview: {\n        template: PreviewTemplate\n    }\n}","import schema from \"../page/schema\"\nexport default schema","import uiPreview from \"./uiPreview\"\nimport settings from \"../page/settings/uiSchema\"\nimport header from \"./timelineHeader/uiSchema\"\nimport media from \"./timelineMedia/uiSchema\"\nimport body from \"./timelineBody/uiSchema\"\n\nexport default {\n    \"ui:field\": \"pageEditor\",\n    \"ui:preview\": uiPreview,\n    \"ui:fieldset\": [\n        \"content\",\n        \"settings\"\n    ],\n    \"content\": {\n        \"ui:field\": \"kpPage\",\n        \"ui:fieldset\": [\n            \"header\",\n            \"media\",\n            \"body\"\n        ],\n        \"header\": header,\n        \"media\": media,\n        \"body\": body\n    },\n    \"settings\": settings\n}","import uiPreview from \"../page/uiPreview\"\nexport default uiPreview","import uiSchema from \"../../page/pageHeader/uiSchema\"\nexport default {\n    ...uiSchema,\n    \"ui:title\": \"Tidslinje\",\n}","import uiSchema from \"../../page/pageMedia/uiSchema\"\n\nexport default {\n    ...uiSchema,\n    \"ui:title\": \"Bakgrunnsbilder\",\n    \"media\": {\n        ...uiSchema.media,\n        \"ui:options\": {\n            \"grid\": true,\n            \"spacing\": 2\n        },\n        \"ui:fieldset\": [\n            \"backgroundImage\",\n            \"parallaxImage\"\n        ],\n        \"backgroundImage\": {\n            ...uiSchema.media.backgroundImage,\n            \"ui:xs\": 6\n        },\n        \"parallaxImage\": {\n            ...uiSchema.media.parallaxImage,\n            \"ui:xs\": 6\n        }\n    }\n}","import body from \"../../page/pageBody/uiSchema\"\n\nexport default {\n    ...body\n}","import schema from \"./schema\";\nimport uiSchema from \"./uiSchema\";\nimport PreviewTemplate from \"../../Preview/KioskPreview\"\n\nexport default {\n    id: 1,\n    schemaType: 'documents',\n    name: 'pageAnnotate',\n    schema: schema,\n    uiSchema: uiSchema,\n    preview: {\n        template: PreviewTemplate\n    }\n}","import schema from \"../page/schema\"\nexport default {\n    ...schema,\n    \"properties\": {\n        ...schema.properties,\n        \"content\": {\n            ...schema.properties.content,\n            \"properties\": {\n                ...schema.properties.content.properties,\n                \"backgroundImage\": {\n                    \"type\": \"image\",\n                    \"cropdata\": true,\n                    \"annotations\": true,\n                    \"filters\": [\"opacity\"],\n                }\n            }\n        }\n    }\n}","import uiPreview from \"./uiPreview\"\nimport settings from \"../page/settings/uiSchema\"\nimport annotateHeader from \"./annotateHeader/uiSchema\"\nimport annotateBody from \"./annotateBody/uiSchema\"\n\nexport default {\n    \"ui:field\": \"pageEditor\",\n    \"ui:preview\": uiPreview,\n    \"ui:fieldset\": [\n        \"content\",\n        \"settings\"\n    ],\n    \"content\": {\n        \"ui:field\": \"kpPage\",\n        \"ui:fieldset\": [\n            \"header\",\n            \"body\"\n        ],\n        \"header\": annotateHeader,\n        \"body\": annotateBody\n    },\n    \"settings\": settings\n}","import uiPreview from \"../page/uiPreview\"\nexport default uiPreview","import uiSchema from \"../../page/pageHeader/uiSchema\"\nexport default {\n    ...uiSchema,\n    \"ui:title\": \"Bildekart\",\n}","import annotateLinks from \"../annotateLinks/uiSchema\"\nimport annotateImage from \"../annotateImage/uiSchema\"\n\nexport default {\n    \"ui:layout\": \"section\",\n    \"ui:title\": \"Markeringer\",\n    \"ui:icon\": \"label\",\n    \"ui:fieldset\": [\n        \"backgroundImage\",\n        \"links\"\n    ],\n    \"ui:settings\": [\n        \"annotateLayout\",\n        \"annotateColor\"\n    ],\n    \"backgroundImage\": annotateImage,\n    \"links\": annotateLinks\n}","export default {\n    \"ui:fieldset\": [\n        \"imageAnnotations\",\n//        \"imageCropdata\",\n//        \"imageFocalpoint\",\n        \"imageFilters\"\n    ],\n    \"imageAnnotations\": {\n        \"ui:field\": \"kpAnnotateImage\",\n        \"ui:title\": \"Markeringer\",\n    },\n    \"ui:minHeight\": 512,\n    \"ui:buttons\": [\n        {\n            \"type\": \"sidebar\",\n            \"icon\": \"search\",\n            \"title\": \"Finn bilde\"\n        }\n    ]\n}","import links from \"../../page/links/uiSchema\"\n\nexport default {\n    ...links,\n    \"ui:field\": \"kpAnnotateArray\",\n    \"ui:title\": \"Markrer\",\n    \"ui:preview\": {\n        \"select\": {\n            \"title\": \"title\"\n        },\n        prepare({formData =[]}) {\n            return {\n                title: formData.length + \" markrer\"\n            }\n        }\n    },\n    \"items\": {\n        ...links.items,\n        \"ui:preview\": {\n            \"select\": {\n                \"badgeContent\": \"badgeContent\",\n                \"imageUrl\": \"imageUrl\",\n                \"typeLabel\": \"typeLabel\",\n                \"title\": \"title\",\n                \"metadata\": \"metadata\",\n            },\n            prepare({formData, formContext, index}) {\n                const { mediaId, media, referenceId, reference } = formData\n    \n                const locale = formContext.currentLocale ||formContext.defaultLocale;\n                const localeId = \"locale:\" + locale\n    \n                const runningHead = formData.runningHead && formData.runningHead[localeId] \n                const title = formData.title && formData.title[localeId] \n                const badgeContent = index + 1\n\n                const localTitle = runningHead && title && runningHead + \": \" + title ||title\n                const referenceTitle = referenceId && reference && reference.title\n    \n                const imageUrl = media && media.imageUrl ||reference && reference.imageUrl\n                const typeLabel = referenceId && reference && reference.documentType\n    \n                let metadata = []\n    \n                referenceId && reference && reference.title && metadata.push(reference.title)\n    \n                return {\n                    badgeContent: badgeContent,\n                    imageUrl: imageUrl,\n                    typeLabel: typeLabel,\n                    title: localTitle || referenceTitle,\n                    metadata: metadata,\n                }\n    \n            }\n        },\n    }\n}","import schema from \"./schema\";\nimport uiSchema from \"./uiSchema\";\nimport PreviewTemplate from \"../../Preview/KioskPreview\"\n\nexport default {\n    id: 1,\n    schemaType: 'documents',\n    name: 'pageMedia',\n    schema: schema,\n    uiSchema: uiSchema,\n    preview: {\n        template: PreviewTemplate\n    }\n}","import schema from \"../page/schema\"\nexport default schema","import uiPreview from \"./uiPreview\"\nimport settings from \"../page/settings/uiSchema\"\nimport header from \"./mediaHeader/uiSchema\"\nimport body from \"./mediaBody/uiSchema\"\n\nexport default {\n    \"ui:field\": \"pageEditor\",\n    \"ui:preview\": uiPreview,\n    \"ui:fieldset\": [\n        \"content\",\n        \"settings\"\n    ],\n    \"content\": {\n        \"ui:field\": \"kpPage\",\n        \"ui:fieldset\": [\n            \"header\",\n            \"body\"\n        ],\n        \"header\": header,\n        \"body\": body\n    },\n    \"settings\": settings\n}","import uiPreview from \"../page/uiPreview\"\nexport default uiPreview","import uiSchema from \"../../page/pageHeader/uiSchema\"\nexport default {\n    ...uiSchema,\n    \"ui:title\": \"Media\",\n}","import links from \"../mediaLinks/uiSchema\"\n\nexport default {\n    \"ui:layout\": \"section\",\n    \"ui:title\": \"Innhold\",\n    \"ui:icon\": \"link\",\n    \"ui:fieldset\": [\n        \"links\"\n    ],\n    \"ui:settings\": [\n        \"mediaLayout\",\n    ],\n    \"links\": links\n}","import links from \"../../page/links/uiSchema\"\n\nexport default {\n    ...links,\n    \"ui:title\": \"Media\",\n    \"ui:preview\": {\n        \"select\": {\n            \"title\": \"title\"\n        },\n        prepare({formData =[]}) {\n            return {\n                title: formData.length + \" media\"\n            }\n        }\n    },\n    \"ui:dialog\": {\n        \"query\": {\n            \"models\": \"media\",\n            \"mediaType\": [\"image\",\"video\",\"audio\"]\n        }\n    },\n    \"ui:buttons\": [\n        {\n            \"type\": \"sidebar\",\n            \"icon\": \"search\",\n            \"title\": \"Finn media\",\n        },\n        {\n            \"type\": \"upload\",\n            \"title\": \"Last opp\"\n        }\n    ],\n    \"items\": {\n        ...links.items,\n        \"ui:preview\": {\n            \"select\": {\n                \"imageUrl\": \"imageUrl\",\n                \"typeLabel\": \"typeLabel\",\n                \"title\": \"title\",\n                \"metadata\": \"metadata\",\n            },\n            prepare({formData, formContext, index}) {\n                const { mediaId, media, referenceId, reference } = formData\n    \n                const locale = formContext.currentLocale ||formContext.defaultLocale;\n                const localeId = \"locale:\" + locale\n    \n                const runningHead = formData.runningHead && formData.runningHead[localeId] \n                const title = formData.title && formData.title[localeId] \n\n                const localTitle = runningHead && title && runningHead + \": \" + title ||title\n                const referenceTitle = referenceId && reference && reference.title\n    \n                const imageUrl = media && media.imageUrl ||reference && reference.imageUrl\n                const typeLabel = referenceId && reference && reference.documentType\n    \n                let metadata = []\n    \n                referenceId && reference && reference.title && metadata.push(reference.title)\n    \n                return {\n                    imageUrl: imageUrl,\n                    typeLabel: typeLabel,\n                    title: localTitle || referenceTitle,\n                    metadata: metadata,\n                }\n    \n            }\n        },\n        \"link\": {\n            ...links.items.link,\n            \"linkMedia\": {\n                ...links.items.content.linkMedia,\n                \"ui:sidebar\": {\n                    \"query\": {\n                        \"models\": \"media\",\n                        \"mediaType\": [\"image\",\"video\",\"audio\"]\n                    }\n                }\n            }\n        }\n    }\n}","import schema from \"./schema\";\nimport uiSchema from \"./uiSchema\";\nimport PreviewTemplate from \"../../Preview/KioskPreview\"\n\nexport default {\n    id: 1,\n    schemaType: 'documents',\n    name: 'device',\n    schema: schema,\n    uiSchema: uiSchema,\n    preview: {\n        template: PreviewTemplate\n    }\n}","export default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\"\n        },\n        \"title\": {\n            \"type\": \"string\"\n        },\n        \"content\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"deviceId\": {\n                    \"type\": \"number\"\n                },\n                \"deviceTitle\": {\n                    \"type\": \"string\"\n                },\n                \"deviceType\": {\n                    \"type\": \"string\",\n                    \"enum\": [\"windows\",\"ipad\"],\n                    \"enumNames\": [\"Windows\",\"iPad\"]\n                },\n                \"serialNumber\": {\n                    \"type\": \"string\",\n                },\n                \"placement\": {\n                    \"type\": \"string\",\n                },\n                \"backgroundImage\": {\n                    \"type\": \"image\",\n                    \"focalpoint\": true\n                },\n                \"startPageId\": {\n                    \"type\": \"string\",\n                    \"readonly\": true\n                },\n                \"hasPages\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"reference\",\n                        \"documentType\": \"page\",\n                        \"referenceType\": \"deviceHasPages\",\n                        \"_reverseReferenceType\": \"pageIsPartOf\",\n                        \"_reverseReference\": \"isPartOf[]\",\n                        \"properties\": {\n                            \"content\": {\n                                \"type\": \"object\",\n                                \"properties\": {\n                                    \"icon\": {\n                                        \"type\": \"string\"\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}","import settings from \"./settings/uiSchema\";\nimport header from \"./header/uiSchema\";\nimport media from \"./media/uiSchema\";\nimport hasPages from \"./hasPages/uiSchema\";\nimport uiPreview from \"./uiPreview\";\n\nexport default {\n    \"ui:preview\": uiPreview,\n    \"ui:field\": \"pageEditor\",\n    \"ui:fieldset\": [\n        \"content\",\n//        \"settings\"\n    ],\n    \"settings\": settings,\n    \"content\": {\n        \"ui:field\": \"kpDevice\",\n        \"ui:nav\": true,\n        \"ui:fieldset\": [\n            \"header\",\n            \"media\",\n            \"hasPages\",\n        ],\n        \"header\": header,\n        \"media\": media,\n        \"hasPages\": hasPages\n    }\n}","export default {\n    \"select\": {\n        \"imageUrl\" : \"imageUrl\",\n        \"title\" : \"title\",\n        \"description\" : \"description\",\n        \"metadata\" : \"metadata\",\n        \"typeLabel\": \"typeLabel\"\n    },\n    prepare({formData, formContext}) {\n        let { documentType, locale, imageUrl, title, content, description } = formData\n  \n//        const { defaultLocale } = formContext\n        const defaultLocale = locale\n        const localeId = \"locale:\" + defaultLocale;\n  \n        let metadata = []\n\n        const backgroundImage = content && content.backgroundImage;\n        const hasPages = content && content.hasPages;\n        const deviceTitle = content && content.deviceTitle\n        const deviceId = content && content.deviceId\n        const deviceType = content && content.deviceType\n\n        const typeLabel = deviceType && documentType + \"/\" + deviceType ||documentType\n\n        if (backgroundImage && backgroundImage.media && backgroundImage.media.imageUrl) {\n            imageUrl = backgroundImage.media.imageUrl\n        }\n      \n        if (hasPages && hasPages.length) {\n            metadata.push(hasPages.length + ' sider')\n        }\n\n        if (deviceId) {\n            metadata.push('#'+deviceId)\n        }\n\n        return {\n            imageUrl: imageUrl,\n            title: deviceTitle ||title,\n            description: description,\n            metadata: metadata,\n            typeLabel: typeLabel\n        }\n      \n    }\n    \n}","export default {\n    \"ui:field\": \"pageSettings\",\n    \"ui:nav\": true,\n    \"ui:fieldset\": [\n        \"device\",\n    ],\n    \"device\": {\n        \"ui:layout\": \"section\",\n        \"ui:fieldset\": [\n            \"content\"\n        ],\n        \"content\": {\n            \"ui:fieldset\": [\n                \"deviceTitle\",\n                \"deviceId\"\n            ],\n            \"deviceTitle\": {\n                \"ui:title\": \"Intern tittel\"\n            },\n            \"deviceId\": {\n                \"ui:title\": \"DeviceId\"\n            }\n        }\n    }\n}","export default {\n    \"ui:layout\": \"section\",\n    \"ui:icon\": \"settings\",\n    \"ui:options\" : {\n        \"expanded\": true,\n//        \"collapsible\": true,\n        \"spacing\": 2\n    },\n    \"ui:title\": \"Enhet\",\n    \"ui:preview\": {\n        \"select\": {\n            \"description\": \"description\"\n        },\n        prepare({formData, formContext}) {\n            const localeId = \"locale:\" + formContext.currentLocale\n            const description = formData.deviceTitle \n\n            return {\n                description: description\n            }\n\n        }\n    },\n    \"ui:fieldset\": [\n        \"deviceTitle\",\n        \"deviceId\",\n        \"deviceType\",\n        \"serialNumber\",\n        \"startPageId\"\n    ],\n    \"deviceTitle\": {\n        \"ui:title\": \"Intern tittel\"\n    },\n    \"deviceId\": {\n        \"ui:title\": \"Id\",\n    },\n    \"deviceType\": {\n        \"ui:title\": \"Type enhet\",\n    },\n    \"serialNumber\": {\n        \"ui:title\": \"Serienummer\"\n    },\n    \"leadtext\": {\n        \"ui:title\": \"Ingress\",\n        \"ui:widget\": \"textarea\"\n    },\n    \"bodytext\": {\n        \"ui:title\": \"Brdtekst\",\n        \"ui:widget\": \"textarea\"\n    }\n}","export default {\n    \"ui:layout\": \"section\",\n    \"ui:icon\": \"image\",\n    \"ui:title\": \"Bakgrunnsbilde\",\n    \"ui:options\": {\n//        \"collapsible\": true\n    },\n    \"ui:fieldset\": [\n        \"backgroundImage\",\n    ],\n    \"backgroundImage\": {\n        \"ui:buttons\": [\n            {\n                \"icon\": \"search\",\n                \"title\": \"Finn bakgrunnsbilde\",\n                \"type\": \"sidebar\"\n            }\n        ]\n    }\n}","export default {\n    \"ui:layout\": \"section\",\n    \"ui:icon\": \"menu\",\n    \"ui:title\": \"Innhold\",\n    \"ui:options\" : {\n        \"draggable\": true\n    },\n    \"ui:preview\": {\n        \"select\": {\n            \"title\": \"title\"\n        },\n        prepare({formData}) {\n            const count = formData && formData.length;\n            if (count) {\n                return {\n                    \"title\": count + \" sider\"\n                }\n            }\n            return {\n               \"title\": \"Ingen sider\"\n            }\n        }\n    },\n    \"ui:dialog\": {\n        \"query\": {\n            \"models\": \"documents\",\n            \"documentType\": \"page*\"\n        }\n    },\n    \"ui:buttons\": [\n        {\n            \"type\": \"sidebar\",\n            \"icon\": \"search\",\n            \"title\": \"Finn side\"\n        },\n    ],\n    \"items\": {\n        \"ui:options\": {\n            \"editable\": false\n        },\n        \"ui:field\": \"kpDeviceLink\"\n    }\n}","import mediaSchemas from \"@kit-ui/schema/es/Media/schemas\"\nimport schemas from \"./\"\n\nlet schemasByName = {}\n\nconst allSchemas = [\n    ...mediaSchemas,\n    ...schemas\n]\n\nallSchemas.map(schema => {\n    const { schemaType, name } = schema\n\n    if (schemaType && name) {\n        schemasByName[schemaType + \"/\" + name] = schema\n    }\n})\n\nexport default schemasByName","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getAppLayout } from '../redux/app';\nimport { editModel, saveModel } from '../redux/editor';\nimport qs from 'query-string';\n\nimport Editor from \"../Editor/Editor\"\nimport EditorLoader from \"../Editor/EditorLoader\"\n\nimport schemasByName from \"../schemas/schemasByName\"\n\nimport { utils } from '@kit-ui/schema';\nconst { getUiPreview, getDefaultFormState } = utils\n\nconst DocumentEditor = (props) => {\n    const { uniqueId, documentType } = props.match.params\n\n    const dispatch = useDispatch()\n\n    // new or create doc\n\n    const app = useSelector(state => state.app)\n\n    useEffect(() => {\n        const { pathname, search } = props.location\n        const sq = search && qs.parse(search) ||{}\n\n        documentType && dispatch(editModel({\n            collectionId: app.collectionId,\n            schemaId: 1,\n            locale: \"no\",\n            documentType: documentType,\n            content: sq.content && JSON.parse(sq.content) || {}\n        }))\n    }, [documentType])\n\n    useEffect(() => {\n        uniqueId && dispatch(editModel({uniqueId: uniqueId}))\n    }, [uniqueId])\n\n    // uniqueId has changed, update location\n\n    const _onHistory = (uniqueId) => {\n\n        const { path, params } = props.match;\n        const { hash, search } = props.location;\n        \n        let location = path;\n    \n        if (hash) {\n            location = location + hash;\n        }\n    \n        for (let key in params) {\n      \n            let value;\n          \n            if (key === \"uniqueId\") {\n                value = uniqueId\n            } else if (key === \"documentType\") {\n                value = uniqueId\n            } else {\n                value = params[key];\n            }\n\n            if (value) {\n                location = location.replace(':'+key+\"*\", value);\n                location = location.replace(':'+key, value);\n            } else {\n                location = location.replace(':'+key+\"*\", '');\n                location = location.replace(':'+key, '');\n            }\n\n            location = location.replace(\"//\", \"/\");\n\n        }\n\n        location = location.replace(\"new\", \"edit\");\n        props.history.replace(location);\n\n    }\n\n    // set formContext\n\n    const _onBack = () => {\n        props.history.goBack()\n    }\n\n    const _onSelect = ({url}) => {\n        url && props.history.push(url)\n    }\n\n    const _onEditReference = ({id, formData: { referenceId, reference: { documentType } }}) => {\n\n        const referenceUrl = app.root + \"/\" + referenceId + \"/edit/#\" + id\n\n        props.history.push({\n            pathname: referenceUrl,\n            search: \"?backUrl=\" + props.location.pathname + \"&backId=\" + id\n        })\n        \n\n    }\n\n    const editor = useSelector(state => state.editor)\n    const formData = editor.formData\n\n    const formContext = {\n        isLoading: editor && editor.isLoading,\n        isSaving: editor && editor.isSaving,\n        id: formData && formData.id,\n        uniqueId: formData && formData.uniqueId,\n        collectionId: formData && formData.collectionId,\n        parents: app && app.parents,\n        languages: app && app.languages,\n        onBack: _onBack,\n        onSelect: _onSelect,\n        onEditReference: _onEditReference\n    }\n\n    // get schemas based on documentType\n\n    const modelType = uniqueId && formData.documentType ||documentType\n    const documentModel = modelType && \"documents/\"+modelType \n    const model = schemasByName && schemasByName[documentModel]\n\n    const schema = model && model.schema\n    const uiSchema = model && model.uiSchema\n\n    // submit\n\n    const collectionId = useSelector(state => state.app.collectionId)\n\n    const _onSubmit = ({formData}) => {\n\n        const uiPreview = getUiPreview({schema, uiSchema, formData})\n        \n        formData = {\n            ...formData,\n            ...uiPreview,\n            collectionId: collectionId,\n            schemaId: 1,\n            locale: \"no\",\n        }\n\n        dispatch(saveModel(formData))\n\n        if (documentType && !uniqueId && formData.uniqueId) {\n            _onHistory(formData.uniqueId)\n        }\n\n    }\n\n\n    return (\n        <EditorLoader formData={formData} schema={schema} uiSchema={uiSchema}>\n            <Editor {...props}\n                schema={schema}\n                uiSchema={uiSchema}\n                formData={formData}\n                formContext={formContext}\n                preview={model && model.preview}\n                onSubmit={_onSubmit} />\n        </EditorLoader>\n    )\n\n}\n\nDocumentEditor.defaultProps = {\n}\n\nexport default DocumentEditor","import React, { useEffect, useState } from 'react';\nimport { PreviewMedia } from \"@kit-ui/admin\"\n\nconst MediaPreview = ({formData, formContext}) => {\n    return <PreviewMedia {...formData} />\n}\n\nexport default MediaPreview","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getAppLayout } from '../redux/app';\nimport { editModel, saveModel } from '../redux/editor';\n\nimport Editor from \"../Editor/Editor\"\nimport EditorLoader from \"../Editor/EditorLoader\"\n\nimport MediaPreview from \"./MediaPreview\"\n\nimport schemasByName from \"../schemas/schemasByName\"\n\nimport { utils } from '@kit-ui/schema';\nconst { getUiPreview, getDefaultFormState } = utils\n\nconst MediaEditor = (props) => {\n    const { uniqueId } = props.match.params\n\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        dispatch(getAppLayout(\"editor\"))\n    }, [])\n\n    useEffect(() => {\n        uniqueId && dispatch(editModel({modelName: \"media\", uniqueId: uniqueId}))\n    }, [uniqueId])\n\n\n    // set formContext\n\n    const _onBack = () => {\n        props.history.goBack()\n    }\n\n    const _onSelect = ({url}) => {\n        url && props.history.push(url)\n    }\n\n    const editor = useSelector(state => state.editor)\n    const formData = editor.formData\n\n    const formContext = {\n        isLoading: editor && editor.isLoading,\n        isSaving: editor && editor.isSaving,\n        parents: useSelector(state => state.app.parents),\n        onBack: _onBack,\n        onSelect: _onSelect,\n    }\n\n    // get schemas based on documentType\n\n    const mediaType = uniqueId && formData && formData.mediaType\n    const mediaModel = mediaType && \"media/\" + mediaType\n    const model = schemasByName && schemasByName[mediaModel]\n\n    const schema = model && model.schema\n    const uiSchema = model && model.uiSchema\n\n    // submit\n\n    const collectionId = useSelector(state => state.app.collectionId)\n\n    const _onSubmit = ({formData}) => {\n\n        const uiPreview = getUiPreview({schema, uiSchema, formData})\n        \n        formData = {\n            ...formData,\n            ...uiPreview,\n            modelName: \"media\",\n            collectionId: collectionId,\n            schemaId: 1,\n            locale: \"no\",\n        }\n\n        dispatch(saveModel(formData))\n    }\n\n\n    return (\n        <EditorLoader formData={formData} schema={schema} uiSchema={uiSchema}>\n            <Editor {...props}\n                schema={schema}\n                uiSchema={uiSchema}\n                formData={formData}\n                formContext={formContext}\n                preview={{\n                    template: MediaPreview\n                }}\n                onSubmit={_onSubmit} />\n        </EditorLoader>\n    )\n\n}\n\nMediaEditor.defaultProps = {\n}\n\nexport default MediaEditor","import { API } from \"../settings\"\nimport { createSlice } from '@reduxjs/toolkit'\nimport qs from 'query-string';\n\nimport EXIF from 'exif-js';\nimport * as mm from 'music-metadata-browser';\n\n\nconst uploadByIdSlice = createSlice({\n    name: 'upload',\n    initialState: {\n    }, \n    reducers: {\n        requestUpload(state, action) {\n            const { id, requested } = action.payload\n\n            return {\n                ...state,\n                [id]: {\n//                    acceptedFiles: acceptedFiles,\n//                    rejectedFiles: rejectedFiles,\n                    requested: requested,\n                    received: 0,\n                    count: 0,\n                    resultsLoaded: []\n                }\n            }\n        },\n        receiveUpload(state, action) {\n            const { id, results } = action.payload\n\n            return state\n        },\n        requestUploadModel(state, action) {\n            const { id, model } = action.payload\n\n            return {\n                ...state,\n                [id]: {\n                    ...state[id],\n//                    received: state[id].received + 1,\n                }\n            }\n            \n        },\n        receiveUploadModel(state, action) {\n            const { id, data } = action.payload\n\n            return {\n                ...state,\n                [id]: {\n                    ...state[id],\n                    count: state[id].count + 1,\n                    resultsLoaded: [\n                        ...state[id].resultsLoaded,\n                        data\n                    ]\n                }\n            }\n        },\n        receiveUploadProgress(state, action) {\n            const { id, progress } = action.payload\n\n            return state\n            \n        },\n        receiveUploadStatus(state, action) {\n            const { id, status } = action.payload\n\n            return state\n        }\n    }\n})\n\nexport const getUpload = ({id, acceptedFiles = [], uploadData = { status: \"upload\" }}) => dispatch => {\n\n    const requested = acceptedFiles.length ||0\n\n    dispatch(requestUpload({id, requested}))\n\n    acceptedFiles && acceptedFiles.map((file, index) => {\n//      dispatch(requestUploadModel({id}))\n        dispatch(getUploadUrl({id, file, uploadData}))\n    })\n\n}\n\nexport const getUploadUrl = ({id, file, uploadData = {}}) => dispatch => {\n\n    console.log('getUploadMetadata', file)\n\n    const { name, type, size } = file\n\n    uploadData = {\n        ...uploadData,\n        title: uploadData.title || name,\n        filename: name,\n        mimeType: type,\n        mediaSize: size,\n        content: {\n            ...uploadData.content,\n            title: name,\n            filename: name\n        }\n    }\n\n    // where to upload?\n\n    let url = API + '/admin/api/media/upload';\n  \n    if (type.startsWith('image/')) {\n        url = url + '/image'\n    } else if (type.startsWith('video/')) {\n        url = url + '/video'\n    } else if (type.startsWith('audio/')) {\n        url = url + '/audio'\n    } else {\n        url = url + '/misc'\n    }\n\n    console.log('url', url);\n\n    const payload = JSON.stringify(uploadData);\n\n    fetch(url, {\n        method: \"POST\",\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json; charset=utf-8\",\n        },\n        body: payload\n    })\n    .then(\n        response => response.json(),\n        error => console.log('An error occurred.', error)\n    )\n    .then(data => dispatch(getUploadData({id, file, data})))        \n\n}\n\n\n\nexport const getUploadData = ({id, file, data}) => dispatch => {\n\n    // uniqueId + uploadUrl\n\n    const { uniqueId, uploadUrl } = data;\n\n    dispatch(receiveUploadModel({id, data}))\n\n    const handleStatus = (uniqueId, event) => {\n        let uploadProgress;\n\n        if (event && event.lengthComputable) {\n            uploadProgress = Math.round(event.loaded * 100 / event.total);\n        } else {\n            uploadProgress = 100\n        }\n    \n        let url = API + '/admin/api/media/upload/status/' + uniqueId\n    \n        fetch(url, {\n            method: \"GET\",\n            headers: {\n                \"Accept\": \"application/json\",\n            },\n        })\n        .then(\n            response => response.json(),\n            error => console.log('An error occurred.', error)\n        )\n        .then(data => {\n            dispatch(receiveUploadStatus(uniqueId, data))\n        })\n\n    }\n\n    const _onProgress = (event) => {\n        let uploadProgress;\n\n        if (event.lengthComputable) {\n            uploadProgress = Math.round(event.loaded * 100 / event.total);\n        } else {\n            uploadProgress = 100\n        }\n\n        console.log(\"PROGRESS\", uploadProgress)\n    \n//        dispatch(receiveUploadProgress(uniqueId, uploadProgress))\n    \n    }\n\n\n    // do the upload\n\n    let payload = new FormData();\n    payload.append('file', file);\n\n    var xhr = new XMLHttpRequest();\n//    onLoadStart && xhr.upload.addEventListener(\"load\", (event) => _onLoadStatus(event), false);\n        xhr.upload.addEventListener(\"progress\", (event) => _onProgress(event), false);\n//    onAbort && xhr.upload.addEventListener(\"abort\", (event) => _onAbort(event), false);\n//    onError && xhr.upload.addEventListener(\"error\", (event) => _onError(event), false);\n//    onLoad && xhr.upload.addEventListener(\"load\", (event) => _onLoad(event), false);\n//    onTimeout && xhr.upload.addEventListener(\"timeout\", (event) => _onTimeout(event), false);\n//    onLoadEnd && xhr.upload.addEventListener(\"loadend\", (event) => _onLoadEnd(event), false);\n    xhr.open(\"POST\", uploadUrl);\n    xhr.send(payload);\n\n\n//    getUploadModel({id, file, uploadData, callback: (props) => dispatch(handleUpload(props))})\n\n}\n\n\n\nexport const { requestUpload, requestUploadModel, receiveUploadModel, receiveUploadStatus, receiveUploadProgress } = uploadByIdSlice.actions\nexport default uploadByIdSlice.reducer","\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from \"prop-types\"\nimport { NavPath, NavSettings } from \"@kit-ui/admin\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    finder: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n    },\n    header: {\n        position: \"relative\",\n        height: theme.spacing(8),\n        display: \"flex\",\n        alignItems: \"center\",\n        zIndex: 1,\n        \"& + *\": {\n            marginTop: theme.spacing(8),\n            marginLeft: theme.spacing(2),\n            marginRight: theme.spacing(2),\n        }\n    },\n    body: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        overflowY: \"scroll\"\n    },  \n    path: {\n        margin: theme.spacing(0,2),\n    },\n    settings: {\n        position: \"absolute\",\n        zIndex: 2,\n        top: 0,\n        right: 0,\n        margin: theme.spacing(1)\n    }\n}));\n\nconst FinderLayout = ({\n    parents,\n    settings,\n    children,\n    ...props\n}) => {\n\n    const classes = useStyles()\n\n    return (\n        <div className={classes.finder}>\n            { settings && <NavSettings className={classes.settings} settings={settings} /> }\n            <header className={classes.header}>\n                {parents && <NavPath className={classes.path} parents={parents} /> }\n            </header>\n            <div className={classes.body}>\n                {children}\n            </div>\n        </div>\n    )\n\n}\n\nFinderLayout.defaultProps = {\n\n}\n\nFinderLayout.propTypes = {\n\n}\n\nexport default FinderLayout;","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyles = makeStyles(theme => ({\n    loader: {\n        display: \"flex\",\n        flexDirecton: \"column\",\n//        alignItems: \"baseline\",\n        color: theme.palette.text.secondary,\n        margin: theme.spacing(2),\n    },\n    title: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"14px\",\n        color: theme.palette.text.primary\n    }\n}));\n\nconst ResultsLoader = ({query = {}, isLoading, count = 0, children}) => {\n    const { t, i18n } = useTranslation('search');\n\n    const classes = useStyles()\n\n    let title;\n\n    const q = query.q && query.q.replace('*', '')\n\n    if (isLoading && !count) {\n        title = t('Searching, please wait', {q}) + \"...\";\n    } else if (!count) {\n        title = t('No hits')\n    }\n\n    if (title) {\n        return (\n            <div className={classes.loader}>\n                <Typography className={classes.title}>{title}</Typography>\n            </div>\n        )\n    }\n\n    return children\n\n}\n\nexport default ResultsLoader","import React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useTranslation } from 'react-i18next';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport MoreIcon from '@material-ui/icons/MoreHoriz';\n\nconst useStyles = makeStyles(theme => ({\n    footer: {\n        position: \"relative\",\n        width: \"100%\",\n        minHeight: theme.spacing(16),\n\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n\n    },\n    button: {\n        flexGrow: 1,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n\n        \"&:hover\": {\n            cursor: \"pointer\"\n        },\n\n        border: \"1px solid\",\n        borderColor: theme.palette.divider,\n        backgroundColor: theme.palette.background.default,\n        backgroundColor: \"#eee\",\n        color: theme.palette.text.secondary,\n\n        minHeight: theme.spacing(12),\n        padding: 0,\n\n        \"& > *\": {\n            margin: theme.spacing(.5)\n        },\n\n    },\n    label: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"14px\",\n        fontWeight: \"normal\"\n    },\n\n}));\n\nconst ResultsFooter = ({start, rows, count, page, pages, nextPage, onPage}) => {\n    const { t, i18n } = useTranslation(['search']);\n    const classes = useStyles()\n\n    if (!nextPage) {\n        return false\n    }\n\n    const from = start+rows+1\n    const to = from+rows-1\n\n\n    const label = \"get page \" + nextPage // t('Get results {{from}}{{to}}', {from, to}) + \" ...\"\n\n\n    return (\n        <footer className={classes.footer}>\n            <Paper elevation={1} square={true} component=\"button\" className={classes.button} onClick={() => onPage(nextPage)}>\n                {/* <MoreIcon className={classes.icon} /> */}\n                <Typography className={classes.label}>{label}</Typography>\n            </Paper>\n        </footer>\n    )    \n}\n\nexport default ResultsFooter;","import React from 'react';\nimport PropTypes from \"prop-types\"\nimport IconButton from '@material-ui/core/IconButton';\nimport SelectIcon from '@material-ui/icons/Check';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    button: {\n        \"& svg\": {\n            width: theme.spacing(2.5),\n            height: theme.spacing(2.5),\n            position: \"absolute\",\n            top: \"50%\",\n            left: \"50%\",\n            transform: \"translate(-50%,-50%)\",\n            color: \"currentColor\"\n        }        \n    },\n    select: {\n        width: theme.spacing(3),\n        height: theme.spacing(3),\n        borderRadius: \"100%\",\n        border: \"1px dotted\",\n        margin: 1,\n        borderColor: \"currentColor\",\n\n        opacity: .5,\n\n        \"&:hover\": {\n            opacity: 1\n        }\n\n    },\n    selected: {\n        display: \"block\",\n        width: theme.spacing(3),\n        height: theme.spacing(3),\n        borderRadius: \"100%\",\n        border: \"2px solid\",\n        borderColor: theme.palette.primary.main,\n        backgroundColor: theme.palette.primary.main,\n        color: theme.palette.primary.contrastText,\n        boxShadow: theme.shadows[2],\n    }\n}));\n\nconst ButtonSelect = ({className, selected = false, onClick}) => {\n    const classes = useStyles();\n\n    if (selected) {\n\n        return (\n            <IconButton className={className || classes.button} aria-selected={selected} color=\"inherit\" aria-label=\"select\" onClick={onClick}>\n                <div className={classes.selected}>\n                    <SelectIcon />\n                </div>\n            </IconButton>\n        )\n\n    }\n\n    return (\n        <IconButton className={className || classes.button} aria-selected={selected} color=\"inherit\" aria-label=\"select\" onClick={onClick}>\n            <div className={classes.select}>\n                <SelectIcon />\n            </div>\n        </IconButton>\n    )\n\n}\n\nButtonSelect.propTypes = {\n    selected: PropTypes.bool,\n    onClick: PropTypes.func\n}\n\nexport default ButtonSelect;","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    base: {\n        position: \"absolute\",\n        zIndex: 2,\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n    },\n}));\n\nconst PreviewBase = ({children}) => {\n\n    const classes = useStyles()\n\n    if (!children) {\n        return false\n    }\n\n    return (\n        <div className={classes.base}>\n            {children}\n        </div>\n    )\n}\n\nPreviewBase.propTypes = {\n    children: PropTypes.node,\n}\n\nexport default PreviewBase;","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    scale: {\n        position: \"absolute\",\n        transform: props => { return props.scale && \"scale(\"+props.scale+\")\" },\n        margin: props => { return props.margin },\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n\n        \"& > *\": {\n            position: \"absolute\",\n            top: 0,\n            right: 0,\n            bottom: 0,\n            left: 0,\n\n            maxWidth: props => { return props.maxWidth },\n            marginLeft: \"auto\",\n            marginRight: \"auto\",\n        }\n\n    },\n}));\n\nconst PreviewScale = ({children, maxWidth, scale = 1, margin = 0, ...props}) => {\n\n    if (scale < 1) {\n        margin = scale * 100 * -1 + \"%\"\n    }\n\n    const classes = useStyles({scale, maxWidth, margin})\n\n    return (\n        <div className={classes.scale}>\n            {children}\n        </div>\n    )\n}\n\nPreviewScale.propTypes = {\n    children: PropTypes.node.isRequired,\n}\n\nexport default PreviewScale;","import React from 'react';\nimport { ModuleBase, ModuleTitle, ModuleLabel, ModuleMetadata } from \"@kit-ui/admin\"\nimport {ButtonSelect } from \"../\"\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    module: {\n        position: \"relative\",\n        width: \"100%\",\n        boxShadow: theme.shadows[1],\n\n        \"&:hover\": {\n            boxShadow: theme.shadows[4]\n        },\n\n        \"&[aria-selected=true]\": {\n            backgroundColor: theme.palette.action.selected,\n        }\n\n    },\n    primaryAction: {\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n    },\n    figure: {\n        width: \"100%\",\n        overflow: \"hidden\",\n        margin: 0,\n\n        \"& > img\": {\n            display: \"block\",\n            width: \"100%\"\n        }\n\n    },\n    content: {\n        padding: theme.spacing(1)\n    }\n\n}));\n\n\nconst MasonryModule = ({uniqueId, title, imageUrl, documentType, selectable, selected, onSelect, onEdit, ...props}) => {\n\n    const classes = useStyles()\n\n    const _onSelect = (event) => {\n        event.stopPropagation()\n        onSelect && onSelect()\n    }\n\n    return (\n        <ModuleBase className={classes.module} selected={selected} elevation={1} onClick={onEdit}>\n            \n            <figure className={classes.figure}>\n                <img src={imageUrl} />\n            </figure>\n            <div className={classes.content}>\n                <ModuleTitle title={title} />\n                <ModuleLabel>{documentType}</ModuleLabel>\n                <ModuleMetadata metadata={[uniqueId]}></ModuleMetadata>\n            </div>\n            <div className={classes.primaryAction}>\n                { selectable && <ButtonSelect selected={selected} onClick={_onSelect} /> }\n            </div>\n        </ModuleBase>\n    )\n\n}\n\nexport default MasonryModule","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { create } from 'jss';\nimport { makeStyles, withStyles, useTheme, jssPreset, StylesProvider } from '@material-ui/core/styles';\nimport NoSsr from '@material-ui/core/NoSsr';\nimport rtl from 'jss-rtl';\nimport Frame from 'react-frame-component';\n\nconst useStyles = theme => ({\n    frame: {\n        width: \"100%\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        height: \"100%\",\n        border: 'none',\n    },\n});\n\nconst PreviewIframe = (props) => {\n    const { children, classes, ...other } = props;\n    const theme = useTheme();\n    const [state, setState] = useState({\n        ready: false,\n    });\n    \n    const instanceRef = React.useRef();\n\n    const handleRef = React.useCallback((ref) => {\n        instanceRef.current = {\n            contentDocument: ref ? ref.node.contentDocument : null,\n            contentWindow: ref ? ref.node.contentWindow : null,\n        };\n    }, []);\n\n    const onContentDidMount = () => {\n        setState({\n            ready: true,\n            jss: create({\n            plugins: [...jssPreset().plugins, rtl()],\n            insertionPoint: instanceRef.current.contentWindow['demo-frame-jss'],\n            }),\n            sheetsManager: new Map(),\n            container: instanceRef.current.contentDocument.body,\n            window: () => instanceRef.current.contentWindow,\n        });\n    };\n\n    const onContentDidUpdate = () => {\n        instanceRef.current.contentDocument.body.dir = theme.direction;\n    };\n\n//    const wrapper = useStyles()\n\n    // NoSsr fixes a strange concurrency issue with iframe and quick React mount/unmount\n    return (\n        <NoSsr defer>\n            <Frame\n                ref={handleRef}\n                className={classes.frame}\n                contentDidMount={onContentDidMount}\n                contentDidUpdate={onContentDidUpdate}\n                {...other}\n            >\n            <div id=\"demo-frame-jss\" />\n                {state.ready ? (\n                <StylesProvider jss={state.jss} sheetsManager={state.sheetsManager}>\n                    {React.cloneElement(children, {\n                    container: state.container,\n                    window: state.window,\n                    })}\n                </StylesProvider>\n                ) : null}\n            </Frame>\n        </NoSsr>\n    )\n}\n\nPreviewIframe.propTypes = {\n    children: PropTypes.node.isRequired,\n    classes: PropTypes.object.isRequired,\n}\n\nexport default withStyles(useStyles)(PreviewIframe);","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getModel, deleteModel, restoreModel, eraseModel, selectModel } from '../redux/modelsById';\n\nimport { ListModule, TableModule, GridModule, GalleryModule } from '@kit-ui/admin';\n\nimport MasonryModule from \"../components/Masonry/MasonryModule\"\n\nimport schemasByName from \"../schemas/schemasByName\"\n\nimport { utils } from '@kit-ui/schema';\nconst { getUiPreview } = utils;\n\nconst layouts = {\n    \"table\": TableModule,\n    \"list\": ListModule,\n    \"grid\": GridModule,\n    \"masonry\": MasonryModule,\n    \"gallery\": GalleryModule,\n}\n\n\nconst FinderModel = ({model, layout = \"list\", ...props}) => {\n    const { modelName, uniqueId, documentType, mediaType, source, sourceId, } = model;\n\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        if (modelName && uniqueId && !modelsById[uniqueId]) {\n            dispatch(getModel({modelName: modelName, uniqueId: uniqueId}))\n        }\n    }, [uniqueId])\n\n    const _onLink = () => {\n        props.history.push('/checkout/' + uniqueId)\n    }\n\n    const _onEdit = () => {\n        props.history.push(props.location.pathname + '/' + uniqueId + \"/edit\")\n    }\n\n    const _onDelete = () => {\n        dispatch(deleteModel({modelName: modelName, uniqueId: uniqueId}))\n    }\n\n    const _onRestore = () => {\n        dispatch(restoreModel({modelName: modelName, uniqueId: uniqueId}))\n    }\n\n    const _onErase = () => {\n        dispatch(eraseModel({modelName: modelName, uniqueId: uniqueId}))\n    }\n\n    const _onSelect = () => {\n        dispatch(selectModel({modelName: modelName, uniqueId: uniqueId}))\n    }\n\n    // uniqueModel\n\n    const modelsById = useSelector(state => state.modelsById)\n    const uniqueModel = modelsById && modelsById[uniqueId] ||{}\n\n    // uiPreview\n   \n    const documentModel = documentType && schemasByName && schemasByName[\"documents/\" + documentType]\n    const uiPreview = documentModel && uniqueModel.uniqueId && getUiPreview({...documentModel, formData: uniqueModel}) ||{}\n\n    // model\n\n    model = {\n        ...uniqueModel,\n        ...model,\n        ...uiPreview\n    }\n\n\n    const {selected, status } = model\n\n    const getToolbar = () => {\n\n        if (selected) {\n            return false\n        }\n\n        if (status === \"erased\") {\n            return false\n        }\n\n        if (status === \"trash\") {\n            return [\n                {\n                    icon: \"restore\",\n                    onClick: _onRestore\n                },\n                {\n                    icon: \"delete_forever\",\n                    onClick: _onErase\n                },\n                \n            ]\n        }\n\n        return [\n            {\n                icon: \"edit\",\n                onClick: _onEdit\n            },\n            {\n                icon: \"delete\",\n                onClick: _onDelete\n            },\n            {\n                icon: \"links\",\n                onClick: _onLink\n            }\n        ]\n\n    }\n\n    const toolbar = getToolbar()\n\n    const ModuleTemplate = layout && layouts[layout]\n\n    return (\n        <ModuleTemplate {...model} \n            description={false}\n            selectable={true}\n            onEdit={_onEdit}\n            onSelect={_onSelect}\n            toolbar={toolbar} />\n    )\n\n}\n\nexport default FinderModel","import React from 'react';\nimport ResultsLoader from \"./ResultsLoader\"\nimport ResultsFooter from \"./ResultsFooter\"\nimport FinderModel from \"./FinderModel\"\n\nconst ListLayout = ({children}) => {\n    return <div>{children}</div>\n}\n\nconst DocumentsList = ({layout = \"list\", resultsLoaded, onPage, ...props}) => {\n\n    return (\n        <ResultsLoader {...props}>\n            <ListLayout padding={2}>\n                {resultsLoaded && resultsLoaded.map((model, index) => {\n                    return (\n                        <FinderModel model={model} layout={layout} {...props} key={index} />\n                    )\n                })}\n            </ListLayout>\n            <ResultsFooter {...props} onPage={onPage} />\n        </ResultsLoader>\n    )\n\n}\n\nexport default DocumentsList","import React from 'react';\nimport PropTypes from \"prop-types\"\nimport Dropzone from 'react-dropzone'\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Paper from '@material-ui/core/Paper';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport CloudDoneIcon from '@material-ui/icons/CloudDone';\n\nimport Typography from '@material-ui/core/Typography';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyles = makeStyles(theme => ({\n    upload: {\n        position: \"sticky\",\n        zIndex: 2,\n        bottom: 0,\n        color: \"inherit\",\n\n        minHeight: theme.spacing(16),\n\n        \"&[aria-expanded=true]\": {\n            top: 0,\n            height: \"100%\",\n\n            \"& $dropzone\": {\n                margin: 0\n            },\n\n            \"& $dropButton\": {\n                border: 0\n            }\n\n        },\n\n       \"& + *\": {\n            marginTop: theme.spacing(8),\n        }\n   \n    },\n    closeButton: {\n        position: \"absolute\",\n        zIndex: \"2\",\n        top: \"0\",\n        right: \"0\",\n        margin: theme.spacing(1),\n    },\n    dropzone: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        flexGrow: 1,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        color: \"inherit\",\n//        overflow: \"hidden\",\n        margin: theme.spacing(2),\n    },\n    dropButton: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        flexGrow: 1,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        border: \"1px solid\",\n        borderColor: theme.palette.divider,\n        backgroundColor: theme.palette.background.default,\n        backgroundColor: \"#eee\",\n        color: theme.palette.text.secondary,\n\n        \"&:hover\": {\n            cursor: \"pointer\"\n        },\n\n        \"& > *\": {\n            margin: theme.spacing(.5)\n        },\n\n    },\n    label: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"14px\",\n        fontWeight: \"normal\"\n    },\n\n}));\n\nconst UploadDropzone = ({className, accept, multiple, onUpload, onCancel, currentUpload = {}, children, expanded = false, ...props}) => {\n    const { t, i18n } = useTranslation('dialog');\n    const classes = useStyles()\n\n    const handleDrop = (acceptedFiles, rejectedFiles) => {\n        onUpload && onUpload(acceptedFiles)\n        console.log('acceptedFiles', acceptedFiles)\n        console.log('rejectedFiles', rejectedFiles)\n    }\n\n    const { requested, received } = currentUpload;\n\n    let label\n\n    if (!expanded) {\n        label = t('Upload more');\n    } else if (received > 0 && requested < received) {\n        label = t('Uploading {{requested}} of {{received}}', { requested, received }) + \"...\";\n    } else {\n        label = t('Click or drop files to upload');\n    }\n\n    const ButtonClose = ({className, onClick}) => {\n        return (\n            <IconButton className={className} onClick={onClick}>\n                <CloseIcon />\n            </IconButton>\n        )\n    }\n\n    return (\n        <div className={classes.upload} aria-expanded={expanded}>\n            <Dropzone multiple={multiple} accept={accept} onDrop={handleDrop}>\n                {({getRootProps, getInputProps}) => (\n                    <div className={classes.dropzone} {...getRootProps()}>\n                        <input {...getInputProps()} />\n                        <Paper className={classes.dropButton} elevation={1} square={true}>\n                            <CloudUploadIcon className={classes.icon} />\n                            <Typography className={classes.label}>{label}</Typography>\n                        </Paper>\n                    </div>\n                )}\n            </Dropzone>\n            {expanded && <ButtonClose className={classes.closeButton} onClick={onCancel} /> }\n        </div>\n    )\n    \n}\n\nUploadDropzone.propTypes = {\n    onUpload: PropTypes.func\n}\n\nUploadDropzone.defaultProps = {\n    multiple: true,\n    accept: \"image/*, video/*, audio/*\",\n}\n\nexport default UploadDropzone","import React, {useEffect, useState } from \"react\"\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getApp, getAppLayout, getParents } from '../redux/app';\nimport { getUpload } from '../redux/uploadById';\n\nimport FinderLayout from \"../Finder/FinderLayout\"\nimport ListLayout from \"../Finder/ListLayout\"\nimport UploadDropzone from \"../Upload/UploadDropzone\"\n\nconst MediaUpload = (props) => {\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        dispatch(getAppLayout(\"finder\"))\n    }, [])\n\n    const app = useSelector(state => state.app)\n    const menuByUrl = app && app.menuByUrl\n\n    const { pathname } = props.location\n\n    useEffect(() => {\n        menuByUrl && dispatch(getParents({menuByUrl, pathname: pathname}))\n    }, [menuByUrl, pathname])\n\n\n    const _onUpload = (acceptedFiles = []) => {\n\n        const uploadData = {\n            collectionId: app.collectionId,\n            status: \"upload\"\n        }\n\n        dispatch(getUpload({\n            id: pathname,\n            acceptedFiles,\n            uploadData\n        }))\n\n    }\n\n\n    const uploadById = useSelector(state => state.uploadById)\n\n    const currentUpload = uploadById && uploadById[pathname] ||{}\n\n\n    return (\n        <FinderLayout\n            parents={app && app.parents}>\n                <ListLayout {...currentUpload} {...props} />\n                <UploadDropzone onUpload={_onUpload} />\n        </FinderLayout>\n    )\n\n}\n\nMediaUpload.defaultProps = {\n}\n\nexport default MediaUpload","import React from 'react';\nimport PropTypes from \"prop-types\";\nimport { withResizeDetector } from 'react-resize-detector';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    masonry: {\n        width: \"100%\",\n//        overflow: \"hidden\",\n    },\n    row: {\n        display: \"flex\",\n        width: \"auto\",\n        margin: props => { return theme.spacing(props.spacing/2 * -1) },\n\n        \"& > *\": {\n            flexBasis: 0,\n            flexGrow: 1,\n        }\n    },\n    col: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        width: props => { return props.colWidth },\n        maxWidth: props => { return props.colWidth },\n    },\n    item: {\n        margin: props => { return theme.spacing(props.spacing/2) },\n        \"& > *\": {\n            display: \"block\",\n            width: \"100%\"\n        }\n    }\n}));\n\nconst Masonry = ({width, columns = 3, spacing = 1, padding = 0, children, debug = false}) => {\n\n    const colWidth = Math.floor(width/columns)\n\n    const classes = useStyles({padding, spacing, colWidth})\n\n    const items = [].concat(children || []);\n\n    const getItemsByColumn = () => {\n        let itemsByColumn = {}\n\n        items.map((item, index) => {\n\n            const c = index % columns\n\n            if (!itemsByColumn[c]) {\n                itemsByColumn[c] = []\n            }\n\n            itemsByColumn[c].push(item)\n\n        })\n\n        return itemsByColumn\n\n    }\n\n\n    const itemsByColumn = getItemsByColumn()\n\n    return (\n        <div className={classes.masonry}>\n            <div className={classes.row}>\n                {itemsByColumn && Object.values(itemsByColumn).map(items => {\n                    return (\n                        <div className={classes.col} style={{width: colWidth}}>\n                            {items.map(item => {\n                                return (\n                                    <div className={classes.item}>\n                                        {item}\n                                    </div>\n                                )\n                            })}\n                        </div>\n                    )\n                })}\n            </div>\n        </div>\n    )\n\n}\n\nexport default withResizeDetector(Masonry);","import React from 'react';\n//import { Masonry } from \"@kit-ui/admin\"\nimport Masonry from \"../components/Masonry/Masonry\"\n\nimport ResultsLoader from \"./ResultsLoader\"\nimport ResultsFooter from \"./ResultsFooter\"\nimport FinderModel from \"./FinderModel\"\n\n\nconst MasonryLayout = ({layout = \"masonry\", resultsLoaded, onPage, ...props}) => {\n\n    return (\n        <ResultsLoader {...props}>\n            <Masonry columns={4} spacing={2}>\n                {resultsLoaded && resultsLoaded.map((model, index) => {\n                    return (\n                        <FinderModel model={model} layout={layout} {...props} key={index} />\n                    )\n                })}\n            </Masonry>\n            <ResultsFooter {...props} onPage={onPage} />\n        </ResultsLoader>\n    )\n\n}\n\nexport default MasonryLayout","import React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useTranslation } from 'react-i18next';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport MoreIcon from '@material-ui/icons/MoreHoriz';\n\nconst useStyles = makeStyles(theme => ({\n    footer: {\n        position: \"relative\",\n        width: \"100%\",\n        minHeight: theme.spacing(16),\n\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n\n    },\n    button: {\n        flexGrow: 1,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n\n        \"&:hover\": {\n            cursor: \"pointer\"\n        },\n\n        border: \"1px solid\",\n        borderColor: theme.palette.divider,\n        backgroundColor: theme.palette.background.default,\n        backgroundColor: \"#eee\",\n        color: theme.palette.text.secondary,\n\n        minHeight: theme.spacing(12),\n        padding: 0,\n\n        \"& > *\": {\n            margin: theme.spacing(.5)\n        },\n\n    },\n    label: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"14px\",\n        fontWeight: \"normal\"\n    },\n\n}));\n\nconst ResultsHeader = ({start, rows, count, page, pages, prevPage, onPage}) => {\n    const { t, i18n } = useTranslation(['search']);\n    const classes = useStyles()\n\n    if (!prevPage) {\n        return false\n    }\n\n    const from = start+rows+1\n    const to = from+rows-1\n\n    const label = \"get page \" + prevPage // t('Get results {{from}}{{to}}', {from, to}) + \" ...\"\n\n    return (\n        <footer className={classes.footer}>\n            <Paper elevation={1} square={true} component=\"button\" className={classes.button} onClick={() => onPage(prevPage)}>\n                {/* <MoreIcon className={classes.icon} /> */}\n                <Typography className={classes.label}>{label}</Typography>\n            </Paper>\n        </footer>\n    )    \n}\n\nexport default ResultsHeader;","import React, { useEffect, useState } from 'react';\nimport PropTypes from \"prop-types\";\nimport { Gallery } from \"@kit-ui/admin\"\n\nimport FinderModel from \"./FinderModel\"\nimport ResultsLoader from \"./ResultsLoader\"\nimport ResultsHeader from \"./ResultsHeader\"\nimport ResultsFooter from \"./ResultsFooter\"\n\nconst MediaGallery = ({layout = \"gallery\", resultsLoaded = [], onPage, mediaHeight = 180, mediaLayout = \"cover\", ...props}) => {\n\n    return (\n        <ResultsLoader {...props}>\n            <ResultsHeader {...props} onPage={onPage} />\n            <Gallery width=\"100%\" padding={0} spacing={2}>\n                { resultsLoaded && resultsLoaded.map((model, index) => {\n\n                    let width, height;\n                        \n                    if (model.mediaWidth && model.mediaHeight) {\n                        width = model.mediaWidth\n                        height = model.mediaHeight\n                    } else if (model.imageWidth && model.imageHeight) {\n                        width = model.imageWidth\n                        height = model.imageHeight\n                    }\n\n                    model = {\n                        ...model,\n                        width: Math.floor(mediaHeight * (width / height)) || mediaHeight,\n                        mediaHeight: mediaHeight,\n                        mediaLayout: mediaLayout\n                    }\n\n                    return (\n                        <FinderModel {...props} layout=\"gallery\" model={model} width={model.width} key={index} />\n                    )\n                })}\n            </Gallery>\n            <ResultsFooter {...props} onPage={onPage} />\n        </ResultsLoader>\n    )    \n}\n\nMediaGallery.propTypes = {\n    spacing: PropTypes.number,\n    padding: PropTypes.number,\n    models: PropTypes.array \n}\n\nexport default MediaGallery;","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getQuery } from '../redux/searchById';\nimport qs from 'query-string';\n\nimport List from \"./ListLayout\"\nimport Masonry from \"./MasonryLayout\"\nimport Gallery from \"./GalleryLayout\"\n\nconst templates = {\n    \"list\": List,\n    \"masonry\": Masonry,\n    \"gallery\": Gallery,\n    \"media\": Gallery,\n}\n\nconst FinderQuery = ({query, layout = \"list\", ...props}) => {\n    const dispatch = useDispatch()\n\n    const { pathname, search } = props.location\n\n    // query\n\n    useEffect(() => {\n        query && dispatch(getQuery(query))\n    }, [pathname, query.q])\n\n    // search\n\n    const searchById = useSelector(state => state.searchById)\n    const currentSearch = searchById && searchById[query.id] ||{}\n    \n    const _onPage = (page) => {\n        const sq = props.location.search && qs.parse(props.location.search)\n        const url = props.location.pathname + \"?\" + qs.stringify({...sq, page: page});\n        props.history.replace(url)\n\n        dispatch(getQuery({\n            ...query,\n            page: page\n        }))\n    }\n\n    const _onCreate = () => {\n        props.history.push(props.location.pathname + '/' + query.documentType + \"/new\")\n    }\n\n    // template\n\n    const Template = templates && templates[layout] || templates[\"list\"]\n\n    if (Template) {\n        return <Template {...props} {...currentSearch} onPage={_onPage} />\n    }\n\n\n}\n\nFinderQuery.defaultProps = {\n}\n\nexport default FinderQuery","import React, {useEffect, useState } from \"react\"\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getApp, getAppLayout, getParents } from '../redux/app';\n\nimport FinderLayout from \"./FinderLayout\"\nimport FinderQuery from \"./FinderQuery\"\n\nimport qs from 'query-string';\n\n\nconst Finder = ({query = {}, ...props}) => {\n\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        dispatch(getAppLayout(\"finder\"))\n    }, [])\n\n    const app = useSelector(state => state.app)\n    const menuByUrl = app && app.menuByUrl\n\n    const { pathname } = props.location\n\n    useEffect(() => {\n        menuByUrl && dispatch(getParents({menuByUrl, pathname: pathname}))\n    }, [menuByUrl, pathname])\n\n    // set query\n\n    const sq = props.location.search && qs.parse(props.location.search)\n\n    query = {\n        ...query,\n        id: pathname,\n        collectionId: app && app.collectionId,\n        page: sq.page || 1,\n        rows: sq.rows ||10,\n        sort: sq.sort ||query.sort ||undefined,\n        fl: \"uniqueId,title,imageUrl,documentType,mediaType,mediaWidth,mediaHeight\",\n        q: sq.q ||undefined,\n    };\n\n    return (\n        <FinderLayout\n            parents={app && app.parents}>\n            <FinderQuery {...props} query={query} />\n        </FinderLayout>\n    )\n}\n\nexport default Finder","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport DocumentEditor from \"./DocumentEditor\"\nimport MediaEditor from \"./MediaEditor\"\nimport MediaUpload from \"./MediaUpload\"\nimport Finder from \"../Finder/Finder\"\n\nconst dialogMedia = {\n    schema: {\n        type: \"object\",\n        properties: {\n            mediaId: {\n                type: \"string\"\n            }\n        }\n    }\n}\n\nconst templates = {\n    \"finder\": Finder,\n    \"upload\": MediaUpload\n}\n\n\nconst AdminRoutes = (props) => {\n    const { menuByUrl } = useSelector(state => state.app)\n    const pathname = props.location.pathname\n\n    const menuItem = menuByUrl && menuByUrl[pathname] ||{}\n\n    const {template, layout, query } = menuItem\n\n    if (query) {\n\n        const AdminTemplate = templates[template] ||templates['finder']\n\n        return (\n            <AdminTemplate {...props} layout={layout} query={{\n                ...query,\n                id: pathname\n            }} />\n        )\n\n    }\n\n    return (\n        <Switch>\n            <Route path=\"/:appRoot/:parents*/upload\" component={MediaUpload} />\n            <Route path=\"/:appRoot/media/:parents*/:uniqueId/edit\" component={ MediaEditor } />\n            <Route path=\"/:appRoot/:parents*/:documentType/new\" component={ DocumentEditor } />\n            <Route path=\"/:appRoot/:parents*/:uniqueId/edit\" component={ DocumentEditor } />\n            <Route path=\"/:appRoot/calendar/:view/:date\" component={Finder} />\n            <Route path=\"/:appRoot/calendar/:view\" component={Finder} />\n            <Route path=\"/:appRoot/calendar\" component={Finder} />\n            <Route path=\"/:appRoot\" component={Finder} />\n        </Switch>\n      )\n}\n\nexport default AdminRoutes","import Admin from \"./Admin\"\nexport default Admin","import React, {useEffect, useState } from \"react\"\nimport { AppLayout} from \"@kit-ui/admin\"\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getApp, getAppLayout, toggleSearch, getParents } from '../redux/app';\nimport _ from \"lodash\"\nimport qs from 'query-string';\n\nimport appData from \"./app\"\nimport AdminRoutes from \"./AdminRoutes\"\n\nconst Admin = (props) => {\n    const {pathname } = props.location\n    const sq = props.location.search && qs.parse(props.location.search) ||{}\n\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        dispatch(getApp(appData))\n    }, [])\n\n    const app = useSelector(state => state.app)\n    const menuByUrl = app && app.menuByUrl\n\n\n    useEffect(() => {\n        console.log('xx', pathname)\n        menuByUrl && dispatch(getParents({menuByUrl, pathname: pathname}))\n    }, [menuByUrl, pathname])\n\n    // date + view\n\n    let date = sq.date\n    let view = sq.view\n\n    if (!view) {\n        view = \"week\"\n    }\n\n    // select menu or calendar\n\n    const _onSelect = ({url, date}) => {\n\n        if (!url && date) {\n            sq.date = date\n            props.history.replace(pathname + \"?\" + qs.stringify(sq))\n        }\n\n\n        url && props.history.push(url)\n    }\n\n    // search\n\n    const [q, setQ] = useState(sq && sq.q)\n\n    useEffect(() => {\n        if (q) {\n            sq.q = q.replace(' ', '+')\n        } else {\n            delete sq.q\n        }\n\n        let query = qs.stringify(sq)\n\n        const pathname = props.location.pathname + \"?\" + query;\n        const hash = props.location.hash;\n\n        const url = hash && pathname + hash ||pathname\n        \n        if (props.history) {\n            props.history.replace(url)\n        }\n    }, [q])\n\n    const _onSearchQuery = _.debounce((q, event) => {\n        setQ(q)\n    }, 500)\n\n    const _onSearchReset = () => {\n        if (q) {\n            setQ('')\n        } else {\n            dispatch(toggleSearch())\n        }\n    }\n\n    // search\n\n    const search = {\n        ...app.search,\n//        expanded: q && q.length && true,\n        q: q,\n        onChange: (q, event) => _onSearchQuery(q),\n        onReset: (q, event) => _onSearchReset(),\n        onToggle: () => dispatch(toggleSearch())\n    }\n    \n\n    return (\n        <AppLayout\n            app={app}\n            theme={app && app.theme}\n            header={app && app.header}\n\n            search={search}\n\n            sidebar={app && app.sidebar}\n\n            primaryAction={app.primaryAction}\n\n            menu={app && app.menu}\n            menuByUrl={app && app.menuByUrl}\n            currentUrl={pathname}\n            \n            parents={app && app.parents}\n\n            onSelect={_onSelect}\n            >\n                <AdminRoutes {...props} />\n        </AppLayout>\n    )\n}\n\nexport default Admin","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\n\nimport Admin from \"./Admin\"\n\nconst AppRoutes = (props) => {\n\n    return (\n        <Switch>\n            <Route path=\"/\" component={Admin} />\n        </Switch>\n    )\n}\n\nexport default AppRoutes","import React, { useEffect } from \"react\";\nimport {\n    BrowserRouter as Router,\n    Switch,\n} from \"react-router-dom\";\n\nimport \"./css/Akkurat.css\"\nimport \"./css/AkkuratMono.css\"\nimport \"./css/MaterialIcons.css\"\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getApp } from './redux/app';\n\nimport appData from \"./Admin/app\"\nimport AppRoutes from \"./AppRoutes\"\n\nconst App = (props) => {\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        dispatch(getApp(appData))\n    }, [])\n\n    const app = useSelector(state => state.app)\n\n    return (\n        <Router>\n            <style jsx=\"true\" global=\"true\">{`\n                body {\n                    margin: 0px;\n                    padding: 0px;\n                }\n                `}</style>\n            <AppRoutes {...props} />\n        </Router>\n    )\n}\n\nexport default App","import { combineReducers } from '@reduxjs/toolkit'\n\nimport appReducer from './app/appSlice'\nimport editorReducer from './editor/editorSlice'\n\nimport searchByIdReducer from './searchById/searchByIdSlice'\nimport uploadByIdReducer from './uploadById/uploadByIdSlice'\nimport modelsByIdReducer from './modelsById/modelsByIdSlice'\n\nexport default combineReducers({\n    app: appReducer,\n    editor: editorReducer,\n    modelsById: modelsByIdReducer,\n    searchById: searchByIdReducer,\n    uploadById: uploadByIdReducer,\n})","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\r\nimport logger from 'redux-logger'\r\n\r\nimport rootReducer from \"./rootReducer\"\r\nconst middleware = [...getDefaultMiddleware({\r\n    serializableCheck: {\r\n      // Ignore these action types\r\n      ignoredActions: ['editor/receiveDialog'],\r\n      // Ignore these field paths in all actions\r\n//      ignoredActionPaths: ['meta.arg', 'payload.timestamp'],\r\n      // Ignore these paths in the state\r\n//        ignoredPaths: ['items.dates']\r\n    }\r\n  }), logger]\r\n\r\nexport default configureStore({\r\n    reducer: rootReducer,\r\n    middleware\r\n});","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport store from './redux/store';\nimport { Provider } from 'react-redux';\n\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/pageMedia.299b8634.svg\";","module.exports = __webpack_public_path__ + \"static/media/pageList.576d164b.svg\";","module.exports = __webpack_public_path__ + \"static/media/pageTimeline.d8f4f6d1.svg\";","module.exports = __webpack_public_path__ + \"static/media/pageMosaic.8dd7bc1a.svg\";","module.exports = __webpack_public_path__ + \"static/media/pageAnnotate.6687e957.svg\";"],"sourceRoot":""}