{"version":3,"sources":["redux/settings.js","redux/bulk/bulkSlice.js","redux/modelsById/modelsByIdSlice.js","redux/finder/finderSlice.js","redux/app/appSlice.js","icons/ArticleIcon.js","icons/PageHomeIcon.js","icons/PageGridIcon.js","icons/PageMediaIcon.js","icons/PageTimelineIcon.js","icons/PageListIcon.js","icons/PageAnnotateIcon.js","icons/PageMapIcon.js","icons/PageParentIcon.js","app/kiosk/theme.js","icons/KioskAppIcon.js","icons/MenuIcon.js","icons/KioskMenuIcon.js","app/kp/theme.js","icons/KpAppIcon.js","icons/KpMenuIcon.js","icons/DeviceIcon.js","icons/DeviceMacIcon.js","icons/DeviceWinIcon.js","icons/index.js","app/AppLoader.js","Finder/FinderLoader.js","redux/searchByUrl/searchByUrlSlice.js","Finder/BulkLayout.js","components/KpPage/KpPageField.js","components/KpPage/KpAnnotateArrayField.js","components/KpPage/registry.js","components/KpPage/KpAnnotateImageField.js","components/KpLink/KpLink.model.js","components/KpLink/KpLink.schema.js","components/KpLink/KpLink.uiSchema.js","components/KpLink/KpLinkButtons.js","components/KpLink/KpLinkMediaLayout.js","components/KpLink/KpLinkReferenceLayout.js","components/KpLink/KpLinkContentField.js","components/KpLink/KpLinkField.js","components/KpLink/KpLinkCollapsed.js","components/KpLink/KpLinkExpanded.js","components/KpLink/KpLinkLayout.js","components/KpLink/registry.js","components/KpDevice/KpDeviceField.js","components/KpDevice/registry.js","components/KpDevice/KpDeviceLinkField.js","components/KpLocation/GeopointField.js","components/KpLocation/GeopointLoader.js","components/KpLocation/GeopointBase.js","components/KpLocation/GeopointMap.js","components/KpLocation/GeopointMapCenter.js","components/KpLocation/GeopointPreview.js","components/KpLocation/GeopointSearch.js","components/KpLocation/GeopointEditor.js","components/KpLocation/Geopoint.js","components/KpLocation/Geocoder.js","components/KpLocation/registry.js","components/DocumentEditor/DocumentParentIdField.js","components/TreeView/TreeView.js","components/TreeView/TreeList.js","components/TreeView/TreeModule.js","components/ColumnView/ColumnView.js","components/ColumnView/ColumnList.js","components/ColumnView/ColumnModule.js","components/DocumentEditor/DocumentListRemove.js","components/DocumentEditor/DocumentChildrenSearch.js","components/DocumentEditor/DocumentParentsField.js","components/DocumentEditor/DocumentChildrenField.js","components/DocumentEditor/DocumentLocaleField.js","components/DocumentEditor/DocumentCollectionIdField.js","components/DocumentEditor/registry.js","components/ReferenceEditor/ReferenceField.js","components/ReferenceEditor/registry.js","components/CollectionEditor/CollectionSiteIdField.js","components/CollectionEditor/registry.js","components/PageEditor/PageEditorField.js","components/PageEditor/PageEditorLayout.js","components/PageEditor/PageContentField.js","components/PageEditor/PageMenu.js","components/PageEditor/PageContentLayout.js","components/PageEditor/PageSettingsField.js","components/PageEditor/PageSettingsLayout.js","components/PageEditor/registry.js","components/ThemeEditor/ThemePaletteColor.schema.js","components/ThemeEditor/ThemePalette.schema.js","components/ThemeEditor/ThemePaletteColor.uiSchema.js","components/ThemeEditor/ThemeEditor.model.js","components/ThemeEditor/ThemeEditor.schema.js","components/ThemeEditor/ThemeEditor.uiSchema.js","components/ThemeEditor/ThemePalette.model.js","components/ThemeEditor/ThemePaletteField.js","components/ThemeEditor/ThemePaletteColorField.js","components/ThemeEditor/ThemeColorWidget.js","components/ThemeEditor/registry.js","components/LocalizedString/LocalizedStringSettings.js","components/LocalizedString/LocalizedStringField.js","components/LocalizedString/registry.js","components/registry.js","schemas/kpCollection/theme/schema.js","schemas/kpCollection/schema.js","schemas/kpCollection/uiPreview.js","schemas/kpCollection/theme/uiSchema.js","schemas/kpCollection/index.js","schemas/kpCollection/uiSchema.js","schemas/kpCollection/header/uiSchema.js","schemas/article/section/mediaSize.js","schemas/article/section/mediaFormat.js","schemas/article/index.js","schemas/article/schema.js","schemas/article/section/schema.js","schemas/article/section/sectionType.js","schemas/article/section/sectionText.js","schemas/article/section/sectionMedia.js","schemas/article/section/media.js","schemas/article/section/sectionDm.js","schemas/article/section/ekultur.js","schemas/article/section/sectionLinks.js","schemas/article/section/sectionAttachments.js","schemas/article/section/attachments.js","schemas/article/section/sectionQuote.js","schemas/article/uiSchema.js","schemas/article/uiPreview.js","schemas/article/settings/uiSchema.js","schemas/article/header/uiSchema.js","schemas/article/body/uiSchema.js","schemas/article/section/uiSchema.js","schemas/article/section/uiPreview.js","schemas/article/section/mediaUi.js","schemas/article/section/attachmentsUi.js","schemas/article/section/ekulturUi.js","schemas/article/section/linksUi.js","schemas/article/isPartOf/uiSchema.js","schemas/page/schema.js","schemas/page/documentType/schema.js","schemas/page/linksLayout/schema.js","schemas/page/links/schema.js","schemas/page/links/items.js","schemas/pageHome/schema.js","schemas/page/uiPreview.js","schemas/page/settings/uiSchema.js","schemas/page/pageHeader/uiSchema.js","schemas/page/pageMedia/uiSchema.js","schemas/page/links/uiSchema.js","schemas/page/links/itemsUi.js","schemas/page/pageBody/uiSchema.js","schemas/pageHome/uiSchema.js","schemas/pageHome/uiPreview.js","schemas/pageHome/homeHeader/uiSchema.js","schemas/pageHome/listMedia/uiSchema.js","schemas/pageHome/listBody/uiSchema.js","preview/KioskPreview/ArticleBase.js","preview/KioskPreview/ArticleGrid.js","preview/KioskPreview/ArticleTitle.js","preview/KioskPreview/ArticleBodytext.js","preview/KioskPreview/LayoutList.js","preview/KioskPreview/LayoutGrid.js","preview/KioskPreview/LayoutSlideshow.js","preview/KioskPreview/LayoutFormat.js","preview/KioskPreview/ModuleMedia.js","preview/KioskPreview/ArticleMedia.js","preview/KioskPreview/ModuleEkultur.js","preview/KioskPreview/ArticleReferences.js","preview/KioskPreview/ArticleLinks.js","preview/KioskPreview/ArticleHead.js","preview/KioskPreview/ArticleBody.js","preview/KioskPreview/ArticleLeadtext.js","preview/KioskPreview/ArticleSection.js","preview/KioskPreview/Article.js","preview/KioskPreview/PreviewFormat.js","preview/KioskPreview/utils/getPreviewItem.js","preview/KioskPreview/Menu.js","preview/KioskPreview/PageHeader.js","preview/KioskPreview/GridModule.js","preview/KioskPreview/Grid.js","preview/KioskPreview/TimelineModule.js","preview/KioskPreview/Timeline.js","preview/KioskPreview/AnnotateImagemap.js","preview/KioskPreview/utils/getContrastColor.js","preview/KioskPreview/AnnotateLegends.js","preview/KioskPreview/Page.js","preview/KioskPreview/PreviewKiosk.js","preview/KioskPreview/index.js","schemas/pageHome/index.js","schemas/pageMap/schema.js","schemas/pageMap/uiPreview.js","schemas/pageMap/mapLinks/uiSchema.js","schemas/pageMap/uiSchema.js","schemas/pageMap/header/uiSchema.js","schemas/pageMap/body/uiSchema.js","preview/Page/PageLayout.js","preview/Page/PageMedia.js","preview/Page/PageHeader.js","preview/Page/PageBody.js","preview/PageMap/DefaultMapMarker.js","preview/PageMap/DefaultMap.js","preview/PageMap/RoundtripMapMarker.js","preview/PageMap/RoundtripMap.js","preview/PageMap/PageMap.js","schemas/pageMap/index.js","schemas/pageTopic/index.js","schemas/pageTopic/schema.js","schemas/pageTopic/uiSchema.js","schemas/pageTopic/uiPreview.js","schemas/pageTopic/header/uiSchema.js","schemas/pageTopic/body/uiSchema.js","schemas/pageGrid/schema.js","schemas/pageGrid/uiPreview.js","schemas/pageGrid/gridHeader/uiSchema.js","schemas/pageGrid/gridMedia/uiSchema.js","schemas/pageGrid/gridLinks/uiSchema.js","schemas/index.js","schemas/pageGrid/index.js","schemas/pageGrid/uiSchema.js","schemas/pageGrid/gridBody/uiSchema.js","schemas/pageList/index.js","schemas/pageList/schema.js","schemas/pageList/uiSchema.js","schemas/pageList/uiPreview.js","schemas/pageList/listHeader/uiSchema.js","schemas/pageList/listMedia/uiSchema.js","schemas/pageList/listBody/uiSchema.js","schemas/pageTimeline/index.js","schemas/pageTimeline/schema.js","schemas/pageTimeline/uiSchema.js","schemas/pageTimeline/uiPreview.js","schemas/pageTimeline/timelineHeader/uiSchema.js","schemas/pageTimeline/timelineMedia/uiSchema.js","schemas/pageTimeline/timelineBody/uiSchema.js","schemas/pageAnnotate/index.js","schemas/pageAnnotate/schema.js","schemas/pageAnnotate/uiSchema.js","schemas/pageAnnotate/uiPreview.js","schemas/pageAnnotate/annotateHeader/uiSchema.js","schemas/pageAnnotate/annotateBody/uiSchema.js","schemas/pageAnnotate/annotateImage/uiSchema.js","schemas/pageAnnotate/annotateLinks/uiSchema.js","schemas/pageMedia/index.js","schemas/pageMedia/schema.js","schemas/pageMedia/uiSchema.js","schemas/pageMedia/uiPreview.js","schemas/pageMedia/mediaHeader/uiSchema.js","schemas/pageMedia/mediaBody/uiSchema.js","schemas/pageMedia/mediaLinks/uiSchema.js","schemas/device/index.js","schemas/device/schema.js","schemas/device/uiSchema.js","schemas/device/uiPreview.js","schemas/device/settings/uiSchema.js","schemas/device/header/uiSchema.js","schemas/device/media/uiSchema.js","schemas/device/hasPages/uiSchema.js","schemas/schemasByName.js","Finder/BulkPreview.js","Finder/BulkEditor.js","Finder/Bulk.js","Finder/FinderLayout.js","Finder/FinderModel.js","Finder/ViewList.js","Finder/ViewTable.js","Finder/ViewIcons.js","Finder/ViewMasonry.js","Finder/ViewGallery.js","Finder/FinderPreview.js","Finder/ViewColumn.js","Finder/View.js","Finder/FinderQuery.js","redux/uploadByUrl/uploadByUrlSlice.js","Upload/UploadDropzone.js","Finder/FinderUpload.js","Finder/DocumentTreeList.js","Finder/DocumentTreeColumn.js","Finder/DocumentTree.js","Finder/Finder.js","redux/editor/editorSlice.js","Dialog/DialogBase.js","Dialog/DialogFooter.js","Dialog/DialogSearch.js","Dialog/DialogTabs.js","Dialog/DialogHeader.js","Dialog/DialogSection.js","Dialog/ResultsLoader.js","Dialog/ResultsFooter.js","Dialog/DialogModel.js","Dialog/ResultsList.js","Dialog/ResultsGallery.js","Dialog/ResultsHeader.js","Dialog/ResultsUploads.js","Dialog/MediaResults.js","Dialog/DocumentsResults.js","Dialog/SearchResultsDefault.js","Dialog/SearchResults.js","Dialog/SearchDialog.js","Dialog/FavouritesDialog.js","Dialog/DialogUpload.js","Dialog/UploadDialog.js","Dialog/MediaDialog.js","Dialog/DocumentsDialog.js","Dialog/Dialog.js","Editor/EditorDialog.js","Editor/EditorOverlay.js","Editor/Editor.js","Editor/EditorLoader.js","Finder/MediaPreview.js","Finder/MediaEditor.js","Finder/DocumentPreview.js","Finder/DocumentEditor.js","Finder/CollectionPreview.js","Finder/CollectionEditor.js","Finder/FinderEditor.js","Finder/DocumentLinks.js","Admin/AdminRoutes.js","Admin/AdminLoader.js","Admin/index.js","Admin/Admin.js","app/menu/articles.js","app/menu/media.js","app/menu/latest.js","app/menu/trash.js","app/menu/adminLink.js","app/menu/favourites.js","app/menu/collectionsLink.js","app/kp/index.js","app/kp/app.js","app/kp/menu.js","app/menu/kpHome.js","app/menu/kpPages.js","app/menu/kioskLink.js","app/kp/action.js","app/KpApp.js","app/kiosk/app.js","app/kiosk/menu.js","app/menu/kioskHome.js","app/menu/kioskPages.js","app/menu/kioskDevices.js","app/menu/kpLink.js","app/kiosk/action.js","app/KioskApp.js","app/admin/app.js","app/admin/theme.js","app/admin/menu.js","app/admin/action.js","app/AdminApp.js","redux/site/siteSlice.js","redux/collection/collectionSlice.js","app/CollectionSwitcher.js","app/AppRoutes.js","app/index.js","app/App.js","redux/user/userSlice.js","redux/rootReducer.js","redux/store.js","serviceWorker.js","translations/nb.js","translations/nn.js","i18n.js","translations/en.js","translations/sv.js","index.js"],"names":["API","bulkSlice","createSlice","name","initialState","count","isLoading","isSaving","formData","schema","bulkSchema","bulk","bulkById","reducers","receiveBulkEditor","state","action","payload","bulkChange","bulkAdd","uniqueId","parentId","status","documentType","selected","bulkRemove","getBulkEditor","dispatch","getState","bulkModels","Object","values","filter","model","console","log","properties","multiple","map","keys","key","value","property","enum","includes","enumNames","actions","modelsByIdSlice","requestModel","receiveModel","requestChildren","children","receiveChildren","requestReferences","references","receiveReferences","receiveParentId","receiveStatus","requestSave","receiveSave","getModel","modelName","url","fetch","method","headers","then","response","json","error","loadModel","deleteModel","data","restoreModel","eraseModel","selectModel","modelsById","uniqueModel","bulkToggle","addDocumentSource","callback","undefined","source","toLowerCase","schemaId","JSON","stringify","body","addMediaSource","finderByIdSlice","sortOptions","sort","rowsOptions","rows","viewOptions","view","primaryAction","menu","parents","parentsByUrl","menuByUrl","menuById","requestFinder","receiveFinder","receiveView","requestViewOptions","receiveViewOptions","receiveSort","requestSortOptions","receiveSortOptions","requestParents","receiveParents","requestPrimaryAction","receivePrimaryAction","requestMenu","receiveMenu","requestMenuByUrl","receiveMenuByUrl","requestMenuItem","item","receiveMenuItem","id","length","moveMenuItem","destination","expandMenuItem","expanded","collapseMenuItem","toggleMenuItem","getOptions","getParents","finder","parent","push","parentUrl","reverse","pathUrl","path","split","pathname","join","getMenuTree","level","query","fetchUrl","qs","fl","results","models","child","template","type","getMenuTreeNode","getMenuTreeChildren","requestMenuTree","receiveMenuTree","requestMenuTreeItem","receiveMenuTreeItem","appSlice","icon","title","siteName","siteTitle","siteId","collectionId","header","subview","search","sidebar","requestApp","root","collectionType","receiveAppSite","receiveAppCollection","receiveApp","requestSubview","receiveSubview","requestLayout","receiveLayout","toggleSearch","toggleHeader","toggleSidebar","requestSchemasByName","schemasByName","receiveSchemasByName","receiveMenuItemByUrl","getSiteApp","app","getAppSite","site","getAppCollection","collection","getAppProperties","getChild","startsWith","replace","menuItem","getChildren","forEach","rootMenu","getMenu","getPrimaryAction","getLayout","layout","ArticleIcon","props","SvgIcon","viewBox","fill-rule","clip-rule","d","x","y","width","height","PageHomeIcon","PageGridIcon","PageMediaIcon","cx","cy","r","PageListIcon","PageAnnotateIcon","PageMapIcon","transform","PageParentIcon","KioskAppIcon","AppIcon","variant","color","theme","palette","primary","main","text","variants","fill","font-family","font-size","font-weight","dominant-baseline","text-anchor","MenuIcon","IconTemplate","KioskMenuIcon","KpAppIcon","KpMenuIcon","DeviceIcon","DeviceMacIcon","DeviceWinIcon","PageTimelineIcon","AppLoader","location","useSelector","loadingTitle","description","appIcon","icons","Loader","defaultProps","FinderLoader","useDispatch","useEffect","getFinder","searchByUrlSlice","requestSearch","apiUrl","page","receiveError","toString","receiveSearch","receivePage","nextPage","prevPage","start","pages","Math","ceil","currentPage","resultsByPage","resultsLoaded","concat","p","getQuery","sq","useStyles","makeStyles","position","top","right","bottom","left","transition","marginLeft","marginRight","spacing","display","alignItems","zIndex","marginTop","overflowY","margin","settings","BulkLayout","classes","className","aria-expanded","getDefaultFormState","utils","getUiOptions","FieldKioskPage","registry","uiSchema","formContext","handleChange","newFormData","definitions","onChange","annotateImage","backgroundImage","imageAnnotations","links","newRegistry","onAnnotateArrayChange","onAnnotateImageChange","newUiSchema","dialog","preview","newFormContext","ObjectField","fields","ImageAnnotateArrayField","ArrayField","KpPageField","KpAnnotateArrayField","media","mediaId","imageFilters","ImageAnnotations","imageUrl","prepare","index","referenceId","reference","localeId","currentLocale","defaultLocale","typeLabel","metadata","buttongroup","button","fontFamily","fontSize","fontWeight","textTransform","letterSpacing","borderRadius","minWidth","minHeight","label","SectionButtons","buttons","SectionButton","size","Button","data-size","data-variant","disableElevation","Icon","ButtonGroup","backgroundColor","opacity","justifyContent","KpLinkMediaLayout","onDialog","mediaButtons","onClick","data-name","ImagePreview","KpLinkButtons","border","borderColor","divider","KpLinkReferenceLayout","LinkAddButton","IconButton","LinkRemoveButton","startAdornment","untitled","KpLinKContentField","mediaType","referenceTitle","referenceDescription","_onMediaChange","_onReferenceChange","linkContent","runningHead","KpLinkField","imageFocalpoint","imageCropdata","uiOptions","fieldset","uiPreview","content","KpLinkContentField","cropdata","_onCropChange","focalpoint","_onFocalpoint","filters","_onFiltersChange","pageType","link","getUiSchema","hex","Color","isLight","titleColor","module","userSelect","cursor","pointerEvents","paddingLeft","paddingRight","borderTop","borderTopColor","boxShadow","shadows","badge","flexWrap","toolbar","flexGrow","maxWidth","flexDirection","overflow","footer","StartAdornment","badgeContent","Badge","ListModule","statusLabel","author","datetime","ModuleBase","role","ModuleTitle","onEdit","ModuleStatus","ModuleByline","ModuleLabel","ModuleMetadata","ModuleDescription","NavSettings","NavToolbar","editable","selectable","deletable","restorable","padding","ExpandedModule","elevation","ModuleFormat","ModuleHeader","ModuleBody","ModuleFooter","ModuleButtons","KpLinkLayout","onSave","KpLinkExpanded","KpLinkCollapsed","KpDeviceField","startPageId","setStartPageId","isStartPage","toggleStartPage","ButtonBase","GeopointField","_onChange","GeopointLoader","GeopointBase","googleMapsApiKey","libraries","loadingElement","preventGoogleFontsLoading","memo","GeopointMap","center","zoom","options","useState","setMap","draggable","zoomControl","scaleControl","mapTypeControl","fullscreenControl","streetViewControl","clickableIcons","mapContainerClassName","onLoad","onZoomChanged","onDragEnd","lat","lng","point","crosshair","crosshairX","crosshairY","GeopointMapCenter","GeopointPreview","input","GeopointAutocomplete","autocomplete","setAutocomplete","types","onPlaceChanged","getPlace","TextField","placeholder","fullWidth","overlay","geocoder","closeButton","GeocoderOverlay","onClose","GeopointSearch","place","geometry","placeId","place_id","flexBasis","Geopoint","setOverlay","Geocoder","ParentIdField","uiQuery","editor","q","enumOptions","setEnumOptions","setEnumNames","searchByUrl","currentSearch","optionsEnum","optionsNames","SchemaField","newSchema","default","treeView","TreeView","droppable","provided","snapshot","droppableProps","innerRef","isDraggingOver","data-is-dragging-over","ref","treeList","TreeList","maxHeight","image","toggle","toggleIcon","TreeModule","onSelect","collapsible","onToggle","DragHandle","dragHandleProps","ButtonToggle","ModuleContent","src","_onSelect","event","stopPropagation","isDragging","isTarget","combineTargetFor","draggableProps","aria-selected","data-is-dragging","data-is-target","columnView","columns","borderLeft","ColumnView","ViewHeader","column","ColumnList","marginBottom","dragHandle","ColumnModule","toggleButton","DocumentChildrenList","onRemove","DocumentModule","primaryButton","ButtonRemove","ListView","DocumentChildrenSearch","setQ","queryQ","_onQuery","_","debounce","ListSearch","ButtonAdd","DocumentParentsField","idSchema","DocumentListRemove","$id","DocumentChildrenField","LocaleField","languages","lang","ISO6391","getNativeName","DocumentParentIdField","DocumentLocaleField","getUiButtons","buttonProps","onEditReference","uiButtons","onUpload","charAt","toUpperCase","slice","disabled","readonly","uiReference","uiContent","uiSchemaReference","uiSchemaContent","_action","widgets","PageEditorField","statusCode","statusMessage","createdAt","updatedAt","deletedAt","currentId","onExpand","onCollapse","onLocale","onSubmit","useTranslation","t","i18n","secondary","idPrefix","primaryId","secondaryId","locale","_onLocale","PageEditor","EditorBase","EditorHeader","EditorBody","EditorFooter","OverlayTemplate","renderOverlay","PageContentField","menuWidth","menuList","PageMenu","NavMenuList","NavMenuItem","NavMenuLink","background","wrapper","PageContent","EditorSection","SidebarTemplate","EditorSidebar","renderSidebar","PreviewTemplate","renderPreview","EditorContent","PageSettingsField","paletteColor","colorUi","CollectionThemePaletteField","CollectionThemePaletteColorField","light","dark","createPalette","tinycolor","toHex","_getColor","swatch","getContrastText","paddingBottom","CollectionThemeColorWidget","setValue","TextWidget","isValid","ThemePaletteField","ThemePaletteColorField","ThemeEditor","ThemePaletteModel","lineHeight","textAlign","LocalizedStringSettings","useRef","SchemaFieldset","localizedUiSchema","help","endAdornment","widget","newUiOptions","kpPage","foelds","kpLink","kpDevide","kpLocation","documentEditor","referenceEditor","collectionEditor","pageEditor","themeEditor","localizedString","schemaType","mediaSize","mediaFormat","titleImage","sections","isPartOf","address","sectionType","bodytext","attachments","cite","quote","article","boxSizing","ArticleBase","ArticleGrid","ArticleTitle","component","language","Typography","listStyle","fontStyle","ArticleBodytext","list","LayoutList","gridColumns","React","cloneElement","grid","LayoutGrid","slideshow","slider","navigation","dots","backButton","nextButton","LayoutSlideshow","totalSlides","format","naturalSlideWidth","naturalSlideHeight","ratio","LayoutFormat","w","data-minHeight","data-ratio","data-format","caption","headline","byline","license","ModuleMedia","layouts","ArticleMedia","mediaWidth","mediaHeight","renderMedia","LayoutTemplate","templates","objectCount","imageCount","videoCount","audioCount","commentCount","ArticleReferences","renderReference","referenceType","ModuleTemplate","ArticleLinks","href","renderLink","head","ArticleHead","leadtext","ArticleBody","ArticleLeadtext","ArticleSection","sectionLayout","Article","headerImage","section","PreviewFormat","getPreviewItem","itemType","m","cols","PreviewTimeline","figure","pageHeader","pageTitle","KioskPageHeader","titleSize","GridModule","skin","placement","getTextPlacement","Card","ImageBase","objectFit","CardContent","gridTemplateColumns","templateCols","gridTemplateRows","templateRows","gridColumnGap","colGap","gridRowGap","rowGap","gridItem","gridColumnStart","gridColumnEnd","colEnd","gridRowStart","gridRowEnd","rowEnd","MosaicGrid","items","onCurrentId","rowHeight","repeat","GridItem","itemProps","PreviewMosaic","card","cardMedia","cardContent","MosaicModule","CardMedia","alt","overflowX","timeline","timelineItem","Timeline","TimelineItem","TimelineModule","marker","borderSize","ImagemapPreview","contentTitle","annotateColor","contrastColor","ImageAnnotationsBase","markerTemplate","line","Menu","Imagemap","MarkerModule","data-index","Fragment","Grid","backgroundImageUrl","backgroundPosition","backgroundSize","PreviewPage","annotateLayout","mediaLayout","withResizeDetector","Page","PreviewKiosk","localTitle","MapLink","Map","defaultCenter","defaultZoom","KEY","markers","setMarkers","setOrigin","setDestination","setWaypoints","setCenter","uuidv4","mapId","setMapId","mapRef","newWaypoints","current","style","bootstrapURLKeys","yesIWantToUseGoogleMapApiInternals","onGoogleApiLoaded","google","bounds","maps","LatLngBounds","extend","LatLng","fitBounds","origin","waypoints","directions","setDirections","drawDirections","Polyline","geodesic","strokeColor","strokeOpacity","strokeWeight","directionsService","DirectionsService","route","travelMode","TravelMode","WALKING","result","DirectionsStatus","OK","overviewPath","routes","overview_path","resultsPath","getDirections","mapTypes","DefaultMap","newLinks","setNewLinks","referenceModel","mapLayout","MapTemplate","kpCollection","pageHome","pageMap","pageTopic","parallaxImage","linkMedia","hasPages","deviceTitle","deviceId","deviceType","deviceIcons","mediaSchemas","schemas","BulkPreview","bulkCount","BulkEditor","Schema","noValidate","bulkSubmit","FinderBulk","FinderLayout","onView","NavPath","NavView","getUiPreview","FinderModel","viewable","linkable","deleted","erasable","erased","sourceId","_onClick","_onView","history","_onEdit","_onLink","onLink","_onDelete","onDelete","_onRestore","onRestore","_onErase","onErase","bulkModel","documentModel","mediaModel","collectionModel","schemaModel","mediaLabel","documentLabel","modelLabel","deletedByName","updatedByName","createdByName","childrenWithProps","Children","isValidElement","ViewList","onPage","emptyTitle","pagedResults","ViewTable","TableView","TableModule","ViewGrid","IconsView","IconsModule","MasonryView","MasonryModule","ViewGallery","pop","shift","GalleryView","imageWidth","imageHeight","floor","GalleryModule","select","FinderPreview","ViewColumn","alert","FinderView","ViewIcons","ViewMasonry","Template","option","FinderQuery","parse","Bulk","View","onSort","onRows","uploadByUrlSlice","requestUpload","requested","received","receiveUpload","requestUploadModel","receiveUploadModel","receiveUploadProgress","progress","receiveUploadStatus","getUpload","acceptedFiles","uploadData","file","getUploadUrl","filename","mimeType","getUploadData","uploadUrl","FormData","append","xhr","XMLHttpRequest","upload","addEventListener","uploadProgress","lengthComputable","round","loaded","total","_onProgress","open","send","dropzone","dropButton","UploadDropzone","accept","onCancel","currentUpload","ButtonClose","onDrop","rejectedFiles","getRootProps","getInputProps","Paper","square","MediaUpload","pathnames","uploadByUrl","DocumentTreeList","DraggableChild","childrenSearch","draggableId","DroppableChildren","isCombineEnabled","droppableId","TreeColumn","onCreate","DocumentTree","treeParent","setTreeParent","setQuery","setParent","_getChildren","_onSubmit","queries","TreeListView","TreeColumnView","Number","isInteger","createUrl","combine","FinderUpload","Finder","FinderTemplate","views","editorSlide","requestEditor","receiveEditor","requestEdit","receiveEdit","receiveCurrentId","receiveCurrentLocale","requestDialog","receiveDialog","editModel","saveModel","DialogBase","withStyles","BottomNavigation","MenuItem","BottomNavigationAction","DialogFooter","tabIndex","showLabels","DialogSearch","onReset","AppSearch","DialogTabpanel","indicator","Tabs","DialogTab","Tab","disableRipple","DialogLabel","DialogTabs","tabs","indicatorColor","textColor","tab","DialogHeader","onScroll","parentRef","handleScroll","offsetHeight","removeEventListener","loader","ResultsLoader","ResultsFooter","from","to","ModuleLoader","modelsSelected","onAdd","modelsBySource","modelSchema","appDocumentType","sourceDocumentType","setPreview","newModel","newImageUrl","uploadStatus","imageUrlParts","imageParams","newImageParams","dimension","getImageUrl","ListLayout","ResultsList","DialogModel","ResultsGallery","paddingTop","Gallery","ResultsUploads","uploads","MediaResults","itemSchema","setModelsSelected","getSelected","addModel","ResultsTemplate","identifier","getMediaSource","removeItem","DocumentsResults","getDocumentSource","connect","bindActionCreators","SearchResults","SearchDialog","userQ","setUserQ","handleQuery","trim","setSort","sortSettings","dmOwnerOptions","dmOwner","setDmOwner","dmOwnerSettings","owner","mediaTypes","Array","isArray","queryUrl","getMediaType","getMediaSections","documentTypes","getDocumentType","getDocumentSections","setTabIndex","currentTab","nextToken","handleTab","currentQuery","setPages","setCurrentPage","setNextPage","getPages","FavouritesDialog","favourites","uniqueIds","getFavouritesQuery","documents","DialogUpload","UploadDialog","handleReset","uploadSession","setUploadSession","uploadModels","uploadResults","session","MediaDialog","setTemplate","mediaFavourites","mediaUploads","FavouriteBadge","invisible","UploadBadge","DocumentsDialog","EditorDialog","setFormData","documentSchema","getReferenceQuery","mediaSchema","getMediaQuery","DialogTemplate","Dialog","EditorOverlay","Editor","useHistory","editorRef","_onOverlay","setDialog","_onDialog","hashId","hash","_onCurrentId","hashUrl","_onToggle","expandId","_onExpand","_onCollapse","onBack","goBack","referenceUrl","onOverlay","EditorLoader","EditorIcon","getEditor","MediaPreview","previewOptions","PreviewJSON","PreviewMedia","currentPreview","find","PreviewBase","PreviewOptions","MediaEditor","match","params","DocumentPreview","DocumentEditor","modelType","_onHistory","CollectionPreview","CollectionEditor","FinderEditor","q1","q2","parentUniqueId","parentModel","AdminRoutes","DocumentLinks","AdminLoader","Admin","date","_onSearchQuery","subtitle","AppLayout","currentUrl","articles","latest","trash","collectionsLink","adminLink","KpApp","KioskApp","AdminApp","siteSlice","requestSite","receiveSite","requestSiteCollections","collections","receiveSiteCollections","collectionSlice","requestCollection","receiveCollection","CollectionSwitcher","CollectionItem","kpUrl","kioskUrl","kioskLink","AppRoutes","App","userSlice","requestUser","receiveUser","combineReducers","user","userReducer","siteReducer","collectionReducer","appReducer","editorReducer","finderReducer","bulkReducer","modelsByIdReducer","searchByUrlReducer","uploadByUrlReducer","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","logger","configureStore","reducer","rootReducer","Boolean","window","hostname","bylineTitle","licenseGroup","translations","use","LanguageDetector","initReactI18next","init","resources","en","nb","nn","sv","fallbackLng","debug","interpolation","escapeValue","ReactDOM","render","StrictMode","store","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.6880bd3a.chunk.js","sourcesContent":["let API = \"https://kompass.dimu.org\";\n\nexport {\n    API,\n}","import { API } from \"../settings\"\nimport { createSlice } from '@reduxjs/toolkit'\nimport { receiveModel } from \"../modelsById\"\n\nconst bulkSlice = createSlice({\n    name: 'bulk',\n    initialState: {\n        count: 0,\n        isLoading: false,\n        isSaving: false,\n        formData: {\n\n        },\n        schema: {\n\n        },\n        bulkSchema: {\n            \"type\": \"object\",\n            \"properties\": {\n                \"status\": {\n                    \"type\": \"string\",\n                    \"enum\": [\n                        false,\n                        \"draft\",\n                        \"publish\"\n                    ],\n                    \"enumNames\": [\n                        \"** Multiple values **\",\n                        \"Draft\",\n                        \"Publish\"\n                    ],\n                    \"default\": false\n                },\n                \"parentId\": {\n                    \"type\": \"number\",\n                    \"enum\": [\n                        false,\n                        \"null\",\n                    ],\n                    \"enumNames\": [\n                        \"** Multiple values **\",\n                        \"Reset to null\",\n                    ],\n                    \"default\": false\n                },\n                \"documentType\": {\n                    \"type\": \"string\",\n                    \"enum\": [\n                        false,\n                        \"pageMap\",\n                        \"pageTopic\"\n                    ],\n                    \"enumNames\": [\n                        \"** Multiple values **\",\n                        \"pageMap\",\n                        \"pageTopic\"\n                    ],\n                    \"default\": false\n                }\n            }\n        },\n        bulk: [],\n        bulkById: {}\n    }, \n    reducers: {\n        receiveBulkEditor(state, action) {\n            const { schema, formData } = action.payload\n\n            return {\n                ...state,\n                formData: formData,\n                schema: schema\n            }\n\n        },\n        bulkChange(state, action) {\n            const { formData } = action.payload\n\n            return {\n                ...state,\n                formData: formData,\n            }\n\n        },\n        bulkAdd(state, action) {\n            const { uniqueId, parentId, status, documentType } = action.payload\n\n            return {\n                ...state,\n                count: state.count + 1,\n                bulkById: {\n                    ...state.bulkById,\n                    [uniqueId]: {\n                        uniqueId: uniqueId,\n                        parentId: parentId,\n                        documentType: documentType,\n                        status: status,\n                        selected: true\n                    }\n                }\n            }\n\n        },\n        bulkRemove(state, action) {\n            const { uniqueId } = action.payload\n\n            return {\n                ...state,\n                count: state.count - 1,\n                bulkById: {\n                    ...state.bulkById,\n                    [uniqueId]: {\n                        selected: false\n                    }\n                }\n            }\n\n        },\n    }\n})\n\nexport const bulkToggle = ({uniqueId}) => (dispatch, getState) => {\n\n    const state = getState()\n    const bulkById = state.bulk.bulkById\n\n    const modelsById = state.modelsById\n    const uniqueModel = modelsById && modelsById[uniqueId]\n\n    const selected = bulkById && bulkById[uniqueId] && bulkById[uniqueId].selected\n\n    if (selected) {\n        dispatch(bulkRemove(uniqueModel))\n        dispatch(getBulkEditor())\n    } else {\n        dispatch(bulkAdd(uniqueModel))\n        dispatch(getBulkEditor())\n    }\n\n}\n\nexport const bulkSubmit = ({modelName = \"documents\", formData}) => (dispatch, getState) => {\n\n    const state = getState()\n    const bulkModels = Object.values(state.bulk.bulkById).filter(model => model.selected)\n    const modelsById = state.modelsById\n\n    const url = API + '/admin/api/' + modelName;\n\n    bulkModels.map(model => {\n\n        const uniqueId = model && model.uniqueId\n        const uniqueModel = modelsById && modelsById[uniqueId]\n\n        if (!uniqueModel) {\n            return false\n        }\n\n        let newFormData = {\n            ...uniqueModel\n        }\n\n        Object.keys(formData).map(key => {\n\n            if (formData[key]) {\n                newFormData[key] = formData[key]\n            }\n\n            if (formData[key] === \"null\") {\n                newFormData[key] = null\n            }\n\n\n        })\n\n        /*\n\n        const newFormData = {\n            ...uniqueModel,\n            ...formData\n        }\n        */\n\n        fetch(url, {\n            method: \"POST\",\n            headers: {\n                \"Accept\": \"application/json\",\n                \"Content-Type\": \"application/json; charset=utf-8\",\n            },\n            body: JSON.stringify(newFormData)\n        })\n        .then(\n            response => response.json(),\n            error => console.log('An error occurred.', error)\n        )\n        .then(formData => {\n//            dispatch(receiveSave(formData))\n            dispatch(receiveModel(formData))\n        })    \n    \n\n    })\n\n\n}\n\nexport const getBulkEditor = () => (dispatch, getState) => {\n\n    const state = getState()\n    const bulkModels = Object.values(state.bulk.bulkById).filter(model => model.selected)\n\n    console.log('BULK', bulkModels)\n\n    const bulkSchema = state.bulk.bulkSchema\n\n    let properties = {}, formData = {}, multiple = {}\n\n    bulkModels.map(model => {\n\n        Object.keys(bulkSchema.properties).map(key => {\n\n            const value = model[key]\n            const property = properties[key] ||bulkSchema.properties[key]\n\n            // set formData\n\n            if (formData[key] && formData[key] !== value) {\n                formData[key] = false\n                multiple[key] = true\n            } else if (!multiple[key] && !formData[key]) {\n                formData[key] = value\n            }\n\n            // set schema\n\n            if (property && value) {\n\n                if (property.enum && !property.enum.includes(value)) {\n                    properties[key] = {\n                        ...property,\n                        enum: [\n                            ...property.enum,\n                            value\n                        ],\n                        enumNames: [\n                            ...property.enumNames,\n                            value\n                        ]\n                    }\n\n                } else {\n                    properties[key] = property\n                }\n\n            }\n\n        })\n\n    })\n\n    const schema = {\n        ...bulkSchema,\n        properties: {\n            ...properties\n        }\n    }\n\n    dispatch(receiveBulkEditor({schema, formData}))\n\n\n}\n\nexport const { receiveBulkEditor, bulkChange, bulkAdd, bulkRemove } = bulkSlice.actions\nexport default bulkSlice.reducer","import { API } from \"../settings\"\nimport { createSlice } from '@reduxjs/toolkit'\nimport { bulkToggle } from '../bulk/'\n\nconst modelsByIdSlice = createSlice({\n    name: 'modelsById',\n    initialState: {\n    }, \n    reducers: {\n        requestModel(state, action) {\n            const { uniqueId } = action.payload\n\n            return {\n                ...state,\n                [uniqueId]: {\n                    isLoading: true,\n                }\n            }\n\n        },\n        receiveModel(state, action) {\n            const { uniqueId } = action.payload\n\n            return {\n                ...state,\n                [uniqueId]: {\n                    isLoading: false,\n                    ...action.payload\n                }\n            }\n\n        },\n        requestChildren(state, action) {\n            const { uniqueId } = action.payload\n\n            return {\n                ...state,\n                [uniqueId]: {\n                    ...state[uniqueId],\n                    children: []\n                }\n            }\n\n        },\n        receiveChildren(state, action) {\n            const { uniqueId, children } = action.payload\n\n            return {\n                ...state,\n                [uniqueId]: {\n                    ...state[uniqueId],\n                    children: children\n                }\n           }\n\n        },\n        requestReferences(state, action) {\n            const { uniqueId } = action.payload\n\n            return {\n                ...state,\n                [uniqueId]: {\n                    ...state[uniqueId],\n                    references: []\n                }\n            }\n\n        },\n        receiveReferences(state, action) {\n            const { uniqueId, references } = action.payload\n\n            return {\n                ...state,\n                [uniqueId]: {\n                    ...state[uniqueId],\n                    references: references\n                }\n           }\n\n        },\n        receiveParentId(state, action) {\n            const { uniqueId, parentId } = action.payload\n\n            return {\n                ...state,\n                [uniqueId]: {\n                    ...state[uniqueId],\n                    parentId: parentId\n                }\n            }\n\n        },\n        receiveStatus(state, action) {\n            const { uniqueId, status } = action.payload\n\n            return {\n                ...state,\n                [uniqueId]: {\n                    ...state[uniqueId],\n                    status: status\n                }\n            }\n\n        },\n        requestSave(state, action) {\n            const { uniqueId } = action.payload\n\n            return {\n                ...state,\n                [uniqueId]: {\n                    ...state[uniqueId],\n                    isSaving: true\n                }\n\n            }\n\n        },\n        receiveSave(state, action) {\n            const { uniqueId } = action.payload\n\n            return {\n                ...state,\n                [uniqueId]: {\n                    isSaving: false,\n                    ...action.payload\n                }\n            }\n        }        \n    }\n})\n\n/** Get models from a list of results */\n\nexport const getModels = ({models}) => (dispatch, getState) => {\n\n    const state = getState()\n    const modelsById = state.modelsById\n\n    models && models.map(model => {\n        const { modelName, uniqueId } = model\n\n        if (modelName && uniqueId && !modelsById[uniqueId]) {\n            dispatch(getModel({modelName: modelName, uniqueId: uniqueId}))\n        }\n\n\n    })\n\n}\n\n/** Get model from uniqueId */\n\nexport const getModel = ({modelName = \"documents\", uniqueId}) => dispatch => {\n\n    const url = API + '/admin/api/' + modelName + '/' + uniqueId;\n\n    dispatch(requestModel({uniqueId}))\n\n    fetch(url, {\n        method: \"GET\",\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json; charset=utf-8\",\n        }})\n        .then(\n            response => response.json(),\n            error => console.log('An error occurred.', error)\n        )\n        .then(formData => {\n            dispatch(receiveModel(formData))\n        })\n\n}\n\n/** Get children from uniqueId */\n\nexport const getChildren = ({modelName = \"documents\", uniqueId}) => dispatch => {\n\n    const url = API + '/admin/api/' + modelName + '/' + uniqueId;\n\n    dispatch(requestChildren({uniqueId}))\n\n    fetch(url, {\n        method: \"GET\",\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json; charset=utf-8\",\n        }})\n        .then(\n            response => response.json(),\n            error => console.log('An error occurred.', error)\n        )\n        .then(formData => {\n            dispatch(receiveChildren(formData))\n        })\n\n}\n\n/** Get references from uniqueId */\n\nexport const getReferences = ({modelName = \"documents\", uniqueId}) => dispatch => {\n\n    const url = API + '/admin/api/references/' + modelName + '/' + uniqueId;\n\n    dispatch(requestReferences({uniqueId}))\n\n    fetch(url, {\n        method: \"GET\",\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json; charset=utf-8\",\n        }})\n        .then(\n            response => response.json(),\n            error => console.log('An error occurred.', error)\n        )\n        .then(formData => {\n            dispatch(receiveReferences({...formData, uniqueId}))\n        })\n\n}\n\n\n/** Load model from uniqueId */\n\nexport const loadModel = ({modelName = \"documents\", uniqueId}) => dispatch => {\n\n    const url = API + '/admin/api/' + modelName + '/' + uniqueId;\n\n    dispatch(requestModel({uniqueId}))\n\n    fetch(url, {\n        method: \"GET\",\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json; charset=utf-8\",\n        }})\n        .then(\n            response => response.json(),\n            error => console.log('An error occurred.', error)\n        )\n        .then(formData => {\n            dispatch(receiveModel(formData))\n        })\n\n}\n\n/** Save model from formData  */\n\nexport const saveModel = ({modelName = \"documents\", ...formData}) => dispatch => {\n    const url = API + '/admin/api/' + modelName;\n\n    formData && formData.uniqueId && dispatch(requestSave({uniqueId: formData.uniqueId}))\n\n    fetch(url, {\n        method: \"POST\",\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json; charset=utf-8\",\n        },\n        body: JSON.stringify(formData)\n    })\n    .then(\n        response => response.json(),\n        error => console.log('An error occurred.', error)\n    )\n    .then(formData => {\n        dispatch(receiveSave(formData))\n    })\n\n}\n\n/** Delete */\n\nexport const deleteModel = ({modelName, uniqueId}) => dispatch => {\n    const url = API + '/admin/api/' + modelName + '/' + uniqueId;\n  \n    fetch(url, {\n        method: \"DELETE\",\n    })\n    .then(\n        error => console.log('An error occurred.', error)\n    )\n    .then(data =>\n        dispatch(loadModel({modelName, uniqueId}))\n    )\n\n}\n\n/** Restore */\n\nexport const restoreModel = ({modelName, uniqueId}) => dispatch => {\n    const url = API + '/admin/api/' + modelName + '/restore/' + uniqueId;\n  \n    fetch(url, {\n        method: \"POST\",\n    })\n    .then(\n        error => console.log('An error occurred.', error)\n    )\n    .then(data =>\n        dispatch(loadModel({modelName, uniqueId}))\n    )\n\n}\n\n/** Erase */\n\nexport const eraseModel = ({modelName, uniqueId}) => dispatch => {\n    const url = API + '/admin/api/' + modelName + '/' + uniqueId + \"?erase=true\";\n  \n    fetch(url, {\n        method: \"DELETE\",\n    })\n    .then(\n        error => console.log('An error occurred.', error)\n    )\n    .then(data =>\n        dispatch(receiveStatus({modelName, uniqueId, status: \"erased\"}))\n    )\n\n}\n\n/** Select */\n\nexport const selectModel = ({modelName, uniqueId}) => dispatch => {\n//    dispatch(toggleModel({modelName, uniqueId}))\n    dispatch(bulkToggle({uniqueId}))\n}\n\n/** Set parentId */\n\nexport const setParentId = ({modelName = \"documents\", uniqueId, parentId}) => dispatch => {\n//    dispatch(receiveParentId({uniqueId, parentId}))\n\n    const url = API + '/admin/api/' + modelName;\n\n\n    const formData = {\n        uniqueId: uniqueId,\n        parentId: parentId,\n    }\n\n    fetch(url, {\n        method: \"POST\",\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json; charset=utf-8\",\n        },\n        body: JSON.stringify(formData)\n    })\n    .then(\n        response => response.json(),\n        error => console.log('An error occurred.', error)\n    )\n    .then(formData => {\n        dispatch(receiveSave(formData))\n    })\n\n}\n    \n/** Document source */\n\nexport const getDocumentSource = (model, callback = undefined) => dispatch => {\n    const { collectionId, sourceId } = model;    \n\n    let url = API + '/admin/api/documents/search?collectionId=' + collectionId + \"&sourceId=\" +sourceId;\n\n    fetch(url, {\n        method: \"GET\",\n        headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json; charset=utf-8\",\n        },\n    })\n    .then(\n        response => response.json(),\n        error => console.log('An error occurred.', error)\n    )\n    .then(data => {\n\n        if (data.models && data.models[0]) {\n            dispatch(receiveModel(data.models[0]))\n            callback && callback(data.models[0])\n        } else {\n            dispatch(addDocumentSource(model, callback))\n        }\n\n    })\n\n}\n\nexport const addDocumentSource = (model, callback = undefined) => dispatch => {\n    const url = API + '/admin/api/documents'\n\n    model = {\n        ...model,\n        source: model.source.toLowerCase(),\n        schemaId: 1\n    }\n\n    delete model.uniqueId\n    \n    const payload = JSON.stringify(model);\n\n    console.log(payload);\n\n    return function (dispatch) {\n        fetch(url, {\n            method: \"POST\",\n            headers: {\n                \"Accept\": \"application/json\",\n                \"Content-Type\": \"application/json; charset=utf-8\",\n            },\n            body: payload\n        })\n        .then(\n            response => response.json(),\n            error => console.log('An error occurred.', error)\n        )\n        .then(data => {\n            dispatch(receiveModel(data))\n            callback && callback(data)\n        })\n    }\n\n}\n\n/** Media source */\n\nexport const getMediaSource = (model, callback = undefined) => dispatch => {\n    const { collectionId, sourceId } = model;    \n\n    let url = API + '/admin/api/media/search?collectionId=' + collectionId + \"&sourceId=\" +sourceId;\n\n    fetch(url, {\n        method: \"GET\",\n        headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json; charset=utf-8\",\n        },\n    })\n    .then(\n        response => response.json(),\n        error => console.log('An error occurred.', error)\n    )\n    .then(data => {\n\n        if (data.models && data.models[0]) {\n            dispatch(receiveModel(data.models[0]))\n            callback && callback(data.models[0])\n        } else {\n            dispatch(addMediaSource(model, callback))\n        }\n\n    })\n\n}\n\nexport const addMediaSource = (model, callback = undefined) => dispatch => {\n    const url = API + '/admin/api/media'\n\n    model = {\n        ...model,\n        source: model.source.toLowerCase(),\n        schemaId: 1\n    }\n\n    delete model.uniqueId\n    \n    const payload = JSON.stringify(model);\n\n    console.log(payload);\n\n    return function (dispatch) {\n        fetch(url, {\n            method: \"POST\",\n            headers: {\n                \"Accept\": \"application/json\",\n                \"Content-Type\": \"application/json; charset=utf-8\",\n            },\n            body: payload\n        })\n        .then(\n            response => response.json(),\n            error => console.log('An error occurred.', error)\n        )\n        .then(data => {\n            dispatch(receiveModel(data))\n            callback && callback(data)\n        })\n    }\n\n}\n\nexport const { \n    requestModel, receiveModel, \n    requestChildren, receiveChildren, \n    requestReferences, receiveReferences, \n    receiveStatus, receiveParentId,\n    requestSave, receiveSave\n} = modelsByIdSlice.actions\nexport default modelsByIdSlice.reducer","import { API } from \"../settings\"\nimport { createSlice } from '@reduxjs/toolkit'\nimport qs from 'query-string';\nimport { saveModel } from \"../modelsById/\";\n\nconst finderByIdSlice = createSlice({\n    name: 'finder',\n    initialState: {\n        isLoading: true,\n        url: undefined,\n        sortOptions: [],\n        sort: undefined,\n        rowsOptions: [\n            10,\n            20,\n            30,\n            40,\n            50,\n        ],\n        rows: undefined,\n        viewOptions: [],\n        view: undefined,\n        primaryAction: {},\n        menu: [],\n        parents: [],\n        parentsByUrl: {},\n        menuByUrl: {},\n        menuById: {},\n    }, \n    reducers: {\n        requestFinder(state, action) {\n            const { url } = action.payload\n            return {\n                ...state,\n                url: url,\n                isLoading: true,\n            }\n        },\n        receiveFinder(state, action) {\n            const { url } = action.payload\n            return {\n                ...state,\n                url: url,\n                isLoading: false,\n            }\n        },\n        receiveView(state, action) {\n            const { view } = action.payload\n            return {\n                ...state,\n                view: view\n            }\n        },\n        requestViewOptions(state, action) {\n            return {\n                ...state,\n                viewOptions: undefined,\n                view: undefined\n            }\n        },\n        receiveViewOptions(state, action) {\n            const { viewOptions, view } = action.payload\n            return {\n                ...state,\n                viewOptions: viewOptions,\n                view: view\n            }\n        },\n        receiveSort(state, action) {\n            const { sort } = action.payload\n            return {\n                ...state,\n                sort: sort\n            }\n        },\n        requestSortOptions(state, action) {\n            return {\n                ...state,\n                sortOptions: undefined,\n                sort: undefined\n            }\n        },\n        receiveSortOptions(state, action) {\n            const { sortOptions, sort } = action.payload\n            return {\n                ...state,\n                sortOptions: sortOptions,\n                sort: sort\n            }\n        },\n \n        requestParents(state, action) {\n            return state            \n        },\n        receiveParents(state, action) {\n            const { parents, parentsByUrl } = action.payload\n            return {\n                ...state,\n                parents: parents,\n                parentsByUrl: parentsByUrl\n            }\n        },\n        requestPrimaryAction(state, action) {\n            return {\n                ...state,\n                primaryAction: {}\n            }\n        },\n        receivePrimaryAction(state, action) {\n            const { primaryAction } = action.payload\n            return {\n                ...state,\n                primaryAction: primaryAction\n            }\n        },\n        requestMenu(state, action) {\n            return {\n                ...state,\n                menu: []\n            }\n        },\n        receiveMenu(state, action) {\n            const { menu } = action.payload\n            return {\n                ...state,\n                menu: menu\n            }\n        },\n        requestMenuByUrl(state, action) {\n            return {\n                ...state,\n                menuByUrl: {}\n            }\n        },\n        receiveMenuByUrl(state, action) {\n            const {menuByUrl } = action.payload\n            return {\n                ...state,\n                menuByUrl: menuByUrl\n            }\n        },\n        requestMenuItem(state, action) {\n            const { url, ...item } = action.payload\n            return {\n                ...state,\n                menuByUrl: {\n                    ...state.menuByUrl,\n                    [url]: {\n                        isLoading: true,\n                        url: url,\n                        ...item,\n                    }\n                }\n            }\n        },\n        receiveMenuItem(state, action) {\n            const { id, url, ...item } = action.payload\n\n            const count = item.children && item.children.length ||null\n\n            if (id) {\n                return {\n                    ...state,\n                    menuById: {\n                        ...state.menuById,\n                        [id]: {\n                            ...item,\n                            id: id,\n                            isLoading: false,\n                            url: url,\n                            count: count,\n                        }\n                    },\n                    menuByUrl: {\n                        ...state.menuByUrl,\n                        [url]: {\n                            ...item,\n                            id: id,\n                            isLoading: false,\n                            count: count,\n                            url: url,\n                        }\n                    }\n                }\n            }\n\n            return {\n                ...state,\n                isLoading: false,\n                menuByUrl: {\n                    ...state.menuByUrl,\n                    [url]: {\n                        ...item,\n                        id: id,\n                        count: count,\n                        isLoading: false,\n                        url: url,\n                    }\n                }\n            }\n        },\n        moveMenuItem(state, action) {\n            const { source, destination } = action.payload\n\n            return {\n                ...state,\n                menuByUrl: {\n                    ...state.menuByUrl,\n                    [source.url]: source,\n                    [destination.url]: destination  \n                }\n            }\n\n        },\n        expandMenuItem(state, action) {\n            const { url } = action.payload\n            return {\n                ...state,\n                menuByUrl: {\n                    ...state.menuByUrl,\n                    [url]: {\n                        ...state.menuByUrl[url],\n                        expanded: true\n                    }\n                }\n            }\n        },\n        collapseMenuItem(state, action) {\n            const { url } = action.payload\n            return {\n                ...state,\n                menuByUrl: {\n                    ...state.menuByUrl,\n                    [url]: {\n                        ...state.menuByUrl[url],\n                        expanded: false\n                    }\n                }\n            }\n        },\n        toggleMenuItem(state, action) {\n            const { url } = action.payload\n            return {\n                ...state,\n                menuByUrl: {\n                    ...state.menuByUrl,\n                    [url]: {\n                        ...state.menuByUrl[url],\n                        expanded: !state.menuByUrl[url].expanded\n                    }\n                }\n            }\n        },\n    }\n})\n\nexport const getFinder = ({url = undefined, ...menuItem}) => (dispatch, getState) => {\n\n//    const state = getState()\n//    const menuByUrl = state.finder.menuByUrl\n//    const menuItem = menuByUrl && menuByUrl[url]\n\n    url && dispatch(getParents({url}))\n    menuItem && dispatch(getOptions(menuItem))\n\n    dispatch(receiveFinder({url}))\n\n}\n\nexport const getOptions = ({viewOptions, view, sortOptions, sort}) => (dispatch) => {\n    dispatch(requestViewOptions())\n    dispatch(requestSortOptions())\n\n    viewOptions && dispatch(receiveViewOptions({viewOptions, view: view ||viewOptions[0]}))\n    sortOptions && dispatch(receiveSortOptions({sortOptions, sort: sortOptions[0]}))\n}\n\nexport const getView = ({pathname, view}) => (dispatch, getState) => {\n    const state = getState()\n    const menuByUrl = state.finder.menuByUrl\n    const menuItem = menuByUrl && menuByUrl[pathname]\n\n    dispatch(receiveView({view}))\n   \n}\n\nexport const getSort = ({pathname, sort}) => (dispatch, getState) => {\n    const state = getState()\n    const menuByUrl = state.finder.menuByUrl\n    const menuItem = menuByUrl && menuByUrl[pathname]\n\n    dispatch(receiveSort({sort}))\n}\n\nexport const getMenu = ({siteName, menu, root, collectionId}) => (dispatch) => {\n\n    const getChild = ({parent, children, url, pathname, search, query, viewOptions, sortOptions, ...item}) => {\n\n        if (pathname && pathname.startsWith(\"/\")) {\n            url = root + pathname\n        }\n\n        if (!url && parent.url) {\n            url = pathname && parent.url + \"/\" + pathname || parent.url\n        } else if (!url) {\n            url = pathname && root + \"/\" + pathname || root\n        }\n\n        if (url.includes(\":siteName\")) {\n            url = url.replace(\":siteName\", siteName)\n        }\n\n        if (search) {\n            url = url + \"?\" + search\n        }\n\n        if (query) {\n            query = {\n                ...query,\n                collectionId: query.collectionId || parent.collectionId\n            }\n        }\n\n        if (query && query.models === \"media\") {\n            viewOptions = viewOptions || [\"gallery\", \"icons\", \"list\", \"table\"]\n            sortOptions = sortOptions || [\"title\", \"createdAt ASC\", \"updatedAt DESC\"]\n        }\n\n        if (query && query.models === \"documents\") {\n            viewOptions = viewOptions || [\"list\", \"table\", \"icons\", \"column\"]\n            sortOptions = sortOptions || [\"title\", \"createdAt ASC\", \"updatedAt DESC\"]\n        }\n\n        if (sortOptions) {\n            query.sort = sortOptions[0]\n        }\n        \n        const child = {\n            ...item,\n            url: url,\n            query: query,\n            viewOptions: viewOptions,\n            sortOptions: sortOptions\n        }\n\n        const menuItem = {\n            ...child,\n            children: children && children.length && getChildren({...child, children: children})\n        }\n\n        if (item.type === \"tree\") {\n            dispatch(getMenuTree(menuItem))\n        } else {\n            dispatch(receiveMenuItem(menuItem))\n        }\n\n\n        return menuItem\n\n    }\n\n    const getChildren = (parent) => {\n        let children = []\n  \n        parent.children.forEach((child) => {\n            child = getChild({...child, parent});\n            children.push(child);\n        });\n        \n        return children\n    }\n\n    const rootMenu = getChildren({\n        root: root,\n        children: menu,\n        collectionId: collectionId\n    })\n\n    dispatch(receiveMenu({menu: rootMenu}))\n    \n}\n\nexport const getPrimaryAction = ({primaryAction, root, collectionId}) => (dispatch) => {\n\n    const getChild = ({parent, children, url, pathname, search, query, viewOptions, sortOptions, ...item}) => {\n\n        if (pathname && pathname.startsWith(\"/\")) {\n            url = root + pathname\n        }\n\n        if (!url && parent.url) {\n            url = pathname && parent.url + \"/\" + pathname || parent.url\n        } else if (!url) {\n            url = pathname && root + \"/\" + pathname || root\n        }\n\n        if (url && search) {\n            url = url + \"?\" + search\n        }\n\n        const child = {\n            ...item,\n            root: parent.root,\n            url: url,\n        }\n\n        const menuItem = {\n            ...child,\n            children: children && children.length && getChildren({...child, children: children})\n        }\n\n        return menuItem\n\n    }\n\n    const getChildren = (parent) => {\n        let children = []\n  \n        parent.children.forEach((child) => {\n            child = getChild({...child, parent});\n            children.push(child);\n        });\n        \n        return children\n    }\n\n    const rootMenu = getChildren({\n        root: root,\n        children: [primaryAction],\n        collectionId: collectionId\n    })\n\n    dispatch(receivePrimaryAction({primaryAction: rootMenu[0]}))\n    \n}\n\nexport const getParents = ({url}) => (dispatch, getState) => {\n    dispatch(requestParents())\n\n    const state = getState()\n    const menuByUrl = state.finder.menuByUrl\n    const menuById = state.finder.menuById\n\n    let parent = url && menuByUrl && menuByUrl[url] \n\n    console.log('getParents', parent)\n\n    let parents = [];\n\n    if (parent) {\n\n        while (parent) {\n            parents.push(parent)\n            parent = parent.parentId && menuById[parent.parentId] || !parent.id && parent.parentUrl && menuByUrl[parent.parentUrl]\n        }\n    \n        parents = parents.reverse()\n    \n            \n    } else {\n\n        let path = [], pathUrl\n\n        const pathnames = url.split('/');\n\n        pathnames.map(pathname => {\n    \n            path.push(pathname)\n            pathUrl = path.join('/')\n    \n            console.log('parents by path', pathUrl)\n    \n    \n            if (menuByUrl[pathUrl]) {\n                parents.push(menuByUrl[pathUrl])\n            }\n    \n        })\n    \n    }\n \n    let parentsByUrl = {}\n\n    parents.map(parent => {\n        if (parent.url) {\n            parentsByUrl[parent.url] = parent\n        }\n    })\n\n    dispatch(receiveParents({parents, parentsByUrl}))\n  \n}\n\nexport const getMenuItem = (item) => (dispatch) => {\n    const { type = \"default\", url, children} = item\n\n    if (type === \"tree\") {\n        dispatch(getMenuTree(item))\n    } else if (children) {\n        dispatch(getMenuParent(item))        \n    } else if (url) {\n        dispatch(getMenuChild(item))\n    } \n    \n}\n\nconst getMenuParent = ({children, level = 0, ...parent}) => dispatch => {\n    dispatch(requestMenuItem(parent))\n\n    children.map((child) => {\n        dispatch(getMenuItem({\n            ...child,\n            parentUrl: parent.url,\n            level: level + 1\n        }))\n    })\n\n    dispatch(receiveMenuItem({\n        ...parent,\n        children: children,\n        level: level,\n    }))\n}\n\nconst getMenuChild = ({level, ...child}) => dispatch => {\n    dispatch(requestMenuItem(child))\n    dispatch(receiveMenuItem({\n        ...child,\n        level: level\n    }))\n}\n\nexport const getMenuTree = ({level = 0, ...parent}) => dispatch => {\n\n    dispatch(requestMenuItem(parent))\n\n    const { query } = parent\n    const fetchUrl = API + '/admin/api/documents/search?' + qs.stringify({...query, fl: \"modelName,documentType,id,title,uniqueId,parentId\"});\n\n    fetch(fetchUrl, {\n        method: \"GET\",\n        headers: {\n        \"Accept\": \"application/json\",\n        },\n    })\n    .then(\n        response => response.json(),\n        error => console.log('An error occurred.', error)\n    )\n    .then(results => {\n        const {models, count } = results\n\n        const parentUrl = parent.url\n\n        const children = models && models.map(child => {\n            const { uniqueId } = child;\n\n            child = {\n                ...child,\n                template: parent.template,\n                level: level + 1,\n                parentId: parentUrl,\n                parentUrl: parentUrl,\n                url: parentUrl + \"/\" + uniqueId,\n                type: \"treeitem\"\n            }\n\n            dispatch(getMenuTreeNode(child))\n\n            return child\n\n        })\n\n        dispatch(receiveMenuItem({\n            ...parent,\n            id: parentUrl,\n            level: level,\n            parentUrl: parentUrl,\n            children: children,\n            count\n        }))\n\n    })\n\n}\n\nexport const getMenuTreeNode = (item) => (dispatch) => {\n\n    const { url, uniqueId } = item\n\n    const query = {\n        models: \"documents\",\n        uniqueId: uniqueId\n    }\n\n    const fetchUrl = API + '/admin/api/documents/search?' + qs.stringify({...query, fl: \"modelName,documentType,id,title,uniqueId,parentId\"});\n\n    fetch(fetchUrl, {\n        method: \"GET\",\n        headers: {\n        \"Accept\": \"application/json\",\n        },\n    })\n    .then(\n        response => response.json(),\n        error => console.log('An error occurred.', error)\n    )\n    .then(results => {\n        const model = results.models && results.models[0]\n        const parent = {\n            ...item,\n            ...model,\n            type: \"treeitem\",\n            url: url,\n            query: {\n                models: \"documents\",\n                parentId: model && model.id\n            }\n        }\n\n        dispatch(getMenuTreeChildren(parent))\n    \n    })\n\n}\n\nexport const getMenuTreeChildren = ({level = 0, ...parent}) => (dispatch) => {\n\n    dispatch(requestMenuItem(parent))\n\n    const { parentUrl } = parent\n\n    const query = {\n        models: \"documents\",\n        parentId: parent.id\n    }\n\n    const fetchUrl = API + '/admin/api/documents/search?' + qs.stringify({...query, fl: \"modelName,documentType,id,title,uniqueId,parentId\"});\n\n    fetch(fetchUrl, {\n        method: \"GET\",\n        headers: {\n        \"Accept\": \"application/json\",\n        },\n    })\n    .then(\n        response => response.json(),\n        error => console.log('An error occurred.', error)\n    )\n    .then(results => {\n        const {models, count } = results\n\n        const children = models && models.map(child => {\n            const { uniqueId } = child;\n\n            child = {\n                ...child,\n                template: parent.template,\n                parentUrl: parentUrl,\n                level: level + 1,\n                url: parentUrl + \"/\" + uniqueId,\n                type: \"treeitem\"\n            }\n\n            dispatch(receiveMenuItem(child))\n\n            return child\n\n        })\n\n        if (children && children.length) {\n            parent = {\n                ...parent,\n                level: level,\n                count: count,\n                children: children\n            }\n        }\n \n        dispatch(receiveMenuItem({\n            ...parent,\n            level: level\n        }))\n         \n    })\n\n}\n\nexport const sortMenuTree = ({source, destination, item}) => (dispatch, getState) => {\n\n    const state = getState()\n    const finder = state.finder\n    const menuByUrl = finder.menuByUrl\n    const menuById = finder.menuById\n\n    const itemNode = item.id && menuById[item.id]\n\n    let sourceNode = source.url && {\n        ...menuByUrl[source.url],\n        children: [...menuByUrl[source.url].children]\n    }\n\n    sourceNode.children.splice(source.index, 1)\n\n    let destinationNode = destination.url && {\n        ...menuByUrl[destination.url],\n        children: menuByUrl[destination.url].children && [...menuByUrl[destination.url].children, itemNode] ||[itemNode]\n    }\n\n\n    dispatch(receiveMenuItem({\n        ...sourceNode,\n    }))\n\n    dispatch(receiveMenuItem({\n        ...destinationNode,\n    }))\n\n    dispatch(receiveMenuItem({\n        ...itemNode,\n        parentUrl: destinationNode.url,\n        parentId: destinationNode.id\n    }))\n\n    const id = itemNode.id;\n    const parentId = destinationNode.id\n\n    if (id && parentId === destinationNode.url) {\n        dispatch(saveModel({\n            id: id,\n            parentId: null\n        }))\n    } else if (id && parentId) {\n        dispatch(saveModel({\n            id: id,\n            parentId: parentId\n        }))\n    }\n\n}\n\nexport const { \n    requestFinder, receiveFinder, \n    requestMenu, receiveMenu,\n    requestPrimaryAction, receivePrimaryAction,\n    requestViewOptions, receiveViewOptions, receiveView,\n    requestSortOptions, receiveSortOptions, receiveSort,\n    requestMenuByUrl, receiveMenuByUrl, \n    requestMenuTree, receiveMenuTree, \n    requestMenuTreeItem, receiveMenuTreeItem, \n    requestMenuItem, receiveMenuItem, \n    moveMenuItem,\n    expandMenuItem, collapseMenuItem, toggleMenuItem, \n    requestParents, receiveParents } = finderByIdSlice.actions\n\nexport default finderByIdSlice.reducer","import { API } from \"../settings\"\nimport { createSlice } from '@reduxjs/toolkit'\nimport qs from 'query-string';\n\nimport { getMenu, getPrimaryAction } from \"../finder/\"\n\nconst appSlice = createSlice({\n    name: 'app',\n    initialState: {\n        icon: undefined,\n        isLoading: true,\n        title: undefined,\n        siteName: undefined,\n        siteTitle: undefined,\n        siteId: undefined,\n        collectionId: undefined,\n        header: {\n        },\n        subview: {\n            expanded: false\n        },\n        search: {\n        },\n        sidebar: {\n        }\n    }, \n    reducers: {\n        requestApp(state, action) {\n            const { root, icon, title, siteName, collectionType } = action.payload\n            return {\n                root: root,\n                icon: icon,\n                title: title,\n                siteName: siteName,\n                collectionType: collectionType,\n                isLoading: true,\n            }\n        },\n        receiveAppSite(state, action) {\n            const { id, title } = action.payload\n            return {\n                ...state,\n                siteId: id,\n                siteTitle: title\n            }\n        },\n        receiveAppCollection(state, action) {\n            const { id } = action.payload\n            return {\n                ...state,\n                collectionId: id,\n            }\n        },\n        receiveApp(state, action) {\n            return {\n                ...state,\n                isLoading: false,\n                ...action.payload\n            }\n        },\n        requestSubview(state, action) {\n            return {\n                ...state,\n                subview: undefined,\n            }\n        },\n        receiveSubview(state, action) {\n            const { subview } = action.payload\n            return {\n                ...state,\n                subview: {\n                    ...state.subview,\n                    ...subview\n                },\n            }\n        },\n        requestLayout(state, action) {\n            return {\n                ...state,\n            }\n        },\n        receiveLayout(state, action) {\n            const { header, sidebar, subview } = action.payload\n            return {\n                ...state,\n                header: header,\n                sidebar: sidebar,\n                subview: subview\n            }\n        },\n        toggleSearch(state, action) {\n            return {\n                ...state,\n                search: {\n                    ...state.search,\n                    expanded: !state.search.expanded,\n                }\n            }\n        },\n        toggleHeader(state, action) {\n            return {\n                ...state,\n                header: {\n                    ...state.header,\n                    expanded: !state.header.expanded,\n                }\n            }\n        },\n        toggleSidebar(state, action) {\n            return {\n                ...state,\n                sidebar: {\n                    ...state.sidebar,\n                    expanded: !state.sidebar.expanded,\n                }\n            }\n        },\n        requestSchemasByName(state, action) {\n            return {\n                ...state,\n                schemasByName: {}\n            }\n        },\n        receiveSchemasByName(state, action) {\n            const { schemasByName } = action.payload\n            return {\n                ...state,\n                schemasByName: schemasByName\n            }\n        },\n        requestMenu(state, action) {\n            return {\n                ...state,\n                menu: []\n            }\n        },\n        receiveMenu(state, action) {\n            const { menu } = action.payload\n            return {\n                ...state,\n                menu: menu\n            }\n        },\n        requestMenuByUrl(state, action) {\n            return {\n                ...state,\n                menuByUrl: {}\n            }\n        },\n        receiveMenuByUrl(state, action) {\n            const {menuByUrl } = action.payload\n            return {\n                ...state,\n                menuByUrl: menuByUrl\n            }\n        },\n        toggleMenuItem(state, action) {\n            const { url } = action.payload\n            return {\n                ...state,\n                menuByUrl: {\n                    ...state.menuByUrl,\n                    [url]: {\n                        ...state.menuByUrl[url],\n                        expanded: !state.menuByUrl[url].expanded\n                    }\n                }\n            }\n\n        },\n        receiveMenuItemByUrl(state, action) {\n            const { url, ...item } = action.payload\n            return {\n                ...state,\n                menuByUrl: {\n                    ...state.menuByUrl,\n                    [url]: {\n                        ...item,\n                        url: url\n                    }\n                }\n            }\n        },\n        requestParents(state, action) {\n            return state            \n        },\n        receiveParents(state, action) {\n            const { parents } = action.payload\n            return {\n                ...state,\n                parents: parents\n            }\n        }\n    }\n})\n\nexport const getApp = (app) => dispatch => {\n    dispatch(requestApp(app))\n    dispatch(getAppProperties(app))\n}\n\nexport const getSiteApp = (app) => dispatch => {\n    dispatch(requestApp(app))\n    dispatch(getAppSite(app))\n}\n\nexport const getAppSite = ({siteName, ...app}) => dispatch => {\n\n    const query = qs.stringify({\n        name: siteName,\n        fl: \"id,name,title\"\n    })\n\n    const apiUrl = API + '/admin/api/sites/search?' + query;\n\n    fetch(apiUrl, {\n        method: \"GET\",\n        headers: {\n            \"Accept\": \"application/json\",\n        },\n    })\n    .then(\n        response => response.json(),\n        error => console.log('An error occurred.', error)\n    )\n    .then(results => {\n        const site = results.models && results.models[0] ||{}\n\n        dispatch(receiveAppSite(site))\n\n        dispatch(getAppCollection({\n            ...app,\n            siteId: site.id,\n            siteName: site.name,\n            siteTitle: site.title\n        }))\n\n    })\n\n}\n\nexport const getAppCollection = ({siteId, collectionType, ...app}) => dispatch => {\n\n    const query = qs.stringify({\n        siteId: siteId,\n        collectionType: collectionType,\n        fl: \"id,name,title\"\n    })\n\n    const apiUrl = API + \"/admin/api/collections/search?\" + query;\n\n    fetch(apiUrl, {\n        method: \"GET\",\n        headers: {\n            \"Accept\": \"application/json\",\n        },\n    })\n    .then(\n        response => response.json(),\n        error => console.log('An error occurred.', error)\n    )\n    .then(results => {\n        const collection = results.models && results.models[0] ||{}\n\n        dispatch(receiveAppCollection(collection))\n\n        dispatch(getAppProperties({\n            ...app,\n            collectionId: collection.id,\n        }))\n\n    })\n\n}\n\nexport const getAppProperties = (app) => dispatch => {\n\n    dispatch(receiveApp(app))\n//    dispatch(getMenu(app))\n\n    dispatch(getMenu(app))\n    dispatch(getPrimaryAction(app))\n\n\n}\n\n\nexport const getSubview = (subview) => dispatch => {\n\n    dispatch(receiveSubview({\n        subview: subview\n    }))\n    \n\n}\n\nexport const getLayout = (layout = \"default\") => dispatch => {\n\n    if (layout === \"editor\") {\n        dispatch(receiveLayout({\n            header: {\n                expanded: false\n            },\n            sidebar: {\n                expanded: false\n            },\n            subview: {\n                expanded: false\n            }\n        }))\n    }\n\n    if (layout === \"finder\") {\n        dispatch(receiveLayout({\n            header: {\n                expanded: true\n            },\n            sidebar: {\n                expanded: true\n            },\n            subview: {\n                expanded: false\n            }\n        }))\n    }\n\n    if (layout === \"finder/subview\") {\n        dispatch(receiveLayout({\n            header: {\n                expanded: true\n            },\n            sidebar: {\n                expanded: false\n            },\n            subview: {\n                expanded: true\n            }\n        }))\n    }\n\n}\n\nexport const getAppSearch = ({expanded, q}) => dispatch => {\n    dispatch(toggleSearch({expanded, q}))  \n}\n\nexport const getParents = ({pathname}) => (dispatch, getState) => {\n\n    dispatch(requestParents())\n\n    const state = getState()\n    const menuByUrl = state.app.menuByUrl\n\n    let parents = [];\n  \n    const pathnames = pathname.split('/');\n  \n    let url = '';\n  \n    pathnames.forEach((path) => {\n\n        if (path) {\n            url = url + '/' + path;\n        } else {\n            url = '/';\n        }\n    \n        if (menuByUrl && menuByUrl[url] && menuByUrl[url].title) {\n            parents.push(menuByUrl[url]);\n        }\n        \n        if (url == '/') {\n            url = '';\n        }\n\n    });\n\n    dispatch(receiveParents({parents:parents}))\n  \n}\n\nexport const getSchemasByName = ({schemas = []}) => dispatch => {\n\n    dispatch(requestSchemasByName())\n\n    let schemasByName = {}\n\n    schemas.map(schema => {\n\n        if (schema.name) {\n            schemasByName[schema.name] = schema\n        }\n\n    })\n\n    dispatch(receiveSchemasByName({schemasByName}))\n    \n}\n\nexport const getMenuItem = ({pathname}) => (dispatch, getState) => {\n\n    const state = getState()\n    const menuByUrl = state.app.menuByUrl\n\n    const menuItem = menuByUrl && menuByUrl[pathname]\n\n    if (menuItem && menuItem.type === \"tree\") {\n        dispatch(getMenuTree(menuItem))\n    }\n\n    if (menuItem && menuItem.type === \"treeitem\") {\n        dispatch(getMenuTree(menuItem))\n    }\n\n    \n}\n \nconst getMenuTree = (parent) => dispatch => {\n\n    const { query } = parent\n\n    const fetchUrl = API + '/admin/api/documents/search?' + qs.stringify({...query, fl: \"modelName,documentType,id,title,uniqueId,parentId\"});\n\n    fetch(fetchUrl, {\n        method: \"GET\",\n        headers: {\n        \"Accept\": \"application/json\",\n        },\n    })\n    .then(\n        response => response.json(),\n        error => console.log('An error occurred.', error)\n    )\n    .then(results => \n       dispatch(getMenuTreeChildren({parent, results}))\n    )\n\n}\n\nconst getMenuTreeChildren = ({parent, results}) => dispatch => {\n    const { models } = results;\n\n\n    let children = []\n\n    if (models) {\n        models.map((model) => {\n\n            const { template, query } = parent\n            const { collectionId, models } = query;\n\n            const { id, title, uniqueId } = model;\n                \n            let url = parent.url + \"/\" + uniqueId;\n        \n            const child = {\n                ...model,\n                template: template,\n                type: \"treeitem\",\n                pathname: url,\n                url: url,\n                query: {\n                    collectionId: collectionId,\n                    models: models,\n                    parentId: id\n                }\n            }\n            \n            children.push(child)\n        })\n    \n    }\n    \n    if (children.length) {\n        dispatch(receiveMenuItemByUrl({...parent, type: \"tree\", count: children.length, children: children}))\n        \n        children.map((child) => {\n//            dispatch(receiveMenuItemByUrl(child))\n            dispatch(getMenuTree(child))\n        })\n        \n    } else {\n        dispatch(receiveMenuItemByUrl({...parent, type: \"treeitem\"}))\n\n    }\n\n}\n\n\nconst getMenuChildren = ({children = [], level = 0}) => dispatch => {\n\n    children.forEach((child) => {\n\n        let item = {\n            ...child,\n            level: level\n        }\n\n        if (item.children) {\n            dispatch(getMenuChildren({children: item.children, level: level++}))\n        }\n\n        dispatch(receiveMenuItemByUrl(item))\n\n    });\n\n}\n\n/*\nexport const getMenuByUrl = ({menu = []}) => dispatch => {\n    dispatch(requestMenuByUrl())\n    dispatch(getMenuChildren({children: menu}))\n}*/\n\n\nexport const { \n    requestApp, receiveApp, \n    receiveAppSite, receiveAppCollection, \n    requestLayout, receiveLayout, \n    requestSubview, receiveSubview, \n    toggleHeader, \n    toggleSearch, \n    toggleSidebar, \n    requestSchemasByName, \n    receiveSchemasByName, \n    requestMenu, receiveMenu, \n    toggleMenuItem, requestMenuByUrl, \n    receiveMenuByUrl, receiveMenuItemByUrl, \n    requestParents, receiveParents\n} = appSlice.actions\nexport default appSlice.reducer","import React from \"react\";\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nconst ArticleIcon = (props) => {\n    return (\n        <SvgIcon {...props} viewBox=\"0 0 24 24\">\n            <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M18.5 20.5L18.5 3.5L5.5 3.5L5.5 20.5H18.5ZM20 2L4 2L4 22H20V2Z\"/>\n            <rect x=\"8\" y=\"8.5\" width=\"8\" height=\"1\" />\n            <rect x=\"8\" y=\"10.5\" width=\"8\" height=\"1\" />\n            <rect x=\"8\" y=\"12.5\" width=\"8\" height=\"1\" />\n            <rect x=\"8\" y=\"14.5\" width=\"5\" height=\"1\" />\n        </SvgIcon>\n    )\n}\n\nexport default ArticleIcon","import React from \"react\";\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nconst PageHomeIcon = (props) => {\n    return (\n        <SvgIcon {...props} viewBox=\"0 0 24 24\">\n            <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.5 5.5H3.5V18.5H20.5V5.5ZM2 4V20H22V4H2Z\" />\n            <path d=\"M11 16V13H13V16H15.5V12H17L12 7.5L7 12H8.5V16H11Z\" />\n        </SvgIcon>\n    )\n}\n\nexport default PageHomeIcon","import React from \"react\";\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nconst PageGridIcon = (props) => {\n    return (\n        <SvgIcon {...props} viewBox=\"0 0 24 24\">\n            <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.5 5.5H3.5V18.5H20.5V5.5ZM2 4V20H22V4H2Z\"/>\n            <rect x=\"4\" y=\"12\" width=\"16\" height=\"1\"/>\n            <rect x=\"15\" y=\"13\" width=\"1\" height=\"5\"/>\n            <rect x=\"10\" y=\"6\" width=\"1\" height=\"6\"/>\n        </SvgIcon>\n    )\n}\n\nexport default PageGridIcon","import React from \"react\";\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nconst PageMediaIcon = (props) => {\n    return (\n        <SvgIcon {...props} viewBox=\"0 0 24 24\">\n            <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.5 5.5H3.5V18.5H20.5V5.5ZM2 4V20H22V4H2Z\" />\n            <path d=\"M18 16.1382H6L9 12.2873L11.1382 14.8618L14.1382 11L18 16.1382Z\" />\n        </SvgIcon>\n    )\n}\n\nexport default PageMediaIcon","import React from \"react\";\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nconst PageGridIcon = (props) => {\n    return (\n        <SvgIcon {...props} viewBox=\"0 0 24 24\" {...props}>\n            <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.5 5.5H3.5V18.5H20.5V5.5ZM2 4V20H22V4H2Z\" />\n            <circle cx=\"12\" cy=\"12\" r=\"1.5\" />\n            <circle cx=\"17\" cy=\"12\" r=\"1.5\" />\n            <circle cx=\"7\" cy=\"12\" r=\"1.5\" />\n        </SvgIcon>\n    )\n\n}\n\nexport default PageGridIcon","import React from \"react\";\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nconst PageListIcon = (props) => {\n    return (\n        <SvgIcon {...props} viewBox=\"0 0 24 24\">\n            <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.5 5.5H3.5V18.5H20.5V5.5ZM2 4V20H22V4H2Z\"/>\n\n            <rect x=\"8\" y=\"8.5\" width=\"8\" height=\"1\" />\n            <rect x=\"8\" y=\"10.5\" width=\"8\" height=\"1\" />\n            <rect x=\"8\" y=\"12.5\" width=\"8\" height=\"1\" />\n            <rect x=\"8\" y=\"14.5\" width=\"8\" height=\"1\" />\n\n\n        </SvgIcon>\n    )\n\n}\n\nexport default PageListIcon","import React from \"react\";\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nconst PageAnnotateIcon = (props) => {\n    return (\n        <SvgIcon {...props} viewBox=\"0 0 24 24\">\n            <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.5 5.5H3.5V18.5H20.5V5.5ZM2 4V20H22V4H2Z\"/>\n            <circle cx=\"7\" cy=\"12\" r=\"1\"/>\n            <circle cx=\"12\" cy=\"8\" r=\"1\"/>\n            <rect x=\"15\" y=\"11\" width=\"1\" height=\"5\"/>\n            <rect x=\"13\" y=\"13\" width=\"5\" height=\"1\"/>\n\n\n\n\n        </SvgIcon>\n    )\n}\n\nexport default PageAnnotateIcon","import React from \"react\";\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nconst PageMapIcon = (props) => {\n    return (\n        <SvgIcon {...props} viewBox=\"0 0 24 24\">\n            <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.5 5.5H3.5V18.5H20.5V5.5ZM2 4V20H22V4H2Z\" />\n            <rect x=\"17.5355\" y=\"10\" width=\"1\" height=\"5\" transform=\"rotate(45 17.5355 10)\" />\n            <rect x=\"18.2426\" y=\"13.5355\" width=\"1\" height=\"5\" transform=\"rotate(135 18.2426 13.5355)\" />\n            <circle cx=\"7\" cy=\"12\" r=\"1\" />\n            <circle cx=\"11\" cy=\"12\" r=\"1\" />\n        </SvgIcon>\n    )\n\n}\n\nexport default PageMapIcon","import React from \"react\";\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nconst PageParentIcon = (props) => {\n    return (\n        <SvgIcon {...props} viewBox=\"0 0 24 24\">\n            <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.5 5.5H3.5V18.5H20.5V5.5ZM2 4V20H22V4H2Z\"/>\n            <rect x=\"9\" y=\"8\" width=\"6\" height=\"4\"/>\n            <rect x=\"5\" y=\"14\" width=\"4\" height=\"2\"/>\n            <rect x=\"10\" y=\"14\" width=\"4\" height=\"2\"/>\n            <rect x=\"15\" y=\"14\" width=\"4\" height=\"2\"/>\n        </SvgIcon>\n    )\n\n}\n\nexport default PageParentIcon","export default {\n    \"palette\": {\n        \"primary\": {\n            \"main\": \"#D94353\",\n            \"light\": \"#EE7E8F\",\n            \"dark\": \"#AE3552\"\n        }\n    }\n}","import React from \"react\"\nimport { AppIcon } from \"@kit-ui/icons\"\nimport theme from \"../app/kiosk/theme\"\nconst KioskAppIcon = (props) => <AppIcon {...props} variant=\"filled\" color={theme.palette.primary.main} text=\"Ki\" />\nexport default KioskAppIcon","import React from \"react\";\nimport PropTypes from \"prop-types\"\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nconst MenuIconFilled = ({text = \"Ap\", ...props}) => {\n\n    const backgroundColor = \"currentColor\"\n    const color = \"white\"\n\n    return (\n        <SvgIcon {...props} viewBox=\"0 0 24 24\" {...props}>\n            <rect x=\"2\" y=\"2\" width=\"20\" height=\"20\" fill={backgroundColor}></rect>\n            <text x=\"12\" y=\"13\" fill=\"white\" font-family=\"Akkurat, sans-serif\" font-size=\"10\" font-weight=\"bold\" dominant-baseline=\"middle\" text-anchor=\"middle\">{text}</text>\n        </SvgIcon>\n    )\n\n}\n\nconst MenuIconOutlined = ({text = \"Ap\", ...props}) => {\n\n    const backgroundColor = \"white\"\n    const color = \"currentColor\"\n    const borderColor = color\n\n    return (\n        <SvgIcon {...props} viewBox=\"0 0 24 24\" {...props}>\n            <rect x=\"2\" y=\"2\" width=\"20\" height=\"20\" fill={borderColor}></rect>\n            <rect x=\"3.5\" y=\"3.5\" width=\"17\" height=\"17\" fill={backgroundColor}></rect>\n            <text x=\"12\" y=\"13\" fill={color} font-family=\"Akkurat, sans-serif\" font-size=\"10\" font-weight=\"bold\" dominant-baseline=\"middle\" text-anchor=\"middle\">{text}</text>\n        </SvgIcon>\n    )\n\n}\n\nconst variants = {\n    \"outlined\": MenuIconOutlined,\n    \"filled\": MenuIconFilled,\n}\n\nconst MenuIcon = ({color, text, variant = \"outlined\", ...props}) => {\n    const IconTemplate = variants && variants[variant]\n\n    if (!IconTemplate) {\n        return \"<p>Failed</p>\"\n    }\n\n    return (\n        <IconTemplate color={color} text={text} {...props} />\n    )\n    \n}\n\nMenuIcon.propTypes = {\n    variant: PropTypes.oneOfType([PropTypes.oneOf(['filled', 'outlined']), PropTypes.string]),\n}\n\nexport default MenuIcon","import React from \"react\"\nimport { AppIcon } from \"@kit-ui/icons\"\nimport MenuIcon from \"./MenuIcon\"\nconst KioskMenuIcon = () => <MenuIcon variant=\"filled\" text=\"Ki\" />\nexport default KioskMenuIcon","export default {\n    \"palette\": {\n        \"primary\": {\n            \"main\": \"#D94353\",\n            \"light\": \"#EE7E8F\",\n            \"dark\": \"#AE3552\"\n        }\n    }\n}","import React from \"react\"\nimport { AppIcon } from \"@kit-ui/icons\"\nimport theme from \"../app/kp/theme\"\nconst KpAppIcon = () => <AppIcon variant=\"outlined\" color={theme.palette.primary.main} text=\"Kp\" />\nexport default KpAppIcon","import React from \"react\"\nimport { AppIcon } from \"@kit-ui/icons\"\nimport MenuIcon from \"./MenuIcon\"\nconst KpMenuIcon = () => <MenuIcon variant=\"outlined\" text=\"Kp\" />\nexport default KpMenuIcon","import React from \"react\";\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nconst DeviceIcon = (props) => {\n    return (\n        <SvgIcon {...props} viewBox=\"0 0 24 24\">\n            <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.5 5.5H3.5V18.5H20.5V5.5ZM2 4V20H22V4H2Z\"/>\n            <path d=\"M13.3333 10.6667H10.6667V13.3333H13.3333V10.6667ZM12.4444 12.4444H11.5556V11.5556H12.4444V12.4444ZM16 11.5556V10.6667H15.1111V9.77778C15.1111 9.28889 14.7111 8.88889 14.2222 8.88889H13.3333V8H12.4444V8.88889H11.5556V8H10.6667V8.88889H9.77778C9.28889 8.88889 8.88889 9.28889 8.88889 9.77778V10.6667H8V11.5556H8.88889V12.4444H8V13.3333H8.88889V14.2222C8.88889 14.7111 9.28889 15.1111 9.77778 15.1111H10.6667V16H11.5556V15.1111H12.4444V16H13.3333V15.1111H14.2222C14.7111 15.1111 15.1111 14.7111 15.1111 14.2222V13.3333H16V12.4444H15.1111V11.5556H16ZM14.2222 14.2222H9.77778V9.77778H14.2222V14.2222Z\"/>\n        </SvgIcon>\n    )\n}\n\nexport default DeviceIcon","import React from \"react\";\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nconst DeviceMacIcon = (props) => {\n    return (\n        <SvgIcon {...props} viewBox=\"0 0 24 24\">\n            <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.5 5.5H3.5V18.5H20.5V5.5ZM2 4V20H22V4H2Z\"/>\n            <path d=\"M14.3442 11.5628C14.3325 10.475 15.2302 9.95122 15.2706 9.92587C14.7644 9.18771 13.978 9.08756 13.6979 9.07571C13.0284 9.00882 12.3924 9.47162 12.053 9.47206C11.7139 9.47256 11.1891 9.08932 10.6343 9.10057C9.90452 9.11204 9.23287 9.52639 8.85753 10.1798C8.10181 11.4962 8.66833 13.4436 9.40813 14.5094C9.76981 15.0304 10.2008 15.617 10.7662 15.595C11.3106 15.573 11.5159 15.2422 12.1736 15.2414C12.8314 15.2405 13.0171 15.592 13.5926 15.5803C14.1784 15.5692 14.5488 15.0472 14.9064 14.5233C15.3202 13.917 15.4898 13.3303 15.5 13.3001C15.4873 13.2943 14.3575 12.863 14.3442 11.5628Z\"/>\n            <path d=\"M13.2636 8.37228C13.564 8.00874 13.7658 7.50352 13.7106 7C13.2784 7.01756 12.755 7.28809 12.4446 7.65119C12.1666 7.97291 11.9231 8.48713 11.9889 8.98061C12.4707 9.01793 12.9633 8.73544 13.2636 8.37228Z\"/>\n        </SvgIcon>\n    )\n}\n\nexport default DeviceMacIcon","import React from \"react\";\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nconst DeviceWinIcon = (props) => {\n    return (\n        <SvgIcon {...props} viewBox=\"0 0 24 24\">\n            <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.5 5.5H3.5V18.5H20.5V5.5ZM2 4V20H22V4H2Z\"/>\n            <path d=\"M8 9.13617L11.2693 8.69092L11.2708 11.8445L8.00299 11.8631L8 9.13617ZM11.2678 12.2078L11.2703 15.3641L8.00254 14.9148L8.00235 12.1866L11.2678 12.2078ZM11.6641 8.63267L15.999 8V11.8044L11.6641 11.8388V8.63267ZM16 12.2375L15.999 16.0247L11.6641 15.4129L11.658 12.2304L16 12.2375Z\"/>\n        </SvgIcon>\n    )\n}\n\nexport default DeviceWinIcon","import React from \"react\"\n\nimport ArticleIcon from \"./ArticleIcon\"\n\nimport PageHomeIcon from \"./PageHomeIcon\"\nimport PageGridIcon from \"./PageGridIcon\"\nimport PageMediaIcon from \"./PageMediaIcon\"\nimport PageTimelineIcon from \"./PageTimelineIcon\"\nimport PageListIcon from \"./PageListIcon\"\nimport PageAnnotateIcon from \"./PageAnnotateIcon\"\nimport PageMapIcon from \"./PageMapIcon\"\nimport PageParentIcon from \"./PageParentIcon\"\n\nimport KioskAppIcon from \"./KioskAppIcon\"\nimport KioskMenuIcon from \"./KioskMenuIcon\"\n\nimport KpAppIcon from \"./KpAppIcon\"\nimport KpMenuIcon from \"./KpMenuIcon\"\n\nimport DeviceIcon from \"./DeviceIcon\"\nimport DeviceMacIcon from \"./DeviceMacIcon\"\nimport DeviceWinIcon from \"./DeviceWinIcon\"\n\nexport default {\n    \"kpApp\": <KpAppIcon />,\n    \"kpMenu\": <KpMenuIcon />,\n\n    \"kioskApp\": <KioskAppIcon />,\n    \"kioskMenu\": <KioskMenuIcon />,\n\n    \"article\": <ArticleIcon />,\n    \"pageHome\": <PageHomeIcon />,\n    \"pageGrid\": <PageGridIcon />,\n    \"pageMedia\": <PageMediaIcon />,\n    \"pageAnnotate\": <PageAnnotateIcon />,\n    \"pageTimeline\": <PageTimelineIcon />,\n    \"pageList\": <PageListIcon />,\n    \"pageMap\": <PageMapIcon />,\n    \"pageParent\": <PageParentIcon />,\n    \"pageTopic\": <PageParentIcon />,\n\n    \"device\": <DeviceIcon />,\n    \"deviceMac\": <DeviceMacIcon />,\n    \"deviceWin\": <DeviceWinIcon />\n\n}","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Loader } from \"@kit-ui/admin\"\nimport icons from \"../icons/\"\n\nconst AppLoader = ({children, ...props}) => {\n\n    const pathname = props.location.pathname\n    const app = useSelector(state => state.app)\n\n    const { root, icon, siteId, title, siteName, siteTitle, collectionType, collectionId } = app\n\n    const isLoading = app.isLoading\n    const loadingTitle = title && title ||\"Loading app ...\"\n\n    let description = \"Loading \" + root + \"...\"\n\n    if (siteId) {\n        description = \"Site loaded: \" + siteTitle\n    }\n\n    if (collectionId) {\n        description = \"Collection loaded: \" + collectionId\n    }\n\n    const appIcon = icon && icons[icon]\n\n    return (\n        <Loader\n            icon={appIcon}\n            isLoading={isLoading}\n            title={loadingTitle}\n            description={description}>\n                {collectionId && children}\n        </Loader>\n    )\n\n}\n\nAppLoader.defaultProps = {\n}\n\nexport default AppLoader","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getFinder } from '../redux/finder';\nimport { Loader } from \"@kit-ui/admin\"\nimport icons from \"../icons\"\n\nconst FinderLoader = ({children, ...props}) => {\n    const pathname = props.location.pathname\n\n    const app = useSelector(state => state.app)\n    const finder = useSelector(state => state.finder)\n\n    const appIcon = icons[app.icon]\n\n    const menuByUrl = finder.menuByUrl\n    const menuItem = pathname && menuByUrl && menuByUrl[pathname] || { url: pathname }\n    const url = menuItem && menuItem.url \n\n    const title = menuItem && menuItem.title ||app && app.title\n    const description = finder.isLoading && \"Loading finder ...\" ||\"Finder loaded\"\n\n    const isLoading = !url ||app.isLoading ||finder.isLoading ||false\n\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        url && dispatch(getFinder(menuItem))\n    }, [url])\n\n    return (\n        <Loader\n            isLoading={isLoading}\n            icon={appIcon}\n            title={title}\n            description={description}>\n                {children}\n        </Loader>\n    )\n\n}\n\nFinderLoader.defaultProps = {\n}\n\nexport default FinderLoader","import { API } from \"../settings\"\nimport { createSlice } from '@reduxjs/toolkit'\nimport qs from 'query-string';\n\nimport { getModels } from \"../modelsById\"\n\nconst searchByUrlSlice = createSlice({\n    name: 'search',\n    initialState: {\n    }, \n    reducers: {\n        requestSearch(state, action) {\n            const { models, url, page, apiUrl, query } = action.payload\n\n            if (state[url] && state[url].page) {\n                return {\n                    ...state,\n                    [url]: {\n                        ...state[url],\n                        isLoading: true,\n                        apiUrl: apiUrl,\n                        query: {\n                            ...query,\n                            models: models,\n                        }\n                    }\n                }\n            }\n\n            return {\n                ...state,\n                [url]: {\n                    isLoading: true,\n                    apiUrl: apiUrl,\n                    query: {\n                        ...query,\n                        models: models,\n                    }\n                }\n            }\n        },\n        receiveError(state, action) {\n            const { url, error } = action.payload\n\n            return {\n                ...state,\n                [url]: {\n                    isLoading: false,\n                    error: error.toString()\n                }\n            }\n\n        },\n        receiveSearch(state, action) {\n            const { url, results } = action.payload\n\n            return {\n                ...state,\n                [url]: {\n                    ...state[url],\n                    isLoading: false,\n                    results: results\n                }\n            }\n        },\n        receivePage(state, action) {\n            const { url, page, results } = action.payload\n\n            const { start, rows, count } = results\n\n            const pages = Math.ceil(count/rows)\n            const currentPage = Math.ceil((start+rows)/rows)\n\n            const resultsByPage = {\n                ...state[url].resultsByPage,\n                [page]: results.models\n            }\n\n            let resultsLoaded = []\n\n            Object.values(resultsByPage).map(page => {\n                resultsLoaded = resultsLoaded.concat(page)\n            })\n\n            let nextPage, prevPage\n\n            for (let p = page; p <= pages; p++) {\n                if (!resultsByPage[p]) {\n                    nextPage = p\n                    break\n                }\n            }    \n\n            for (let p = page; p >= 1; p--) {\n                if (!resultsByPage[p]) {\n                    prevPage = p\n                    break\n                }\n            }    \n\n            return {\n                ...state,\n                [url]: {\n                    ...state[url],\n                    count: count,\n                    start: start,\n                    rows: rows,\n                    page: currentPage,\n                    pages: pages,\n                    nextPage: nextPage,\n                    prevPage: prevPage,\n                    resultsByPage: resultsByPage,\n                    resultsLoaded: resultsLoaded\n                }\n            }\n\n        }\n    }\n})\n\nexport const getQuery = ({models, url, page = 1, ...query}) => dispatch => {\n\n    if (page > 1 && query.rows) {\n        query.start = query.rows * (page-1)\n    }\n\n    if (query.collectionId && query.collectionId === \"*\") {\n        delete query.collectionId\n    }\n\n    if (query.siteId && query.siteId === \"*\") {\n        delete query.siteId\n    }\n    \n    const sq = qs.stringify(query)\n\n    let apiUrl = API + '/admin/api/' + models + '/search';\n\n    if (sq) {\n        apiUrl = apiUrl + '?' + sq;\n    }\n\n//    if (page === 1) {\n        dispatch(requestSearch({models, url, page, apiUrl, query}))\n//    }\n    \n    fetch(apiUrl, {\n        method: \"GET\",\n        headers: {\n            \"Accept\": \"application/json\",\n        },\n    })\n    .then(\n        response => response.json(),\n        error => console.log('An error occurred.', error)\n    )\n    .then(results => {\n        dispatch(receiveSearch({url, results}))\n        dispatch(receivePage({url, page, results}))\n\n//        results.models && dispatch(getModels(results))\n\n    })\n\n}\n\n\n\n\nexport const { requestSearch, receiveSearch, receivePage, receiveError } = searchByUrlSlice.actions\nexport default searchByUrlSlice.reducer","\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from \"prop-types\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    bulk: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n\n        transition: \".125s ease-out\",\n        marginLeft: \"100%\",\n\n        \"& + *\": {\n            transition: \".125s ease-out\",\n            marginRight: 0,\n        },\n\n        \"&[aria-expanded=true]\": {\n            marginLeft: \"50%\",\n\n            \"& + *\": {\n                marginRight: \"50%\"\n            }\n\n        }\n\n    },\n    header: {\n        position: \"relative\",\n        height: theme.spacing(8),\n        display: \"flex\",\n        alignItems: \"center\",\n        zIndex: 1,\n        \"& + *\": {\n            marginTop: theme.spacing(8),\n            marginLeft: theme.spacing(2),\n            marginRight: theme.spacing(2),\n        }\n    },\n    body: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        overflowY: \"scroll\"\n    },  \n    path: {\n        margin: theme.spacing(0,2),\n    },\n    settings: {\n        position: \"absolute\",\n        zIndex: 2,\n        top: 0,\n        right: 0,\n        margin: theme.spacing(1)\n    }\n}));\n\nconst BulkLayout = ({\n    expanded = false,\n    parents,\n    settings,\n    children,\n    ...props\n}) => {\n\n    const classes = useStyles()\n\n    return (\n        <div className={classes.bulk} aria-expanded={expanded}>\n            <header className={classes.header}>\n                #header\n            </header>\n            <div className={classes.body}>\n                {children}\n            </div>\n        </div>\n    )\n\n}\n\nBulkLayout.defaultProps = {\n\n}\n\nBulkLayout.propTypes = {\n\n}\n\nexport default BulkLayout;","import React, { useState, useEffect } from 'react';\n// import { v4 as uuidv4 } from 'uuid';\n\nimport { utils } from \"@rjsf/core\"\nconst { getUiOptions, getDefaultFormState } = utils\n\nconst FieldKioskPage = (props) => {\n    const {registry, formData, schema, uiSchema, formContext } = props;\n\n    const handleChange = (formData) => {\n        const newFormData = getDefaultFormState(schema, formData, registry.definitions);\n        props.onChange(newFormData)\n    }\n\n    const _onAnnotateArrayChange = (links = []) => {\n        console.log('onAnnotateArrayChange', links)\n\n        handleChange({\n            ...formData,\n            links: links\n        })\n\n    }\n\n    const _onAnnotateImageChange = (links = []) => {\n        console.log('onAnnotateImageChange', links)\n\n        handleChange({\n            ...formData,\n            links: links\n        })\n \n    }\n\n    const annotateImage = formData && formData.backgroundImage\n    const imageAnnotations = formData && formData.links\n\n    let newRegistry = {\n        ...registry,\n        formContext: {\n            ...registry.formContext,\n            annotateImage: annotateImage,\n            imageAnnotations: imageAnnotations,\n            onAnnotateArrayChange: _onAnnotateArrayChange,\n            onAnnotateImageChange: _onAnnotateImageChange,\n        }\n    }\n\n    /*\n    useEffect(() => {\n        newRegistry.formContext.imageAnnotations = imageAnnotations\n    }, [imageAnnotations])\n    */\n\n    const newUiSchema = {\n        ...uiSchema,\n        \"ui:dialog\": formContext.dialog,\n        \"ui:preview\": formContext.preview,\n        \"ui:sidebar\": {\n            ...formContext.dialog,\n            ...formContext.sidebar\n        },\n        \"ui:layout\": \"pageContent\",\n    }\n\n    const newFormContext = newRegistry.formContext\n\n    const { ObjectField } = registry.fields;\n\n    return (\n        <ObjectField {...props} \n            registry={newRegistry} \n            formContext={newFormContext} \n            uiSchema={newUiSchema}\n            onChange={handleChange} />\n    )\n\n\n}\n\nexport default FieldKioskPage","import React from 'react';\n\nconst ImageAnnotateArrayField = ({registry, ...props}) => {\n    const { ArrayField } = registry.fields;\n    const { onAnnotateArrayChange } = registry.formContext\n\n    return (\n        <ArrayField {...props} registry={registry} onChange={onAnnotateArrayChange} />\n    )\n\n}\n\nexport default ImageAnnotateArrayField;","\n\nimport KpPageField from \"./KpPageField\"\nimport KpAnnotateArrayField from \"./KpAnnotateArrayField\"\nimport KpAnnotateImageField from \"./KpAnnotateImageField\"\n\nexport default {\n    \"fields\": {\n        \"kpPage\": KpPageField,\n        \"kpAnnotateArray\": KpAnnotateArrayField,\n        \"kpAnnotateImage\": KpAnnotateImageField,\n    },\n    \"widgets\": {\n    },\n    \"models\": {\n    }\n}","import React, {useState, useEffect } from 'react';\nimport { ImageAnnotations } from \"@kit-ui/admin\"\n\nconst KioskAnnotateImageField = ({formContext, uiSchema, ...props}) => {\n    const { annotateImage = {}, imageAnnotations, onAnnotateImageChange } = formContext\n    const { mediaId, media, imageFilters } = annotateImage\n\n//    const uiOptions = getUiOptions(uiSchema)\n\n    return (\n        <ImageAnnotations imageUrl={media && media.imageUrl} imageFilters={imageFilters} imageAnnotations={imageAnnotations} onChange={onAnnotateImageChange} />\n    )\n\n}\n\nexport default KioskAnnotateImageField;","import schema from \"./KpLink.schema\"\nimport uiSchema from \"./KpLink.uiSchema\"\n\nexport default {\n    schema: schema,\n    uiSchema: uiSchema\n}","export default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"referenceId\": {\n            \"type\": \"string\"\n        },\n        \"referenceType\": {\n            \"type\": \"string\",\n            \"default\": \"pageLink\"\n        },\n        \"reference\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"uniqueId\": {\n                    \"type\": \"string\"\n                },\n                \"documentType\": {\n                    \"type\": \"string\"\n                }\n            }\n        },\n        \"mediaId\": {\n            \"type\": \"string\"\n        },\n        \"media\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"uniqueId\": {\n                    \"type\": \"string\"\n                }\n            }\n        },\n        \"imageFilters\": {\n            \"type\": \"imageFilters\",\n            \"filters\": [\"opacity\"]\n        },\n        \"imageCropdata\": {\n            \"type\": \"imageCropdata\"\n        },\n        \"imageFocalpoint\": {\n            \"type\": \"imageFocalpoint\"\n        },\n        \"runningHead\": {\n            \"type\": \"localizedString\"\n        },\n        \"title\": {\n            \"type\": \"localizedString\"\n        },\n        \"titleColor\": {\n            \"type\": \"string\",\n            \"format\": \"textColor\",\n            \"enum\": [\"black\",\"white\"],\n            \"default\": \"black\"\n        },\n        \"titleSize\": {\n            \"type\": \"string\",\n            \"enum\": [\"small\",\"medium\",\"large\"],\n            \"default\": \"medium\"\n        },\n        \"description\": {\n            \"type\": \"localizedString\"\n        },\n        \"top\": {\n            \"type\": \"string\",\n            \"default\": 50,\n            \"readonly\": true\n        },\n        \"left\": {\n            \"type\": \"string\",\n            \"default\": 50,\n            \"readonly\": true\n        },\n        \"x\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"readonly\": true\n        },\n        \"y\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"readonly\": true\n        },\n        \"backgroundColor\": {\n            \"type\": \"string\",\n            \"format\": \"color\",\n            \"enum\": [\"black\",\"#7f7f7f\",\"white\"],\n            \"default\": \"#7f7f7f\"\n        },\n        \"color\": {\n            \"type\": \"string\",\n            \"format\": \"textColor\",\n            \"enum\": [\"black\",\"white\"],\n            \"default\": \"black\"\n        },\n        \"skin\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"dark\",\n                \"light\",\n                \"dark/light\",\n                \"light/dark\"\n            ],\n            \"default\": \"dark\"\n        },\n        \"placement\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"top-left\",\n                \"top\",\n                \"top-right\",\n                \"left\",\n                \"center\",\n                \"right\",\n                \"bottom-left\",\n                \"bottom\",\n                \"bottom-right\"\n            ],\n            \"default\": \"top-left\"\n        },\n        \"grid\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"1:1\",\n                \"1:2\",\n                \"1:3\",\n                \"2:1\",\n                \"2:2\",\n                \"2:3\",\n                \"3:1\",\n                \"3:2\",\n                \"3:3\",\n                \"4:1\",\n                \"4:2\",\n                \"4:3\",\n                \"5:1\",\n                \"5:2\",\n                \"5:3\"\n            ],\n            \"default\": \"1:1\"\n        },\n    }\n}","export default {\n    \"ui:field\": \"kpLink\",\n    \"ui:layout\": \"module\",\n    \"ui:options\": {\n        \"minHeight\": 256,\n        \"editable\": true\n    },\n    \"ui:nav\": true,\n    \"ui:fieldset\": [\n        \"link\",\n    ],\n    \"ui:preview\": {\n        \"select\": {\n            \"imageUrl\": \"imageUrl\",\n            \"typeLabel\": \"typeLabel\",\n            \"title\": \"title\",\n            \"metadata\": \"metadata\",\n        },\n        prepare({formData, formContext, index}) {\n            const { mediaId, media, referenceId, reference } = formData\n\n            const locale = formContext.currentLocale ||formContext.defaultLocale;\n            const localeId = \"locale:\" + locale\n\n            const title = formData.title && formData.title[localeId] \n\n            const imageUrl = media && media.imageUrl ||reference && reference.imageUrl\n\n            const typeLabel = referenceId && reference && reference.documentType\n\n            let metadata = []\n\n            referenceId && reference && reference.title && metadata.push(reference.title)\n\n            return {\n                imageUrl: imageUrl,\n                typeLabel: typeLabel,\n                title: title || referenceId && reference && reference.title,\n                metadata: metadata,\n            }\n\n        }\n    },\n    \"imageFilters\": {\n        \"ui:title\": \"Filters\",\n        \"ui:field\": \"imageFilters\"\n    },\n    \"imageCropdata\": {\n        \"ui:title\": \"Crop\",\n        \"ui:field\": \"imageCropdata\"\n    },\n    \"imageFocalpoint\": {\n        \"ui:title\": \"Fokuspunkt\",\n        \"ui:field\": \"imageFocalpoint\"\n    },\n    \"link\": {\n        \"ui:title\": \"Innhold\",\n        \"ui:layout\": \"kioskLink\",\n        \"ui:fieldset\": [\n            \"linkMedia\",\n            \"linkContent\",\n            \"linkReference\",\n        ],\n        \"ui:options\": {\n            \"padding\": 2,\n            \"spacing\": 2\n        },\n        \"linkMedia\": {\n            \"ui:fieldset\": [\n                \"mediaId\",\n                \"media\"\n            ],\n            \"ui:sidebar\": {\n                \"query\": {\n                    \"models\": \"media\",\n                    \"mediaType\": \"image\"\n                }\n            },\n            \"ui:layout\": \"kioskLinkMedia\",\n            \"ui:buttons\": [\n                \"sidebar\"\n            ],\n        },\n        \"linkReference\": {\n            \"ui:fieldset\": [\n                \"referenceId\",\n                \"reference\"\n            ],\n            \"ui:sidebar\": {\n                \"query\": {\n                    \"models\": \"documents\",\n                    \"documentType\": [\"page*\",\"article\"]\n                }\n            },\n            \"ui:layout\": \"kioskLinkReference\",\n            \"ui:options\": {\n                \"editable\": true,\n                \"deletable\": true,\n                \"restorable\": true\n            }\n        },\n        \"linkContent\": {\n            \"ui:layout\": \"kioskLinkContent\",\n            \"ui:grid\": true,\n            \"ui:padding\": 2,\n            \"ui:spacing\": 2,\n            \"ui:fieldset\": [\n                \"runningHead\",\n                \"title\",\n                \"description\",\n            ],\n            \"runningHead\": {\n                \"ui:title\": \"Stikktittel\"\n            },\n            \"title\": {\n                \"ui:title\": \"Tittel\"\n            },\n            \"description\": {\n                \"ui:title\": \"Beskrivelse\",\n            },\n        },\n    },\n    \"imageAnnotations\": {\n        \"ui:title\": \"Markr\",\n        \"ui:fieldset\": [\n            \"coords\"\n        ],\n        \"coords\": {\n            \"ui:fieldset\": [\n                \"x\", \"y\", \"top\", \"left\"\n            ],\n            \"ui:grid\": true,\n            \"ui:padding\": 2,\n            \"ui:spacing\": 2,\n            \"x\": {\n                \"ui:gridCols\": 6\n            },\n            \"y\": {\n                \"ui:gridCols\": 6\n            },\n            \"top\": {\n                \"ui:gridCols\": 6\n            },\n            \"left\": {\n                \"ui:gridCols\": 6\n            }\n        }\n    }\n}","import React from 'react';\nimport PropTypes from \"prop-types\"\nimport ButtonGroup from \"@material-ui/core/ButtonGroup\"\nimport Button from '@material-ui/core/Button';\nimport Icon from '@material-ui/core/Icon';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    buttongroup: {\n        margin: props => { return theme.spacing(props.spacing/2 * -1) },\n        \"& > *\": {\n            margin: props => { return theme.spacing(props.spacing/2) },\n        }\n    },\n    button: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"14px\",\n        fontWeight: \"bold\",\n        textTransform: \"none\",\n        letterSpacing: 0,\n        borderRadius: 1,\n        minWidth: theme.spacing(12),\n        minHeight: theme.spacing(7),\n    },\n    icon: {\n        marginRight: theme.spacing(1),\n        \"& + $label\": {\n            marginRight: theme.spacing(1)\n        }\n    },\n    label: {\n\n    }\n}));\n\nconst SectionButtons = ({className, spacing = 1, buttons = []}) => {\n\n    const classes = useStyles({spacing: 1})\n\n    if (!buttons.length) {\n        return null\n    }\n\n    const SectionButton = ({icon, title, color=\"primary\", variant=\"outlined\", size=\"large\", ...props}) => {\n        \n        return (\n            <Button {...props} type=\"button\" data-size={size} data-variant={variant} disableElevation={true} color={color} variant={variant} size={size} className={classes.button}>\n                { icon && <Icon className={classes.icon}>{icon}</Icon>}\n                <b className={classes.label}>{title}</b>\n            </Button>\n        )\n    \n    }\n    \n    return (\n        <ButtonGroup color=\"primary\" className={className ||classes.buttongroup}>\n            { buttons && buttons.map((button, index) => {\n                return (\n                    <SectionButton {...button} key={index} />\n                )\n            })}\n        </ButtonGroup>\n    )\n    \n}\n\nSectionButtons.defaultProps = {\n    \"spacing\": 1\n}\n\nSectionButtons.propTypes = {\n    buttons: PropTypes.array,\n    buttonGroupProps: PropTypes.object,\n    buttonProps: PropTypes.object\n}\n\nexport default SectionButtons;","import React, { Component } from 'react';\nimport { ImagePreview } from \"@kit-ui/admin\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport KpLinkButtons from './KpLinkButtons';\n\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: \"block\",\n        position: \"relative\",\n        backgroundColor: \"#333\",\n        color: \"white\",\n\n        minHeight: 256,\n\n        \"&:hover $preview\": {\n            opacity: .5,\n        }\n\n    },\n    buttons: {\n        zIndex: 2,\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n    },\n    preview: {\n        margin: 0\n    }\n}));\n\nconst KpLinkMediaLayout = (props) => {\n\n    const {mediaId, media, referenceId, reference, onChange, onDialog } = props;\n\n    const classes = useStyles()\n\n    const mediaButtons = [\n        {\n            icon: \"remove_circle\",\n            title: \"Remove\",\n            variant: \"text\",\n            size: \"small\",\n            onClick: () => onChange({mediaId: undefined, media: {}})\n        }\n    ]\n\n    const buttons = [\n        {\n            icon: \"search\",\n            title: \"Finn media\",\n            color: \"inherit\",\n            size: \"small\",\n            onClick: () => onDialog(props)\n        }\n    ]\n\n    const imageUrl = mediaId && media && media.imageUrl || referenceId && reference && reference.imageUrl;\n\n    if (media && media.imageUrl) {\n        return (\n            <div className={classes.root} data-name=\"media\">\n                <ImagePreview className={classes.preview} imageUrl={media.imageUrl} />\n                <KpLinkButtons className={classes.buttons} buttons={mediaButtons} />\n            </div>\n        )\n    }\n\n    if (referenceId && reference && reference.imageUrl) {\n        return (\n            <div className={classes.root} data-name=\"media\">\n                <ImagePreview className={classes.preview} imageUrl={reference.imageUrl} />\n                <KpLinkButtons className={classes.buttons} buttons={buttons} />\n            </div>\n        )\n    }\n\n    return (\n        <div className={classes.root} data-name=\"media\">\n            <KpLinkButtons className={classes.buttons} buttons={buttons} />\n        </div>\n    )\n\n}\n\nexport default KpLinkMediaLayout","import React, { Component } from 'react';\nimport { ListModule } from \"@kit-ui/admin\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport LinkIcon from '@material-ui/icons/Link';\nimport LinkOffIcon from '@material-ui/icons/LinkOff';\n\n\nconst useStyles = makeStyles(theme => ({\n    reference: {\n        border: \"1px solid\",\n        borderColor: theme.palette.divider,\n        \n        \"&:hover $preview\": {\n            opacity: .5,\n        }\n\n    },\n}));\n\nconst KpLinkReferenceLayout = (props) => {\n\n    const {referenceId, reference, onChange, onDialog } = props;\n\n    const classes = useStyles()\n\n    const _onAddLink = () => {\n        onDialog && onDialog(props)\n    }\n\n    const _onRemoveLink = () => {\n        onChange && onChange({\n            referenceId: undefined, \n            reference: {}\n        })\n    }\n\n    const LinkAddButton = ({onClick}) => {\n        return (\n            <IconButton onClick={onClick}>\n                <LinkIcon />\n            </IconButton>\n        )\n    }\n\n    const LinkRemoveButton = ({onClick}) => {\n        return (\n            <IconButton onClick={onClick}>\n                <LinkOffIcon />\n            </IconButton>\n        )\n    }\n\n\n    if (referenceId && reference) {\n        return (\n            <div className={classes.reference}>\n                <ListModule {...reference} startAdornment={<LinkRemoveButton onClick={_onRemoveLink} />} />\n            </div>\n        )\n    }\n\n    return (\n        <div className={classes.reference} onClick={_onAddLink}>\n            <ListModule untitled=\"Add a link\" startAdornment={<LinkAddButton />} />\n        </div>\n    )\n\n}\n\nexport default KpLinkReferenceLayout","import React, { Component } from 'react';\n\n//import KpLinkContentLayout from \"./KpLinkContentLayout\"\nimport KpLinkMediaLayout from \"./KpLinkMediaLayout\"\nimport KpLinkReferenceLayout from \"./KpLinkReferenceLayout\"\n\nimport { utils } from \"@rjsf/core\"\nconst { getUiOptions, getDefaultFormState } = utils\n\nconst KpLinKContentField = (props) => {\n\n    const { formData, formContext, schema, uiSchema, registry} = props\n\n    const mediaId = formData && formData.mediaId\n    const media = formData && formData.media\n    const mediaType = media && media.mediaType\n\n    const referenceId = formData && formData.referenceId\n    const reference = formData && formData.reference\n    const referenceTitle = reference && reference.title\n    const referenceDescription = reference && reference.description\n\n    /*\n    const imageUrl = media.imageUrl || reference.imageUrl;\n    const imageFocalpoint = formData && formData.imageFocalpoint\n    const imageCropdata = formData && formData.imageCropdata\n    const imageFilters = formData && formData.imageFilters\n    */\n\n    const backgroundColor = formData && formData.backgroundColor;\n    const color = formData && formData.color;\n\n    const _onMediaChange = ({mediaId, media}) => {\n\n        console.log('MEDIA change', media)\n\n        const newFormData = getDefaultFormState(schema, {\n            ...formData,\n            mediaId: mediaId,\n            media: media\n        }, registry.definitions);\n\n        props.onChange && props.onChange(newFormData)\n\n    }\n\n    const _onMediaDialog = (props) => {\n\n        formContext.onDialog && formContext.onDialog({\n            ...props,\n            schema: {\n                type: \"object\",\n                properties: {\n                    mediaId: schema.properties.mediaId,\n                    media: schema.properties.media\n                }\n            },\n            formData: {\n                mediaId: mediaId,\n                media: media\n            },\n            onChange: _onMediaChange\n        })\n\n    }\n\n    const _onReferenceChange = ({referenceId, reference}) => {\n\n        console.log(\"KpLink:onChange\", referenceId)\n\n\n        const newFormData = getDefaultFormState(schema, {\n            ...formData,\n            referenceId: referenceId,\n            reference: reference\n        }, registry.definitions);\n\n        props.onChange && props.onChange(newFormData)\n\n    }\n\n    const _onReferenceDialog = (props) => {\n\n        formContext.onDialog && formContext.onDialog({\n            ...props,\n            schema: {\n                type: \"object\",\n                properties: {\n                    referenceId: schema.properties.referenceId,\n                    reference: schema.properties.reference\n                }\n            },\n            onChange: _onReferenceChange\n        })\n\n    }\n    \n    const newUiSchema = {\n        \"ui:fieldset\": [\n            \"linkMedia\",\n            \"linkContent\",\n            \"linkReference\",\n        ],\n        \"ui:options\": {\n            \"spacing\": 2,\n            \"grid\": true,\n        },\n        \"linkMedia\": {\n            \"ui:layout\": KpLinkMediaLayout,\n            \"ui:fieldset\": [\n                \"mediaId\",\n                \"media\",\n                \"referenceId\",\n                \"reference\"\n            ],\n            \"ui:xs\": 4,\n            \"ui:mediaId\": mediaId,\n            \"ui:media\": media,\n            \"ui:referenceId\": referenceId,\n            \"ui:reference\": reference,\n            \"ui:onDialog\": _onMediaDialog,\n            \"ui:onChange\": _onMediaChange,\n        },\n        \"linkContent\": {\n            \"ui:xs\": 8,\n            \"ui:spacing\": 2,\n            \"ui:fieldset\": [\n                \"runningHead\",\n                \"title\",\n                \"description\",\n            ],\n            \"runningHead\": {\n                \"ui:title\": \"Stikktittel\",\n                ...uiSchema.linkContent.runningHead,\n                \"color\": {\n                    \"ui:widget\": \"color\"\n                }\n            },\n            \"title\": {\n                \"ui:title\": \"Tittel\",\n                \"ui:placeholder\": referenceTitle,\n                ...uiSchema.linkContent.title,\n                \"titleColor\": {\n                    \"ui:widget\": \"color\"\n                }\n            },\n            \"description\": {\n                \"ui:title\": \"Beskrivelse\",\n                \"ui:placeholder\": referenceDescription,\n                \"ui:widget\": \"textarea\"\n            },\n        },\n        \"linkReference\": {\n            \"ui:layout\": KpLinkReferenceLayout,\n            \"ui:xs\": 12,\n            \"ui:fieldset\": [\n                \"referenceId\",\n                \"reference\"\n            ],\n            \"ui:referenceId\": referenceId,\n            \"ui:reference\": reference,\n            \"ui:dialog\": {\n                \"query\": {\n                    \"models\": \"documents\",\n                    \"documentType\": [\"page*\",\"article\"]\n                }\n            },\n            \"ui:onDialog\": _onReferenceDialog,\n            \"ui:onChange\": _onReferenceChange,\n        },\n    }\n\n    const {ObjectField } = registry.fields\n\n\n    return <ObjectField {...props} uiSchema={newUiSchema} />\n\n    return (\n        <p>{JSON.stringify(uiSchema)}</p>\n    )\n\n}\n\nexport default KpLinKContentField","import React, { Component } from 'react';\nimport Color from 'color';\nimport model from \"./KpLink.model\"\n\nimport KpLinkContentField from \"./KpLinkContentField\"\n\nimport { utils } from \"@rjsf/core\"\nconst { getUiOptions, getDefaultFormState } = utils\n\n\n\nconst KpLinkField = (props) => {\n    const {formData, formContext, registry } = props\n\n\n    const schema = {\n        ...model.schema,\n//        ...props.schema\n    }\n\n    const uiSchema = {\n        ...model.uiSchema,\n        ...props.uiSchema,\n        \"ui:layout\": \"kpLink\"\n    }\n\n    const mediaId = formData && formData.mediaId\n    const media = formData && formData.media\n\n    const referenceId = formData && formData.referenceId\n    const reference = formData && formData.reference\n    const referenceTitle = reference && reference.title\n\n    const imageUrl = media.imageUrl || referenceId && reference && reference.imageUrl;\n    const imageFocalpoint = formData && formData.imageFocalpoint\n    const imageCropdata = formData && formData.imageCropdata\n    const imageFilters = formData && formData.imageFilters\n\n    const backgroundColor = formData && formData.backgroundColor;\n    const color = formData && formData.color;\n\n    const getContrastColor = (hex) => {\n        const color = Color(hex)\n        return color.isLight() && \"black\" || \"white\"\n    }\n\n    const _onChange = (formData) => {\n\n        if (formData.backgroundColor !== backgroundColor) {\n            formData.color = getContrastColor(formData.backgroundColor)\n        }\n\n        if (formData.color !== color) {\n            formData.titleColor = formData.color\n        }\n\n        const newFormData = getDefaultFormState(schema, formData, registry.definitions);\n        props.onChange && props.onChange(newFormData)\n    }\n\n    const _onCropChange = (imageCropdata) => {\n        props.onChange && props.onChange({\n            ...formData,\n            imageCropdata: imageCropdata\n        })\n    }\n\n    const _onFocalpoint = (imageFocalpoint) => {\n        props.onChange && props.onChange({\n            ...formData,\n            imageFocalpoint: imageFocalpoint\n        })\n    }\n\n    const _onFiltersChange = (imageFilters) => {\n        props.onChange && props.onChange({\n            ...formData,\n            imageFilters: imageFilters\n        })\n     }\n    \n    const getUiSchema = () => {\n        const uiOptions = getUiOptions(uiSchema);\n\n        let fieldset = []\n\n        const uiPreview = {\n            \"ui:mediaId\": mediaId,\n            \"ui:media\": mediaId,\n            \"ui:referenceId\": referenceId,\n            \"ui:reference\": reference,\n            \"ui:imageUrl\": imageUrl,\n            \"ui:imageCropdata\": imageCropdata,\n            \"ui:imageFilters\": imageFilters,\n            \"ui:imageFocalpoint\": imageFocalpoint,\n        }\n\n        let newUiSchema = {}\n\n        if (uiSchema.content) {\n            newUiSchema.content = {\n                ...uiSchema.content,\n                ...uiPreview,\n\n                \"ui:field\": KpLinkContentField,\n\n            }\n\n            fieldset.push('content')\n\n        }\n\n        if (uiSchema.imageCropdata && imageUrl) {\n            newUiSchema.imageCropdata = {\n                ...uiSchema.imageCropdata,\n                ...uiPreview,\n                \"ui:onChange\": (cropdata) => _onCropChange(cropdata),\n            }\n\n            fieldset.push('imageCropdata')\n        }\n\n        if (uiSchema.imageFocalpoint && imageUrl) {\n            newUiSchema.imageFocalpoint = {\n                ...uiSchema.imageFocalpoint,\n                ...uiPreview,\n                \"ui:onChange\": (focalpoint) => _onFocalpoint(focalpoint),\n            }\n\n            fieldset.push('imageFocalpoint')\n\n        }\n\n        if (uiSchema.imageFilters && imageUrl) {\n            newUiSchema.imageFilters = {\n                ...uiSchema.imageFilters,\n                ...uiPreview,\n                \"ui:onChange\": (filters) => _onFiltersChange(filters),\n            }\n\n            fieldset.push('imageFilters')\n        }\n\n        if (formContext.pageType === \"annotate\") {\n            newUiSchema.imageAnnotations = {\n                ...uiSchema.imageAnnotations,\n                ...uiPreview\n            }\n\n            fieldset.push('imageAnnotations')\n        }\n\n        return {\n            ...uiSchema,\n            ...newUiSchema,\n            \"ui:options\": uiOptions,\n            \"ui:fieldset\": fieldset,\n            \"color\": {\n                ...uiSchema.color,\n                \"ui:backgroundColor\": formData && formData.backgroundColor\n            },\n            \"link\": {\n                ...newUiSchema.link,\n                \"linkContent\": {\n                    ...newUiSchema.content.linkContent,\n                    \"titleColor\": {\n                        \"ui:backgroundColor\": formData && formData.backgroundColor\n                    }\n                }\n            }\n        }\n\n    }\n\n    const newUiSchema = getUiSchema()\n\n    const { ObjectField } = registry.fields;\n\n    return (\n        <ObjectField {...props} schema={schema} uiSchema={newUiSchema} onChange={_onChange} />\n    )\n\n}\n\nexport default KpLinkField","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Badge from '@material-ui/core/Badge';\n\nimport {\n    ModuleBase,\n    ModuleMedia,\n    ModuleTitle,\n    ModuleLabel,\n    ModuleMetadata,\n    ModuleDescription,\n    ModuleStatus,\n    ModuleByline,\n    NavToolbar,\n    NavSettings\n} from \"@kit-ui/admin\"\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    module: {\n        position: \"relative\",\n        display: \"flex\",\n        minHeight: theme.spacing(8),\n        justifyContent: \"flex-start\",\n        alignItems: \"center\",\n        userSelect: \"none\",\n\n        \"&[aria-selected=true]\": {\n            backgroundColor: theme.palette.action.selected,\n        },\n\n        \"&[role=button]\": {\n            cursor: \"pointer\",\n\n            \"& *\": {\n                pointerEvents: \"none\"\n            },\n\n            \"&[aria-selected=true]\": {\n            },\n\n        },\n\n        \"&[data-elevated=true]\": {\n            paddingLeft: theme.spacing(1),\n            paddingRight: theme.spacing(1)\n        },\n\n        \"& + $module\": {\n            borderTop: \"1px solid\",\n            borderColor: theme.palette.divider\n        },\n\n        \"&.sortable-helper\": {\n            borderTopColor: \"transparent\",\n            boxShadow: theme.shadows[12],\n            zIndex: 2000,\n            \"& $settings\": {\n                display: \"none\"\n            },\n            \"& $toolbar\": {\n                display: \"none\"\n            }\n        },\n\n        \"&[data-status=erased]\": {\n\n            \"& figure\": {\n                opacity: \"0.5\"\n            },\n\n            \"& $content\": {\n                opacity: \"0.5\"\n            }\n\n        },\n\n        \"&[data-status=trash]\": {\n\n            \"& figure\": {\n                opacity: \"0.5\"\n            },\n\n            \"& $content\": {\n                opacity: \"0.5\"\n            }\n\n        },\n\n    },\n    badge: {\n        \"& .MuiBadge-badge\": {\n            pointerEvents: \"none\",\n            margin: theme.spacing(1)\n        }\n    },\n    settings: {\n        zIndex: 3,\n        display: \"flex\",\n        flexWrap: \"none\",\n\n        \"& > * + *\": {\n            marginLeft: theme.spacing(-1)\n        }\n        \n    },\n    toolbar: {\n        zIndex: 3,\n        display: \"flex\",\n        flexWrap: \"none\",\n\n        \"& > * + *\": {\n            marginLeft: theme.spacing(-1)\n        },\n\n        \"& button\": {\n            opacity: .5,\n\n            \"&:hover\": {\n                opacity: 1\n            }\n\n        }        \n    },\n    media: {\n        display: \"flex\",\n    },\n    content: {\n        flexGrow: 1,\n        maxWidth: \"100%\",\n        flexDirection: \"column\",\n        overflow: \"hidden\",\n        alignItems: \"flex-start\",\n        justifyContent: \"flex-start\",\n        margin: theme.spacing(1)\n    },\n    header: {\n        width: \"100%\",\n        maxWidth: \"100%\",\n        overflow: \"hidden\",\n        display: \"flex\",\n        alignItems: \"baseline\",\n        justifyContent: \"flex-start\",\n        \"& * + *\": {\n            marginLeft: theme.spacing(.5)\n        }\n    },\n    footer: {\n        width: \"100%\",\n        maxWidth: \"100%\",\n        overflow: \"hidden\",\n        display: \"flex\",\n        alignItems: \"baseline\",\n        justifyContent: \"flex-start\",\n        \"& * + *\": {\n            marginLeft: theme.spacing(.5)\n        }\n    },\n}));\n\n/** ListModule for listing documents */\n\nconst StartAdornment = ({startAdornment, badgeContent}) => {\n\n    const classes = useStyles({})\n\n    return (\n        <Badge className={classes.badge} badgeContent={badgeContent} color=\"primary\">\n            {startAdornment}\n        </Badge>\n    )\n\n}\n\nconst ListModule = ({imageUrl, untitled, typeLabel, type, title, description, metadata, status, statusLabel, author, datetime, selected, onClick, ...props }) => {\n    const classes = useStyles({})\n\n    return (\n        <ModuleBase {...props} className={classes.module} role={onClick && \"button\"} status={status} selected={selected} onClick={onClick}>\n            <StartAdornment {...props} />\n            <div className={classes.media}>\n                <ModuleMedia backgroundColor=\"transparent\" imageUrl={imageUrl} width=\"48px\" height=\"48px\" />\n            </div>\n            <div className={classes.content}>\n                <header className={classes.header}>\n                    <ModuleTitle status={status} untitled={untitled} title={title} onClick={!onClick && props.onEdit} />\n                    <ModuleStatus statusLabel={statusLabel} status={statusLabel ||status} />\n                    <ModuleByline author={author} datetime={datetime} />\n                </header>\n                <footer className={classes.footer}>\n                    <ModuleLabel label={typeLabel || type} />\n                    <ModuleMetadata metadata={metadata} />\n                    <ModuleDescription description={description} />\n                </footer>\n            </div>\n            <NavSettings {...props} className={classes.settings} />\n            <NavToolbar {...props} className={classes.toolbar} />\n        </ModuleBase>\n    )    \n\n}\n\nListModule.propTypes = {\n    selectable: PropTypes.bool,\n    selected: PropTypes.bool,\n    onSelect: PropTypes.func,\n    editable: PropTypes.bool,\n    onEdit: PropTypes.func,\n    deletable: PropTypes.bool,\n    onDelete: PropTypes.func,\n    restorable: PropTypes.bool,\n    onRestore: PropTypes.func,\n    imageUrl: PropTypes.string,\n    title: PropTypes.string,\n    description: PropTypes.string,\n    type: PropTypes.string,\n    typeLabel: PropTypes.string,\n    metadata: PropTypes.array,\n    status: PropTypes.string,\n    statusLabel: PropTypes.string,\n    author: PropTypes.string,\n    datetime: PropTypes.string,\n    /** Whole object is clickable, will override any other onClick events */\n    onClick: PropTypes.func,\n}\n\nListModule.defaultProps = {\n//    size: \"small\",\n    editable: false,\n    selectable: false,\n    selected: false,\n    deletable: false,\n    restorable: false\n}\n\nexport default ListModule;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n    ModuleBase,\n    ModuleFormat,\n    ModuleHeader,\n    ModuleBody,\n    ModuleFooter,\n    ModuleButtons,\n} from \"@kit-ui/admin\"\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    module: {\n        position: \"relative\",\n        zIndex: 2,\n\n        \"& + *\": {\n            zIndex: 1\n        },\n\n        display: \"flex\",\n        flexDirection: \"column\",\n        minHeight: props => { return props.minHeight }\n\n    },\n    header: {\n        position: \"absolute\",\n        zIndex: 2,\n        top: 0,\n        right: 0,\n        bottom: \"auto\",\n        left: 0,\n        display: \"flex\",\n        zIndex: 2,\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n        height: theme.spacing(6),\n        marginLeft: theme.spacing(1),\n        marginRight: theme.spacing(1),\n        color: \"inherit\",\n\n        \"& + *\": {\n            zIndex: 1,\n            marginTop: theme.spacing(6)\n        }\n\n    },\n    body: {\n        position: \"relative\",\n        flexGrow: 1,\n        padding: theme.spacing(2)\n    },\n    footer: {\n        borderTop: \"1px solid\",\n        borderColor: theme.palette.divider,\n//        padding: props => { return theme.spacing(props.padding) }\n    }\n\n}));\n\nconst ExpandedModule = ({id, children, buttons, ...props }) => {\n    const classes = useStyles(props)\n\n    return (\n        <ModuleBase className={classes.module} id={id} expanded={true} elevation={4}>\n            <ModuleFormat {...props}>\n                <ModuleHeader {...props} className={classes.header} />\n                <ModuleBody className={classes.body}>\n                    {children}\n                </ModuleBody>\n            </ModuleFormat>\n            <ModuleFooter {...props} className={classes.footer}>\n                {buttons && <ModuleButtons buttons={buttons} />}\n            </ModuleFooter>\n        </ModuleBase>\n    )    \n\n}\n\nExpandedModule.propTypes = {\n    title: PropTypes.string,\n    menu: PropTypes.array,\n    buttons: PropTypes.array,\n    children: PropTypes.node\n}\n\nexport default ExpandedModule;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport KpLinkCollapsed from \"./KpLinkCollapsed\"\nimport KpLinkExpanded from \"./KpLinkExpanded\"\n\nconst KpLinkLayout = ({\n    editable,\n    expanded,\n    buttons,\n    onSave,\n    children,\n    ...props\n}) => {\n\n    if (editable && expanded) {\n\n        if (!buttons || !buttons.length) {\n            buttons = [\n                {\n                    title: \"Save\",\n                    onClick: onSave\n                }\n            ]\n        }\n\n        return (\n            <KpLinkExpanded {...props} buttons={buttons}>\n                {children}\n            </KpLinkExpanded>\n        )\n    }\n\n    return (\n        <KpLinkCollapsed\n            {...props}\n            editable={editable}\n        />\n    )\n\n}\n\nKpLinkLayout.defaultProps = {\n    padding: 2,\n    editable: true\n}\n\nKpLinkLayout.propTypes = {\n    editable: PropTypes.bool,\n    editing: PropTypes.bool\n}\n\nexport default KpLinkLayout;\n","import KpLinkField from \"./KpLinkField\"\nimport KpLinkLayout from \"./KpLinkLayout\"\nimport KpLinkMediaLayout from \"./KpLinkMediaLayout\"\n\nexport default {\n    \"fields\": {\n        \"kpLink\": KpLinkField,\n        \"kpLinkLayout\": KpLinkLayout,\n        \"kpLinkMediaLayout\": KpLinkMediaLayout,\n    },\n    \"widgets\": {\n    },\n    \"models\": {\n    }\n}","import React from 'react';\n\nconst KpDeviceField = (props) => {\n    const { uiSchema, formData, formContext, registry } = props;\n\n    const setStartPageId = (startPageId) => {\n        props.onChange({\n            ...formData,\n            startPageId: startPageId\n        })\n    }\n\n    const startPageId = formData && formData.startPageId\n\n    const newRegistry = {\n        ...registry,\n        formContext: {\n            ...registry.formContext,\n            startPageId: startPageId,\n            setStartPageId: setStartPageId\n        }\n    }\n\n    const newUiSchema = {\n        ...uiSchema,\n        \"ui:dialog\": formContext.dialog,\n        \"ui:preview\": formContext.preview,\n        \"ui:sidebar\": {\n            ...formContext.dialog,\n            ...formContext.sidebar\n        },\n        \"ui:layout\": \"pageContent\",\n\n    }\n\n    const { ObjectField } = registry.fields;\n\n    return (\n        <ObjectField {...props} uiSchema={newUiSchema} registry={newRegistry} />\n    )\n\n\n}\n\nexport default KpDeviceField","import KpDeviceField from \"./KpDeviceField\"\nimport KpDeviceLinkField from \"./KpDeviceLinkField\"\n\nexport default {\n    \"fields\": {\n        \"kpDevice\": KpDeviceField,\n        \"kpDeviceLink\": KpDeviceLinkField,\n    },\n    \"widgets\": {\n    },\n    \"models\": {\n    }\n}","import React from 'react';\nimport { ListModule, ExpandedModule, ModuleLabel } from \"@kit-ui/admin\"\nimport ButtonBase from \"@material-ui/core/ButtonBase\"\n\nconst KpDeviceLinkField = ({\n    formData,\n    formContext,\n    children,\n    ...props\n}) => {\n\n    const { startPageId, setStartPageId } = formContext\n    const { referenceId, reference }= formData\n\n    const isStartPage = startPageId && referenceId === startPageId\n\n    const toggleStartPage = (id) => {\n        setStartPageId && setStartPageId(id)\n    }\n\n\n\n    const StartPageSettings = () => {\n\n        if (isStartPage) {\n            return (\n                <ButtonBase onClick={() => toggleStartPage(undefined)}>\n                    <ModuleLabel backgroundColor=\"black\">Startpage</ModuleLabel>\n                </ButtonBase>\n            )\n        }\n\n        return (\n            <ButtonBase onClick={() => toggleStartPage(referenceId)}>\n                <ModuleLabel>Startpage</ModuleLabel>\n            </ButtonBase>\n        )\n    }\n\n    const settings = [\n        StartPageSettings\n    ]\n\n    if (props.editable && props.expanded) {\n        return (\n            <ExpandedModule {...props}>\n                {children}\n            </ExpandedModule>\n        )\n    }\n\n    return (\n        <ListModule\n            {...reference}\n            onEdit={undefined}\n            elevation={1}\n            settings={settings}\n        />\n    )\n\n}\n\nexport default KpDeviceLinkField;\n","\nimport React, { Component } from 'react';\nimport { utils } from \"@rjsf/core\";\nconst { getUiOptions, getDefaultFormState } = utils;\n\nconst GeopointField = (props) => {\n    const { registry, schema, uiSchema, formData, formContext } = props\n    const { ObjectField } = registry.fields;\n\n    const _onChange = (formData) => {\n \n        const newFormData = getDefaultFormState(schema, formData)\n        \n        console.log('GeopointField:onChange', newFormData)\n\n        if (props.onChange) {\n            props.onChange(newFormData);\n        }\n        \n    }   \n    const newUiSchema = {\n        ...uiSchema,\n        \"ui:location\": formData ||{},\n        \"ui:onChange\": _onChange\n    }\n\n    return (\n        <ObjectField {...props} onChange={_onChange} uiSchema={newUiSchema} />\n    )\n\n}\n\nexport default GeopointField;","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        backgroundColor: \"#e5e3df\",\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        width: \"100%\",\n        height: \"100%\"\n    }\n}));\n\nconst GeopointLoader = () => {\n\n    const classes = useStyles()\n\n    return (\n        <div className={classes.root}>\n                Loading ...\n        </div>\n    )        \n\n}\n\nexport default GeopointLoader;","import React, { memo } from 'react';\nimport { LoadScript } from '@react-google-maps/api';\nimport GeopointLoader from \"./GeopointLoader\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        backgroundColor: \"#e5e3df\",\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        width: \"100%\",\n        height: \"100%\"\n    }\n}));\n\nconst GeopointBase = ({className, googleMapsApiKey, children, onClick}) => {\n    const classes = useStyles()\n\n\n    return (\n        <div className={className ||classes.root} onClick={onClick}>\n            <LoadScript\n                libraries={[\"places\"]}\n                loadingElement={GeopointLoader}\n                googleMapsApiKey={googleMapsApiKey}\n                preventGoogleFontsLoading={true}>\n                    {children}\n            </LoadScript>\n        </div>\n    )        \n\n}\n\nGeopointBase.defaultProps = {\n    googleMapsApiKey: \"AIzaSyA0UKwjqalA0BdK5GBh8RPR9HJjtifWLAg\",\n}\n\nexport default memo(GeopointBase);","import React, { useState } from 'react';\nimport { GoogleMap } from '@react-google-maps/api';\nimport ButtonBase from \"@material-ui/core/ButtonBase\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    map: {\n        backgroundColor: \"#e5e3df\",\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        width: \"100%\",\n        height: \"100%\"\n    }\n}));\n\nconst GeopointMap = ({id = \"map\", className, center, zoom, onChange, onClick, options, children}) => {\n    const [map, setMap]= useState(null) \n\n    const handleChange = () => {\n        map && onChange && onChange(map)\n    }\n\n    const classes = useStyles()\n\n    if (onClick) {\n        return (\n            <GoogleMap\n                id={id}\n                options={{\n                    draggable: false,\n                    zoomControl: false,\n                    scaleControl: false,\n                    mapTypeControl: false,\n                    fullscreenControl: false,\n                    streetViewControl: false,\n                }}\n                clickableIcons={false}\n                mapContainerClassName={className ||classes.map}\n                center={center}\n                zoom={zoom}\n                onClick={onClick}\n                onLoad={(map) => setMap(map)}>\n                {children}\n            </GoogleMap>\n        )\n    }\n    \n    return (\n        <GoogleMap\n            id={id}\n            options={options}\n            clickableIcons={false}\n            mapContainerClassName={className ||classes.map}\n            center={center}\n            zoom={zoom}\n            onLoad={(map) => setMap(map)}\n            onZoomChanged={handleChange}\n            onDragEnd={handleChange}\n        >\n            {children}\n        </GoogleMap>\n    )        \n\n}\n\nGeopointMap.defaultProps = {\n    options: {\n        scaleControl: false,\n        draggable: false,\n        mapTypeControl: false,\n        fullscreenControl: false,\n        streetViewControl: false\n    },\n    center: {\n        lat: undefined,\n        lng: undefined,\n    },\n    zoom: 12\n}\n\nexport default GeopointMap;","import React, { useRef, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: \"absolute\",\n        top: \"50%\",\n        left: \"50%\",\n        transform: \"translate(-50%,-50%)\",\n        pointerEvents: \"none\",\n        width: props => { return theme.spacing(props.size) },\n        height: props => { return theme.spacing(props.size) },\n    },\n    point: {\n        position: \"absolute\",\n        backgroundColor: \"white\",\n        borderRadius: \"50%\",\n        width: \"100%\",\n        height: \"100%\",\n        opacity: 0.25\n    },\n    crosshair: {\n        position: \"absolute\",\n        display: \"block\",\n        width: \"100%\",\n        height: \"100%\",\n    },\n    crosshairX: {\n        display: \"block\",\n        position: \"absolute\",\n        left: \"-15%\",\n        top: \"50%\",\n        backgroundColor: \"black\",\n        width: \"130%\",\n        height: \"1px\"\n    },\n    crosshairY: {\n        display: \"block\",\n        position: \"absolute\",\n        left: \"50%\",\n        top: \"-15%\",\n        backgroundColor: \"black\",\n        width: \"1px\",\n        height: \"130%\"\n    }\n}));\n\nconst GeopointMapCenter = ({size = 8}) => {\n\n    const classes = useStyles({size})\n\n    return (\n        <div className={classes.root}>\n            <div className={classes.point}>\n            </div>\n            <div className={classes.crosshair}>\n                <div className={classes.crosshairX}></div>\n                <div className={classes.crosshairY}></div>\n            </div>\n        </div>\n    )\n\n}\n\nexport default GeopointMapCenter;","import React, { useState, useEffect } from 'react';\nimport GeopointMap from \"./GeopointMap\"\nimport GeopointMapCenter from \"./GeopointMapCenter\"\n\nconst GeopointPreview = ({id = \"map\", location, onClick}) => {\n    const { lat, lng, zoom } = location\n\n    const center = {\n        lat: lat,\n        lng: lng\n    }\n\n    return (\n        <GeopointMap id={id + \"-preview\"} center={center} zoom={zoom} onClick={onClick}>\n            <GeopointMapCenter />\n        </GeopointMap>\n    )        \n}\n\nGeopointPreview.defaultProps = {\n}\n\nexport default GeopointPreview;","import React, { useState } from 'react';\nimport { Autocomplete } from '@react-google-maps/api';\nimport TextField from '@material-ui/core/TextField';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n\n    },\n    input: {\n        backgroundColor: \"white\",\n\n        \"& .MuiFilledInput-root\": {\n//            backgroundColor: \"rgba(255,255,255,.9)\",\n\n            \"&.Mui-focused\": {\n                backgroundColor: \"white\"\n            }\n\n        }\n\n        \n    }\n}));\n\nconst GeopointAutocomplete = ({className, onChange}) => {\n    const [autocomplete, setAutocomplete]= useState(null) \n\n    const handleChange = () => {\n        if (autocomplete !== null) {\n            onChange && onChange(autocomplete.getPlace())\n        } else {\n            console.log('Autocomplete is not loaded yet!')\n        }        \n    }\n\n    const classes = useStyles()\n\n    return (\n        <div className={className ||classes.root}>\n            <Autocomplete\n                options={{\n                    types: \"geocode\"\n                }}\n                onLoad={(autocomplete) => setAutocomplete(autocomplete)}\n                onPlaceChanged={handleChange}\n            >\n                <TextField className={classes.input} label=\"Find location\" placeholder=\"Enter a place\" variant=\"filled\" fullWidth />\n            </Autocomplete>\n      </div>\n    )        \n\n}\n\nexport default GeopointAutocomplete;","import React, { memo, useEffect } from 'react';\nimport GeopointMap from \"./GeopointMap\"\nimport GeopointMapCenter from \"./GeopointMapCenter\"\nimport GeopointSearch from \"./GeopointSearch\"\n\nimport IconButton from \"@material-ui/core/IconButton\"\nimport CloseIcon from \"@material-ui/icons/Close\"\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    overlay: {\n        position: \"fixed\",\n        backgroundColor: \"rgba(0,0,0,.25)\",\n        zIndex: 2000,\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n    },\n    geocoder: {\n        backgroundColor: \"#e5e3df\",\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        margin: theme.spacing(4)\n    },\n    search: {\n        position: \"absolute\",\n        zIndex: 2,\n        top: 0,\n        right: 0,\n        bottom: \"auto\",\n        left: 0,\n        margin: theme.spacing(2)\n    },\n    closeButton: {\n        position: \"absolute\",\n        zIndex: 2,\n        top: 0,\n        right: 0,\n        bottom: \"auto\",\n        left: \"auto\",\n        margin: theme.spacing(2.5)\n\n    }\n}));\n\nconst GeocoderOverlay = ({id = \"map\", location, onChange, onClose}) => {\n    const { lat, lng, zoom } = location;\n\n    const _onChange = (location) => {\n        onChange && onChange(location)\n    }\n\n    const _onMapChange = (map) => {\n        console.log('map', map)\n\n        let lat, lng\n\n        if (map && map.center) {\n            lat = map.center.lat()\n            lng = map.center.lng()\n        }\n            \n        const zoom = map && map.zoom;\n\n        if (lat && lng) {\n            _onChange({\n                lat: lat,\n                lng: lng,\n                zoom: zoom\n            })\n        }\n\n    }\n\n    const _onSearch = (place) => {\n        console.log('place', place)\n\n        let lat, lng\n\n        if (place && place.geometry && place.geometry.location) {\n            lat = place.geometry.location.lat()\n            lng = place.geometry.location.lng()\n        }\n\n        if (lat && lng) {\n            _onChange({\n                placeId: place && place.place_id,\n                lat: lat,\n                lng: lng,\n                zoom: zoom\n            })\n        }\n\n    }\n\n    const classes = useStyles() \n\n    const center = {\n        lat: lat,\n        lng: lng\n    }\n\n    return (\n        <div className={classes.overlay}>\n            <div className={classes.geocoder}>\n                <GeopointMap id={id + \"-editor\"} center={center} zoom={zoom} onChange={_onMapChange}>\n                    <GeopointMapCenter />\n                    <GeopointSearch className={classes.search} onChange={_onSearch} />\n                </GeopointMap>\n\n                <IconButton className={classes.closeButton} onClick={() => onClose()}>\n                    <CloseIcon></CloseIcon>\n                </IconButton>\n            </div>\n        </div>\n    )        \n}\n\nGeocoderOverlay.defaultProps = {\n    formData: {\n        lat: undefined,\n        lng: undefined,\n        zoom: undefined\n    }\n}\n\nexport default GeocoderOverlay;","import React, { useState, useEffect } from 'react';\nimport GeopointBase from \"./GeopointBase\"\nimport GeopointPreview from \"./GeopointPreview\"\nimport GeocoderEditor from \"./GeopointEditor\"\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        backgroundColor: \"#e5e3df\",\n        width: \"100%\",\n        position: props => { return props.position },\n        flexBasis: props => { return props.minWidth },\n        minWidth: props => { return props.minWidth },\n        minHeight: props => { return props.minHeight },\n    },\n}));\n\nconst Geopoint = (props) => {\n    const { id, position = \"relative\", minWidth = 164, minHeight = 164, googleMapsApiKey, location } = props;\n    const { lat, lng, zoom } = location\n\n    const center = {\n        lat: lat,\n        lng: lng\n    }\n\n    const classes = useStyles({position, minWidth, minHeight})\n\n    const [overlay, setOverlay] = useState(false)\n\n    const _onEdit = () => {\n        setOverlay(true)\n    }\n\n    const _onClose = () => {\n        setOverlay(false)\n    }\n\n    return (\n        <GeopointBase\n            className={classes.root}\n            googleMapsApiKey={googleMapsApiKey}>\n                <GeopointPreview {...props} onClick={_onEdit} />\n                {overlay && <GeocoderEditor {...props} onClose={() => _onClose()} /> }\n        </GeopointBase>\n    )        \n}\n\nGeopoint.defaultProps = {\n    googleMapsApiKey: \"AIzaSyA0UKwjqalA0BdK5GBh8RPR9HJjtifWLAg\",\n    location: {\n        lat: undefined,\n        lng: undefined,\n        zoom: undefined\n    }\n}\n\nexport default Geopoint;","import React, { memo } from 'react';\nimport GeopointBase from \"./GeopointBase\"\nimport GeopointMap from \"./GeopointMap\"\nimport GeopointMapCenter from \"./GeopointMapCenter\"\nimport GeopointSearch from \"./GeopointSearch\"\n\nimport IconButton from \"@material-ui/core/IconButton\"\nimport CloseIcon from \"@material-ui/icons/Close\"\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    geocoder: {\n        backgroundColor: \"#e5e3df\",\n        width: \"100%\",\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n    },\n    search: {\n        position: \"absolute\",\n        zIndex: 2,\n        top: 0,\n        right: 0,\n        bottom: \"auto\",\n        left: 0,\n        margin: theme.spacing(2)\n    },\n    closeButton: {\n        position: \"absolute\",\n        zIndex: 2,\n        top: 0,\n        right: 0,\n        bottom: \"auto\",\n        left: \"auto\",\n        margin: theme.spacing(2)\n\n    }\n}));\n\nconst Geocoder = ({googleMapsApiKey, location, onChange, onClose}) => {\n    const { lat, lng, zoom } = location;\n\n    const handleChange = (location) => {\n        onChange && onChange(location)\n    }\n\n    const handleMapChange = (map) => {\n        console.log('map', map)\n\n        let lat, lng\n\n        if (map && map.center) {\n            lat = map.center.lat()\n            lng = map.center.lng()\n        }\n            \n        const zoom = map && map.zoom;\n\n        if (lat && lng) {\n            handleChange({\n                lat: lat,\n                lng: lng,\n                zoom: zoom\n            })\n        }\n\n    }\n\n    const handleSearch = (place) => {\n        console.log('place', place)\n\n        let lat, lng\n\n        if (place && place.geometry && place.geometry.location) {\n            lat = place.geometry.location.lat()\n            lng = place.geometry.location.lng()\n        }\n\n        if (lat && lng) {\n            handleChange({\n                placeId: place && place.place_id,\n                lat: lat,\n                lng: lng,\n                zoom: zoom\n            })\n        }\n\n    }\n\n    const classes = useStyles() \n\n    const center = {\n        lat: lat,\n        lng: lng\n    }\n\n    return (\n        <GeopointBase\n            className={classes.root}\n            googleMapsApiKey={googleMapsApiKey}>\n                <GeopointMap center={center} zoom={zoom} onChange={handleMapChange}>\n                    <GeopointMapCenter />\n                    <GeopointSearch className={classes.search} onChange={handleSearch} />\n                </GeopointMap>\n\n                {onClose && <IconButton className={classes.closeButton} onClick={() => onClose()}>\n                    <CloseIcon></CloseIcon>\n                </IconButton> }\n\n        </GeopointBase>\n    )        \n}\n\nGeocoder.defaultProps = {\n    googleMapsApiKey: \"AIzaSyA0UKwjqalA0BdK5GBh8RPR9HJjtifWLAg\",\n    location: {\n        lat: undefined,\n        lng: undefined,\n        zoom: undefined\n    }\n}\n\nexport default Geocoder;","import GeopointField from './GeopointField';\n\nimport Geopoint from './Geopoint';\nimport Geocoder from './Geocoder'\n\nexport default {\n    \"fields\": {\n        \"kpGeopoint\": GeopointField,\n        \"kpGeopointLayout\": Geopoint,\n        \"kpGeocoderLayout\": Geocoder,\n    },\n}","import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getQuery } from '../../redux/searchByUrl';\nimport { utils } from \"@rjsf/core\";\nconst { getUiOptions } = utils;\n\nconst ParentIdField = (props) => {\n    const { formContext, schema, uiSchema } = props;\n\n    const uiOptions = getUiOptions(uiSchema)\n    const uiQuery = uiOptions.query ||{}\n\n    const app = useSelector(state => state.app)\n    const editor = useSelector(state => state.editor)\n    const { pathname, formData } = editor;\n\n    const parentId = formData && formData.parentId\n    const uniqueId = formData && formData.uniqueId\n    const collectionId = formData && formData.collectionId\n\n    const query = {\n        url: pathname + \"/parentId\",\n        models: \"documents\",\n        collectionId: collectionId,\n        fl: \"id,parentId,uniqueId,title\",\n        q: \"uniqueId:NOT \" + uniqueId,\n        ...uiQuery\n    }\n\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        collectionId && pathname && dispatch(getQuery(query))\n    }, [pathname])\n\n    const [enumOptions, setEnumOptions] = useState([formData])\n    const [enumNames, setEnumNames] = useState([formData])\n\n    const searchByUrl = useSelector(state => state.searchByUrl)\n    const currentSearch = searchByUrl && searchByUrl[query.url]\n\n    const getOptions = () => {\n        const resultsLoaded = currentSearch && currentSearch.resultsLoaded ||[]\n        // const options = models.length && getOptionsTree(models) ||[]\n\n        let optionsEnum = [\n            null\n        ], optionsNames = [\n            \"No parentId\"\n        ]\n\n\n        resultsLoaded && resultsLoaded.map(model => {\n            const label = model.title + \" (\"+model.id+\")\"\n            optionsEnum.push(model.id)\n            optionsNames.push(label)\n        })\n\n        setEnumOptions(optionsEnum)\n        setEnumNames(optionsNames)\n\n    }\n\n    useEffect(() => {\n        getOptions()\n    }, [currentSearch])\n\n    const {SchemaField } = props.registry.fields;\n\n    const newSchema = {\n        ...schema,\n        enum: enumOptions,\n        enumNames: enumNames,\n        default: null\n    }\n\n    const newUiSchema = {\n        ...uiSchema,\n        \"ui:field\": undefined\n    }\n\n    return (\n        <SchemaField {...props} schema={newSchema} uiSchema={newUiSchema} />\n    )\n\n}\n\nexport default ParentIdField","import React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    treeView: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        \n        border: \"1px solid\",\n        borderColor: theme.palette.divider,\n\n    },\n\n}));\n\nconst TreeView = ({droppable, children, ...props}) => {\n\n    const classes = useStyles();\n\n    if (droppable && droppable.provided) {\n        const {provided, snapshot } = droppable\n        const {droppableProps, innerRef } = provided\n        const { isDraggingOver } = snapshot\n\n        return (\n            <div {...droppableProps} \n                data-is-dragging-over={isDraggingOver}\n                className={classes.treeView}\n                ref={innerRef}>\n                    {children}\n                    {provided.placeholder}\n            </div>\n        )\n    \n    }\n\n    return (\n        <div className={classes.treeView}>\n            {children}\n        </div>\n    )\n\n}\n\nexport default TreeView","import React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    treeList: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        \"& > * + *\": {\n            borderTop: \"1px solid\",\n            borderColor: theme.palette.divider,\n        },\n\n        \"&[data-is-dragging-over=true]\": {\n            backgroundColor: theme.palette.divider\n        },\n\n    },\n\n}));\n\nconst TreeList = ({droppable, children, ...props}) => {\n\n    const classes = useStyles();\n\n    if (droppable && droppable.provided) {\n        const {provided, snapshot } = droppable\n        const {droppableProps, innerRef } = provided\n        const { isDraggingOver } = snapshot\n\n        return (\n            <div {...droppableProps} \n                data-is-dragging-over={isDraggingOver}\n                className={classes.treeList}\n                ref={innerRef}>\n                    {children}\n                    {provided.placeholder}\n            </div>\n        )\n    \n    }\n\n    return (\n        <div className={classes.treeList}>\n            {children}\n        </div>\n    )\n\n}\n\nexport default TreeList","import React, { useEffect, useState } from 'react';\nimport Icon from \"@material-ui/core/Icon\"\nimport IconButton from '@material-ui/core/IconButton';\nimport ToggleIcon from '@material-ui/icons/ArrowDropDown';\nimport DragIcon from '@material-ui/icons/DragHandle';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { ModuleBase, ModuleTitle, NavToolbar } from \"@kit-ui/admin\"\n\nconst useStyles = makeStyles(theme => ({\n    module: {\n\n        \"&[aria-selected=true]\": {\n            backgroundColor: theme.palette.action.selected,\n        },\n\n        \"&[data-is-dragging=true]\": {\n            minWidth: theme.spacing(16),\n            maxWidth: theme.spacing(32),\n            backgroundColor: \"white\",\n            boxShadow: theme.shadows[2],\n\n            maxHeight: theme.spacing(6),\n\n            \"& $toolbar\": {\n                display: \"none\"\n            },\n\n            \"& $children\": {\n                display: \"none\"\n            },\n\n            \"& $toggle\": {\n                display: \"none\"\n            },\n\n            \"& $level\": {\n                marginLeft: 0\n            }\n\n\n        },\n\n        \"&[data-is-target=true]\": {\n            backgroundColor: theme.palette.divider,\n\n            \"& $toolbar\": {\n                display: \"none\"\n            }\n\n        },\n\n    },\n    children: {\n        borderTop: \"1px solid\",\n        borderColor: theme.palette.divider,\n    },\n    toolbar: {\n\n    },\n    level: {\n        marginLeft: props => {return props.level * 48 },\n        position: \"relative\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n    },\n    content: {\n        flexGrow: 1,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n    },\n    media: {\n        minWidth: 48,\n        width: 48,\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\"\n    },\n    icon: {\n        fontSize: 24,\n        \"& > svg\": {\n            fontSize: \"inherit\"\n        }\n    },\n    image: {\n        display: \"block\",\n        width: 48,\n    },\n    toggle: {\n        width: 48,\n        position: \"absolute\",\n        left: -48,\n\n        \"& $toggleIcon\": {\n            transition: \".125s ease-in-out\",\n            transform: \"rotate(-90deg)\",\n        },\n\n        \"&[aria-expanded=true] $toggleIcon\": {\n//            transition: \".125s ease-in-out\",\n            transform: \"rotate(0deg)\"\n        },\n    },\n    toggleIcon: {\n        transition: \".125s ease-in-out\",\n        transform: \"rotate(-90deg)\",\n    }\n\n}));\n\nconst TreeModule = ({\n    selectable,\n    selected,\n    onSelect,\n    collapsible, \n    expanded = false,\n    onToggle,\n    draggable, \n    level, \n    title,\n    imageUrl,\n    icon, \n    children,\n...props}) => {\n\n    const classes = useStyles({level});\n\n    const DragHandle = ({dragHandleProps}) => {\n\n        return (\n            <IconButton {...dragHandleProps} >\n                <DragIcon />\n            </IconButton>\n        )\n    \n    }\n\n    const ButtonToggle = ({onClick}) => {\n    \n        return (\n            <IconButton className={classes.toggle} onClick={onClick} aria-expanded={expanded}>\n                <ToggleIcon className={classes.toggleIcon} />\n            </IconButton>\n        )\n    }\n\n    const ModuleContent = () => {\n\n        return (\n            <div className={classes.content}>\n                <div className={classes.media}>\n                    { !imageUrl && icon && <Icon className={classes.icon}>{icon}</Icon> }\n                    { imageUrl && <img className={classes.image} src={imageUrl} /> }\n                </div>\n                <ModuleTitle>{title}</ModuleTitle>\n            </div>\n\n        )\n\n    }\n\n    const _onToggle = (event) => {\n        event.stopPropagation()\n        onToggle && onToggle()\n    }\n\n    const _onSelect = (event) => {\n        event.stopPropagation()\n        onSelect && onSelect()\n    }\n\n    if (draggable && draggable.provided) {\n\n        const {provided, snapshot, } = draggable\n        const {isDragging, combineTargetFor } = snapshot\n\n        const isTarget = combineTargetFor && true\n\n        return (\n            <div className={classes.module}\n                {...provided.draggableProps}\n                aria-selected={selected}\n                aria-expanded={expanded}\n                data-is-dragging={isDragging}\n                data-is-target={isTarget} ref={provided.innerRef} onClick={_onSelect}>\n                <div className={classes.level}>\n                    {collapsible && <ButtonToggle onClick={_onToggle} /> || \"\" }\n                    <DragHandle dragHandleProps={provided.dragHandleProps} />\n                    <ModuleContent />\n                    <NavToolbar {...props} className={classes.toolbar} />\n                </div>\n                {children && <div className={classes.children}>{children}</div> }\n            </div>\n        )\n    \n\n    }\n\n\n    return (\n        <div className={classes.module} onClick={_onSelect}>\n            <div className={classes.level}>\n                {collapsible && <ButtonToggle onClick={onToggle} /> }\n                <ModuleContent />\n            </div>\n            {children && <div className={classes.children}>{children}</div> }\n        </div>\n    )\n\n}\n\nexport default TreeModule","import React, {forwardRef } from 'react';\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ViewHeader, ViewPages } from \"@kit-ui/admin\"\n\nconst useStyles = makeStyles(theme => ({\n    columnView: {\n        display: \"flex\",\n        flexDirection: \"column\",\n\n    },\n    columns: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n\n        display: \"flex\",\n\n        border: \"1px solid\",\n        borderColor: theme.palette.divider,\n\n        \"& > *\": {\n            flexBasis: 0,\n            flexGrow: 1\n        },\n\n        \"& > * + *\": {\n            borderLeft: \"1px solid\",\n            borderColor: theme.palette.divider\n        }\n\n    },\n\n}));\n\nconst ColumnView = ({children}) => {\n\n    const classes = useStyles()\n\n    if (!children) {\n        return false\n    }\n\n    return (\n        <div className={classes.columnView}>\n            <ViewHeader />\n            <div className={classes.columns}>\n                {children}\n            </div>\n        </div>\n    )\n\n}\n\nexport default ColumnView;","import React, {forwardRef } from 'react';\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    column: {\n        position: \"relative\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"flex-start\",\n        alignItems: \"flex-start\",\n\n        \"& > * + *\": {\n            borderTop: \"1px solid\",\n            borderColor: theme.palette.divider\n        },\n\n        \"&[aria-selected=true]\": {\n            backgroundColor: theme.palette.action.selected,\n        },\n\n        \"&[data-is-dragging-over=true]\": {\n            backgroundColor: theme.palette.divider\n        },\n\n        \"&[aria-expanded=true]\": {\n\n            \"&:hover\": {\n                width: theme.spacing(32),\n                minWidth: theme.spacing(32),\n            }\n\n        }\n\n    },\n\n}));\n\nconst ColumnList = ({droppable, expanded, children, ...props}) => {\n\n    const classes = useStyles()\n\n    if (!children) {\n        return false\n    }\n\n    if (droppable) {\n        const {provided, snapshot } = droppable\n        const {droppableProps, innerRef } = provided\n        const { isDraggingOver } = snapshot\n\n        return (\n            <div data-is-dragging-over={isDraggingOver} className={classes.column} {...droppableProps} ref={innerRef}>\n                {children}\n                {provided.placeholder}\n            </div>\n        )\n    }\n\n    return (\n        <div className={classes.column} aria-expanded={expanded}>\n            {children}\n        </div>\n    )\n\n}\n\nexport default ColumnList;","import React, {forwardRef} from 'react';\nimport Icon from \"@material-ui/core/Icon\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport IconButton from \"@material-ui/core/IconButton\"\nimport SelectIcon from \"@material-ui/icons/ChevronRight\"\nimport EditIcon from \"@material-ui/icons/Edit\"\nimport DragIcon from '@material-ui/icons/DragHandle';\n\nimport { ModuleBase, ModuleTitle, NavToolbar } from \"@kit-ui/admin\"\n\nconst useStyles = makeStyles(theme => ({\n    module: {\n        position: \"relative\",\n        display: \"flex\",\n        alignItems: \"center\",\n        width: \"auto\",\n        width: \"100%\",\n        maxWidth: \"100%\",\n        minWidth: theme.spacing(16),\n        overflow: \"hidden\",\n\n\n        \"&:hover\": {\n            cursor: \"pointer\"\n        },\n\n        \"&[aria-expanded=true]\": {\n            backgroundColor: theme.palette.action.selected,\n        },\n\n        \"&[aria-selected=true]\": {\n            backgroundColor: theme.palette.action.selected,\n        },\n\n        \"&[data-is-dragging=true]\": {\n            minWidth: theme.spacing(16),\n            maxWidth: theme.spacing(32),\n            backgroundColor: \"white\",\n            boxShadow: theme.shadows[2],\n\n            \"& $toolbar\": {\n                display: \"none\"\n            }\n\n        },\n\n        \"&[data-is-target=true]\": {\n            backgroundColor: theme.palette.divider,\n\n            \"& $toolbar\": {\n                display: \"none\"\n            }\n\n        },\n    },\n    content: {\n        flexBasis: 0,\n        flexGrow: 1,\n\n        width: \"100%\",\n\n        marginTop: 8,\n        marginBottom: 8,\n\n        display: \"flex\",\n        justifyContent: \"flex-start\",\n        alignItems: \"flex-start\",\n\n        color: \"inherit\",\n\n        \"& > *\": {\n            color: \"inherit\"\n        }\n\n    },\n    media: {\n        minWidth: 48,\n        width: 48,\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\"\n    },\n    icon: {\n        fontSize: 24,\n        \"& > svg\": {\n            fontSize: \"inherit\"\n        }\n    },\n    image: {\n        display: \"block\",\n        width: 48,\n    },\n    footer: {\n        display: \"flex\",\n        overflow: \"hidden\",\n        \"& > * + *\": {\n            marginLeft: theme.spacing(1)\n        }\n    },\n    dragHandle: {\n        margin: theme.spacing(.5)\n    },\n    toolbar: {\n\n        \"& > * + *\": {\n            marginLeft: theme.spacing(-1)\n        }\n\n    }\n    \n}));\n\nconst ColumnModule = ({\n    selectable,\n    selected,\n    onSelect,\n    collapsible, \n    expanded = false,\n    onToggle,\n    draggable, \n    level, \n    title,\n    imageUrl,\n    icon, \n    ...props}) => {\n\n    const classes = useStyles()\n\n    const DragHandle = ({dragHandleProps}) => {\n\n        return (\n            <IconButton {...dragHandleProps} >\n                <DragIcon />\n            </IconButton>\n        )\n    \n    }\n\n    const ButtonToggle = ({onClick}) => {\n    \n        return (\n            <IconButton className={classes.toggleButton} onClick={onClick} aria-expanded={expanded}>\n                <SelectIcon className={classes.toggleIcon} />\n            </IconButton>\n        )\n    }\n\n    const ModuleContent = () => {\n\n        return (\n            <div className={classes.content}>\n                <div className={classes.media}>\n                    { !imageUrl && icon && <Icon className={classes.icon}>{icon}</Icon> }\n                    { imageUrl && <img className={classes.image} src={imageUrl} /> }\n                </div>\n                <ModuleTitle>{title}</ModuleTitle>\n            </div>\n\n        )\n\n    }\n\n    const _onSelect = (event) => {\n        event.stopPropagation()\n        onSelect && onSelect()\n    }\n\n    if (draggable) {\n        const {provided, snapshot } = draggable\n        const {isDragging, combineTargetFor } = snapshot\n\n        const isTarget = combineTargetFor && true\n\n        return (\n            <div className={classes.module} \n                {...provided.draggableProps}\n                aria-selected={selected}\n                aria-expanded={expanded}\n                onClick={props.onSelect}\n                data-is-dragging={isDragging}\n                data-is-target={isTarget} ref={provided.innerRef} onClick={_onSelect}>\n                    <DragHandle dragHandleProps={provided.dragHandleProps} />\n                    <ModuleContent />\n                    <NavToolbar {...props} className={classes.toolbar} />\n                    {collapsible && <ButtonToggle onClick={onSelect} /> || \"\" }\n\n            </div>\n        )   \n\n    }\n\n    return (\n        <div className={classes.module} aria-selected={selected}>\n            <ModuleContent />\n            <NavToolbar {...props} className={classes.toolbar} />\n            {collapsible && <ButtonToggle onClick={onSelect} /> || \"\" }\n        </div>\n    )\n\n}\n\nexport default ColumnModule;","import React, { useState,useEffect } from 'react';\nimport _ from \"lodash\"\n\nimport { \n    ListView, \n    ListModule, \n    ButtonAdd, \n    ButtonRemove\n} from \"@kit-ui/admin\"\n\nconst DocumentChildrenList = ({title, resultsLoaded, onRemove, onEdit}) => {\n\n    const DocumentModule = (model) => {\n\n        return (\n            <ListModule {...model}\n                primaryButton={<ButtonRemove onClick={() => onRemove(model)} />}\n                editable={true}\n                onEdit={() => onEdit(model)}\n            />\n        )\n\n    }\n\n    return (\n\n        <ListView title={title}>\n            {resultsLoaded && resultsLoaded.map((model, index) => <DocumentModule {...model} key={index} />)}\n        </ListView>\n\n    )\n    \n\n}\n\nexport default DocumentChildrenList","import React, { useState,useEffect } from 'react';\nimport _ from \"lodash\"\n\nimport { \n    ListSearch,\n    ListView, \n    ListModule, \n    ButtonAdd, \n    ButtonRemove\n} from \"@kit-ui/admin\"\n\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getQuery } from '../../redux/searchByUrl';\nimport { utils } from '@kit-ui/schema';\nconst { getUiOptions } = utils\n\nconst DocumentChildrenSearch = (props) => {\n    const { schema, uiSchema } = props;\n\n    const dispatch = useDispatch()\n\n    const uiOptions = getUiOptions(uiSchema)\n    const uiQuery = uiOptions.query ||{}\n\n    const editor = useSelector(state => state.editor)\n    const { pathname, formData } = editor;\n\n    // id, uniqueId + collectionId\n\n    const id = formData && formData.id\n    const uniqueId = formData && formData.uniqueId\n    const collectionId = formData && formData.collectionId\n\n    // add children\n\n    const [q, setQ] = useState(\"\")\n    const [list, setList] = useState([])\n\n    const queryQ = [\n        \"uniqueId:NOT \" + uniqueId,\n        \"parentId:NOT \" + id,\n        q\n    ]\n\n    const query = {\n        url: pathname + \"/children/search\",\n        models: \"documents\",\n        collectionId: collectionId,\n        fl: \"id,parentId,uniqueId,title\",\n        q: queryQ.join(' '),\n        ...uiQuery\n    }\n\n    // query\n\n    useEffect(() => {\n        query && dispatch(getQuery(query))\n    }, [q])\n\n    const searchByUrl = useSelector(state => state.searchByUrl)\n    const currentSearch = searchByUrl && searchByUrl[query.url]\n    const resultsLoaded = currentSearch && currentSearch.resultsLoaded\n\n    // onAdd and onRemove\n\n    const _onAdd = ({uniqueId}) => {\n        uniqueId && setList([...list, uniqueId])\n    }\n\n    const _onQuery = _.debounce((q, event) => {\n        setQ(q)\n    }, 500)\n\n    return (\n\n        <ListView title=\"Add children\">\n            <ListSearch onChange={_onQuery} />\n            {resultsLoaded && resultsLoaded.map(model => <ListModule {...model} primaryButton={<ButtonAdd />} />)}\n        </ListView>\n\n    )\n    \n\n}\n\nexport default DocumentChildrenSearch","import React, { useState,useEffect } from 'react';\nimport { WidgetSearch, List, ListModule, ButtonAdd, ButtonRemove } from \"../\"\nimport _ from \"lodash\"\n\nimport DocumentListRemove from \"./DocumentListRemove\"\nimport DocumentChildrenSearch from \"./DocumentChildrenSearch\"\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getQuery } from '../../redux/searchByUrl';\nimport { utils } from \"@rjsf/core\";\nconst { getUiOptions } = utils;\n\n\nconst DocumentParentsField = (props) => {\n    const { schema, idSchema, uiSchema, formContext } = props;\n\n    const dispatch = useDispatch()\n\n    const uiOptions = getUiOptions(uiSchema)\n    const uiQuery = uiOptions.query ||{}\n\n    const app = useSelector(state => state.app)\n    const editor = useSelector(state => state.editor)\n    const { pathname, formData } = editor;\n\n    // id, uniqueId + collectionId\n\n    const parentId = formData && formData.parentId\n    const uniqueId = formData && formData.uniqueId\n    const collectionId = formData && formData.collectionId\n\n    // currentParent\n\n    const query = {\n        url: pathname + \"/parents\",\n        models: \"documents\",\n        collectionId: collectionId,\n        fl: \"id,parentId,uniqueId,title\",\n        q: \"id:\"+parentId,\n        ...uiQuery\n    }\n\n    useEffect(() => {\n        parentId && dispatch(getQuery(query))\n    }, [parentId])\n\n    const searchByUrl = useSelector(state => state.searchByUrl)\n    const currentSearch = searchByUrl && searchByUrl[query.url]\n\n    // actions\n\n    const onSelect = formContext && formContext.onSelect\n\n    const _onRemove = ({uniqueId}) => {\n\n    }\n\n    const _onEdit = ({uniqueId}) => {\n        const id = idSchema && idSchema.$id\n        const url = app.root + \"/\" + uniqueId + \"/edit#\" + id\n        onSelect && onSelect({url})\n    }\n\n\n    return (\n        <div>\n\n            <DocumentListRemove {...currentSearch} title=\"Parents\" onRemove={_onRemove} onEdit={_onEdit} />\n\n            {parentId}\n\n\n\n        </div>\n    )\n\n\n    \n\n}\n\nexport default DocumentParentsField","import React, { useState,useEffect } from 'react';\nimport { WidgetSearch, List, ListModule, ButtonAdd, ButtonRemove } from \"../\"\nimport _ from \"lodash\"\n\nimport DocumentListRemove from \"./DocumentListRemove\"\nimport DocumentChildrenSearch from \"./DocumentChildrenSearch\"\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getQuery } from '../../redux/searchByUrl';\nimport { utils } from \"@rjsf/core\";\nconst { getUiOptions } = utils;\n\n\nconst DocumentChildrenField = (props) => {\n    const { schema, idSchema, uiSchema, formContext } = props;\n\n    const dispatch = useDispatch()\n\n    const uiOptions = getUiOptions(uiSchema)\n    const uiQuery = uiOptions.query ||{}\n\n    const app = useSelector(state => state.app)\n    const editor = useSelector(state => state.editor)\n    const { pathname, formData } = editor;\n\n    // id, uniqueId + collectionId\n\n    const parentId = formData && formData.parentId\n    const uniqueId = formData && formData.uniqueId\n    const collectionId = formData && formData.collectionId\n\n    // currentChildren\n\n    const query = {\n        url: pathname + \"/children\",\n        models: \"documents\",\n        collectionId: collectionId,\n        parentId: formData.id,\n        fl: \"id,parentId,uniqueId,title\",\n        q: \"uniqueId:NOT \" + uniqueId,\n        ...uiQuery\n    }\n\n\n    useEffect(() => {\n        uniqueId && dispatch(getQuery(query))\n    }, [uniqueId, parentId])\n\n    const searchByUrl = useSelector(state => state.searchByUrl)\n    const currentSearch = searchByUrl && searchByUrl[query.url]\n\n    // actions\n\n    const onSelect = formContext && formContext.onSelect\n\n    const _onRemove = ({uniqueId}) => {\n\n    }\n\n    const _onEdit = ({uniqueId}) => {\n        const id = idSchema && idSchema.$id\n        const url = app.root + \"/\" + uniqueId + \"/edit#\" + id\n        onSelect && onSelect({url})\n    }\n\n    return (\n        <div>\n\n            <DocumentListRemove {...currentSearch} title=\"Children\" onRemove={_onRemove} onEdit={_onEdit} />\n\n            <DocumentChildrenSearch {...props} />\n\n        </div>\n    )\n\n\n    \n\n}\n\nexport default DocumentChildrenField","import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport ISO6391 from 'iso-639-1'\n\nimport { utils } from \"@rjsf/core\";\nconst { getUiOptions } = utils;\n\nconst LocaleField = (props) => {\n    const { formData, formContext, schema, uiSchema } = props;\n\n    const uiOptions = getUiOptions(uiSchema)\n    const uiQuery = uiOptions.query ||{}\n\n    const pathname = useSelector(state => state.editor.pathname)\n    const languages = useSelector(state => state.app.languages)\n\n    const [enumOptions, setEnumOptions] = useState([formData])\n    const [enumNames, setEnumNames] = useState([formData])\n\n    const getOptions = () => {\n\n        let optionsEnum = [\n        ], optionsNames = [\n        ]\n\n        languages && languages.map(lang => {\n            const label = ISO6391.getNativeName(lang) + \" (\"+lang+\")\" || lang\n            optionsEnum.push(lang)\n            optionsNames.push(label)\n        })\n\n        setEnumOptions(optionsEnum)\n        setEnumNames(optionsNames)\n\n    }\n\n    useEffect(() => {\n        getOptions()\n    }, [languages])\n\n    const {SchemaField } = props.registry.fields;\n\n    const newSchema = {\n        ...schema,\n        enum: enumOptions,\n        enumNames: enumNames,\n        default: null\n    }\n\n    const newUiSchema = {\n        ...uiSchema,\n        \"ui:field\": undefined\n    }\n\n    return (\n        <SchemaField {...props} schema={newSchema} uiSchema={newUiSchema} />\n    )\n\n}\n\nexport default LocaleField","import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getQuery } from '../../redux/searchByUrl';\nimport { utils } from \"@rjsf/core\";\nconst { getUiOptions } = utils;\n\nconst CollectionIdField = (props) => {\n    const { formData, formContext, schema, uiSchema } = props;\n\n    const uiOptions = getUiOptions(uiSchema)\n    const uiQuery = uiOptions.query ||{}\n\n    const pathname = useSelector(state => state.editor.pathname)\n\n    const query = {\n        url: pathname + \"/collectionId\",\n        models: \"collections\",\n        fl: \"id,collectionType,uniqueId,title\",\n        ...uiQuery\n    }\n\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        pathname && dispatch(getQuery(query))\n    }, [pathname])\n\n    const [enumOptions, setEnumOptions] = useState([formData])\n    const [enumNames, setEnumNames] = useState([formData])\n\n    const searchByUrl = useSelector(state => state.searchByUrl)\n    const currentSearch = searchByUrl && searchByUrl[query.url]\n\n    const getOptions = () => {\n        const resultsLoaded = currentSearch && currentSearch.resultsLoaded ||[]\n        // const options = models.length && getOptionsTree(models) ||[]\n\n        let optionsEnum = [\n            null,\n            formData,\n        ], optionsNames = [\n            \"No collectionId\",\n            \"CollectionId \" + formData,\n        ]\n\n\n        resultsLoaded && resultsLoaded.map(model => {\n            const label = model.title + \" (\"+model.collectionType+\")\"\n            optionsEnum.push(model.id)\n            optionsNames.push(label)\n        })\n\n        setEnumOptions(optionsEnum)\n        setEnumNames(optionsNames)\n\n    }\n\n    useEffect(() => {\n        getOptions()\n    }, [currentSearch])\n\n    const {SchemaField } = props.registry.fields;\n\n    const newSchema = {\n        ...schema,\n        enum: enumOptions,\n        enumNames: enumNames,\n        default: null\n    }\n\n    const newUiSchema = {\n        ...uiSchema,\n        \"ui:field\": undefined\n    }\n\n    return (\n        <SchemaField {...props} schema={newSchema} uiSchema={newUiSchema} />\n    )\n\n}\n\nexport default CollectionIdField","import DocumentParentIdField from \"./DocumentParentIdField\"\nimport DocumentParentsField from \"./DocumentParentsField\"\nimport DocumentChildrenField from \"./DocumentChildrenField\"\nimport DocumentLocaleField from \"./DocumentLocaleField\"\nimport DocumentCollectionIdField from \"./DocumentCollectionIdField\"\n\nexport default {\n    fields: {\n        \"documentParentId\": DocumentParentIdField,\n        \"documentParents\": DocumentParentsField,\n        \"documentChildren\": DocumentChildrenField,\n        \"documentLocale\": DocumentLocaleField,\n        \"documentCollectionId\": DocumentCollectionIdField\n    }\n\n}","import React from \"react\"\nimport { utils } from \"@rjsf/core\";\nconst { getUiOptions, getDefaultFormState } = utils;\n\nconst ReferenceField = (props) => {\n    const { schema, idSchema, uiSchema = {}, formData = {}, formContext } = props;\n    const { referenceId, reference = {} } = formData;\n\n    const uiOptions = getUiOptions(uiSchema)\n\n    const getUiButtons = () => {\n        const buttons = uiOptions && uiOptions.buttons ||[\"save\",\"edit\"]\n\n        const buttonProps = {\n            ...props,\n            referenceId: referenceId,\n            reference: reference,\n            id: idSchema && idSchema.$id\n        }\n\n        const { onSave, onEditReference, onDialog, onUpload } = formContext\n\n        let uiButtons = []\n        \n        buttons.map(button => {\n\n            if (typeof button === \"string\") {\n                button = {\n                    type: button,\n                    title: button.charAt(0).toUpperCase() + button.slice(1)\n                }\n            }\n\n            const { type = \"button\" } = button\n\n            if (type === \"save\") {\n                button.onClick = () => onSave && onSave(buttonProps)\n            } else if (type === \"edit\") {\n                button.onClick = () => onEditReference && onEditReference(buttonProps)\n            }\n\n            /*\n            if (type === \"dialog\" || type === \"sidebar\") {\n                button.onClick = () => onDialog && onDialog(buttonProps)\n            } else if (type === \"upload\") {\n                button.onClick = () => onUpload && onUpload(buttonProps)\n            }\n            */\n\n            button = {\n                ...button,\n                type: \"button\",\n                disabled: props.disabled ||props.readonly\n            }\n\n            uiButtons.push(button)\n        })\n\n        return uiButtons\n\n    }\n\n    const getUiSchema = () => {\n\n        let fieldset = uiOptions.fieldset || []\n\n        if (!uiOptions.fieldset && schema.properties) {\n            \n            Object.keys(schema.properties).map(name => {\n                \n                const type = schema.properties[name] && schema.properties[name].type ||undefined;\n                \n                if (type === \"object\") {\n                    fieldset.push(name)\n                }\n\n                if (type === \"array\") {\n                    fieldset.push(name)\n                }\n                \n            })\n            \n        }\n\n        let uiReference, uiContent\n\n        if (fieldset && fieldset.includes('reference')) {\n            const uiSchemaReference = uiSchema && uiSchema.reference;\n            uiReference = {\n                \"ui:title\": \"Reference\",\n                ...uiSchemaReference\n            }\n\n        }\n\n        if (fieldset && fieldset.includes('content')) {\n            const uiSchemaContent = uiSchema && uiSchema.content;\n            uiContent = {\n                \"ui:title\": \"Innhold\",\n                ...uiSchemaContent\n            }\n        }\n\n        const layout = uiOptions.layout ||\"module\"\n\n        return {\n            \"ui:editable\": true,\n            \"ui:deletable\": referenceId && true,\n            \"ui:restorable\": referenceId && true,\n            \"ui:removable\": !referenceId && true,\n            \"ui:layout\": layout,\n            \"ui:fieldset\": fieldset,\n            \"ui:buttons\": getUiButtons(),\n            \"ui:nav\": \"tabs\",\n            \"reference\": uiReference,\n            \"content\": uiContent,\n            \"ui:preview\": {\n                \"select\": {\n                    \"_action\": \"_action\",\n                    \"type\": \"type\",\n                    \"title\": \"title\",\n                    \"description\": \"description\",\n                    \"imageUrl\": \"imageUrl\",\n                    \"status\": \"status\",\n                    \"referenceId\": \"referenceId\",\n                    \"reference\": \"reference\"\n                },\n                prepare({formData = {}}) {\n                    const {_action, reference, referenceId } = formData;\n            \n                    let status = reference && reference.status;\n            \n                    if (_action === \"delete\") {\n                        status = \"trash\"\n                    }\n            \n                    return {\n                        _action: _action,\n                        type: reference && reference.documentType,\n                        title: reference && reference.title,\n                        description: reference && reference.description,\n                        imageUrl: reference && reference.imageUrl,\n                        status: status,\n                        referenceId: referenceId,\n                        reference: reference\n                    }\n                }                \n            },\n            ...uiSchema,\n        }\n        \n    }\n\n    const _onChange = (formData) => {\n        const { _action, referenceId, reference = {} } = formData;\n\n        // if no referenceId, action = \"create\"\n\n        if (!referenceId) {\n            formData._action = \"create\"\n        }\n\n        // if reference dont have a uniqueId, action = \"create\"\n\n        if (!reference) {\n            formData.reference = {}\n        }\n\n        if (!reference.uniqueId) {\n            formData.reference._action = \"create\"\n        }\n\n        props.onChange && props.onChange(formData)\n\n\n    }\n\n\n    const { ObjectField } = props.registry.fields\n\n    const newUiSchema = getUiSchema()\n\n    return (\n        <ObjectField {...props} uiSchema={newUiSchema} onChange={_onChange} />\n    )\n\n}\n\nexport default ReferenceField","import ReferenceField from \"./ReferenceField\"\n\nexport default {\n    fields: {\n        \"reference\": ReferenceField,\n    },\n    widgets: {}\n}","import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getQuery } from '../../redux/searchByUrl';\nimport { utils } from '@kit-ui/schema';\nconst { getUiOptions } = utils\n\nconst CollectionSiteIdField = (props) => {\n    const { formData, formContext, schema, uiSchema } = props;\n\n    const uiOptions = getUiOptions(uiSchema)\n    const uiQuery = uiOptions.query ||{}\n\n    const pathname = useSelector(state => state.editor.pathname)\n\n    const query = {\n        url: pathname + \"/siteId\",\n        models: \"sites\",\n        fl: \"id,parentId,uniqueId,title\",\n        ...uiQuery\n    }\n\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        pathname && dispatch(getQuery(query))\n    }, [pathname])\n\n    const [enumOptions, setEnumOptions] = useState([formData])\n    const [enumNames, setEnumNames] = useState([formData])\n\n    const searchByUrl = useSelector(state => state.searchByUrl)\n    const currentSearch = searchByUrl && searchByUrl[query.url]\n\n    const getOptions = () => {\n        const resultsLoaded = currentSearch && currentSearch.resultsLoaded ||[]\n\n        let optionsEnum = [\n            null\n        ], optionsNames = [\n            \"No siteId\"\n        ]\n\n        resultsLoaded && resultsLoaded.map(model => {\n            const label = model.title + \" (\"+model.id+\")\"\n            optionsEnum.push(model.id)\n            optionsNames.push(label)\n        })\n\n        setEnumOptions(optionsEnum)\n        setEnumNames(optionsNames)\n    }\n\n    useEffect(() => {\n        getOptions()\n    }, [currentSearch])\n\n    const {SchemaField } = props.registry.fields;\n\n    const newSchema = {\n        ...schema,\n        enum: enumOptions,\n        enumNames: enumNames,\n        default: null\n    }\n\n    const newUiSchema = {\n        ...uiSchema,\n        \"ui:field\": undefined\n    }\n\n    return (\n        <SchemaField {...props} schema={newSchema} uiSchema={newUiSchema} />\n    )\n\n}\n\nexport default CollectionSiteIdField","import CollectionSiteIdField from \"./CollectionSiteIdField\"\n\nexport default {\n    fields: {\n        \"collectionSiteId\": CollectionSiteIdField,\n    }\n\n}","import React, {useState } from 'react'\nimport { useTranslation } from 'react-i18next';\nimport { utils } from \"@rjsf/core\";\nconst { getUiOptions } = utils;\n\nconst PageEditorField = (props) => {\n    const { idSchema, schema, uiSchema, formData, formContext, registry } = props;\n    const { uniqueId, status, statusCode, statusMessage, title, createdAt, updatedAt, deletedAt } = formData;\n    const { isLoading, isSaving, currentId, currentLocale, onExpand, onCollapse, onSelect, onLocale, onSubmit } = formContext;\n\n    const { t, i18n } = useTranslation(['editor'])\n\n    const getPrimaryAction = () => {\n\n        if (isLoading) {\n            return {\n                label: t(\"Loading\") + \" ...\",\n                disabled: true\n            }\n        } else if (isSaving) {\n            return {\n                label: t(\"Saving\") + \" ...\",\n                disabled: true\n            }\n        }\n\n        let primary = {\n            role: \"group\",\n            children: [\n                {\n                    label: t(\"Save as draft\"),\n                    onClick: (event) => onSubmit({formData: {...formData, status: \"draft\"}}, event),\n                },\n                {\n                    label: t(\"Save and publish\"),\n                    onClick: (event) => onSubmit({formData: {...formData, status: \"publish\"}}, event),\n                },\n            ]\n        }\n\n        let secondary = {\n            role: \"group\",\n            children: [\n                {\n                    label: t(\"Save and exit\"),\n                }\n            ]\n\n        }\n\n        if (uniqueId) {\n            secondary.children.push({\n                label: t(\"Save as\") + \" ...\",\n                onClick: (event) =>  onSubmit({formData: {...formData, status: \"copy\"}}, event),\n            })\n        }\n        \n\n        return {\n            type: \"save\",\n            label: t(\"Save\"),\n            onClick: (event) => onSubmit({formData}, event),\n            children: [\n                primary,\n                secondary\n            ]\n        }\n    \n    }\n\n    // primary + secondary actions\n\n    const primaryAction = formContext.primaryAction || getPrimaryAction()\n\n    // toggle fieldset\n\n    const uiOptions = getUiOptions(uiSchema)\n\n    const { fieldset } = uiOptions\n\n    const idPrefix = idSchema && idSchema.$id\n    const primaryId = fieldset && fieldset[0] && idPrefix + \"_\" + fieldset[0]\n    const secondaryId = fieldset && fieldset[1] && idPrefix + \"_\" + fieldset[1]\n    const expanded = secondaryId && currentId && currentId.startsWith(secondaryId)\n\n    const _onToggle = () => {\n\n        if (!expanded) {\n            secondaryId && onExpand && onExpand({id: secondaryId})\n        } else {\n            primaryId && onExpand && onExpand({id: \"\"})\n        }\n\n    }\n\n    const defaultLocale = formContext.defaultLocale ||formContext.languages && formContext.languages[0]\n//    const [currentLocale, setCurrentLocale] = useState(defaultLocale)\n\n    const _onLocale = (locale) => {\n\n\n        onLocale && onLocale(locale)\n//        setCurrentLocale(locale)\n    }\n\n    const newUiSchema = {\n        ...uiSchema,\n        \"ui:title\": title,\n        \"ui:expanded\": expanded,\n        \"ui:primaryAction\": primaryAction,\n        \"ui:status\": status,\n        \"ui:statusDate\": updatedAt || createdAt || deletedAt,\n        \"ui:statusCode\": statusCode,\n        \"ui:statusMessage\": statusMessage,\n        \"ui:layout\": \"pageEditor\",\n        \"ui:onSelect\": (item) => onSelect(item),\n        \"ui:currentLocale\": currentLocale,\n        \"ui:onLocale\": (locale) => _onLocale(locale),\n        \"ui:onToggle\": () => _onToggle()\n    }\n\n    const { ObjectField } = registry.fields;\n\n    const newRegistry = {\n        ...registry,\n        formContext: {\n            ...formContext,\n            currentLocale: currentLocale\n        }\n    }\n\n    return (\n        <ObjectField {...props} registry={newRegistry} uiSchema={newUiSchema} />\n    )\n\n}\n\nexport default PageEditorField;","import React from 'react'\nimport {EditorBase, EditorHeader, EditorBody, EditorFooter, EditorOverlay } from \"@kit-ui/admin\"\n\nconst PageEditor = ({collapsible, expanded, overlay, onToggle, onSelect, children, ...props}) => {\n\n    const renderOverlay = () => {\n        const OverlayTemplate = overlay && overlay.template;\n\n        return (\n            <EditorOverlay position=\"fixed\" expanded={overlay && overlay.expanded}>\n                { OverlayTemplate && <OverlayTemplate {...overlay} /> }\n            </EditorOverlay>\n        )\n    }\n\n    return (\n        <EditorBase>\n            <EditorHeader {...props} collapsible={collapsible} expanded={expanded} onToggle={onToggle} onSelect={onSelect} />\n            <EditorBody elevation={1} expanded={expanded}>\n                {children}\n            </EditorBody>\n            <EditorFooter {...props} />\n            { overlay && renderOverlay() }\n        </EditorBase>\n    )\n}\n\nexport default PageEditor;","import React, { useState } from 'react'\n\nconst PageContentField = (props) => {\n    const { uiSchema, formContext, registry } = props\n    const { dialog, preview } = formContext;\n\n    const newUiSchema = {\n        ...uiSchema,\n        \"ui:dialog\": dialog,\n        \"ui:preview\": preview,\n        \"ui:layout\": \"pageContent\"\n    }\n\n    const { ObjectField } = registry.fields;\n\n    return (\n        <ObjectField {...props} uiSchema={newUiSchema} />\n    )\n\n}\n\nexport default PageContentField;","import React from 'react';\nimport { NavMenuList, NavMenuItem, NavMenuLink } from \"@kit-ui/admin\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    menu: {\n        position: \"absolute\",\n        zIndex: 1,\n        top: 0,\n        right: \"auto\",\n        left: 0,\n        bottom: 0,\n        margin: 0,\n        width: props => { return props.menuWidth },\n        transition: \".125s ease-out\",\n\n        \"& + *\": {\n            position: \"absolute\",\n            zIndex: 1,\n            top: 0,\n            right: 0,\n            left: 0,\n            bottom: 0,\n            margin: 0,\n            overflowY: \"scroll\"\n        },\n\n        \"&[aria-expanded=true] + *\":  {\n            marginLeft: props => { return props.menuWidth },\n        }\n    },\n    menuList: {\n        margin: theme.spacing(2, 0),\n        \"& > li + li\": {\n            marginTop: theme.spacing(1)\n        }\n    }\n}));\n\nconst PageMenu = ({className, menuWidth = 224, menu = undefined}) => {\n    const classes = useStyles({menuWidth});\n\n    if (!menu) {\n        return false\n    }\n\n    return (\n        <aside className={className ||classes.menu} aria-expanded={true}>\n            <NavMenuList className={classes.menuList}>\n                {menu.map((item, index) => {\n                    return (\n                        <NavMenuItem key={index}>\n                            <NavMenuLink {...item} />\n                        </NavMenuItem>\n                    )\n                })}\n            </NavMenuList>\n        </aside>\n    )\n\n}\n\nexport default PageMenu;","import React from 'react';\nimport { EditorSection, EditorContent, EditorPreview, EditorSidebar } from \"@kit-ui/admin\"\n\nimport PageMenu from \"./PageMenu\"\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    content: {\n        backgroundColor: theme.palette.background.default,\n        position: \"absolute\",\n        zIndex: 2,\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        width: \"100%\",\n        overflow: \"hidden\",\n\n        transition: \".125s ease-out\",\n        transform: \"translateY(100%)\",\n\n        \"&[aria-expanded=true]\": {\n            transform: \"translateY(0)\",\n        }\n    },\n    wrapper: {\n        backgroundColor: \"inherit\", \n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n    }\n}));\n\nconst PageContent = ({id, selected = true, sidebar, preview, menuWidth, menu = undefined, children}) => {\n    const classes = useStyles();\n\n    const renderSidebar = () => {\n        const SidebarTemplate = sidebar && sidebar.template;\n\n        return (\n            <EditorSidebar expanded={sidebar && sidebar.expanded}>\n                { SidebarTemplate && <SidebarTemplate {...sidebar} /> }\n            </EditorSidebar>\n        )\n    }\n\n    const renderPreview = () => {\n        const PreviewTemplate = preview && preview.template;\n        return (\n            <EditorPreview expanded={true}>\n                { PreviewTemplate && <PreviewTemplate {...preview} /> }\n            </EditorPreview>\n        )\n    }  \n\n    return (\n        <EditorSection id={id} expanded={selected} className={classes.content}>\n            { sidebar && renderSidebar() }\n            <EditorSection elevation={0} className={classes.wrapper}>\n                { preview && renderPreview() }\n                <EditorContent elevation={0}>\n                    { menu && <PageMenu menuWidth={menuWidth} menu={menu} /> }\n                    {children}\n                </EditorContent>\n            </EditorSection>\n        </EditorSection>\n    )\n\n}\n\nexport default PageContent;","import React, { useState } from 'react'\n\nconst PageSettingsField = (props) => {\n    const { uiSchema, formData, formContext, registry } = props\n    const { dialog } = formContext;\n\n    const newUiSchema = {\n        ...uiSchema,\n        \"ui:layout\": \"pageSettings\",\n        \"ui:field\": undefined\n    }\n\n    const { ObjectField } = registry.fields;\n\n    return (\n        <ObjectField {...props} uiSchema={newUiSchema} />\n    )\n\n}\n\nexport default PageSettingsField;","import React from 'react';\n\nimport { EditorSection, EditorContent, EditorOverlay } from \"@kit-ui/admin\"\n\nimport PageMenu from \"./PageMenu\"\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    settings: {\n        backgroundColor: theme.palette.background.default,\n        zIndex: 1,\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n\n        \"&[aria-expanded=true]\": {\n            top: 0\n        }\n\n    },\n}));\n\nconst PageSettings = ({id, expanded = true, menuWidth, menu = undefined, children}) => {\n    const classes = useStyles();\n\n    /*\n\n    const renderDialog = () => {\n        const DialogTemplate = dialog && dialog.template;\n\n        return (\n            <EditorOverlay position=\"fixed\" expanded={dialog && dialog.expanded}>\n                { DialogTemplate && <DialogTemplate {...dialog} /> }\n            </EditorOverlay>\n        )\n    }\n\n    */\n\n    return (\n        <EditorSection id={id} elevation={0} className={classes.settings} aria-expanded={expanded}>\n            {menu && <PageMenu menuWidth={menuWidth} menu={menu} /> }\n            <EditorContent expanded={true}>\n                {children}\n            </EditorContent>\n        </EditorSection>\n    )\n\n}\n\nexport default PageSettings;","import PageEditorField from \"./PageEditorField\"\nimport PageEditor from \"./PageEditorLayout\"\nimport PageContentField from \"./PageContentField\"\nimport PageContent from \"./PageContentLayout\"\nimport PageSettingsField from \"./PageSettingsField\"\nimport PageSettings from \"./PageSettingsLayout\"\n\nexport default {\n    fields: {\n        \"pageEditor\": PageEditorField,\n        \"pageEditorLayout\": PageEditor,\n        \"pageContent\": PageContentField,\n        \"pageContentLayout\": PageContent,\n        \"pageSettings\": PageSettingsField,\n        \"pageSettingsLayout\": PageSettings\n    }\n\n}","\n\nexport default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"main\": {\n            \"type\": \"string\",\n            \"format\": \"color\"\n        },\n        \"light\": {\n            \"type\": \"string\",\n            \"format\": \"color\"\n        },\n        \"dark\": {\n            \"type\": \"string\",\n            \"format\": \"color\"\n        },\n        \"contrastText\": {\n            \"type\": \"string\",\n//            \"format\": \"color\"\n        },\n    }\n}","import paletteColor from \"./ThemePaletteColor.schema\"\n\nexport default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"primary\": paletteColor,\n        \"secondary\": paletteColor\n    }\n}","export default {\n    \"ui:fieldset\": [\n        \"main\",\n        \"light\",\n        \"dark\"\n    ],\n    \"ui:options\": {\n        \"grid\": true,\n    },\n    \"main\": {\n        \"ui:widget\": \"themeColor\",\n        \"ui:size\": \"large\",\n        \"ui:xs\": 12,\n    },\n    \"light\": {\n        \"ui:widget\": \"themeColor\",\n        \"ui:xs\": 6,\n    },\n    \"dark\": {\n        \"ui:widget\": \"themeColor\",\n        \"ui:xs\": 6,\n    }\n}","import schema from \"./ThemeEditor.schema\"\nimport uiSchema from \"./ThemeEditor.uiSchema\"\n\nexport default {\n    schema: schema,\n    uiSchema: uiSchema\n}","import palette from \"./ThemePalette.schema\"\n\nexport default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"type\": {\n            \"type\": \"string\",\n            \"enum\": [\"light\",\"dark\"],\n            \"enumNames\": [\"Light\",\"Dark\"],\n            \"default\": \"light\"\n        },\n        \"palette\": palette,\n        \"colors\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\",\n                \"format\": \"color\"\n            }\n        }\n    }\n}","import colorUi from \"./ThemePaletteColor.uiSchema\"\n\nexport default {\n    \"ui:fieldset\": [\n        \"type\",\n        \"palette\",\n        \"colors\"\n    ],\n    \"ui:options\": {\n        \"spacing\": 2\n    },\n    \"palette\": {\n        \"ui:options\": {\n            \"grid\": true,\n            \"spacing\": 2\n        },\n        \"primary\": {\n            ...colorUi,\n            \"ui:field\": \"themePaletteColor\",\n            \"ui:layout\": \"fieldset\",\n            \"ui:title\": \"Primary\",\n            \"ui:options\": {\n                \"xs\": 6,\n                \"grid\": true\n            },\n        },\n        \"secondary\": {\n            ...colorUi,\n            \"ui:field\": \"themePaletteColor\",\n            \"ui:layout\": \"fieldset\",\n            \"ui:title\": \"Secondary\",\n            \"ui:options\": {\n                \"xs\": 6,\n                \"grid\": true\n            }\n        },\n    },\n    \"colors\": {\n        \"ui:title\": \"Additional colors\",\n        \"ui:layout\": \"fieldset\",\n        \"ui:sortable\": true,\n        \"items\": {\n            \"ui:widget\": \"themePaletteColor\",\n            \"ui:title\": \"Color\"\n        }\n    }\n}","import schema from \"./ThemePalette.schema\"\n\nexport default {\n    schema: schema\n}","import React, { useState, useEffect } from 'react';\nimport createPalette from '@material-ui/core/styles/createPalette';\n\nconst CollectionThemePaletteField = (props) => {\n\n    const { onChange } = props\n\n    const { ObjectField } = props.registry.fields\n\n    const _onChange = (formData) => {\n\n        if (formData.primary.main) {\n//            formData = createPalette({primary: {main: formData.primary.main}})\n        }\n\n        onChange && onChange(formData)\n\n    }\n\n    return (\n        <div>\n            <ObjectField {...props} onChange={_onChange} />\n        </div>\n    )\n    \n}\n\nexport default CollectionThemePaletteField;\n","import React, { useState, useEffect } from 'react';\nimport createPalette from '@material-ui/core/styles/createPalette';\nimport tinycolor from 'tinycolor2';\n\nimport { utils } from '@kit-ui/schema';\nconst { getUiOptions } = utils\n\nconst CollectionThemePaletteColorField = (props) => {\n    const { formData, onChange } = props\n\n    const { ObjectField } = props.registry.fields\n\n    const _getColor = ({main, light, dark, ...color}) => {\n\n        return {\n            ...color,\n            main: \"#\" + tinycolor(main).toHex(),\n            light: \"#\" + tinycolor(light).toHex(),\n            dark: \"#\" + tinycolor(dark).toHex(),\n        }\n\n    }\n\n    const _onChange = ({main, light, dark}) => {\n\n        let palette, color\n\n        if (main && main !== formData.main) {\n            palette = createPalette({primary: {main: main }})\n        }\n\n        if (palette && palette.primary) {\n            onChange && onChange(_getColor(palette.primary))\n        }\n\n    }\n\n    const uiOptions = getUiOptions(props.uiSchema)\n\n\n    const uiSchema = {\n        ...props.uiSchema,\n        main: {\n            ...props.uiSchema.main,\n            \"ui:title\": uiOptions.title.charAt(0) + \"  main\"\n        },\n        light: {\n            ...props.uiSchema.light,\n            \"ui:title\": uiOptions.title.charAt(0) + \"  light\"\n        },\n        dark: {\n            ...props.uiSchema.dark,\n            \"ui:title\": uiOptions.title.charAt(0) + \"  dark\"\n        }\n    }\n\n\n    return (\n        <ObjectField {...props} uiSchema={uiSchema} onChange={_onChange} />\n    )\n\n\n}\n\nexport default CollectionThemePaletteColorField;\n","import React, {useEffect, useState } from 'react';\nimport PropTypes from \"prop-types\"\nimport tinycolor from 'tinycolor2';\nimport TextField from \"@material-ui/core/TextField\";\nimport { makeStyles } from \"@material-ui/core/styles\" \n\nconst useStyles = makeStyles(theme => ({\n    swatch: {\n        backgroundColor: props => { return props.backgroundColor },\n        color: props => { return theme.palette.getContrastText(props.backgroundColor) },\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n\n        \"& input\": {\n            fontFamily: \"Akkurat mono, monospace\",\n            fontSize: props => { return props.size === \"large\" && 24 },\n            paddingBottom: props => { return props.size === \"large\" && 10 + 24 }\n        },\n\n        \"& *\": {\n            color: \"inherit\"\n        }\n\n    }\n}));\n\nconst CollectionThemeColorWidget = (props) => {\n\n    const {\n        onChange,\n        registry,\n        options\n    } = props\n\n    const [value, setValue] = useState(props.value)\n\n    const classes = useStyles({backgroundColor: props.value, size: options && options.size})\n\n    const _getColor = (color) => {\n        return \"#\" + tinycolor(color).toHex()\n    }\n\n    useEffect(() => {\n        setValue(props.value)\n    }, [props.value])\n\n    const _onChange = (value) => {\n\n        if (tinycolor(value).isValid()) {\n            onChange && onChange(_getColor(value))\n        }\n\n        setValue(value)\n\n    }\n\n    const { TextWidget } = registry.widgets\n\n    return (\n        <TextWidget {...props} className={classes.swatch} value={value} onChange={_onChange} />\n    )\n\n}\n\nCollectionThemeColorWidget.defaultProps = {\n    value: \"#666\"\n}\n\nCollectionThemeColorWidget.propTypes = {\n    value: PropTypes.string,\n    onChange: PropTypes.func\n}\n\nexport default CollectionThemeColorWidget;","import ThemeEditor from \"./ThemeEditor.model\"\n\nimport ThemePaletteModel from \"./ThemePalette.model\"\nimport ThemePaletteField from \"./ThemePaletteField\"\n\nimport ThemePaletteColorField from \"./ThemePaletteColorField\"\nimport ThemeColorWidget from \"./ThemeColorWidget\"\n\nexport default {\n    fields: {\n        \"themePalette\": ThemePaletteField,\n        \"themePaletteColor\": ThemePaletteColorField,\n    },\n    widgets: {\n        \"themeColor\": ThemeColorWidget\n    },\n    models: {\n        \"themeEditor\": ThemeEditor,\n        \"themePalette\": ThemePaletteModel\n    }\n\n}","import React, { forwardRef, useState, useEffect, useRef } from 'react';\nimport PropTypes from \"prop-types\"\nimport { Dropdown } from \"@kit-ui/core\"\n\nimport Typography from \"@material-ui/core/Typography\"\n\nimport IconButton from \"@material-ui/core/IconButton\"\nimport CloseIcon from \"@material-ui/icons/Close\"\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { utils } from \"@rjsf/core\";\nconst { getUiOptions, getDefaultFormState } = utils;\n\nconst useStyles = makeStyles(theme => ({\n    overlay: {\n        position: \"fixed\",\n        backgroundColor: \"rgba(0,0,0,.25)\",\n        zIndex: 3000,\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n    },\n    header: {\n        height: theme.spacing(6),\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        padding: theme.spacing(2)\n    },\n    editor: {\n        backgroundColor: theme.palette.background.default,\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        margin: theme.spacing(4)\n    },\n    closeButton: {\n    },\n    icon: {\n        width: 20,\n        height: 20,\n//        borderRadius: \"50%\",\n        border: \"1px solid\",\n        borderColor: theme.palette.divider,\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n//        boxShadow: theme.shadows[1]\n    },\n    label: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: 11,\n        textTransform: \"uppercase\",\n        fontWeight: \"bold\",\n        lineHeight: '1',\n        textAlign: \"center\",\n    }    \n}));\n\nconst LocalizedStringSettings = (props) => {\n\n    const { name, schema, formContext } = props;\n\n    const languages = formContext.languages ||[\"en\"];\n    const defaultLocale = formContext.defaultLocale ||languages[0]\n    const currentLocale = formContext.currentLocale ||defaultLocale\n\n    const [expanded, setExpanded] = useState(false);\n    const anchorRef = useRef(null)\n\n    const _onExpand = (event) => {\n        setExpanded(prevExpanded => !prevExpanded);\n    }\n\n    const _onCollapse = (event) => {\n        setExpanded(false);\n    };\n\n    const classes = useStyles()\n\n    const {ObjectField } = props.registry.fields\n\n    const uiSchema = {\n        \"ui:options\": {\n            \"padding\": 2,\n            \"spacing\": 2\n        }\n    }\n\n    const uiOptions = getUiOptions(props.uiSchema)\n    const title = uiOptions.title || name\n\n    const Overlay = ({expanded, children}) => {\n\n        if (!expanded) {\n            return false\n        }\n\n        return (\n            <div className={classes.overlay}>\n\n                <div className={classes.editor}>\n\n                    <header className={classes.header}>\n                        <Typography>{title}</Typography>\n                        <IconButton className={classes.closeButton} onClick={() => _onCollapse()}>\n                            <CloseIcon></CloseIcon>\n                        </IconButton>\n                    </header>\n\n                    {children}\n                </div>\n\n            </div>\n        )\n\n    }\n\n    return (\n        <IconButton>\n            <div className={classes.icon}>\n                <div className={classes.label}>{currentLocale}</div>\n            </div>\n        </IconButton>\n    )\n\n    return (\n        <React.Fragment>\n            <IconButton onClick={_onExpand} ref={anchorRef}>\n                <div className={classes.icon}>\n                    <div className={classes.label}>{currentLocale}</div>\n                </div>\n            </IconButton>\n            <Overlay expanded={expanded} anchorEl={anchorRef.current} onClickAway={_onCollapse}>\n                <ObjectField {...props} uiSchema={uiSchema} />\n            </Overlay>\n        </React.Fragment>\n    )\n\n}\n\nLocalizedStringSettings.defaultProps = {\n}\n\nLocalizedStringSettings.propTypes = {\n}\n\nexport default LocalizedStringSettings;","import React from 'react';\nimport LocalizedStringSettings from \"./LocalizedStringSettings\"\n\nimport { utils } from \"@rjsf/core\";\nconst { getUiOptions, getDefaultFormState } = utils;\n\n/** Localized string  */\n\nconst LocalizedStringField = (props) => {\n    const { schema, uiSchema, formContext } = props;\n    const uiOptions = getUiOptions(uiSchema)\n\n    const languages = formContext.languages ||[\"en\"];\n    const defaultLocale = formContext.defaultLocale ||languages[0]\n    const currentLocale = formContext.currentLocale ||defaultLocale\n\n    const getUiSchema = () => {\n\n        let localizedUiSchema = {\n            \"ui:fieldset\": [\n                \"locale:\"+currentLocale\n            ]\n        }\n    \n        Object.keys(schema.properties).map(name => {\n            const localeProps = name.split(':')\n            const locale = localeProps[1]\n\n            const title = uiOptions.title && uiOptions.title + \":\" + locale;\n            const help = uiOptions.help;\n\n            const endAdornment = <LocalizedStringSettings {...props} />\n\n            localizedUiSchema[name] = {\n                ...uiSchema,\n                \"ui:field\": undefined,\n                \"ui:options\": {\n                    \"endAdornment\": endAdornment,\n                    \"widget\": uiOptions.widget || \"text\",\n                    \"title\": title, \n                    \"language\": locale,\n                    \"help\": help,\n                },\n            }\n        \n        })\n    \n        return {\n            ...localizedUiSchema,\n            \"ui:collapsible\": true,\n            \"ui:expanded\": false\n        }\n        \n    }\n\n    const { SchemaFieldset } = props.registry.fields;\n\n    const newUiSchema = getUiSchema()\n    const newUiOptions = getUiOptions(newUiSchema)\n\n    return (\n        <SchemaFieldset  {...props} uiSchema={newUiSchema} fieldset={newUiOptions.fieldset} />\n    )\n\n}\n\nexport default LocalizedStringField;","import LocalizedStringField from \"./LocalizedStringField\"\n\nexport default {\n    \"fields\": {\n        \"localizedString\": LocalizedStringField\n    },\n    \"layouts\": {\n    },\n    \"widgets\": {\n    }\n}","\n\nimport kpPage from \"./KpPage/registry\"\nimport kpLink from \"./KpLink/registry\"\nimport kpDevide from \"./KpDevice/registry\"\nimport kpLocation from \"./KpLocation/registry\"\n\nimport documentEditor from \"./DocumentEditor/registry\"\nimport referenceEditor from \"./ReferenceEditor/registry\"\nimport collectionEditor from \"./CollectionEditor/registry\"\nimport pageEditor from \"./PageEditor/registry\"\nimport themeEditor from \"./ThemeEditor/registry\"\n\nimport localizedString from \"./LocalizedString/registry\"\n\nexport default {\n    \"fields\": {\n        ...kpPage.foelds,\n        ...kpLink.fields,\n        ...kpDevide.fields,\n        ...kpLocation.fields,\n        ...documentEditor.fields,\n        ...referenceEditor.fields,\n        ...collectionEditor.fields,\n        ...pageEditor.fields,\n        ...themeEditor.fields,\n        ...localizedString.fields\n    },\n    \"widgets\": {\n        ...documentEditor.widgets,\n        ...referenceEditor.widgets,\n        ...collectionEditor.widgets,\n        ...pageEditor.widgets,\n        ...themeEditor.widgets\n    },\n    \"models\": {\n        ...documentEditor.models,\n        ...referenceEditor.models,\n        ...collectionEditor.models,\n        ...pageEditor.models,\n        ...themeEditor.models\n    }\n}","import registry from \"../../../components/registry\"\nconst themeEditor = registry.models.themeEditor\n\nexport default {\n    ...themeEditor.schema\n}","import theme from \"./theme/schema\"\n\nexport default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"modelName\": {\n            \"type\": \"string\",\n            \"default\": \"collections\",\n            \"readOnly\": true\n        },\n        \"collectionType\": {\n            \"type\": \"string\",\n            \"default\": \"kp\",\n            \"readOnly\": true\n        },\n        \"name\": {\n            \"type\": \"string\",\n            \"readOnly\": true\n        },\n        \"title\": {\n            \"type\": \"string\"\n        },\n        \"siteId\": {\n            \"type\": \"number\"\n        },\n        \"content\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"name\": {\n                    \"type\": \"string\",\n                    \"readOnly\": true\n                },\n                \"title\": {\n                    \"type\": \"string\"\n                },\n                \"description\": {\n                    \"type\": \"string\"\n                },\n                \"siteId\": {\n                    \"type\": \"number\"\n                },\n                \"theme\": theme,\n            }\n        }\n    }\n}","import icons from \"../../icons\"\n\nexport default {\n    \"select\": {\n        \"siteId\": \"siteId\",\n        \"title\": \"title\",\n        \"name\": \"name\",\n        \"metadata\": \"metadata\",\n        \"icon\": \"icon\"\n    },\n    prepare({formData, formContext}) {\n        let { id, siteId, siteName, name, title, collectionType, content = {} } = formData\n\n        if (content) {\n\n            title = content.title\n            siteId = content.siteId\n            name = title && collectionType + \":\" + title.replace(' ', '-').toLowerCase()\n\n        }\n        \n        const metadata = [\n            \"Id:\"+id,\n            \"Site:\"+siteName,\n        ]\n\n        return {\n            siteId: siteId,\n            title: title,\n            name: name,\n            metadata: metadata,\n            icon: icons[\"kpMenu\"]\n        }\n    }\n}","import registry from \"../../../components/registry\"\nconst themeEditor = registry.models.themeEditor\n\nexport default {\n    ...themeEditor.uiSchema,\n    \"ui:title\": \"Theme\",\n    \"ui:icon\": \"palette\",\n    \"ui:layout\": \"section\",\n    \"ui:options\": {\n        \"spacing\": 2\n    },\n}","import schema from \"./schema\";\nimport uiSchema from \"./uiSchema\";\n//import PreviewTemplate from \"../../preview/BpnCollectionPreview\"\n\nexport default {\n    id: 1,\n    schemaType: \"collections\",\n    name: 'kp',\n    schema: schema,\n    uiSchema: uiSchema,\n    preview: {\n//        template: PreviewTemplate\n    }\n}","import uiPreview from \"./uiPreview\"\nimport header from \"./header/uiSchema\"\nimport theme from \"./theme/uiSchema\"\n\nexport default {\n    \"ui:preview\": uiPreview,\n    \"ui:field\": \"pageEditor\",\n    \"ui:collapsible\": true,\n    \"ui:fieldset\": [\n        \"content\",\n        \"settings\",\n    ],\n    \"settings\": {\n        \"ui:fieldset\": [\n            \"modelName\",\n            \"collectionType\",\n            \"title\",\n            \"name\",\n            \"siteId\"\n        ],\n        \"siteId\": {\n            \"ui:field\": \"collectionSiteId\"\n        }\n    },\n    \"content\": {\n        \"ui:layout\": \"pageContent\",\n        \"ui:nav\": true,\n        \"ui:fieldset\": [\n            \"header\",\n            \"theme\"\n        ],\n        \"header\": header,\n        \"theme\": theme\n    }\n}","export default {\n    \"ui:title\": \"Informasjon\",\n    \"ui:icon\": \"info\",\n    \"ui:layout\": \"section\",\n    \"ui:options\": {\n        \"spacing\": 2\n    },\n    \"ui:fieldset\": [\n        \"title\",\n        \"description\",\n        \"siteId\"\n    ],\n    \"title\": {\n        \"ui:title\": \"Tittel\"\n    },\n    \"description\": {\n        \"ui:title\": \"Beskrivelse\",\n        \"ui:widget\": \"textarea\"\n    },\n    \"siteId\": {\n        \"ui:title\": \"Eier\",\n        \"ui:field\": \"collectionSiteId\"\n    },\n\n}","export default {\n    \"type\": \"string\",\n    \"format\": \"size\",\n    \"enum\": [\n      \"small\",\n      \"medium\",\n      \"large\",\n      \"xl\"\n    ],\n    \"enumNames\": [\n      \"Small\",\n      \"Medium\",\n      \"Large\",\n      \"XL\"\n    ],\n    \"default\" : \"small\"\n}","export default {\n    \"type\": \"string\",\n    \"enum\": [\n        \"1:1\",\n        \"2:1\",\n        \"4:3\"\n    ],\n    \"default\" : \"1:1\"\n}","import schema from \"./schema\";\nimport uiSchema from \"./uiSchema\";\nimport formData from \"./formData\"\n//import PreviewTemplate from \"@frontend-components/admin/lib/components/AppKp/preview/Article\"\n\nexport default {\n    id: 1,\n    schemaType: \"documents\",\n    name: 'article',\n    schema: schema,\n    uiSchema: uiSchema,\n    formData: formData,\n    preview: {\n//        template: PreviewTemplate\n    }\n}","import section from './section/schema'\n\nexport default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"documentType\": {\n            \"type\": \"string\",\n            \"default\": \"article\"\n        },\n        \"collectionId\": {\n            \"type\": \"number\",\n        },\n        \"locale\": {\n            \"type\": \"string\",\n            \"default\": \"no\"\n        },\n        \"schemaId\": {\n            \"type\": \"number\",\n            \"default\": 1\n        },\n        \"title\": {\n            \"type\": \"string\"\n        },\n        \"content\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"importId\": {\n                    \"type\": \"string\",\n                },\n                \"location\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"lat\": {\n                            \"type\": \"number\",\n                            \"readonly\": true\n                        },\n                        \"lng\": {\n                            \"type\": \"number\",\n                            \"readonly\": true\n                        },\n                        \"zoom\": {\n                            \"type\": \"number\",\n                            \"readonly\": true\n                        }\n                    }\n                },\n                \"keywords\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"string\",\n                        \"enum\": [],\n                    },\n                    \"uniqueItems\": true\n                },\n                \"license\": {\n                    \"type\": \"string\"\n                },\n                \"titleImage\": {\n                    \"type\": \"image\",\n                    \"properties\": {\n                        \"content\": {\n                            \"type\": \"object\",\n                            \"properties\": {\n                                \"headline\": {\n                                    \"type\": \"localizedString\"\n                                },\n                                \"caption\": {\n                                    \"type\": \"localizedString\"\n                                }\n                            }\n                        }\n                    }\n                },\n                \"title\": {\n                    \"type\": \"localizedString\"\n                },\n                \"leadtext\": {\n                    \"type\": \"localizedString\"\n                },\n                \"author\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"name\": {\n                            \"type\": \"string\"\n                        },\n                        \"description\": {\n                            \"type\": \"string\"\n                        }\n                    }\n                },\n                \"bodytext\": {\n                    \"type\": \"localizedString\"\n                },\n                \"sections\" : {\n                    \"type\": \"array\",\n                    \"items\": section\n                },\n                \"isPartOf\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"reference\",\n                        \"documentType\": \"topic\",\n                        \"referenceType\": \"articleIsPartOf\",\n                        \"_reverseReferenceType\": \"topicHasArticles\",\n                        \"_reverseReference\": \"hasArticles[]\"\n                    }\n                }\n            }\n        }\n    }\n}","import sectionType from './sectionType';\nimport sectionText from './sectionText';\nimport sectionMedia from './sectionMedia';\nimport sectionDm from './sectionDm';\nimport sectionLinks from './sectionLinks';\nimport sectionAttachments from './sectionAttachments';\nimport sectionQuote from './sectionQuote';\n  \nexport default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"sectionType\": sectionType,\n        \"title\": {\n            \"type\" : \"localizedString\"\n        },\n        \"titleHidden\": {\n            \"type\" : \"boolean\"\n        }\n    },\n    \"dependencies\": {\n        \"sectionType\" : {\n            \"oneOf\": [\n                sectionText,\n                sectionMedia,\n                sectionDm,\n                sectionLinks,\n                sectionAttachments,\n                sectionQuote,\n            ]\n        }\n    }\n}","export default {\n    \"type\": \"string\",\n    \"enum\": [\n        \"text\",\n        \"media\",\n        \"dm\",\n        \"links\",\n        \"attachments\",\n        \"quote\"\n    ],\n    \"enumNames\": [\n        \"Tekst\",\n        \"Media\",\n        \"DM\",\n        \"Lenker\",\n        \"Vedlegg\",\n        \"Sitat\"\n    ],\n    \"default\" : \"text\"\n}","import media from \"./media\"\n\nexport default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"sectionType\": {\n            \"enum\": [\"text\"]\n        },\n        \"leadtext\": {\n            \"type\": \"localizedString\"\n        },\n        \"bodytext\": {\n            \"type\": \"localizedString\"\n        }\n    }\n}","import media from \"./media\"\n\nexport default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"sectionType\": {\n            \"enum\": [\"media\"]\n        },\n        \"sectionLayout\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"list\",\n                \"grid\",\n                \"slideshow\",\n            ],\n            \"enumNames\": [\n                \"Liste\",\n                \"Grid\",\n                \"Slideshow\",\n            ],\n            \"default\" : \"grid\"\n          },\n        \"media\": media\n    }\n}","import mediaSize from \"./mediaSize\"\nimport mediaFormat from \"./mediaFormat\"\n\nexport default {\n    \"type\": \"array\",\n    \"items\": {\n        \"type\": \"media\",\n        \"properties\": {\n            \"mediaSize\": mediaSize,\n            \"mediaFormat\": mediaFormat,\n            \"mediaLayout\": {\n                \"type\": \"string\",\n                \"default\": \"frame\"\n            },\n            \"content\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"headline\": {\n                        \"type\": \"localizedString\"\n                    },\n                    \"caption\": {\n                        \"type\": \"localizedString\"\n                    }\n                }\n            }\n        }\n    }\n}","import ekultur from \"./ekultur\"\n\nexport default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"sectionType\": {\n            \"enum\": [\"dm\"]\n        },\n        \"sectionLayout\": {\n            \"type\": \"string\",\n            \"enum\": [\n              \"grid\",\n              \"grid-wide\",\n              \"slideshow\",\n              \"slideshow-wide\"\n            ],\n            \"enumNames\": [\n              \"Grid\",\n              \"Grid Wide\",\n              \"Slideshow\",\n              \"Slideshow Wide\"\n            ],\n            \"default\" : \"grid\"\n          },\n        \"references\": ekultur\n    }\n}","export default {\n    \"type\": \"array\",\n    \"items\": {\n        \"type\": \"reference\",\n        \"referenceType\": \"ekultur\"\n    }\n}","export default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"sectionType\": {\n            \"enum\": [\"links\"]\n        },\n        \"links\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"title\": {\n                        \"type\": \"string\"\n                    },\n                    \"url\": {\n                        \"type\": \"string\"\n                    }\n                }\n            }\n        }\n    }\n}","import attachments from \"./attachments\"\n\nexport default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"sectionType\": {\n            \"enum\": [\"attachments\"]\n        },\n        \"attachments\": attachments\n    }\n}","import mediaSize from \"./mediaSize\"\nimport mediaFormat from \"./mediaFormat\"\n\nexport default {\n    \"type\": \"array\",\n    \"items\": {\n        \"type\": \"media\",\n        \"properties\": {\n            \"mediaSize\": mediaSize,\n            \"mediaFormat\": mediaFormat,\n            \"mediaLayout\": {\n                \"type\": \"string\",\n                \"default\": \"frame\"\n            },\n            \"content\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"headline\": {\n                        \"type\": \"localizedString\"\n                    },\n                    \"caption\": {\n                        \"type\": \"localizedString\"\n                    }\n                }\n            }\n        }\n    }\n}","export default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"sectionType\": {\n            \"enum\": [\"quote\"]\n        },\n        \"quote\": {\n            \"type\": \"localizedString\"\n        },\n        \"cite\": {\n            \"type\": \"string\"\n        }\n    }\n}","import header from \"./header/uiSchema\";\nimport body from \"./body/uiSchema\";\nimport isPartOf from \"./isPartOf/uiSchema\";\nimport settings from \"./settings/uiSchema\";\nimport uiPreview from \"./uiPreview\"\n\nexport default {\n    \"ui:field\": \"pageEditor\",\n    \"ui:collapsible\": true,\n    \"ui:preview\": uiPreview,\n    \"ui:fieldset\": [\n        \"content\",\n        \"settings\",\n    ],\n    \"settings\": settings,\n    \"content\": {\n        \"ui:layout\": \"pageContent\",\n        \"ui:fieldset\": [\n            \"header\",\n            \"body\",\n            \"isPartOf\"\n        ],\n        \"header\": header,\n        \"body\": body,\n        \"isPartOf\": isPartOf\n    }\n}","import icons from \"../../icons\"\n\nexport default {\n  \"select\": {\n        \"icon\": \"icon\",\n        \"imageUrl\" : \"imageUrl\",\n        \"title\" : \"title\",\n        \"description\" : \"description\",\n        \"metadata\" : \"metadata\",\n        \"typeLabel\": \"typeLabel\"\n  },\n  prepare({formData, formContext}) {\n    let { documentType, title, content, description } = formData\n\n    const defaultLocale = formContext && formContext.defaultLocale\n    const currentLocale = formContext && formContext.currentLocale\n    const locale = defaultLocale ||currentLocale ||formData.locale\n    const localeId =  \"locale:\" + locale\n\n    let metadata = []\n\n    const titleImage = content && content.titleImage\n    const imageUrl = titleImage && titleImage.media && titleImage.media.imageUrl\n    \n    if (content) {\n\n        title = content.title && content.title[localeId]\n        description = content.description && content.description[localeId]\n\n        const { location, sections, isPartOf } = content\n\n        if (location && location.lat && location.lng) {\n            \n            if (location.address) {\n                metadata.push(location.address)\n            } else {\n                metadata.push(\"Sted\")\n            }\n            \n        }\n\n        if (sections && sections.length) {\n            metadata.push(sections.length + ' seksjoner')\n        }\n\n        if (isPartOf && isPartOf.length) {\n            metadata.push(isPartOf.length + ' tema')\n        }\n        \n                \n    }\n\n    return {\n        icon: icons[\"article\"],\n        imageUrl: imageUrl,\n        untitled: \"Ny artikkel\",\n        title: title || \"Uten tittel\",\n        description: description,\n        metadata: metadata,\n        typeLabel: documentType\n    }\n    \n  }\n  \n}","export default {\n    \"ui:field\": \"pageSettings\",\n    \"ui:nav\": true,\n    \"ui:fieldset\": [\n        \"metadata\",\n        \"geocoder\",\n    ],\n    \"metadata\": {\n        \"ui:layout\": \"section\",\n        \"ui:icon\": \"label\",\n        \"ui:title\": \"Metadata\",\n        \"ui:fieldset\": [\n            \"documentType\",\n            \"collectionId\",\n            \"locale\",\n            \"content\"\n        ],\n        \"ui:options\": {\n            \"spacing\": 2\n        },\n        \"documentType\": {\n        },\n        \"collectionId\": {\n            \"ui:field\": \"documentCollectionId\",\n            \"ui:query\": {\n                \"collectionType\": \"kp\"\n            }\n        },\n        \"locale\": {\n            \"ui:field\": \"documentLocale\"\n        },\n        \"content\": {\n            \"ui:fieldset\": [\n                \"keywords\",\n                \"license\",\n                \"location\"\n            ],\n            \"keywords\": {\n                \"ui:widget\": \"tags\",\n                \"ui:title\": \"Nkkelord\",\n                \"ui:help\": \"Beskrivende stikkord.\",\n            },\n            \"license\": {\n//                \"ui:widget\": \"selectLicense\",\n                \"ui:title\": \"Lisens\",\n                \"ui:help\": \"Velg en lisens for dette innholdet.\",\n            },\n            \"location\": {\n                \"ui:options\": {\n                    \"grid\": true,\n                    \"spacing\": 2,\n                },\n                \"ui:fieldset\": [\n                    \"map\",\n                    \"info\"\n                ],\n                \"map\": {\n                    \"ui:fieldset\": [\n                        \"lat\",\n                        \"lng\",\n                        \"zoom\"\n                    ],\n                    \"ui:options\": {\n                        \"minWidth\": 200,\n                        \"minHeight\": 200\n                    },\n                    \"ui:field\": \"kpGeopoint\",\n                    \"ui:layout\": \"kpGeopoint\",\n                    \"ui:overlay\": {\n                        \"template\": \"kpGeocoder\"\n                    }\n                },\n                \"info\": {\n                    \"ui:options\": {\n                        \"spacing\": 2,\n                    },\n                    \"ui:fieldset\": [\n                        \"lat\",\n                        \"lng\",\n                        \"zoom\"\n                    ],\n                }\n            }\n        }\n    },\n    \"geocoder\": {\n        \"ui:layout\": \"section\",\n        \"ui:title\": \"Lokasjon\",\n        \"ui:icon\": \"near_me\",\n        \"ui:options\": {\n            \"position\": \"absolute\",\n            \"padding\": 2,\n            \"grid\": false\n        },\n        \"ui:fieldset\": [\n            \"content\"\n        ],\n        \"content\": {\n            \"ui:fieldset\": [\n                \"location\"\n            ],\n            \"location\": {\n                \"ui:field\": \"kpGeopoint\",\n                \"ui:layout\": \"kpGeocoder\",\n            }\n        }\n    }\n}","export default {\n    \"ui:fieldset\": [\n        \"titleImage\",\n        \"content\",\n    ],\n    \"ui:layout\": \"section\",\n    \"ui:options\" : {\n        \"collapsible\": true,\n        \"expanded\": true,\n        \"grid\": true,\n        \"spacing\": 2\n    },\n    \"ui:title\": \"Header\",\n    \"ui:preview\": {\n        \"select\": {\n            \"description\": \"description\"\n        },\n        prepare({formData, formContext}) {\n            const localeId = \"locale:\" + formContext.currentLocale\n            const description = formData.title && formData.title[localeId]  \n    \n            return {\n                description: description\n            }\n    \n        }\n    },\n    \"titleImage\": {\n        \"ui:xs\": 4,\n        \"ui:field\": \"media\",\n//        \"ui:minHeight\": 240,\n        \"ui:options\": {\n            \"editable\": true,\n            \"hotspot\": true\n        },\n        \"ui:buttons\": [\n            {\n                \"title\": \"Finn hovedbilde\",\n                \"icon\": \"search\",\n                \"type\": \"sidebar\"\n            },\n        ],\n        \"ui:fieldset\": [\n            \"media\",\n            \"content\",\n        ],\n        \"content\": {\n            \"ui:title\": \"Innhold\",\n            \"ui:options\": {\n                \"grid\": true,\n                \"padding\": 2,\n                \"spacing\": 2\n            },\n            \"ui:fieldset\": [\n                \"headline\",\n                \"caption\",\n            ],\n            \"headline\": {\n                \"ui:title\": \"Bildetekst, overskrift\"\n            },\n            \"caption\": {\n                \"ui:title\": \"Bildetekst\",\n                \"ui:widget\": \"textarea\"\n            }\n        }\n    },\n    \"content\": {\n        \"ui:xs\": 8,\n        \"ui:fieldset\": [\n            \"title\",\n            \"leadtext\",\n            \"author\"\n        ],\n        \"ui:options\": {\n            \"spacing\": 2,\n        },\n        \"title\": {\n            \"ui:title\": \"Tittel\"\n        },\n        \"leadtext\": {\n            \"ui:title\": \"Ingress\",\n            \"ui:widget\": \"textarea\"\n        },\n        \"author\": {\n            \"fieldset\": [\n                \"name\",\n                \"description\"\n            ],\n            \"name\": {\n                \"ui:title\": \"Forfatter\"\n            },\n            \"description\": {\n                \"ui:title\": \"Forfatter, beskrivelse\",\n            },\n        }        \n    }\n\n}","import section from \"../section/uiSchema\";\n\nexport default {\n    \"ui:fieldset\": [\n        \"sections\"\n    ],\n    \"sections\": {\n        \"ui:layout\": \"section\",\n        \"ui:title\": \"Innhold\",\n        \"ui:preview\": {\n            \"select\": {\n                \"description\": \"description\" \n            },\n            prepare({formData = []}) {\n    \n                let description;\n    \n                if (formData.length && formData.length === 1) {\n                    description = formData.length + \" seksjon\"\n                } else if (formData.length) {\n                    description = formData.length + \" seksjoner\"\n                } else {\n                    description = \"Ingen seksjoner\"\n                }\n    \n                return {\n                    \"description\": description\n                }\n            }\n        },\n        \"ui:options\" : {\n            \"collapsible\": true,\n            \"expanded\": true,\n            \"draggable\": true,\n            \"spacing\": 2,\n        },\n        \"ui:buttons\" : [\n            {\n                \"icon\": \"subject\",\n                \"title\" : \"Tekst\",\n                \"item\" : {\n                    \"sectionType\" : \"text\"\n                }\n            },\n            {\n                \"icon\": \"insert_photo\",\n                \"title\" : \"Media\",\n                \"item\" : {\n                    \"sectionType\" : \"media\"\n                }\n            },\n            {\n                \"icon\": \"fingerprint\",\n                \"title\" : \"DM\",\n                \"item\" : {\n                    \"sectionType\" : \"dm\"\n                }\n            },\n            {\n                \"icon\": \"insert_link\",\n                \"title\" : \"Lenker\",\n                \"item\" : {\n                    \"sectionType\" : \"links\"\n                }\n            },\n            {\n                \"icon\": \"attach_file\",\n                \"title\" : \"Vedlegg\",\n                \"item\" : {\n                    \"sectionType\" : \"attachments\"\n                }\n            },\n            {\n                \"icon\": \"format_quote\",\n                \"title\" : \"Sitat\",\n                \"item\" : {\n                    \"sectionType\" : \"quote\"\n                }\n            }\n        ],\n        \"items\": section\n    }\n}","import media from \"./mediaUi\"\nimport attachments from \"./attachmentsUi\"\nimport links from \"./linksUi\"\nimport ekultur from \"./ekulturUi\"\nimport uiPreview from \"./uiPreview\"\n\nexport default {\n    \"ui:layout\": \"section\",\n    \"ui:preview\": uiPreview,\n    \"ui:options\": {\n        \"editable\": true,\n        \"hideable\": true,\n        \"removable\": true,\n        \"spacing\": 2\n    },\n    \"ui:settings\": [\n        \"sectionType\",\n        \"sectionLayout\"\n    ],\n    \"sectionType\": {\n        \"ui:enumIcons\": {\n            \"text\": \"subject\",\n            \"media\": \"insert_photo\",\n            \"links\": \"insert_link\",\n            \"attachments\": \"attach_file\",\n            \"quote\": \"format_quote\",\n            \"dm\": \"fingerprint\"\n        }\n    },\n    \"ui:fieldset\": [\n        \"head\",\n        \"body\"\n    ],\n    \"head\": {\n        \"ui:fieldset\": [\n            \"title\",\n            \"titleHidden\",\n            \"description\"\n        ],\n        \"ui:options\": {\n            \"grid\": true,\n            \"spacing\": 2\n        },\n        \"title\": {\n            \"ui:xs\": 9,\n            \"ui:label\": false,\n            \"ui:placeholder\": \"Tittel\"\n        },\n        \"titleHidden\": {\n            \"ui:gridCols\": 3,\n            \"ui:title\": \"Skjul tittel\",\n            \"ui:widget\": \"switch\"\n        },\n        \"description\" : {\n            \"ui:gridCols\": 12,\n            \"ui:title\": \"Beskrivelse\",\n            \"ui:widget\" : \"textarea\",\n        }\n    },\n    \"body\": {\n        \"ui:fieldset\": [\n            \"media\",\n            \"attachments\",\n            \"references\",\n            \"bodytext\",\n            \"links\",\n            \"quote\",\n            \"cite\"\n        ],\n        \"ui:options\": {\n            \"spacing\": 2\n        },\n        \"media\": media,\n        \"attachments\": attachments,\n        \"references\": ekultur,\n        \"bodytext\" : {\n            \"ui:title\": \"Brdtekst\",\n            \"ui:widget\" : \"texteditor\"\n        },\n        \"quote\" : {\n            \"ui:title\": \"Sitat\",\n            \"ui:widget\" : \"textarea\"\n        },\n        \"cite\" : {\n            \"ui:title\": \"Byline\",\n        },\n        \"links\" : links\n    }\n}","export default {\n    \"select\": {\n        \"title\": \"title\",\n        \"untitled\": \"untitled\",\n        \"description\": \"description\"\n    },\n    prepare({formData, formContext}) {\n        const localeId = \"locale:no\"\n        const title = formData.title && formData.title[localeId]\n\n        const sectionType = formData.sectionType\n        const untitled = \"Untitled \" + sectionType\n\n        const {bodytext, media, references, links, attachments, cite, quote } = formData\n\n        let description;\n\n        if (sectionType === \"text\") {\n            description = bodytext && bodytext[localeId]\n        }\n\n        if (sectionType === \"media\") {\n            description = media && media.length + \" media\"\n        }\n\n        if (sectionType === \"dm\") {\n            description = references && references.length + \" referanser\"\n        }\n\n        if (sectionType === \"links\") {\n            description = links && links.length + \" lenker\"\n        }\n\n        if (sectionType === \"attachments\") {\n            description = attachments && attachments.length + \" vedlegg\"\n        }\n\n        if (sectionType === \"quote\") {\n            description = []\n\n            cite && description.push(cite)\n            quote && quote[localeId] && description.push(quote[localeId])\n\n            description = description.join(\": \")\n        }\n\n        return {\n            title: title,\n            untitled: untitled,\n            description: description\n        }\n\n    }\n}","export default {\n    \"ui:title\": \"Media\",\n    \"ui:options\": {\n        \"draggable\": true\n    },\n    \"ui:sidebar\": {\n        \"query\": {\n            \"models\": \"media\",\n            \"mediaType\": [\"image\",\"video/*\",\"audio/*\",\"youtube\",\"vimeo\",\"sketchfab\"]\n        }\n    },\n    \"ui:buttons\": [\n        {\n            \"type\": \"sidebar\",\n            \"icon\": \"search\",\n            \"title\": \"Finn media\"\n        }\n    ],\n    \"items\": {\n        \"ui:layout\": \"module\",\n        \"ui:options\": {\n            \"editable\": true,\n            \"hideable\": true\n        },\n        \"ui:settings\": [\n            \"mediaSize\",\n            \"mediaFormat\"\n        ],\n        \"ui:fieldset\": [\n            \"content\",\n            \"media\"\n        ],\n        \"content\": {\n            \"ui:title\": \"Innhold\",\n            \"ui:options\": {\n                \"grid\": true,\n                \"padding\": 2,\n                \"spacing\": 2\n            },\n            \"ui:fieldset\": [\n                \"headline\",\n                \"caption\",\n            ],\n            \"headline\": {\n                \"ui:title\": \"Bildetekst, overskrift\"\n            },\n            \"caption\": {\n                \"ui:title\": \"Bildetekst\",\n                \"ui:widget\": \"textarea\"\n            }\n        }\n    }\n}","export default {\n    \"ui:title\": \"Vedlegg\",\n    \"ui:options\": {\n        \"draggable\": true\n    },\n    \"ui:sidebar\": {\n        \"query\": {\n            \"models\": \"media\",\n            \"mediaType\": [\"misc\"]\n        }\n    },\n    \"ui:buttons\": [\n        {\n            \"type\": \"sidebar\",\n            \"icon\": \"search\",\n            \"title\": \"Finn vedlegg\"\n        },\n    ],\n    \"items\": {\n        \"ui:layout\": \"module\",\n        \"ui:options\": {\n            \"editable\": true,\n            \"hideable\": true\n        },\n        \"ui:fieldset\": [\n            \"media\"\n        ],\n        \"content\": {\n            \"ui:title\": \"Innhold\",\n            \"ui:options\": {\n                \"grid\": true,\n                \"padding\": 2,\n                \"spacing\": 2\n            },\n            \"ui:fieldset\": [\n                \"headline\",\n                \"caption\",\n            ],\n            \"headline\": {\n                \"ui:title\": \"Bildetekst, overskrift\"\n            },\n            \"caption\": {\n                \"ui:title\": \"Bildetekst\",\n                \"ui:widget\": \"textarea\"\n            }\n        }\n    }\n}","export default {\n    \"ui:title\": \"Referanser\",\n    \"ui:options\": {\n        \"draggable\": true\n    },\n    \"ui:sidebar\": {\n        \"query\": {\n            \"models\": \"documents\",\n            \"documentType\": \"ekultur\"\n        }\n    },\n    \"ui:buttons\": [\n        {\n            \"type\": \"sidebar\",\n            \"icon\": \"search\",\n            \"title\": \"Finn referanse\"\n        },\n    ],\n    \"items\": {\n        \"ui:layout\": \"module\",\n        \"ui:preview\": {\n            \"select\": {\n                \"imageUrl\": \"imageUrl\",\n                \"title\": \"title\"\n            },\n            prepare({formData}) {\n                const { imageUrl, title } = formData.reference;\n\n                return {\n                    imageUrl: imageUrl,\n                    title: title\n                }\n\n            }\n        }\n    }\n}","export default {\n    \"ui:title\": \"Lenker\",\n    \"ui:options\": {\n        \"draggable\": true\n    },\n    \"ui:buttons\": [\n        {\n            \"type\": \"add\",\n            \"title\": \"Legg til\"\n        }\n    ],\n    \"items\": {\n        \"ui:preview\": {\n            \"select\": {\n                \"description\": \"description\"\n            },\n            prepare({formData}) {\n                return {\n                    description: formData.url\n                }\n            }\n        },\n        \"ui:layout\": \"module\",\n        \"ui:options\": {\n            \"editable\": true,\n            \"hideable\": true\n        },\n        \"ui:fieldset\": [\n            \"content\",\n        ],\n        \"content\": {\n            \"ui:options\": {\n                \"grid\": true,\n                \"spacing\": 2\n            },\n            \"ui:fieldset\": [\n                \"title\",\n                \"url\"\n            ],\n            \"title\": {\n                \"ui:title\": \"Tittel\"\n            },\n            \"url\": {\n                \"ui:title\": \"URL\",\n            }\n        }\n    }\n}","export default {\n    \"ui:layout\": \"section\",\n    \"ui:title\": \"Er en del av\",\n    \"ui:preview\": {\n        \"select\": {\n            \"description\": \"description\" \n        },\n        prepare({formData = []}) {\n\n            let description;\n\n            if (formData.length) {\n                description = formData.length + \" tema\"\n            } else {\n                description = \"Ingen tema\"\n            }\n\n            return {\n                \"description\": description\n            }\n        }\n    },\n    \"ui:options\" : {\n        \"draggable\": true,\n        \"collapsible\": true,\n    },\n    \"ui:buttons\": [\n        {\n            \"type\": \"sidebar\",\n            \"icon\": \"search\",\n            \"title\": \"Finn tema\"\n        },\n        {\n            \"title\": \"Legg til\"\n        }\n    ]\n}","import documentType from \"./documentType/schema\"\nimport links from \"./links/schema\"\nimport linksLayout from \"./linksLayout/schema\"\n\nexport default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"documentType\": documentType,\n        \"locale\": {\n            \"type\": \"string\",\n            \"default\": \"no\"\n        },\n        \"collectionId\": {\n            \"type\": \"string\",\n        },\n        \"parentId\": {\n            \"type\": \"string\",\n        },\n        \"schemaId\": {\n            \"type\": \"number\",\n            \"default\": 1\n        },\n        \"title\": {\n            \"type\": \"string\"\n        },\n        \"content\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"importId\": {\n                    \"type\": \"string\",\n                },\n                \"title\": {\n                    \"type\": \"localizedString\"\n                },\n                \"titleImage\": {\n                    \"type\": \"image\"\n                },\n                \"leadtext\": {\n                    \"type\": \"localizedString\"\n                },\n                \"bodytext\": {\n                    \"type\": \"localizedString\"\n                },\n                \"mapLayout\": {\n                    \"type\": \"string\",\n                    \"enum\": [\"default\",\"roundtrip\"],\n                    \"default\": \"default\"\n                },\n                \"mediaLayout\": {\n                    \"type\": \"string\",\n                    \"enum\": [\"gallery\",\"autoplay\"],\n                    \"default\": \"gallery\"\n                },\n                \"annotateLayout\": {\n                    \"type\": \"string\",\n                    \"enum\": [\"imagemap\",\"legends\"],\n                    \"default\": \"imagemap\"\n                },\n                \"annotateColor\": {\n                    \"type\": \"color\",\n                    \"enum\": [\"red\",\"green\",\"blue\",\"black\",\"white\"]\n                },\n                \"backgroundImage\": {\n                    \"type\": \"image\",\n                    \"annotations\": true,\n                    \"cropdata\": true,\n                    \"filters\": [\"opacity\"],\n                },\n                \"parallaxImage\": {\n                    \"type\": \"image\",\n                    \"cropdata\": true,\n                    \"filters\": [\"opacity\"],\n                },\n                \"linksLayout\": linksLayout,\n                \"links\": links,\n                \"isPartOf\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"reference\",\n                        \"documentType\": \"presentation\",\n                        \"referenceType\": \"pageIsPartOf\",\n                        \"_reverseReferenceType\": \"presentationHasPages\",\n                        \"_reverseReference\": \"hasPages[]\"\n                    }\n                }\n\n            }\n        }\n    }\n}","export default {\n    \"type\": \"string\",\n    \"enum\": [\n        \"pageHome\",\n        \"pageTopic\",\n        \"pageMap\"\n    ],\n    \"enumNames\": [\n        \"Startside\",\n        \"Tema\",\n        \"Kart\"\n    ]\n}","export default {\n    \"type\": \"string\",\n    \"enum\": [\n        \"list\",\n        \"mosaic\",\n        \"imagelegend\",\n        \"imagemap\",\n        \"gallery\",\n        \"autoplay\",\n        \"timeline\"\n    ],\n    \"enumNames\": [\n        \"Liste\",\n        \"Mosaikk\",\n        \"Bildeforklaring\",\n        \"Bildekart\",\n        \"Mediagalleri\",\n        \"Autoplay\",\n        \"Tidslinje\"\n    ],\n    \"default\" : \"list\"\n}","import items from \"./items\"\n\nexport default {\n    \"type\": \"array\",\n    \"items\": items\n}","export default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"referenceId\": {\n            \"type\": \"string\"\n        },\n        \"referenceType\": {\n            \"type\": \"string\",\n            \"default\": \"pageLink\"\n        },\n        \"reference\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"uniqueId\": {\n                    \"type\": \"string\"\n                },\n                \"documentType\": {\n                    \"type\": \"string\"\n                }\n            }\n        },\n        \"mediaId\": {\n            \"type\": \"string\"\n        },\n        \"media\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"uniqueId\": {\n                    \"type\": \"string\"\n                }\n            }\n        },\n        \"imageFilters\": {\n            \"type\": \"imageFilters\"\n        },\n        \"imageCropdata\": {\n            \"type\": \"imageCropdata\"\n        },\n        \"imageFocalpoint\": {\n            \"type\": \"imageFocalpoint\"\n        },\n        \"runningHead\": {\n            \"type\": \"localizedString\"\n        },\n        \"title\": {\n            \"type\": \"localizedString\"\n        },\n        \"titleColor\": {\n            \"type\": \"string\",\n            \"format\": \"color\",\n            \"enum\": [\"black\",\"white\"],\n            \"default\": \"black\"\n        },\n        \"titleSize\": {\n            \"type\": \"string\",\n            \"enum\": [\"small\",\"medium\",\"large\"],\n            \"default\": \"medium\"\n        },\n        \"description\": {\n            \"type\": \"localizedString\"\n        },\n        \"top\": {\n            \"type\": \"string\",\n            \"default\": 50,\n            \"readonly\": true\n        },\n        \"left\": {\n            \"type\": \"string\",\n            \"default\": 50,\n            \"readonly\": true\n        },\n        \"x\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"readonly\": true\n        },\n        \"y\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"readonly\": true\n        },\n        \"backgroundColor\": {\n            \"type\": \"string\",\n            \"format\": \"color\",\n            \"enum\": [\"black\",\"#7f7f7f\",\"white\"],\n            \"default\": \"#7f7f7f\"\n        },\n        \"color\": {\n            \"type\": \"string\",\n            \"format\": \"color\",\n            \"enum\": [\"black\",\"white\"],\n            \"default\": \"black\"\n        },\n        \"skin\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"dark\",\n                \"light\",\n                \"dark/light\",\n                \"light/dark\"\n            ],\n            \"default\": \"dark\"\n        },\n        \"placement\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"top-left\",\n                \"top\",\n                \"top-right\",\n                \"left\",\n                \"center\",\n                \"right\",\n                \"bottom-left\",\n                \"bottom\",\n                \"bottom-right\"\n            ],\n            \"default\": \"top-left\"\n        },\n        \"grid\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"1:1\",\n                \"1:2\",\n                \"1:3\",\n                \"2:1\",\n                \"2:2\",\n                \"2:3\",\n                \"3:1\",\n                \"3:2\",\n                \"3:3\",\n                \"4:1\",\n                \"4:2\",\n                \"4:3\",\n                \"5:1\",\n                \"5:2\",\n                \"5:3\"\n            ],\n            \"default\": \"1:1\"\n        },\n    }\n}","import schema from \"../page/schema\"\nexport default schema","import icons from \"../../icons\"\n\nexport default {\n    \"select\": {\n        \"imageUrl\" : \"imageUrl\",\n        \"title\" : \"title\",\n        \"description\" : \"description\",\n        \"metadata\" : \"metadata\",\n        \"typeLabel\": \"typeLabel\",\n        \"icon\": \"icon\"\n    },\n    prepare({formData, formContext}) {\n        const { parentId, documentType, content } = formData\n        const defaultLocale = formContext && formContext.defaultLocale\n        const currentLocale = formContext && formContext.currentLocale\n        const locale = defaultLocale ||currentLocale ||formData.locale\n        const localeId =  \"locale:\" + locale\n\n        let metadata = []\n\n        parentId && metadata.push(\"Parent: \" + parentId)\n\n        const backgroundImage = content && content.backgroundImage\n\n        const imageUrl = backgroundImage && backgroundImage.media && backgroundImage.media.imageUrl\n\n        const icon = documentType && icons[documentType]\n        const title = content && content.title && content.title[localeId] ||formData.title\n        const description = content && content.description && content.description[localeId]\n\n        return {\n            icon: icon,\n            imageUrl: imageUrl,\n            title: title ||\"Untitled\",\n            description: description,\n            metadata: metadata,\n            typeLabel: documentType,\n        }\n    \n    }\n  \n}","export default {\n    \"ui:layout\": \"pageSettings\",\n    \"ui:nav\": true,\n    \"ui:fieldset\": [\n        \"metadata\",\n    ],\n    \"metadata\": {\n        \"ui:layout\": \"section\",\n        \"ui:icon\": \"label\",\n        \"ui:title\": \"Metadata\",\n        \"ui:fieldset\": [\n            \"documentType\",\n            \"collectionId\",\n            \"locale\",\n            \"parentId\",\n            \"parents\",\n            \"children\"\n        ],\n        \"ui:options\": {\n            \"spacing\": 2\n        },\n        \"collectionId\": {\n            \"ui:field\": \"documentCollectionId\",\n            \"ui:query\": {\n                \"collectionType\": \"kp\"\n            }\n        },\n        \"locale\": {\n            \"ui:field\": \"documentLocale\"\n        },\n        \"documentType\": {\n            \"ui:title\": \"Sidetype\"\n        },\n        \"parentId\": {\n            \"ui:field\": \"documentParentId\",\n            \"ui:title\": \"ParentId\",\n            \"ui:query\": {\n                \"documentType\": \"page*\",\n            }\n        },\n        \"parents\": {\n            \"ui:fieldset\": [\n                \"parentId\",\n                \"uniqueId\",\n                \"id\"\n            ],\n            \"ui:field\": \"documentParents\",\n            \"ui:query\": {\n                \"documentType\": \"page*\",\n            }\n        },\n        \"children\": {\n            \"ui:fieldset\": [\n                \"uniqueId\",\n                \"id\"\n            ],\n            \"ui:field\": \"documentChildren\",\n            \"ui:query\": {\n                \"documentType\": \"page*\",\n            }\n        }\n    }\n}","export default {\n    \"ui:layout\": \"section\",\n    \"ui:title\": \"Presentasjon\",\n    \"ui:preview\": {\n        \"select\": {\n            \"description\": \"description\"\n        },\n        prepare({formData, formContext}) {\n            const { title } = formData;\n\n            const localeId = \"locale:\" + formContext.currentLocale\n            const description = title && title[localeId]\n\n            return {\n                description: description\n            }\n\n        }\n    },\n    \"ui:fieldset\": [\n        \"title\",\n    ],\n    \"ui:options\": {\n        \"expanded\": true,\n        \"collapsible\": true,\n        \"spacing\": 2,\n    },\n    \"title\": {\n        \"ui:title\": \"Tittel\"\n    },\n}","export default {\n    \"ui:layout\": \"section\",\n    \"ui:title\": \"Media\",\n    \"ui:fieldset\": [\n        \"media\",\n    ],\n    \"ui:options\": {\n        \"collapsible\": true,\n        \"spacing\": 2,\n    },\n    \"media\": {\n        \"ui:options\": {\n//            \"grid\": true,\n            \"spacing\": 2\n        },\n        \"ui:fieldset\": [\n            \"backgroundImage\"\n        ],\n        \"backgroundImage\": {\n            \"ui:layout\": \"media\",\n            \"ui:buttons\": [\n                {\n                    \"type\": \"sidebar\",\n                    \"icon\": \"search\",\n                    \"title\": \"Finn bakgrunnsbilde\"\n                }\n            ],\n            \"ui:fieldset\": [\n                \"media\",\"imageCropdata\",\"imageFilters\"\n            ],\n            \"media\": {\n                \"ui:title\": \"Bakgrunnsbilde\"\n            }\n        },\n        \"parallaxImage\": {\n            \"ui:layout\": \"media\",\n            \"ui:buttons\": [\n                {\n                    \"type\": \"sidebar\",\n                    \"icon\": \"search\",\n                    \"title\": \"Finn parallaxbilde\"\n                }\n            ],\n            \"media\": {\n                \"ui:title\": \"Parallaxbilde\"\n            }\n        }        \n    }\n}","import items from \"./itemsUi\"\n\nexport default {\n    \"ui:title\": \"Lenker\",\n    \"ui:preview\": {\n        \"select\": {\n            \"title\": \"title\"\n        },\n        prepare({formData =[]}) {\n            return {\n                title: formData.length + \" lenker\"\n            }\n        }\n    },\n    \"ui:options\": {\n        \"draggable\": true\n    },\n    \"ui:dialog\": {\n        \"query\": {\n            \"models\": \"documents\",\n            \"documentType\": [\"page*\",\"article\"]\n        }\n    },\n    \"ui:buttons\": [\n        {\n            \"type\": \"sidebar\",\n            \"icon\": \"search\",\n            \"title\": \"Finn innhold\",\n        },\n        {\n            \"type\": \"add\",\n            \"title\": \"Legg til\"\n        }\n    ],\n    \"items\": items\n}","export default {\n    \"ui:field\": \"kpLink\",\n    \"ui:layout\": \"module\",\n    \"ui:options\": {\n        \"minHeight\": 256,\n        \"editable\": true\n    },\n    \"ui:nav\": true,\n    \"ui:fieldset\": [\n        \"content\",\n    ],\n    \"ui:preview\": {\n        \"select\": {\n            \"imageUrl\": \"imageUrl\",\n            \"typeLabel\": \"typeLabel\",\n            \"title\": \"title\",\n            \"metadata\": \"metadata\",\n        },\n        prepare({formData, formContext, index}) {\n            const { mediaId, media, referenceId, reference } = formData\n\n            const locale = formContext.currentLocale ||formContext.defaultLocale ||\"no\";\n            const localeId = \"locale:\" + locale\n\n            const title = formData.title && formData.title[localeId] \n\n            const imageUrl = media && media.imageUrl ||reference && reference.imageUrl\n\n            const typeLabel = referenceId && reference && reference.documentType\n\n            let metadata = []\n\n            referenceId && reference && reference.title && metadata.push(reference.title)\n\n            return {\n                imageUrl: imageUrl,\n                typeLabel: typeLabel,\n                title: title || referenceId && reference && reference.title,\n                metadata: metadata,\n            }\n\n        }\n    },\n    \"backgroundColor\": {\n        \"ui:widget\": \"color\"\n    },\n    \"color\": {\n        \"ui:widget\": \"color\",\n        \"ui:settingsVariant\": \"text\"\n    },\n    \"grid\": {\n        \"ui:widget\": \"grid\",\n        \"ui:maxCols\": 5,\n        \"ui:maxRows\": 3\n    },\n    \"placement\": {\n        \"ui:widget\": \"placement\",\n    },\n    \"imageFilters\": {\n        \"ui:title\": \"Filters\",\n        \"ui:field\": \"imageFilters\"\n    },\n    \"imageCropdata\": {\n        \"ui:title\": \"Crop\",\n        \"ui:field\": \"imageCropdata\"\n    },\n    \"imageFocalpoint\": {\n        \"ui:title\": \"Fokuspunkt\",\n        \"ui:field\": \"imageFocalpoint\"\n    },\n    \"content\": {\n        \"ui:title\": \"Innhold\",\n        \"ui:layout\": \"kioskLink\",\n        \"ui:fieldset\": [\n            \"linkMedia\",\n            \"linkContent\",\n            \"linkReference\",\n        ],\n        \"ui:options\": {\n            \"padding\": 2,\n            \"spacing\": 2\n        },\n        \"linkMedia\": {\n            \"ui:fieldset\": [\n                \"mediaId\",\n                \"media\"\n            ],\n            \"ui:sidebar\": {\n                \"query\": {\n                    \"models\": \"media\",\n                    \"mediaType\": \"image\"\n                }\n            },\n            \"ui:layout\": \"kioskLinkMedia\",\n            \"ui:buttons\": [\n                \"sidebar\"\n            ],\n        },\n        \"linkReference\": {\n            \"ui:fieldset\": [\n                \"referenceId\",\n                \"reference\"\n            ],\n            \"ui:sidebar\": {\n                \"query\": {\n                    \"models\": \"documents\",\n                    \"documentType\": [\"page*\",\"article\"]\n                }\n            },\n            \"ui:layout\": \"kioskLinkReference\",\n            \"ui:options\": {\n                \"editable\": true,\n                \"deletable\": true,\n                \"restorable\": true\n            }\n        },\n        \"linkContent\": {\n            \"ui:layout\": \"kioskLinkContent\",\n            \"ui:grid\": true,\n            \"ui:padding\": 2,\n            \"ui:spacing\": 2,\n            \"ui:fieldset\": [\n                \"runningHead\",\n                \"title\",\n                \"description\",\n            ],\n            \"runningHead\": {\n                \"ui:title\": \"Stikktittel\",\n                \"ui:settings\": [\n                    \"color\"\n                ]\n            },\n            \"title\": {\n                \"ui:title\": \"Tittel\"\n            },\n            \"titleColor\": {\n                \"ui:widget\": \"color\"\n            },\n            \"description\": {\n                \"ui:title\": \"Beskrivelse\",\n            },\n        },\n    },\n    \"imageAnnotations\": {\n        \"ui:title\": \"Markr\",\n        \"ui:fieldset\": [\n            \"coords\"\n        ],\n        \"coords\": {\n            \"ui:fieldset\": [\n                \"x\", \"y\", \"top\", \"left\"\n            ],\n            \"ui:grid\": true,\n            \"ui:padding\": 2,\n            \"ui:spacing\": 2,\n            \"x\": {\n                \"ui:gridCols\": 6\n            },\n            \"y\": {\n                \"ui:gridCols\": 6\n            },\n            \"top\": {\n                \"ui:gridCols\": 6\n            },\n            \"left\": {\n                \"ui:gridCols\": 6\n            }\n        }\n    }\n}","import links from \"../links/uiSchema\"\n\nexport default {\n    \"ui:layout\": \"section\",\n    \"ui:title\": \"Innhold\",\n    \"ui:icon\": \"link\",\n    \"ui:fieldset\": [\n        \"links\"\n    ],\n    \"ui:settings\": [\n//        \"linksLayout\"\n    ],\n    \"links\": links\n}","import uiPreview from \"./uiPreview\"\nimport settings from \"../page/settings/uiSchema\"\nimport header from \"./homeHeader/uiSchema\"\nimport media from \"./listMedia/uiSchema\"\nimport body from \"./listBody/uiSchema\"\n\nexport default {\n    \"ui:field\": \"pageEditor\",\n    \"ui:collapsible\": true,\n    \"ui:preview\": uiPreview,\n    \"ui:fieldset\": [\n        \"content\",\n        \"settings\"\n    ],\n    \"content\": {\n        \"ui:field\": \"kpPage\",\n        \"ui:fieldset\": [\n            \"header\",\n            \"media\",\n            \"body\"\n        ],\n        \"header\": header,\n        \"media\": media,\n        \"body\": body\n    },\n    \"settings\": settings\n}","import uiPreview from \"../page/uiPreview\"\nexport default uiPreview","import uiSchema from \"../../page/pageHeader/uiSchema\"\nexport default {\n    ...uiSchema,\n    \"ui:fieldset\": [\n        \"title\",\n        \"leadtext\",\n        \"bodytext\"\n    ],\n    \"ui:title\": \"Hjemmeside\",\n}","import uiSchema from \"../../page/pageMedia/uiSchema\"\n\nexport default {\n    ...uiSchema,\n    \"ui:title\": \"Bakgrunnsbilde\"\n}","import body from \"../../page/pageBody/uiSchema\"\n\nexport default {\n    ...body\n}","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    article: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n\n        margin: theme.spacing(1),\n        overflowY: \"scroll\",\n\n        \"& *\": {\n            boxSizing: \"border-box\"\n        },\n\n        backgroundColor: \"white\",\n        fontFamily: \"Akkurat, sans-serif\",\n        lineHeight: 1.5,\n\n        \"& h1\": {\n            fontSize: \"1.5em\",\n            fontWeight: \"bold\",\n            lineHeight: 1.25,\n            margin: \".5em 0\"\n        },\n\n        \"& h2\": {\n            fontSize: \"1.25em\",\n            fontWeight: \"bold\",\n            lineHeight: 1.25,\n            margin: \".5em 0\"\n        },\n\n    }\n}));\n\nconst ArticleBase = ({className, children}) => {\n    const classes = useStyles()\n    return (\n        <article className={className ||classes.article}>\n            {children}\n        </article>\n    )\n}\n\nexport default ArticleBase","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    wrapper: {\n        maxWidth: props => { return props.maxWidth },\n        margin: \"auto\"\n    },\n}));\n\n\nconst ArticleGrid = ({className, maxWidth = 720, children}) => {\n    const classes = useStyles({maxWidth})\n\n    return (\n        <section className={className ||classes.wrapper}>\n            {children}\n        </section>\n    )\n\n}\n\nexport default ArticleGrid","import React from \"react\"\nimport Typography from \"@material-ui/core/Typography\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    title: {\n        fontFamily: \"Akkurat, sans-serif\",\n\n        \"&.h1\": {\n            fontSize: \"1.5em\",\n            fontWeight: \"bold\",\n            lineHeight: 1.25,\n            margin: \".5em 0\"\n        },\n\n        \"&.h2\": {\n            fontSize: \"1.25em\",\n            fontWeight: \"bold\",\n            lineHeight: 1.25,\n            margin: \".5em 0\"\n        },\n\n    },\n}));\n\nconst ArticleTitle = ({className, component = \"h1\", language = \"no\", children}) => {\n\n    const classes = useStyles()\n\n    const localeId = \"locale:\" + language;\n        \n    if (typeof children === \"object\") {\n        children = children[localeId] || undefined\n    }\n\n    return (\n        <Typography className={className ||classes.title} component={component}>{children}</Typography    >\n    )\n}\n\nexport default ArticleTitle","import React from \"react\"\nimport ReactMarkdown from 'react-markdown';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    bodytext: {\n        \"& p\": {\n            margin: \"1em 0\"\n        },\n\n        \"& ul\": {\n            listStyle: \"disc\",\n            margin: \"1em 0\"\n        },\n\n        \"& ol\": {\n            listStyle: \"upper-roman\",\n            margin: \"1em 0\"\n        },\n\n        \"& strong\": {\n            fontWeight: \"bold\"\n        },\n        \"& em\": {\n            fontStyle: \"italic\"\n        }\n    },\n}));\n\nconst ArticleBodytext = ({className, language = \"no\", children}) => {\n    const localeId = \"locale:\" + language;\n    const classes = useStyles()\n        \n    if (typeof children === \"object\") {\n        children = children[localeId] || undefined\n    }\n\n    return (\n        <ReactMarkdown className={className ||classes.bodytext} source={children} />             \n    )\n}\n\nexport default ArticleBodytext","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    wrapper: {\n        maxWidth: props => { return props.maxWidth },\n//        overflow: \"hidden\",\n        margin: \"auto\"\n    },\n    list: {\n        margin: props => { return theme.spacing(-props.spacing/2) },\n        display: \"flex\",\n        flexDirection: \"column\",\n    },\n    item: {\n        width: props => { return props.maxWidth+theme.spacing(props.spacing) },\n        padding: props => { return theme.spacing(props.spacing/2) },\n\n        /*\n        width: props => { return (props.maxWidth+theme.spacing(props.spacing))/props.gridColumns },\n        padding: props => { return theme.spacing(props.spacing/2) },\n        \"&[data-size=medium]\": {\n            width: props => { return (props.maxWidth+theme.spacing(props.spacing))/props.gridColumns*2 },\n        },\n        \"&[data-size=large]\": {\n            width: props => { return (props.maxWidth+theme.spacing(props.spacing))/props.gridColumns*4 },\n        },\n        \"&[data-size=xl]\": {\n            width: props => { return props.maxWidth+theme.spacing(props.spacing) },\n        }\n        */\n    }\n\n}));\n\n\nconst LayoutList = ({className, spacing = 2, padding = 0, maxWidth = 720, gridColumns = 4, mediaFormat = \"2:1\", children}) => {\n    const classes = useStyles({maxWidth, gridColumns, spacing, padding})\n\n    return (\n        <section className={className ||classes.wrapper}>\n            <div className={className ||classes.list}>\n                {children.map((child, index) => {\n                    const item = React.cloneElement(child, {\n                        mediaFormat: mediaFormat\n                    })\n                    return (\n                        <div className={classes.item} data-size={item.props.size} key={index}>\n                            { item }\n                        </div>\n                    )\n                })}\n            </div>\n        </section>\n    )\n\n}\n\nexport default LayoutList","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    wrapper: {\n        maxWidth: props => { return props.maxWidth },\n        overflow: \"hidden\",\n        margin: \"auto\"\n    },\n    grid: {\n        margin: props => { return theme.spacing(-props.spacing/2) },\n        display: \"flex\",\n        flexWrap: \"wrap\",\n    },\n    item: {\n        width: props => { return (props.maxWidth+theme.spacing(props.spacing))/props.gridColumns },\n        padding: props => { return theme.spacing(props.spacing/2) },\n        \"&[data-size=medium]\": {\n            width: props => { return (props.maxWidth+theme.spacing(props.spacing))/props.gridColumns*2 },\n        },\n        \"&[data-size=large]\": {\n            width: props => { return (props.maxWidth+theme.spacing(props.spacing))/props.gridColumns*4 },\n        },\n        \"&[data-size=xl]\": {\n            width: props => { return props.maxWidth+theme.spacing(props.spacing) },\n        }\n    }\n\n}));\n\n\nconst LayoutGrid = ({className, spacing = 2, padding = 0, maxWidth = 720, gridColumns = 4, children}) => {\n    const classes = useStyles({maxWidth, gridColumns, spacing, padding})\n\n    return (\n        <section className={className ||classes.wrapper}>\n            <div className={className ||classes.grid}>\n                {children.map((child, index) => {\n                    const item = React.cloneElement(child)\n                    return (\n                        <div className={classes.item} data-size={item.props.size} key={index}>\n                            { item }\n                        </div>\n                    )\n                })}\n            </div>\n        </section>\n    )\n\n}\n\nexport default LayoutGrid","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport { CarouselProvider, Slider, Slide, ButtonBack, ButtonNext, DotGroup } from 'pure-react-carousel';\nimport 'pure-react-carousel/dist/react-carousel.es.css';\n\n\nconst useStyles = makeStyles(theme => ({\n    slideshow: {\n        position: \"relative\",\n        maxWidth: props => { return props.maxWidth },\n        margin: \"auto\"\n    },\n    slider: {\n        \"& ul\": {\n//            margin: 0\n        }\n    },\n    navigation: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n    },\n    dots: {\n        position: \"absolute\",\n        right: 0,\n        left: 0,\n        bottom: 0,\n        display: \"flex\",\n        justifyContent: \"center\",\n    },\n    backButton: {\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        bottom: 0,\n    },\n    nextButton: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n\n    }\n}));\n\n\nconst LayoutSlideshow = ({className, spacing = 2, padding = 0, maxWidth = 720, mediaFormat = \"2:1\", children}) => {\n    const classes = useStyles({spacing, padding, maxWidth})\n\n    const totalSlides = children && children.length\n    const format = mediaFormat.split(':')\n\n    return (\n        <CarouselProvider className={className ||classes.slideshow}\n            naturalSlideWidth={format[0]}\n            naturalSlideHeight={format[1]}\n            totalSlides={totalSlides}>\n                <Slider className={classes.slider}>\n                    {children.map((child, index) => {\n                        const item = React.cloneElement(child, {\n                            mediaFormat: mediaFormat\n                        })\n                        return (\n                            <Slide index={index}>\n                                { item }\n                            </Slide>\n                        )\n                    })}\n                </Slider>\n                <nav className={classes.navigation}>\n                    <DotGroup className={classes.dots} />\n                    <ButtonBack className={classes.backButton}>Back</ButtonBack>\n                    <ButtonNext className={classes.nextButton}>Next</ButtonNext>\n                </nav>\n        </CarouselProvider>\n    )\n\n}\n\nexport default LayoutSlideshow","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    format: {\n        position: \"relative\",\n        width: \"100%\",\n        minHeight: props => { return props.minHeight },\n        paddingBottom: props => { return props.ratio * 100 + \"%\" },\n    }\n}));\n\nconst LayoutFormat = ({format, minHeight, children}) => {\n\n    let ratio;\n\n    if (format) {\n        const size = format.split(\":\");\n        const w = size[0];\n        const h = size[1];\n        ratio = h/w;\n    }\n\n    const classes = useStyles({ratio, minHeight})\n\n    if (ratio ||minHeight) {\n\n        return (\n            <div className={classes.format}\n                data-minHeight={minHeight}\n                data-ratio={ratio} \n                data-format={format}>\n                { children }\n            </div>\n        )\n           \n    }\n\n    return children\n\n}\n\nexport default LayoutFormat","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport LayoutFormat from \"./LayoutFormat\"\nimport {MediaPreview } from \"@kit-ui/admin\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    module: {\n        position: \"relative\",\n        width: \"100%\",\n//        paddingBotton: \"100%\",\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"13px\",\n        lineHeight: 1.5,\n        display: \"flex\",\n        flexDirection: \"column\",\n    },\n    media: {\n        backgroundColor: \"grey\",\n        position: \"relative\",\n        width: \"100%\"\n    },\n    content: {\n        fontFamily: \"Akkurat, sans-serif\",\n        marginTop: \".25em\",\n    },\n    caption: {\n    },\n    headline: {\n        fontWeight: \"bold\",\n    },\n    byline: {\n        fontStyle: \"italic\"\n    },\n    license: {\n        \n    }\n}));\n\nconst ModuleMedia = ({mediaType, mediaFormat = \"1:1\", imageUrl, headline, caption, byline, license, ...props}) => {\n    const classes = useStyles()\n\n    return (\n        <article className={classes.module}>\n            <figure className={classes.media}>\n                <LayoutFormat format={mediaFormat}>\n                    <MediaPreview mediaType={mediaType} imageUrl={imageUrl} {...props} />\n                </LayoutFormat>\n            </figure>\n            <Typography component=\"figcaption\" className={classes.content}>\n                {headline && <strong className={classes.headline}>{headline}:</strong>}\n                {headline && \" \"}\n                {caption && <span className={classes.caption}>{caption}</span>}\n                {byline && \" \"}\n                {byline && <em className={classes.byline}>({byline})</em>}\n                {license && \" \"}\n                {license && <em className={classes.license}>{license}</em>}\n            </Typography>\n        </article>\n    )\n\n}\n\n\nexport default ModuleMedia;","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport LayoutList from \"./LayoutList\"\nimport LayoutGrid from \"./LayoutGrid\"\nimport LayoutSlideshow from \"./LayoutSlideshow\"\n\n\nimport ModuleMedia from \"./ModuleMedia\"\n\nconst layouts = {\n    \"list\": LayoutList,\n    \"grid\": LayoutGrid,\n    \"slideshow\": LayoutSlideshow\n}\n\nconst useStyles = makeStyles(theme => ({\n    media: {\n        position: \"relative\"\n    },\n}));\n\nconst ArticleMedia = ({className, language = \"no\", layout = \"grid\", media = [], mediaWidth = 180, mediaHeight = 180}) => {\n    const localeId = \"locale:\" + language;\n    const classes = useStyles({mediaWidth, mediaHeight})\n\n    const renderMedia = ({media, mediaSize, mediaFormat, content}) => {\n        const mediaType = media && media.mediaType;\n\n        let headline = content && content.headline || media && media.content && media.content.headline ||undefined\n        let caption = content && content.caption || media && media.content && media.content.caption ||undefined\n\n        const byline = content && content.byline || media && media.content && media.content.byline ||undefined\n        const license = content && content.license || media && media.content && media.content.license ||undefined\n\n        if (typeof headline === \"object\") {\n            headline = headline[localeId] || undefined\n        }\n\n        if (typeof caption === \"object\") {\n            caption = caption[localeId] || undefined\n        }\n       \n        return (\n            <ModuleMedia {...media}\n                size={mediaSize} \n                mediaFormat={mediaFormat} \n                headline={headline} \n                caption={caption}\n                byline={byline}\n                license={license} />\n        )\n    \n    }\n        \n    if (!media.length) {\n        return false\n    }\n\n    const LayoutTemplate = layout && layouts[layout]\n\n    if (LayoutTemplate) {\n        return (\n            <LayoutTemplate>\n                { media.map(media => renderMedia(media))}\n            </LayoutTemplate>\n        )\n    }\n\n    return (\n        <div className={className}>\n            { media.map(media => renderMedia(media))}\n        </div>\n    )\n\n}\n\nexport default ArticleMedia","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    module: {\n        position: \"relative\",\n        width: \"100%\",\n//        minHeight: \"240px\",\n        backgroundColor: \"#f2f2f2\",\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"13px\",\n        lineHeight: 1.5,\n        display: \"flex\",\n        flexDirection: \"column\",\n    },\n    media: {\n        position: \"relative\",\n        width: \"100%\",\n        paddingBottom: \"100%\",\n        flexBasis: 0,\n        flexGrow: 1,\n        margin: 0\n    },\n    image: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        maxWidth: \"90%\",\n        maxHeight: \"90%\",\n        margin: \"auto\"\n    },\n    content: {\n        flexBasis: 0,\n        flexGrow: 1,\n        padding: theme.spacing(.5),\n        minHeight: \"5em\"\n    },\n    title: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"1em\",\n        lineHeight: 1.25,\n        maxHeight: \"3.75em\",\n        overflow: \"hidden\",\n        display: \"-webkit-box\",\n        \"-webkit-line-clamp\": 3,\n        \"-webkit-box-orient\": \"vertical\",\n    },\n    footer: {\n        flexBasis: 0,\n        flexGrow: 0\n    }\n}));\n\nconst ModuleEkultur = ({size, documentType, imageUrl, title, author, objectCount, imageCount, videoCount, audioCount, commentCount}) => {\n    const classes = useStyles()\n\n    let metadata = [];\n\n    if (objectCount) {\n      metadata.push(objectCount + ' objekter'); \n    }\n    \n    if (imageCount) {\n      metadata.push(imageCount + ' bilder'); \n    }\n\n    if (videoCount) {\n      metadata.push(videoCount + ' videoer'); \n    }\n\n    if (audioCount) {\n      metadata.push(audioCount + ' lydklipp'); \n    }\n    \n    metadata = metadata.length && metadata.join(', ');    \n\n    return (\n        <article className={classes.module}>\n            <figure className={classes.media}>\n                <img className={classes.image} src={ imageUrl } />\n            </figure>\n            <div className={classes.content}>\n                <header className={classes.header}>\n                    <Typography className={classes.title}>{title}</Typography>\n                </header>\n                <footer className={classes.footer}>\n                    <p></p>\n                    <b className=\"comments__label\">{ commentCount }</b>\n                </footer>\n            </div>\n        </article>\n    )\n\n}\n\n\nexport default ModuleEkultur;","import React from \"react\"\nimport LayoutGrid from \"./LayoutGrid\"\nimport ModuleEkultur from \"./ModuleEkultur\"\n\nconst layouts = {\n    \"grid\": LayoutGrid\n}\n\nconst templates = {\n    \"ekultur\": ModuleEkultur\n}\n\nconst ArticleReferences = ({className, language = \"no\", layout = \"grid\", references = []}) => {\n    const localeId = \"locale:\" + language;\n\n    const renderReference = ({referenceType, reference, content}) => {\n        let title = content && content.title || reference && reference.title ||undefined\n\n        if (typeof title === \"object\") {\n            title = title[localeId] || undefined\n        }\n\n        const ModuleTemplate = referenceType && templates[referenceType]\n\n        if (ModuleTemplate) {\n            return (\n                <ModuleTemplate {...reference} title={title} />\n            )\n        }\n\n        return (\n            <li>{title}</li>\n        )\n    \n    }\n        \n\n    if (!references.length) {\n        return false\n    }\n\n    const LayoutTemplate = layout && layouts[layout]\n\n    if (LayoutTemplate) {\n        return (\n            <LayoutTemplate>\n                { references.map(reference => renderReference(reference))}\n            </LayoutTemplate>\n        )\n    }\n\n    return (\n        <div className={className}>\n            { references.map(reference => renderReference(reference))}\n        </div>\n    )\n\n}\n\nexport default ArticleReferences","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    links: {\n        \"& ul\": {\n            listStyle: \"disc\",\n            margin: \"1em 0\"\n        },\n        \"& ol\": {\n            listStyle: \"upper-roman\",\n            margin: \"1em 0\"\n        },\n        \"& strong\": {\n            fontWeight: \"bold\"\n        },\n        \"& em\": {\n            fontStyle: \"italic\"\n        }\n    },\n}));\n\nconst ArticleLinks = ({className, language = \"no\", links = []}) => {\n    const localeId = \"locale:\" + language;\n    const classes = useStyles()\n\n    const renderLink = ({title, url}) => {\n\n        if (typeof title === \"object\") {\n            title = title[localeId] || undefined\n        }\n\n        return (\n            <li><a href={url}>{title}</a></li>\n        )\n    \n    }\n        \n\n    if (!links.length) {\n        return false\n    }\n\n    return (\n        <div className={className ||classes.links}>\n            <ul>\n                { links.map(link => renderLink(link))}\n            </ul>\n        </div>\n    )\n\n}\n\nexport default ArticleLinks","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport ArticleGrid from \"./ArticleGrid\"\nimport ArticleTitle from \"./ArticleTitle\"\nimport ArticleBodytext from \"./ArticleBodytext\"\nimport ArticleMedia from \"./ArticleMedia\"\nimport ArticleReferences from \"./ArticleReferences\"\nimport ArticleLinks from \"./ArticleLinks\"\n\nconst useStyles = makeStyles(theme => ({\n    head: {\n\n    }\n}));\n\nconst ArticleHead = ({className, language, title, leadtext, media}) => {\n\n    const classes = useStyles()\n\n    return (\n        <header className={className || classes.head}>\n           <ArticleGrid>\n                <ArticleTitle language={language}>{title}</ArticleTitle>\n\n                { media && \n                    <ArticleMedia media={media} layout=\"list\" mediaFormat=\"2:1\" />\n                }\n\n                <ArticleBodytext language={language}>{leadtext}</ArticleBodytext>\n            </ArticleGrid>\n        </header>\n    )\n}\n\nexport default ArticleHead","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    body: {\n\n    }\n}));\n\nconst ArticleBody = ({className, children}) => {\n    const classes = useStyles()\n    return (\n        <div className={className || classes.body}>\n            {children}\n        </div>\n    )\n}\n\nexport default ArticleBody","import React from \"react\"\nimport ReactMarkdown from 'react-markdown';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    leadtext: {\n        \"& strong\": {\n            fontWeight: \"bold\"\n        },\n        \"& em\": {\n            fontStyle: \"italic\"\n        }\n    },\n}));\n\nconst ArticleLeadtext = ({className, language = \"no\", children}) => {\n    const localeId = \"locale:\" + language;\n    const classes = useStyles()\n        \n    if (typeof children === \"object\") {\n        children = children[localeId] || undefined\n    }\n\n    return (\n        <ReactMarkdown className={className ||classes.leadtext} source={children} />             \n    )\n}\n\nexport default ArticleLeadtext","import React from \"react\"\nimport ArticleGrid from \"./ArticleGrid\"\nimport ArticleTitle from \"./ArticleTitle\"\nimport ArticleLeadtext from \"./ArticleLeadtext\"\nimport ArticleBodytext from \"./ArticleBodytext\"\nimport ArticleMedia from \"./ArticleMedia\"\nimport ArticleReferences from \"./ArticleReferences\"\nimport ArticleLinks from \"./ArticleLinks\"\n\nconst ArticleSection = ({sectionType, sectionLayout, language = \"no\", title, leadtext, bodytext, links = [], media = [], references = []}) => {\n\n    if (sectionType === \"media\") {\n        return (\n            <ArticleGrid>\n                <ArticleTitle component=\"h2\" language={language}>{title}</ArticleTitle>\n                <ArticleMedia layout={sectionLayout} language={language} media={media} />\n                <ArticleBodytext language={language}>{bodytext}</ArticleBodytext>\n            </ArticleGrid>\n        )\n    }\n\n    if (sectionType === \"references\") {\n        return (\n            <ArticleGrid>\n                <ArticleTitle component=\"h2\" language={language}>{title}</ArticleTitle>\n                <ArticleLeadtext language={language}>{leadtext}</ArticleLeadtext>\n                <ArticleReferences language={language} references={references} />\n            </ArticleGrid>\n        )\n    }\n\n    return (\n        <ArticleGrid>\n            <ArticleTitle component=\"h2\" language={language}>{title}</ArticleTitle>\n            <ArticleMedia layout={sectionLayout} language={language} media={media} />\n            <ArticleLeadtext language={language}>{leadtext}</ArticleLeadtext>\n            <ArticleReferences language={language} references={references} />\n            <ArticleBodytext language={language}>{bodytext}</ArticleBodytext>\n            <ArticleLinks language={language} links={links} />\n        </ArticleGrid>\n    )\n\n}\n\nexport default ArticleSection","import React from \"react\"\n\nimport ArticleBase from \"./ArticleBase\"\nimport ArticleHead from \"./ArticleHead\"\nimport ArticleBody from \"./ArticleBody\"\nimport ArticleSection from \"./ArticleSection\"\n\nconst Article = ({formData, formContext}) => {\n    const language = formContext.currentLocale ||formContext.defaultLocale ||formData.locale\n    const content = formData && formData.content;\n\n    const { title, leadtext, headerImage, sections } = content;\n\n    return (\n        <ArticleBase>\n            <ArticleHead language={language} title={title} leadtext={leadtext} media={headerImage && [headerImage]} />\n            <ArticleBody>\n                { sections && sections.map((section, index) => <ArticleSection {...section} language={language} /> )}\n            </ArticleBody>\n        </ArticleBase>\n    )\n\n}\n\nArticle.defaultProps = {\n    formData: {},\n    formContext: {}\n}\n\nexport default Article","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n    },\n    /*\n    perspective: {\n        perspective: \"1000px\",\n        perspectiveOriginX: \"25%\",\n        perspectiveOriginY: \"75%\",\n    },\n    transform: {\n        transform: \"rotateY(-45deg)\",\n    },\n    */\n    format: {\n        position: \"relative\",\n        width: \"100%\",\n        paddingBottom: props => { return props.paddingBottom },\n    }\n}));\n\nconst PreviewFormat = ({format, children}) => {\n\n    let paddingBottom;\n\n    if (format) {\n        const size = format.split(\":\");\n        const w = size[0];\n        const h = size[1];\n        const ratio = h/w;\n\n        paddingBottom = ratio * 100 + \"%\";\n    }\n\n    const classes = useStyles({paddingBottom})\n\n    if (paddingBottom) {\n        return (\n            <div className={classes.root}>\n                <div className={classes.format} data-format={format}>\n                    { children }\n                </div>\n            </div>\n        )\n    }\n\n    return children\n\n}\n\nexport default PreviewFormat","import Color from 'color';\n\nexport const getPreviewItem = (item) => {\n    const { index, referenceId, reference, mediaId, media, grid, localeId, backgroundColor, color } = item;\n\n//    const primaryColor = Color(backgroundColor)\n//    const contrastColor = primaryColor.isLight() && \"black\" || \"white\"\n\n\n    const imageUrl = media && media.imageUrl || referenceId && reference && reference.imageUrl;\n    const runningHead = item.runningHead && item.runningHead[localeId];\n    const title = item.title && item.title[localeId] || referenceId && reference && reference.title || \"Untitled\";\n    const description = item.description && item.description[localeId];\n\n    let itemType;\n\n    if (referenceId) {\n        itemType = \"link\"\n    } else if (mediaId) {\n        itemType = \"media\"\n    }    \n\n    // grid\n    const m = grid && grid.split(':');\n    const cols = m && m[0] || 1\n    const rows = m && m[1] || 1\n\n    // id\n    const id = \"root_content_body_links_\" + index\n\n    // colors\n\n    return {\n        ...item,\n        id: id,\n        itemType: itemType,\n        imageUrl: imageUrl,\n        runningHead: runningHead,\n        title: title,\n        description: description,\n        cols: cols,\n        rows: rows\n    }\n    \n}","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport { getPreviewItem } from \"./utils\"\n\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n    },\n    menuList: {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        margin: \"0 3.5em\",\n    },\n    menuItem: {\n        position: \"relative\",\n        width: '8em',\n        margin: \".5em\"\n    },\n    figure: {\n        paddingBottom: \"100%\",\n        borderRadius: \"100%\",\n        backgroundColor: \"white\"\n    },\n    title: {\n        color: \"white\", \n        textAlign: \"center\",\n        lineHeight: 1.25,\n        height: \"2.5em\",\n        margin: theme.spacing(1)\n    }\n}));\n\nconst MenuItem = ({title}) => {\n\n    const classes = useStyles()\n\n    return (\n        <article className={classes.menuItem}>\n            <figure className={classes.figure}>\n\n            </figure>\n            <Typography className={classes.title}>{title}</Typography>\n        </article>\n    )\n\n\n}\n\nconst Menu = ({items, onCurrentId}) => {\n\n    const classes = useStyles()\n\n\n    const TimelineItem = ({cols, rows, index, ...item}) => {\n        const id = \"root_content_pageLinks_\" + index\n        return (\n            <MenuItem {...item} onClick={() => onCurrentId(id)} />\n        )\n    }\n    \n    return (\n        <div className={classes.menuList}>\n            { items && items.map((item, index) => {\n                const itemProps = getPreviewItem({...item, index: index})\n                return (\n                    <TimelineItem {...itemProps} key={index} />\n                )\n            })}\n        </div>\n    )\n\n}\n\nconst PreviewTimeline = ({formData, formContext, width, height}) => {\n\n    return (\n        <p>{JSON.stringify(formData)}</p>\n    )\n\n\n    const { pageTitle, backgroundImage, hasPages } = formData.content;\n    const currentLocale = formContext && formContext[currentLocale];\n    const title = pageTitle && pageTitle[currentLocale] ||formData.title\n\n    const onCurrentId = formContext.onCurrentId\n\n    const classes = useStyles()\n\n    return (\n        <div className={classes.root}>\n            <Menu items={hasPages} width={width} height={height} onCurrentId={onCurrentId} />\n        </div>\n    )\n\n}\n\nexport default PreviewTimeline","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles(theme => ({\n    pageHeader: {\n        position: props => { return props.position },\n        zIndex: 2,\n        height: \"6em\",\n        padding: \"2em 4em\",\n        color: \"white\",\n        display: \"flex\",\n        alignItems: \"center\"\n    },\n    pageTitle: {\n        fontSize: \"2em\",\n    }\n}));\n\nconst KioskPageHeader = ({title, position = \"relative\"}) => {\n\n    const classes = useStyles({position})\n\n    return (\n        <header className={classes.pageHeader}>\n            <Typography className={classes.pageTitle}>{ title }</Typography>\n        </header>\n    )\n}\n\nexport default KioskPageHeader","import React, { useState, useEffect } from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport { ImageBase } from \"@kit-ui/admin\"\n\nconst useStyles = makeStyles(theme => ({\n    module: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        backgroundColor: props => { return props.backgroundColor },\n        color: props => { return props.color},\n    },\n    media: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n    },\n    content: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        display: \"flex\",\n        flexDirection: \"column\",\n        padding: \"0.5em 1em\",\n        justifyContent: props => { return props.justifyContent},\n        alignItems: props => { return props.alignItems}\n    },\n    runningHead: {\n        fontSize: props => {return props.titleSize === \"large\" && \"1.25em\" ||props.titleSize === \"medium\" && \"1em\" ||\"0.875em\" },\n        color: props => {return props.titleColor ||props.color },\n        textTransform: \"uppercase\",\n        lineHeight: 1.5\n    },\n    title: {\n        fontSize: props => {return props.titleSize === \"large\" && \"2em\" ||props.titleSize === \"medium\" && \"1.5em\" ||\"1.25em\" },\n        color: props => {return props.titleColor ||props.color },\n        lineHeight: 1.2,\n        \"& + $description\": {\n            marginTop: theme.spacing(1)\n        }\n    },\n    description: {\n        fontSize: \"1em\",\n        opacity: 0.8\n    }\n}));\n\nconst getTextPlacement = ({placement = \"top-left\"}) => {\n\n    let justifyContent = \"center\"\n    let alignItems = \"center\"\n\n    // horizontal\n\n    if (placement.includes('left')) {\n        alignItems = \"flex-start\"\n    } else if (placement.includes('right')) {\n        alignItems = \"flex-end\"\n    }\n\n    // vertical\n\n    if (placement.includes('top')) {\n        justifyContent = \"flex-start\"\n    } else if (placement.includes('bottom')) {\n        justifyContent = \"flex-end\"\n    }\n    \n    return {\n        justifyContent: justifyContent,\n        alignItems: alignItems\n    }\n\n}\n\nconst GridModule = ({imageUrl, mediaWidth, mediaHeight, imageCropdata, imageFilters, runningHead, title, description, skin, width, height, onClick, ...props}) => {\n    const { justifyContent, alignItems } = getTextPlacement(props)\n\n    const classes = useStyles({...props, justifyContent, alignItems})\n\n    return (\n        <Card className={classes.module} onClick={onClick}>\n            { imageUrl && <ImageBase imageUrl={imageUrl} imageFilters={imageFilters} imageCropdata={imageCropdata} objectFit=\"cover\" /> }\n\n            <CardContent className={classes.content}>\n                {runningHead && <Typography className={classes.runningHead} component=\"h3\">{runningHead}</Typography> }\n                <Typography className={classes.title} component=\"h2\">{title}</Typography>\n                { description && <Typography className={classes.description} component=\"p\">{description}</Typography> }\n            </CardContent>\n\n        </Card>\n    )\n\n}\n\nexport default GridModule","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport PageHeader from \"./PageHeader\"\nimport KioskMosaicModule from \"./GridModule\"\nimport { getPreviewItem } from \"./utils\"\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n    },\n    body: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        margin: \"5.5em 3.5em 1.5em 3.5em\",\n    },\n    grid: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        display: \"grid\",\n        gridTemplateColumns: props => { return props.templateCols },\n        gridTemplateRows: props => { return props.templateRows },\n        gridColumnGap: props => { return props.colGap },\n        gridRowGap: props => { return props.rowGap },\n    },\n    gridItem: {\n        gridColumnStart: \"auto\",\n        gridColumnEnd: props => { return props.colEnd },\n        gridRowStart: \"auto\",\n        gridRowEnd: props => { return props.rowEnd },\n        position: \"relative\",\n        margin: \".5em\"\n    }\n}));\n\nconst MosaicGrid = ({localeId, items, cols = 5, rows = 3, onCurrentId}) => {\n\n    const colWidth = (100/cols);\n    const rowHeight = (100/rows);\n\n    const classes = useStyles({\n        templateCols: (colWidth + \"% \").repeat(cols),\n        templateRows: (rowHeight + \"% \").repeat(rows),\n    })\n\n    const GridItem = ({id, cols, rows, index, ...item}) => {\n\n        const classes = useStyles({\n            colEnd: \"span \" + cols,\n            rowEnd: \"span \" + rows\n        })\n        \n        return (\n            <div className={classes.gridItem}>\n                <KioskMosaicModule {...item} onClick={() => onCurrentId(id)} />\n            </div>\n        )\n    \n    }\n    \n    return (\n        <div className={classes.grid}>\n            { items && items.map((item, index) => {\n                const itemProps = getPreviewItem({...item, index: index, localeId: localeId})\n                return (\n                    <GridItem {...itemProps} key={index} />\n                )\n            })}\n        </div>\n    )\n\n}\n\nconst PreviewMosaic = ({formData, formContext, width, height}) => {\n    const { title, links, backgroundImage } = formData.content;\n    const locale = formContext && formContext.currentLocale || formContext && formContext.defaultLocale;\n    const localeId = \"locale:\"+locale\n    const pageTitle = title && title[localeId] ||formData.title\n\n    const onCurrentId = formContext.onCurrentId\n\n    const classes = useStyles()\n\n    return (\n        <div className={classes.root}>\n            <PageHeader title={pageTitle} />\n            <div className={classes.body}>\n                <MosaicGrid localeId={localeId} items={links} width={width} height={height} onCurrentId={onCurrentId} />\n            </div>\n        </div>\n    )\n\n}\n\nexport default PreviewMosaic","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles(theme => ({\n    card: {\n        width: '16em',\n        backgroundColor: props => { return props.backgroundColor },\n    },\n    cardMedia: {\n        width: \"100%\",\n        paddingBottom: props => { return 9/16 * 100 + \"%\" },\n    },\n    cardContent: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        padding: \"0.5em 1em\",\n        justifyContent: props => { return props.justifyContent},\n        alignItems: props => { return props.alignItems}\n    },\n    title: {\n        fontSize: \"2em\",\n        lineHeight: 1.2,\n        \"& + $description\": {\n            marginTop: theme.spacing(1)\n        }\n    },\n    description: {\n        fontSize: \"1em\",\n        opacity: 0.8\n    }\n}));\n\nconst getTextPlacement = ({placement = \"top-left\"}) => {\n\n    let justifyContent = \"center\"\n    let alignItems = \"center\"\n\n    // horizontal\n\n    if (placement.includes('left')) {\n        alignItems = \"flex-start\"\n    } else if (placement.includes('right')) {\n        alignItems = \"flex-end\"\n    }\n\n    // vertical\n\n    if (placement.includes('top')) {\n        justifyContent = \"flex-start\"\n    } else if (placement.includes('bottom')) {\n        justifyContent = \"flex-end\"\n    }\n    \n    return {\n        justifyContent: justifyContent,\n        alignItems: alignItems\n    }\n\n}\n\nconst MosaicModule = ({imageUrl, title, description, skin, width, height, onClick, ...props}) => {\n    const { justifyContent, alignItems } = getTextPlacement(props)\n    const classes = useStyles({...props, backgroundColor: \"white\", justifyContent, alignItems})\n   \n    return (\n        <Card className={classes.card} onClick={onClick}>\n            { imageUrl && \n                <CardMedia\n                    className={classes.cardMedia}\n                    alt={title}\n                    image={imageUrl}\n                    title={title} />\n            }\n            <CardContent className={classes.cardContent}>\n                <Typography className={classes.title} variant=\"h6\" component=\"h2\">\n                    {title}\n                </Typography>\n                {description &&\n                    <Typography className={classes.description} variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                        {description}\n                    </Typography>\n                }\n            </CardContent>\n        </Card>\n    )\n\n}\n\nexport default MosaicModule","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport { getPreviewItem } from \"./utils\"\n\nimport PageHeader from \"./PageHeader\"\nimport TimelineModule from \"./TimelineModule\"\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        display: \"flex\",\n        flexDirection: \"column\",\n    },\n    body: {\n        overflowX: \"scroll\",\n    },\n    timeline: {\n        display: \"flex\",\n        margin: \"0 3.5em\",\n    },\n    timelineItem: {\n        position: \"relative\",\n        margin: \".5em\"\n    }\n}));\n\nconst Timeline = ({localeId, items, onCurrentId}) => {\n\n    const classes = useStyles()\n\n    const TimelineItem = ({id, cols, rows, index, ...item}) => {\n        return (\n            <div className={classes.timelineItem}>\n                <TimelineModule {...item} onClick={() => onCurrentId(id)} />\n            </div>\n        )\n    }\n    \n    return (\n        <div className={classes.timeline}>\n            { items && items.map((item, index) => {\n                const itemProps = getPreviewItem({...item, localeId: localeId, index: index})\n                return (\n                    <TimelineItem {...itemProps} key={index} />\n                )\n            })}\n        </div>\n    )\n\n}\n\nconst PreviewTimeline = ({formData, formContext, width, height}) => {\n    const { title, links, backgroundImage } = formData.content;\n    const locale = formContext && formContext.currentLocale || formContext && formContext.defaultLocale;\n    const localeId = \"locale:\"+locale\n    const pageTitle = title && title[localeId] ||formData.title\n\n    const onCurrentId = formContext.onCurrentId\n\n    const classes = useStyles()\n\n    return (\n        <div className={classes.root}>\n            <PageHeader title={pageTitle}  />\n            <div className={classes.body}>\n                <Timeline localeId={localeId} items={links} width={width} height={height} onCurrentId={onCurrentId} />\n            </div>\n        </div>\n    )\n\n}\n\nexport default PreviewTimeline","import React, { Component } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ImageAnnotationsBase } from \"@kit-ui/admin\"\nimport PageHeader from \"./PageHeader\"\nimport { getPreviewItem, getContrastColor } from \"./utils\"\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n    },\n    body: {\n        position: \"absolute\",\n        zIndex: 1,\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n//        margin: \"6em\"\n    },\n    marker: {\n        position: \"absolute\",\n        zIndex: props => { return props.zIndex },\n        top: props => { return props.top + \"%\" ||\"50%\"},\n        left: props => { return props.left + \"%\" ||\"50%\"},\n    },\n    label: {\n        width: props => { return theme.spacing(props.size) },\n        height: props => { return theme.spacing(props.size) },\n        top: \"0\",\n        left: \"0\",\n        position: \"absolute\",\n        display: \"block\",\n        transform: \"translate(-50%, -50%)\",\n        backgroundColor: props => { return props.backgroundColor },\n        color: props => { return props.color },\n        borderSize: \".25em\",\n        borderRadius: \"50%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        fontFamily: \"Akkurat Mono, monspace\",\n        fontSize: \"14px\",\n    }\n}));\n\nconst ImagemapPreview = ({formData = {}, formContext}) => {\n    const locale = formContext && formContext.currentLocale || formContext && formContext.defaultLocale;\n    const localeId = \"locale:\"+locale\n    const onCurrentId = formContext.onCurrentId\n\n    const contentTitle = formData && formData.content && formData.content.title;\n    const title = contentTitle && contentTitle[localeId] ||formData.title\n\n    const classes = useStyles()\n\n    const annotateImage = formData.content && formData.content.backgroundImage;\n    const annotateColor = formData.content && formData.content.annotateColor;\n    const imageAnnotations = formData && formData.content && formData.content.links\n    const imageFilters = annotateImage && annotateImage.imageFilters;\n    const imageUrl = annotateImage && annotateImage.media && annotateImage.media.imageUrl;\n\n    const contrastColor = annotateColor && getContrastColor(annotateColor)\n\n    if (!imageUrl) {\n        return (\n            <p>No imageUrl</p>\n        )\n    }\n\n    const MarkerTemplate = ({id, index, top = 50, left = 50, size = 4}) => {\n\n        const classes = useStyles({size, zIndex: index, top, left, backgroundColor: annotateColor, color: contrastColor})\n    \n        return (\n            <div className={classes.marker} onClick={() => onCurrentId(id)}>\n                <div className={classes.label}>\n                    {index+1}\n                </div>\n            </div>\n        )\n    }\n    \n\n    return (\n        <div className={classes.root}>\n            <PageHeader title={title} position=\"absolute\" />\n            <div className={classes.body}>\n                <ImageAnnotationsBase {...annotateImage} imageUrl={imageUrl} imageFilters={imageFilters} imageAnnotations={imageAnnotations}  markerTemplate={MarkerTemplate} />\n            </div>\n        </div>\n    )\n\n}\n\n\nexport default ImagemapPreview;","import Color from 'color';\n\nexport const getContrastColor = (hex) => {\n    const color = Color(hex)\n    return color.isLight() && \"black\" || \"white\"\n}","import React, { Component } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ImageAnnotationsBase } from \"@kit-ui/admin\"\nimport PageHeader from \"./PageHeader\"\nimport { getPreviewItem } from \"./utils\"\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n    },\n    body: {\n        position: \"absolute\",\n        zIndex: 1,\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n//        margin: \"6em 1em\"\n    },\n    line: {\n        position: \"absolute\",\n        zIndex: props => { return props.zIndex },\n        top: props => { return props.top + \"%\" ||\"50%\"},\n        right: props => { return props.left <= 50 && 100-props.left + \"%\" ||\"0\" },\n        left: props => { return props.left > 50 && props.left + \"%\" || \"0\" },\n        height: \"2px\",\n        backgroundColor: \"white\"\n    },\n    module: {\n        position: \"absolute\",\n        transform: \"translateY(-50%)\",\n        zIndex: props => { return props.zIndex },\n        top: props => { return props.top + \"%\" ||\"50%\"},\n        right: props => { return props.left > 50 && \"0\" },\n        left: props => { return props.left <= 50 && \"0\" },\n        width: \"12em\",\n        backgroundColor: \"white\",\n        color: \"black\",\n        padding: \"1em\"\n    },\n    marker: {\n        position: \"absolute\",\n        zIndex: props => { return props.zIndex },\n        top: props => { return props.top + \"%\" ||\"50%\"},\n        left: props => { return props.left + \"%\" ||\"50%\"},\n    },\n    border: {\n        width: \"1.5em\",\n        height: \"1.5em\",\n        backgroundColor: \"white\",\n        display: \"block\",\n        transform: \"translate(-50%, -50%)\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        borderRadius: \"50%\",\n        padding: \".25em\"\n    },\n    label: {\n        width: \"100%\",\n        height: \"100%\",\n        backgroundColor: props => { return props.color },\n        color: \"transparent\",\n        borderRadius: \"50%\",\n    },\n}));\n\nconst ImagelegendPreview = ({formData = {}, formContext}) => {\n    const locale = formContext && formContext.currentLocale || formContext && formContext.defaultLocale;\n    const localeId = \"locale:\"+locale\n    const onCurrentId = formContext.onCurrentId\n\n    const contentTitle = formData && formData.content && formData.content.title;\n    const title = contentTitle && contentTitle[localeId] ||formData.title\n\n    const classes = useStyles()\n\n    const annotateImage = formData.content && formData.content.backgroundImage;\n    const annotateColor = formData.content && formData.content.annotateColor;\n    const imageAnnotations = formData && formData.content && formData.content.links\n    const imageFilters = annotateImage && annotateImage.imageFilters;\n    const imageUrl = annotateImage && annotateImage.media && annotateImage.media.imageUrl;\n\n    if (!imageUrl) {\n        return (\n            <p>No imageUrl</p>\n        )\n    }\n\n    const MarkerModule = ({id, index, top = 50, left = 50, size = 4, runningHead, title, description, ...props}) => {\n        const classes = useStyles({size, zIndex: index, top, left})\n\n        return (\n            <div className={classes.module} data-index={index} onClick={() => onCurrentId(id)}>\n                {runningHead && <h3>{runningHead}</h3> }\n                <h2>{title}</h2>\n                {description && <p>{description}</p> }\n            </div>\n        )\n\n    }\n\n    const MarkerTemplate = ({id, index, top = 50, left = 50, size = 4, ...props}) => {\n        const classes = useStyles({size, zIndex: index, top, left, color: annotateColor})\n\n        return (\n            <React.Fragment>\n                <div className={classes.line} data-index={index}></div>\n                <div className={classes.marker} onClick={() => onCurrentId(id)}>\n                    <div className={classes.border}>\n                        <div className={classes.label}>\n                            {index+1}\n                        </div>\n                    </div>\n                </div>\n            </React.Fragment>\n        )\n    }\n    \n    return (\n        <div className={classes.root}>\n            <PageHeader title={title} position=\"absolute\" />\n            <div className={classes.body}>\n                <ImageAnnotationsBase imageUrl={imageUrl} imageFilters={imageFilters} imageAnnotations={imageAnnotations} overflow=\"visible\" markerTemplate={MarkerTemplate} />\n                { imageAnnotations && imageAnnotations.map((item, index) => {\n                    const itemProps = getPreviewItem({...item, index: index, localeId: localeId})\n                    return (\n                        <MarkerModule {...itemProps} key={index} />\n                    )\n                })}\n            </div>\n        </div>\n    )\n\n}\n\n\nexport default ImagelegendPreview;","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport { withResizeDetector } from 'react-resize-detector';\n\nimport PreviewFormat from \"./PreviewFormat\"\n\nimport Menu from \"./Menu\"\nimport Grid from \"./Grid\"\nimport Timeline from \"./Timeline\"\nimport Imagemap from \"./AnnotateImagemap\"\nimport Legends from \"./AnnotateLegends\"\n\nconst templates = {\n    \"device\": Menu,\n    \"pageAnnotate/imagemap\": Imagemap,\n    \"pageAnnotate/legends\": Legends,\n    \"pageTimeline\": Timeline,\n    \"pageList\": Grid,\n    \"pageGrid\": Grid,\n    \"pageMedia\": Grid,\n    \"pageMedia/gallery\": Grid,\n    \"pageMedia/autoplay\": Grid,\n    \"page\": Grid\n}\n\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        backgroundImage: props => { return 'url('+props.backgroundImageUrl+')' },\n        backgroundPosition: \"50% 50%\",\n        backgroundSize: \"cover\",\n        fontSize: props => { return props.fontSize },\n    },\n    page: {\n        display: \"flex\",\n        alignItems: \"flex-start\",\n        justifyContent: \"space-between\",\n        flexDirection: \"column\",\n        width: \"100%\",\n        height: \"100%\",\n    },\n    header: {\n        width: \"100%\",\n        display: \"flex\",\n        margin: theme.spacing(2)\n    },\n    title: {\n        fontSize: \"3em\"\n    },\n    body: {\n        flexBasis: \"100%\",\n        flexGrow: 1,\n        width: \"100%\",\n        position: \"relative\"\n    },\n    footer: {\n        flexBasis: \"15%\",\n        width: \"100%\",\n        margin: theme.spacing(2)\n    },\n}));\n\n\n\nconst PreviewPage = ({width, height, ...props}) => {\n\n    const fontSize = width / 64 + \"px\";\n\n    const classes = useStyles({\n        fontSize: fontSize,\n    })\n    \n    const formData = props.formData;\n\n    const { documentType, content } = formData;\n\n    let layout;\n\n    if (documentType === \"pageAnnotate\") {\n        layout = content && content.annotateLayout\n    }\n\n    if (documentType === \"pageMedia\") {\n        layout = content && content.mediaLayout\n    }\n\n    let template;\n\n    if (layout) {\n        template = documentType + \"/\" + layout\n    } else {\n        template = documentType\n    }\n\n    let PreviewTemplate = templates && templates[template]\n\n    if (!PreviewTemplate) {\n        return (<p>No preview for {template}</p>)\n    }\n\n\n    return (\n        <PreviewFormat format=\"16:9\">\n            <div className={classes.root}>\n                <PreviewTemplate {...props} />\n            </div>\n        </PreviewFormat>\n    )\n\n}\n\nPreviewPage.defaultProps = {\n    formData: {},\n    formContext: {}\n}\n\nexport default withResizeDetector(PreviewPage)","import React from \"react\"\nimport Article from \"./Article\"\nimport Page from \"./Page\"\n\nconst templates = {\n    \"device\": Page,\n    \"page\": Page,\n    \"article\": Article\n}\n\nconst PreviewKiosk = (props) => {\n    const documentType = props && props.formData && props.formData.documentType;\n\n    let template;\n\n    if (documentType && documentType.startsWith('page')) {\n        template = \"page\"\n    } else {\n        template = documentType\n    }\n\n    let PreviewTemplate = templates && templates[template]\n\n    if (!PreviewTemplate) {\n        return (<p>No preview for {documentType}</p>)\n    }\n\n    return (\n        <PreviewTemplate {...props} />\n    )\n\n}\n\nexport default PreviewKiosk","import PreviewKiosk from \"./PreviewKiosk\"\nexport default PreviewKiosk","import schema from \"./schema\";\nimport uiSchema from \"./uiSchema\";\nimport PreviewTemplate from \"../../preview/KioskPreview\"\n\nexport default {\n    id: 1,\n    schemaType: 'documents',\n    name: 'pageHome',\n    schema: schema,\n    uiSchema: uiSchema,\n    preview: {\n        template: PreviewTemplate\n    }\n}","import schema from \"../page/schema\"\nexport default schema","import uiPreview from \"../page/uiPreview\"\nexport default uiPreview","import links from \"../../page/links/uiSchema\"\n\nexport default {\n    ...links,\n    \"ui:field\": \"kpAnnotateArray\",\n    \"ui:title\": \"Markrer\",\n    \"ui:preview\": {\n        \"select\": {\n            \"title\": \"title\"\n        },\n        prepare({formData =[]}) {\n            return {\n                title: formData.length + \" markrer\"\n            }\n        }\n    },\n    \"items\": {\n        ...links.items,\n        \"ui:preview\": {\n            \"select\": {\n                \"badgeContent\": \"badgeContent\",\n                \"imageUrl\": \"imageUrl\",\n                \"typeLabel\": \"typeLabel\",\n                \"title\": \"title\",\n                \"metadata\": \"metadata\",\n            },\n            prepare({formData, formContext, index}) {\n                const { mediaId, media, referenceId, reference } = formData\n    \n                const locale = formContext.currentLocale ||formContext.defaultLocale;\n                const localeId = \"locale:\" + locale\n    \n                const runningHead = formData.runningHead && formData.runningHead[localeId] \n                const title = formData.title && formData.title[localeId] \n                const badgeContent = index + 1\n\n                const localTitle = runningHead && title && runningHead + \": \" + title ||title\n                const referenceTitle = referenceId && reference && reference.title\n    \n                const imageUrl = media && media.imageUrl ||reference && reference.imageUrl\n                const typeLabel = referenceId && reference && reference.documentType\n    \n                let metadata = []\n    \n                referenceId && reference && reference.title && metadata.push(reference.title)\n    \n                return {\n                    badgeContent: badgeContent,\n                    imageUrl: imageUrl,\n                    typeLabel: typeLabel,\n                    title: localTitle || referenceTitle,\n                    metadata: metadata,\n                }\n    \n            }\n        },\n    }\n}","import uiPreview from \"./uiPreview\"\nimport settings from \"../page/settings/uiSchema\"\nimport header from \"./header/uiSchema\"\nimport body from \"./body/uiSchema\"\n\nexport default {\n    \"ui:field\": \"pageEditor\",\n    \"ui:preview\": uiPreview,\n    \"ui:options\": {\n        \"collapsible\": true\n    },\n    \"ui:fieldset\": [\n        \"content\",\n        \"settings\"\n    ],\n    \"content\": {\n        \"ui:field\": \"kpPage\",\n        \"ui:layout\": \"pageContent\",\n        \"ui:fieldset\": [\n            \"header\",\n            \"body\"\n        ],\n        \"header\": header,\n        \"body\": body\n    },\n    \"settings\": settings\n}","export default {\n    \"ui:layout\": \"section\",\n    \"ui:title\": \"Tema\",\n    \"ui:preview\": {\n        \"select\": {\n            \"description\": \"description\"\n        },\n        prepare({formData, formContext}) {\n            const { title } = formData;\n\n            const localeId = \"locale:\" + formContext.currentLocale\n            const description = title && title[localeId]\n\n            return {\n                description: description\n            }\n\n        }\n    },\n    \"ui:fieldset\": [\n        \"title\",\n        \"leadtext\",\n        \"bodytext\"\n    ],\n    \"ui:options\": {\n        \"expanded\": true,\n        \"collapsible\": true,\n        \"spacing\": 2,\n    },\n    \"title\": {\n        \"ui:title\": \"Tittel\"\n    },\n    \"leadtext\": {\n        \"ui:title\": \"Ingress\",\n        \"ui:widget\": \"textarea\"\n    },\n    \"bodytext\": {\n        \"ui:title\": \"Brdtekst\",\n        \"ui:widget\": \"textarea\"\n    }\n}","import body from \"../../page/pageBody/uiSchema\"\nimport links from \"../mapLinks/uiSchema\"\n\nexport default {\n    ...body,\n    \"links\": links,\n    \"ui:settings\": [\n        \"mapLayout\",\n    ],\n}","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    page: {\n        backgroundColor: \"white\",\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        overflowY: \"scroll\"\n    },\n}));\n\nconst PageLayout = ({children}) => {\n\n    const classes = useStyles()\n\n    return (\n        <main className={classes.page}>\n            {children}\n        </main>\n    )\n\n}\n\nexport default PageLayout","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles(theme => ({\n    media: {\n        margin: theme.spacing(2)\n    },\n}));\n\nconst PageImage = ({imageUrl = undefined, language}) => {\n    const classes = useStyles()\n\n    if (!imageUrl) {\n        return false\n    }\n\n    return (\n        <figure className={classes.media}>\n            <img src={imageUrl} />\n        </figure>\n    )\n\n}\n\nexport default PageImage","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\nimport PageMedia from \"./PageMedia\"\n\nconst useStyles = makeStyles(theme => ({\n    header: {\n        margin: theme.spacing(2)\n    },\n}));\n\nconst PageHeader = ({title, leadtext, media, language}) => {\n    const classes = useStyles()\n\n    const localeId = \"locale:\" + language;\n\n    if (typeof title === \"object\") {\n        title = title[localeId] || undefined\n    }\n    \n    if (typeof leadtext === \"object\") {\n        leadtext = leadtext[localeId] || undefined\n    }\n\n    return (\n        <header className={classes.header}>\n            <Typography variant=\"h2\">{title}</Typography>\n            { media && <PageMedia {...media} /> }\n            <Typography>{leadtext}</Typography>\n        </header>\n    )\n\n}\n\nexport default PageHeader","import React from \"react\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles(theme => ({\n    body: {\n        margin: theme.spacing(2)\n    },\n}));\n\nconst PageHeader = ({bodytext, language}) => {\n    const classes = useStyles()\n\n    const localeId = \"locale:\" + language;\n\n    if (typeof bodytext === \"object\") {\n        bodytext = bodytext[localeId] || undefined\n    }\n\n    return (\n        <div className={classes.body}>\n            <Typography>{bodytext}</Typography>\n        </div>\n    )\n\n}\n\nexport default PageHeader","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport PlaceIcon from '@material-ui/icons/Place';\n\nconst useStyles = makeStyles(theme => ({\n    link: {\n        position: \"absolute\",\n        left: -theme.spacing(1.5),\n        top: -theme.spacing(3),\n    },\n    marker: {\n\n    }\n}));\n\nconst MapLink = ({title}) => {\n    const classes = useStyles()\n\n    return (\n        <div className={classes.link}>\n            <PlaceIcon />\n        </div>\n    )\n\n    return (\n        <div className={classes.link}>\n            <IconButton>\n                <PlaceIcon />\n            </IconButton>\n        </div>\n    )\n\n}\n\n\nexport default MapLink;","import React, { useState, useEffect, useRef } from 'react';\nimport GoogleMapReact from 'google-map-react';\nimport Marker from \"./DefaultMapMarker\"\nimport { v4 as uuidv4 } from 'uuid';\n\nconst Map = ({defaultCenter, defaultZoom, KEY, links = []}) => {\n\n    const [markers, setMarkers] = useState(links)\n    const [origin, setOrigin] = useState(undefined)\n    const [destination, setDestination] = useState(undefined)\n    const [waypoints, setWaypoints] = useState([])\n    const [directions, setDirections] = useState([])\n    const [center, setCenter] = useState(undefined)\n    const [mapId, setMapId] = useState(uuidv4())\n\n    const mapRef = useRef(null)\n    \n    useEffect(() => {\n        const lat = links && links[0] && links[0].lat \n        const lng = links && links[0] && links[0].lng\n    \n        setCenter({\n            lat: lat,\n            lng: lng\n        })\n\n        let markers = []\n\n        links && links.map(link => {\n            if (link.lat && link.lng) {\n                markers.push({\n                    ...link,\n                    lat: link.lat,\n                    lng: link.lng\n                })\n            }\n        })\n\n        setOrigin(markers && markers[0])\n        setDestination(markers && markers[markers.length-1])\n\n        let newWaypoints = [];\n\n        markers && markers.map((marker, index) => {\n\n            if (index > 0 && index < markers.length-1) {\n                newWaypoints.push({\n                    location: marker.lat + \",\" + marker.lng\n                })\n            }\n\n        })\n\n        setWaypoints(newWaypoints)\n        setMarkers(markers)\n        setMapId(uuidv4())\n    \n    }, [links])\n\n\n\n    useEffect(() => {\n\n        console.log(\"mapRef\", mapRef.current)\n\n    }, [mapRef.current])\n    \n    const renderMarker = ({lat, lng, ...props}, index) => {\n\n        return (\n            <Marker lat={lat} lng={lng} index={index} {...props} />\n        )\n\n    }\n\n    const drawDirections = (google, result) => {\n\n        const path = result.routes[0].overview_path\n\n        const roundTripPath = new google.maps.Polyline({\n            map: google.map,\n            path: path,\n            geodesic: true,\n            strokeColor: \"#FF0000\",\n            strokeOpacity: 1.0,\n            strokeWeight: 2\n        });\n\n        roundTripPath.setMap(google.map);        \n\n    }\n\n    const getDirections = (google) => {\n\n        const directionsService = new google.maps.DirectionsService();\n\n        console.log('WAYPOINTS', waypoints)\n\n        directionsService.route(\n            {\n              origin: origin,\n              waypoints: waypoints,\n              destination: destination,\n              travelMode: google.maps.TravelMode.WALKING\n            },\n            (result, status) => {\n              if (status === google.maps.DirectionsStatus.OK) {\n                  drawDirections(google, result)\n                  setDirections(result)\n              } else {\n                setDirections(\"FAIL:\" + result)\n                //console.error(`error fetching directions ${result}`);\n              }\n            }\n          );        \n    }\n\n    const handleApiLoaded = (google) => {\n\n//        getDirections(google)\n\n        const bounds = new google.maps.LatLngBounds();\n\n        markers.map(marker => {\n\n            const lat = marker.lat\n            const lng = marker.lng\n\n            if (lat && lng) {\n                bounds.extend(new google.maps.LatLng(lat, lng))\n            }\n\n\n        })\n\n        google.map.fitBounds(bounds);\n\n    }\n\n    return (\n        <div style={{ height: '100%', width: '100%' }}>\n            <GoogleMapReact\n                ref={mapRef}\n                key={mapId}\n                bootstrapURLKeys={{ key: KEY }}\n                defaultCenter={defaultCenter}\n                defaultZoom={defaultZoom}\n                center={center}\n                yesIWantToUseGoogleMapApiInternals\n                onGoogleApiLoaded={handleApiLoaded}\n                >\n                {markers && markers.map(renderMarker)}\n            </GoogleMapReact>\n        </div>\n      );\n\n}\n\nMap.defaultProps = {\n    KEY: \"AIzaSyA0UKwjqalA0BdK5GBh8RPR9HJjtifWLAg\",\n    defaultCenter: {\n        lat: 59.95,\n        lng: 30.33\n    },\n    defaultZoom: 14\n}\n\n\nexport default Map;","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport PlaceIcon from '@material-ui/icons/Place';\n\nconst useStyles = makeStyles(theme => ({\n    link: {\n        position: \"absolute\",\n        left: -theme.spacing(1.5),\n        top: -theme.spacing(3),\n\n        \"& $media\": {\n            transition: \".125s ease-out\",\n            transform: \"scale(1)\"\n        },\n\n        \"&[aria-expanded=true] $media\": {\n            transform: \"scale(2)\"\n        },\n\n        \"&:hover $media\": {\n            transform: \"scale(2)\"\n        }\n\n    },\n    label: {\n        position: \"absolute\",\n        width: theme.spacing(2),\n        height: theme.spacing(2),\n        margin: theme.spacing(0, .5),\n        borderRadius: \"100%\",\n        backgroundColor: \"red\",\n        color: \"white\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n    },\n    media: {\n        position: \"absolute\",\n        width: theme.spacing(3),\n        height: theme.spacing(3),\n        margin: theme.spacing(-.5, 0),\n        borderRadius: \"100%\",\n        backgroundColor: \"red\",\n        color: \"white\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        backgroundSize: \"cover\",\n\n    },\n    image: {\n\n    }\n}));\n\nconst MapLink = ({reference, media, index}) => {\n    const classes = useStyles()\n\n    const imageUrl = media && media.imageUrl ||reference && reference.imageUrl\n\n    return (\n        <div className={classes.link} aria-expanded={index === 0}>\n            <figure className={classes.media} style={{backgroundImage: \"url(\"+imageUrl+\")\"}}></figure>\n            <i className={classes.label}>{index+1}</i>\n            <PlaceIcon />\n        </div>\n    )\n\n}\n\n\nexport default MapLink;","import React, { useState, useEffect, useRef } from 'react';\nimport GoogleMapReact from 'google-map-react';\nimport Marker from \"./RoundtripMapMarker\"\nimport { v4 as uuidv4 } from 'uuid';\n\nconst Map = ({defaultCenter, defaultZoom, KEY, links = []}) => {\n\n    const [markers, setMarkers] = useState(links)\n    const [origin, setOrigin] = useState(undefined)\n    const [destination, setDestination] = useState(undefined)\n    const [waypoints, setWaypoints] = useState([])\n    const [directions, setDirections] = useState([])\n    const [center, setCenter] = useState(undefined)\n    const [mapId, setMapId] = useState(uuidv4())\n\n    const mapRef = useRef(null)\n    \n    useEffect(() => {\n        const lat = links && links[0] && links[0].lat \n        const lng = links && links[0] && links[0].lng\n    \n        setCenter({\n            lat: lat,\n            lng: lng\n        })\n\n        let markers = []\n\n        links && links.map(link => {\n            if (link.lat && link.lng) {\n                markers.push({\n                    ...link,\n                    lat: link.lat,\n                    lng: link.lng\n                })\n            }\n        })\n\n        setOrigin(markers && markers[0])\n        setDestination(markers && markers[markers.length-1])\n\n        let newWaypoints = [];\n\n        markers && markers.map((marker, index) => {\n\n            if (index > 0 && index < markers.length-1) {\n                newWaypoints.push({\n                    location: marker.lat + \",\" + marker.lng\n                })\n            }\n\n        })\n\n        setWaypoints(newWaypoints)\n        setMarkers(markers)\n        setMapId(uuidv4())\n    \n    }, [links])\n\n\n\n    useEffect(() => {\n\n        console.log(\"mapRef\", mapRef.current)\n\n    }, [mapRef.current])\n    \n    const renderMarker = ({lat, lng, ...props}, index) => {\n\n        return (\n            <Marker lat={lat} lng={lng} count={index+1} index={index} {...props} />\n        )\n\n    }\n\n    const drawDirections = (google, path) => {\n\n        setDirections(path)\n\n        const roundTripPath = new google.maps.Polyline({\n            map: google.map,\n            path: path,\n            geodesic: true,\n            strokeColor: \"#FF0000\",\n            strokeOpacity: 1.0,\n            strokeWeight: 2\n        });\n\n        roundTripPath.setMap(google.map);        \n\n    }\n\n    const getDirections = (google) => {\n\n        const directionsService = new google.maps.DirectionsService();\n\n        console.log('WAYPOINTS', waypoints)\n\n        directionsService.route(\n            {\n              origin: origin,\n              waypoints: waypoints,\n              destination: destination,\n              travelMode: google.maps.TravelMode.WALKING\n            },\n            (result, status) => {\n              if (status === google.maps.DirectionsStatus.OK) {\n                  const overviewPath = result.routes[0].overview_path\n                  const resultsPath = overviewPath.length && overviewPath ||markers\n                  drawDirections(google, resultsPath)\n              } else {\n                drawDirections(google, markers)\n                setDirections(\"FAIL:\" + result)\n                //console.error(`error fetching directions ${result}`);\n              }\n            }\n          );        \n    }\n\n    const handleApiLoaded = (google) => {\n\n        getDirections(google)\n\n        const bounds = new google.maps.LatLngBounds();\n\n        markers.map(marker => {\n\n            const lat = marker.lat\n            const lng = marker.lng\n\n            if (lat && lng) {\n                bounds.extend(new google.maps.LatLng(lat, lng))\n            }\n\n\n        })\n\n        google.map.fitBounds(bounds);\n\n    }\n\n    return (\n        <div style={{ height: '100%', width: '100%' }}>\n            <GoogleMapReact\n                ref={mapRef}\n                key={mapId}\n                bootstrapURLKeys={{ key: KEY }}\n                defaultCenter={defaultCenter}\n                defaultZoom={defaultZoom}\n                center={center}\n                yesIWantToUseGoogleMapApiInternals\n                onGoogleApiLoaded={handleApiLoaded}\n                >\n                {markers && markers.map(renderMarker)}\n            </GoogleMapReact>\n            Debug:\n            {JSON.stringify(directions)}\n        </div>\n      );\n\n}\n\nMap.defaultProps = {\n    KEY: \"AIzaSyA0UKwjqalA0BdK5GBh8RPR9HJjtifWLAg\",\n    defaultCenter: {\n        lat: 59.95,\n        lng: 30.33\n    },\n    defaultZoom: 14\n}\n\n\nexport default Map;","import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getModel } from '../../redux/modelsById';\n\nimport PageLayout from \"../Page/PageLayout\"\nimport PageHeader from \"../Page/PageHeader\"\nimport PageBody from \"../Page/PageBody\"\n\n\nimport DefaultMap from \"./DefaultMap\"\nimport RoundtripMap from \"./RoundtripMap\"\n\nconst mapTypes = {\n    \"default\": DefaultMap,\n    \"roundtrip\": RoundtripMap\n}\n\nconst PageMap = ({formData, formContext, ...props}) => {\n\n    const dispatch = useDispatch()\n    const modelsById = useSelector(state => state.modelsById)\n   \n    const links = formData && formData.content && formData.content.links\n\n    const [newLinks, setNewLinks] = useState([])\n\n    useEffect(() => {\n\n        links && links.map(link => {\n            const referenceId = link && link.referenceId;\n            const referenceModel = referenceId && modelsById[referenceId]\n\n            if (referenceId && !referenceModel) {\n                dispatch(getModel({modelName: \"documents\", uniqueId: referenceId}))\n            }\n        })\n\n    }, [links])\n\n\n    useEffect(() => {\n\n        const newLinks = links && links.map(link => {\n            const referenceId = link && link.referenceId;\n            const referenceModel = referenceId && modelsById[referenceId]\n\n            const location = referenceModel && referenceModel.content && referenceModel.content.location\n\n            return {\n                ...link,\n                ...location,\n                reference: referenceModel\n            }\n\n        })\n\n        setNewLinks(newLinks)        \n\n    }, [modelsById, links])\n\n    const language = formContext && formContext.currentLocale\n    const content = formData && formData.content\n\n    const mapLayout = content && content.mapLayout\n    const MapTemplate = mapLayout && mapTypes[mapLayout] || DefaultMap\n\n    if (!newLinks) {\n        return <p>No links to display</p>\n    }\n\n    return <MapTemplate links={newLinks} />\n    \n    return (\n        <PageLayout>\n            <PageHeader {...content} language={language}></PageHeader>\n            {newLinks && newLinks.length && <MapTemplate links={newLinks} /> }\n            <PageBody {...content} language={language} />\n        </PageLayout>\n    )\n\n}\n\nexport default PageMap\n\n","import schema from \"./schema\";\nimport uiSchema from \"./uiSchema\";\nimport PreviewTemplate from \"../../preview/PageMap\"\n\nexport default {\n    id: 1,\n    schemaType: 'documents',\n    name: 'pageMap',\n    schema: schema,\n    uiSchema: uiSchema,\n    preview: {\n        template: PreviewTemplate\n    }\n}","import schema from \"./schema\";\nimport uiSchema from \"./uiSchema\";\n//import PreviewTemplate from \"../../preview/PageTopic\"\n\nexport default {\n    id: 1,\n    schemaType: 'documents',\n    name: 'pageTopic',\n    schema: schema,\n    uiSchema: uiSchema,\n    preview: {\n//        template: PreviewTemplate\n    }\n}","import schema from \"../page/schema\"\nexport default schema","import uiPreview from \"./uiPreview\"\nimport settings from \"../page/settings/uiSchema\"\nimport header from \"./header/uiSchema\"\nimport body from \"./body/uiSchema\"\n\nexport default {\n    \"ui:field\": \"pageEditor\",\n    \"ui:collapsible\": true,\n    \"ui:preview\": uiPreview,\n    \"ui:fieldset\": [\n        \"content\",\n        \"settings\"\n    ],\n    \"content\": {\n//        \"ui:field\": \"kioskPage\",\n        \"ui:layout\": \"pageContent\",\n        \"ui:fieldset\": [\n            \"header\",\n            \"body\"\n        ],\n        \"header\": header,\n        \"body\": body\n    },\n    \"settings\": settings\n}","import uiPreview from \"../page/uiPreview\"\nexport default uiPreview","export default {\n    \"ui:layout\": \"section\",\n    \"ui:title\": \"Tema\",\n    \"ui:preview\": {\n        \"select\": {\n            \"description\": \"description\"\n        },\n        prepare({formData, formContext}) {\n            const { title } = formData;\n\n            const localeId = \"locale:\" + formContext.currentLocale\n            const description = title && title[localeId]\n\n            return {\n                description: description\n            }\n\n        }\n    },\n    \"ui:fieldset\": [\n        \"titleImage\",\n        \"content\"\n    ],\n    \"ui:options\": {\n        \"expanded\": true,\n        \"collapsible\": true,\n        \"grid\": true,\n        \"spacing\": 2,\n    },\n    \"titleImage\": {\n        \"ui:xs\": 4,\n        \"ui:layout\": \"media\",\n        \"ui:buttons\": [\n            {\n                \"type\": \"sidebar\",\n                \"icon\": \"search\",\n                \"title\": \"Finn hovedbilde\"\n            }\n        ],\n        \"ui:fieldset\": [\n            \"media\"\n        ],\n        \"media\": {\n            \"ui:title\": \"Hovedbilde\"\n        }\n\n    },\n    \"content\": {\n        \"ui:xs\": 8,\n        \"ui:options\": {\n            \"spacing\": 2,\n        },\n        \"ui:fieldset\": [\n            \"title\",\n            \"leadtext\",\n            \"bodytext\"\n        ],\n        \"title\": {\n            \"ui:title\": \"Tittel\"\n        },\n        \"leadtext\": {\n            \"ui:title\": \"Ingress\",\n            \"ui:widget\": \"textarea\"\n        },\n        \"bodytext\": {\n            \"ui:title\": \"Brdtekst\",\n            \"ui:widget\": \"textarea\"\n        }\n    },\n\n}","import body from \"../../page/pageBody/uiSchema\"\n\nexport default {\n    ...body\n}","import schema from \"../page/schema\"\nexport default schema","import uiPreview from \"../page/uiPreview\"\nexport default uiPreview","import uiSchema from \"../../page/pageHeader/uiSchema\"\nexport default {\n    ...uiSchema,\n    \"ui:title\": \"Mosaikk\",\n}","import uiSchema from \"../../page/pageMedia/uiSchema\"\n\nexport default {\n    ...uiSchema,\n    \"ui:title\": \"Bakgrunnsbilde\"\n}","import links from \"../../page/links/uiSchema\"\n\nexport default {\n    ...links,\n    \"items\": {\n        ...links.items,\n        \"ui:settings\": [\n            \"grid\",\n            \"placement\",\n            \"backgroundColor\",\n            \"color\"\n        ],\n    \n\n        \"content\": {\n            ...links.items.content,\n            \"linkContent\": {\n                ...links.items.content.linkContent,\n                \"title\": {\n                    ...links.items.content.linkContent.title,\n                    \"ui:settings\": [\n                        \"titleSize\",\n                        \"titleColor\",\n                    ],\n                }\n            }\n        }\n    }\n}","import kpCollection from './kpCollection';\n\nimport article from './article';\n\nimport pageHome from './pageHome';\nimport pageMap from './pageMap';\nimport pageTopic from './pageTopic';\n\nimport pageGrid from './pageGrid';\nimport pageList from './pageList';\nimport pageTimeline from './pageTimeline';\nimport pageAnnotate from './pageAnnotate';\nimport pageMedia from './pageMedia';\n\nimport device from './device';\n\nexport default [\n    kpCollection,\n    article,\n    pageHome,\n    pageMap,\n    pageTopic,\n    pageGrid,\n    pageList,\n    pageTimeline,\n    pageAnnotate,\n    pageMedia,\n    device\n]","import schema from \"./schema\";\nimport uiSchema from \"./uiSchema\";\nimport formData from \"./formData\"\nimport PreviewTemplate from \"../../preview/KioskPreview\"\n\nexport default {\n    id: 1,\n    schemaType: 'documents',\n    name: 'pageGrid',\n    schema: schema,\n    uiSchema: uiSchema,\n    formData: formData,\n    preview: {\n        template: PreviewTemplate\n    }\n}","import uiPreview from \"./uiPreview\"\nimport settings from \"../page/settings/uiSchema\"\nimport header from \"./gridHeader/uiSchema\"\nimport media from \"./gridMedia/uiSchema\"\nimport body from \"./gridBody/uiSchema\"\n\nexport default {\n    \"ui:field\": \"pageEditor\",\n    \"ui:preview\": uiPreview,\n    \"ui:fieldset\": [\n        \"content\",\n        \"settings\"\n    ],\n    \"content\": {\n        \"ui:field\": \"kpPage\",\n        \"ui:fieldset\": [\n            \"header\",\n            \"media\",\n            \"body\"\n        ],\n        \"header\": header,\n        \"media\": media,\n        \"body\": body\n    },\n    \"settings\": settings\n}","import body from \"../../page/pageBody/uiSchema\"\nimport links from \"../gridLinks/uiSchema\"\n\nexport default {\n    ...body,\n    \"links\": links\n}","import schema from \"./schema\";\nimport uiSchema from \"./uiSchema\";\nimport PreviewTemplate from \"../../preview/KioskPreview\"\n\nexport default {\n    id: 1,\n    schemaType: 'documents',\n    name: 'pageList',\n    schema: schema,\n    uiSchema: uiSchema,\n    preview: {\n        template: PreviewTemplate\n    }\n}","import schema from \"../page/schema\"\nexport default schema","import uiPreview from \"./uiPreview\"\nimport settings from \"../page/settings/uiSchema\"\nimport header from \"./listHeader/uiSchema\"\nimport media from \"./listMedia/uiSchema\"\nimport body from \"./listBody/uiSchema\"\n\nexport default {\n    \"ui:field\": \"pageEditor\",\n    \"ui:preview\": uiPreview,\n    \"ui:fieldset\": [\n        \"content\",\n        \"settings\"\n    ],\n    \"content\": {\n        \"ui:field\": \"kpPage\",\n        \"ui:fieldset\": [\n            \"header\",\n            \"media\",\n            \"body\"\n        ],\n        \"header\": header,\n        \"media\": media,\n        \"body\": body\n    },\n    \"settings\": settings\n}","import uiPreview from \"../page/uiPreview\"\nexport default uiPreview","import uiSchema from \"../../page/pageHeader/uiSchema\"\nexport default {\n    ...uiSchema,\n    \"ui:title\": \"Liste\",\n}","import uiSchema from \"../../page/pageMedia/uiSchema\"\n\nexport default {\n    ...uiSchema,\n    \"ui:title\": \"Bakgrunnsbilde\"\n}","import body from \"../../page/pageBody/uiSchema\"\n\nexport default {\n    ...body\n}","import schema from \"./schema\";\nimport uiSchema from \"./uiSchema\";\nimport PreviewTemplate from \"../../preview/KioskPreview\"\n\nexport default {\n    id: 1,\n    schemaType: 'documents',\n    name: 'pageTimeline',\n    schema: schema,\n    uiSchema: uiSchema,\n    preview: {\n        template: PreviewTemplate\n    }\n}","import schema from \"../page/schema\"\nexport default schema","import uiPreview from \"./uiPreview\"\nimport settings from \"../page/settings/uiSchema\"\nimport header from \"./timelineHeader/uiSchema\"\nimport media from \"./timelineMedia/uiSchema\"\nimport body from \"./timelineBody/uiSchema\"\n\nexport default {\n    \"ui:field\": \"pageEditor\",\n    \"ui:preview\": uiPreview,\n    \"ui:fieldset\": [\n        \"content\",\n        \"settings\"\n    ],\n    \"content\": {\n        \"ui:field\": \"kpPage\",\n        \"ui:fieldset\": [\n            \"header\",\n            \"media\",\n            \"body\"\n        ],\n        \"header\": header,\n        \"media\": media,\n        \"body\": body\n    },\n    \"settings\": settings\n}","import uiPreview from \"../page/uiPreview\"\nexport default uiPreview","import uiSchema from \"../../page/pageHeader/uiSchema\"\nexport default {\n    ...uiSchema,\n    \"ui:title\": \"Tidslinje\",\n}","import uiSchema from \"../../page/pageMedia/uiSchema\"\n\nexport default {\n    ...uiSchema,\n    \"ui:title\": \"Bakgrunnsbilder\",\n    \"media\": {\n        ...uiSchema.media,\n        \"ui:options\": {\n            \"grid\": true,\n            \"spacing\": 2\n        },\n        \"ui:fieldset\": [\n            \"backgroundImage\",\n            \"parallaxImage\"\n        ],\n        \"backgroundImage\": {\n            ...uiSchema.media.backgroundImage,\n            \"ui:xs\": 6\n        },\n        \"parallaxImage\": {\n            ...uiSchema.media.parallaxImage,\n            \"ui:xs\": 6\n        }\n    }\n}","import body from \"../../page/pageBody/uiSchema\"\n\nexport default {\n    ...body\n}","import schema from \"./schema\";\nimport uiSchema from \"./uiSchema\";\nimport PreviewTemplate from \"../../preview/KioskPreview\"\n\nexport default {\n    id: 1,\n    schemaType: 'documents',\n    name: 'pageAnnotate',\n    schema: schema,\n    uiSchema: uiSchema,\n    preview: {\n        template: PreviewTemplate\n    }\n}","import schema from \"../page/schema\"\nexport default {\n    ...schema,\n    \"properties\": {\n        ...schema.properties,\n        \"content\": {\n            ...schema.properties.content,\n            \"properties\": {\n                ...schema.properties.content.properties,\n                \"backgroundImage\": {\n                    \"type\": \"image\",\n                    \"cropdata\": true,\n                    \"annotations\": true,\n                    \"filters\": [\"opacity\"],\n                }\n            }\n        }\n    }\n}","import uiPreview from \"./uiPreview\"\nimport settings from \"../page/settings/uiSchema\"\nimport annotateHeader from \"./annotateHeader/uiSchema\"\nimport annotateBody from \"./annotateBody/uiSchema\"\n\nexport default {\n    \"ui:field\": \"pageEditor\",\n    \"ui:preview\": uiPreview,\n    \"ui:fieldset\": [\n        \"content\",\n        \"settings\"\n    ],\n    \"content\": {\n        \"ui:field\": \"kpPage\",\n        \"ui:fieldset\": [\n            \"header\",\n            \"body\"\n        ],\n        \"header\": annotateHeader,\n        \"body\": annotateBody\n    },\n    \"settings\": settings\n}","import uiPreview from \"../page/uiPreview\"\nexport default uiPreview","import uiSchema from \"../../page/pageHeader/uiSchema\"\nexport default {\n    ...uiSchema,\n    \"ui:title\": \"Bildekart\",\n}","import annotateLinks from \"../annotateLinks/uiSchema\"\nimport annotateImage from \"../annotateImage/uiSchema\"\n\nexport default {\n    \"ui:layout\": \"section\",\n    \"ui:title\": \"Markeringer\",\n    \"ui:icon\": \"label\",\n    \"ui:fieldset\": [\n        \"backgroundImage\",\n        \"links\"\n    ],\n    \"ui:settings\": [\n        \"annotateLayout\",\n        \"annotateColor\"\n    ],\n    \"backgroundImage\": annotateImage,\n    \"links\": annotateLinks\n}","export default {\n    \"ui:fieldset\": [\n        \"imageAnnotations\",\n//        \"imageCropdata\",\n//        \"imageFocalpoint\",\n        \"imageFilters\"\n    ],\n    \"imageAnnotations\": {\n        \"ui:field\": \"kpAnnotateImage\",\n        \"ui:title\": \"Markeringer\",\n    },\n    \"ui:minHeight\": 512,\n    \"ui:buttons\": [\n        {\n            \"type\": \"sidebar\",\n            \"icon\": \"search\",\n            \"title\": \"Finn bilde\"\n        }\n    ]\n}","import links from \"../../page/links/uiSchema\"\n\nexport default {\n    ...links,\n    \"ui:field\": \"kpAnnotateArray\",\n    \"ui:title\": \"Markrer\",\n    \"ui:preview\": {\n        \"select\": {\n            \"title\": \"title\"\n        },\n        prepare({formData =[]}) {\n            return {\n                title: formData.length + \" markrer\"\n            }\n        }\n    },\n    \"items\": {\n        ...links.items,\n        \"ui:preview\": {\n            \"select\": {\n                \"badgeContent\": \"badgeContent\",\n                \"imageUrl\": \"imageUrl\",\n                \"typeLabel\": \"typeLabel\",\n                \"title\": \"title\",\n                \"metadata\": \"metadata\",\n            },\n            prepare({formData, formContext, index}) {\n                const { mediaId, media, referenceId, reference } = formData\n    \n                const locale = formContext.currentLocale ||formContext.defaultLocale;\n                const localeId = \"locale:\" + locale\n    \n                const runningHead = formData.runningHead && formData.runningHead[localeId] \n                const title = formData.title && formData.title[localeId] \n                const badgeContent = index + 1\n\n                const localTitle = runningHead && title && runningHead + \": \" + title ||title\n                const referenceTitle = referenceId && reference && reference.title\n    \n                const imageUrl = media && media.imageUrl ||reference && reference.imageUrl\n                const typeLabel = referenceId && reference && reference.documentType\n    \n                let metadata = []\n    \n                referenceId && reference && reference.title && metadata.push(reference.title)\n    \n                return {\n                    badgeContent: badgeContent,\n                    imageUrl: imageUrl,\n                    typeLabel: typeLabel,\n                    title: localTitle || referenceTitle,\n                    metadata: metadata,\n                }\n    \n            }\n        },\n    }\n}","import schema from \"./schema\";\nimport uiSchema from \"./uiSchema\";\nimport PreviewTemplate from \"../../preview/KioskPreview\"\n\nexport default {\n    id: 1,\n    schemaType: 'documents',\n    name: 'pageMedia',\n    schema: schema,\n    uiSchema: uiSchema,\n    preview: {\n        template: PreviewTemplate\n    }\n}","import schema from \"../page/schema\"\nexport default schema","import uiPreview from \"./uiPreview\"\nimport settings from \"../page/settings/uiSchema\"\nimport header from \"./mediaHeader/uiSchema\"\nimport body from \"./mediaBody/uiSchema\"\n\nexport default {\n    \"ui:field\": \"pageEditor\",\n    \"ui:preview\": uiPreview,\n    \"ui:fieldset\": [\n        \"content\",\n        \"settings\"\n    ],\n    \"content\": {\n        \"ui:field\": \"kpPage\",\n        \"ui:fieldset\": [\n            \"header\",\n            \"body\"\n        ],\n        \"header\": header,\n        \"body\": body\n    },\n    \"settings\": settings\n}","import uiPreview from \"../page/uiPreview\"\nexport default uiPreview","import uiSchema from \"../../page/pageHeader/uiSchema\"\nexport default {\n    ...uiSchema,\n    \"ui:title\": \"Media\",\n}","import links from \"../mediaLinks/uiSchema\"\n\nexport default {\n    \"ui:layout\": \"section\",\n    \"ui:title\": \"Innhold\",\n    \"ui:icon\": \"link\",\n    \"ui:fieldset\": [\n        \"links\"\n    ],\n    \"ui:settings\": [\n        \"mediaLayout\",\n    ],\n    \"links\": links\n}","import links from \"../../page/links/uiSchema\"\n\nexport default {\n    ...links,\n    \"ui:title\": \"Media\",\n    \"ui:preview\": {\n        \"select\": {\n            \"title\": \"title\"\n        },\n        prepare({formData =[]}) {\n            return {\n                title: formData.length + \" media\"\n            }\n        }\n    },\n    \"ui:dialog\": {\n        \"query\": {\n            \"models\": \"media\",\n            \"mediaType\": [\"image\",\"video\",\"audio\"]\n        }\n    },\n    \"ui:buttons\": [\n        {\n            \"type\": \"sidebar\",\n            \"icon\": \"search\",\n            \"title\": \"Finn media\",\n        },\n        {\n            \"type\": \"upload\",\n            \"title\": \"Last opp\"\n        }\n    ],\n    \"items\": {\n        ...links.items,\n        \"ui:preview\": {\n            \"select\": {\n                \"imageUrl\": \"imageUrl\",\n                \"typeLabel\": \"typeLabel\",\n                \"title\": \"title\",\n                \"metadata\": \"metadata\",\n            },\n            prepare({formData, formContext, index}) {\n                const { mediaId, media, referenceId, reference } = formData\n    \n                const locale = formContext.currentLocale ||formContext.defaultLocale;\n                const localeId = \"locale:\" + locale\n    \n                const runningHead = formData.runningHead && formData.runningHead[localeId] \n                const title = formData.title && formData.title[localeId] \n\n                const localTitle = runningHead && title && runningHead + \": \" + title ||title\n                const referenceTitle = referenceId && reference && reference.title\n    \n                const imageUrl = media && media.imageUrl ||reference && reference.imageUrl\n                const typeLabel = referenceId && reference && reference.documentType\n    \n                let metadata = []\n    \n                referenceId && reference && reference.title && metadata.push(reference.title)\n    \n                return {\n                    imageUrl: imageUrl,\n                    typeLabel: typeLabel,\n                    title: localTitle || referenceTitle,\n                    metadata: metadata,\n                }\n    \n            }\n        },\n        \"link\": {\n            ...links.items.link,\n            \"linkMedia\": {\n                ...links.items.content.linkMedia,\n                \"ui:sidebar\": {\n                    \"query\": {\n                        \"models\": \"media\",\n                        \"mediaType\": [\"image\",\"video\",\"audio\"]\n                    }\n                }\n            }\n        }\n    }\n}","import schema from \"./schema\";\nimport uiSchema from \"./uiSchema\";\nimport PreviewTemplate from \"../../preview/KioskPreview\"\n\nexport default {\n    id: 1,\n    schemaType: 'documents',\n    name: 'device',\n    schema: schema,\n    uiSchema: uiSchema,\n    preview: {\n        template: PreviewTemplate\n    }\n}","export default {\n    \"type\": \"object\",\n    \"properties\": {\n        \"locale\": {\n            \"type\": \"string\",\n            \"default\": \"no\"\n        },\n        \"documentType\": {\n            \"type\": \"string\",\n            \"default\": \"device\"\n        },\n        \"id\": {\n            \"type\": \"string\"\n        },\n        \"title\": {\n            \"type\": \"string\"\n        },\n        \"content\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"deviceId\": {\n                    \"type\": \"number\"\n                },\n                \"deviceTitle\": {\n                    \"type\": \"string\"\n                },\n                \"deviceType\": {\n                    \"type\": \"string\",\n                    \"enum\": [\"windows\",\"ipad\"],\n                    \"enumNames\": [\"Windows\",\"iPad\"]\n                },\n                \"serialNumber\": {\n                    \"type\": \"string\",\n                },\n                \"placement\": {\n                    \"type\": \"string\",\n                },\n                \"backgroundImage\": {\n                    \"type\": \"image\",\n                    \"focalpoint\": true\n                },\n                \"startPageId\": {\n                    \"type\": \"string\",\n                    \"readonly\": true\n                },\n                \"hasPages\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"reference\",\n                        \"documentType\": \"page\",\n                        \"referenceType\": \"deviceHasPages\",\n                        \"_reverseReferenceType\": \"pageIsPartOf\",\n                        \"_reverseReference\": \"isPartOf[]\",\n                        \"properties\": {\n                            \"content\": {\n                                \"type\": \"object\",\n                                \"properties\": {\n                                    \"icon\": {\n                                        \"type\": \"string\"\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}","import settings from \"./settings/uiSchema\";\nimport header from \"./header/uiSchema\";\nimport media from \"./media/uiSchema\";\nimport hasPages from \"./hasPages/uiSchema\";\nimport uiPreview from \"./uiPreview\";\n\nexport default {\n    \"ui:field\": \"pageEditor\",\n    \"ui:preview\": uiPreview,\n    \"ui:fieldset\": [\n        \"content\",\n//        \"settings\"\n    ],\n    \"settings\": settings,\n    \"content\": {\n        \"ui:field\": \"kpDevice\",\n        \"ui:nav\": true,\n        \"ui:fieldset\": [\n            \"header\",\n            \"media\",\n            \"hasPages\",\n        ],\n        \"header\": header,\n        \"media\": media,\n        \"hasPages\": hasPages\n    }\n}","import icons from \"../../icons\"\n\nexport default {\n    \"select\": {\n        \"imageUrl\" : \"imageUrl\",\n        \"title\" : \"title\",\n        \"description\" : \"description\",\n        \"metadata\" : \"metadata\",\n        \"typeLabel\": \"typeLabel\",\n        \"icon\": \"icon\",\n    },\n    prepare({formData, formContext}) {\n        let { documentType, imageUrl, title, content, description } = formData\n  \n        const defaultLocale = formContext && formContext.defaultLocale\n        const currentLocale = formContext && formContext.currentLocale\n        const locale = defaultLocale ||currentLocale ||formData.locale\n        const localeId = \"locale:\" + locale;\n  \n        let metadata = []\n\n        const backgroundImage = content && content.backgroundImage;\n        const hasPages = content && content.hasPages;\n        const deviceTitle = content && content.deviceTitle\n        const deviceId = content && content.deviceId\n        const deviceType = content && content.deviceType\n\n        const typeLabel = deviceType && documentType + \"/\" + deviceType ||documentType\n\n        if (backgroundImage && backgroundImage.media && backgroundImage.media.imageUrl) {\n            imageUrl = backgroundImage.media.imageUrl\n        }\n      \n        if (hasPages && hasPages.length) {\n            metadata.push(hasPages.length + ' sider')\n        }\n\n        if (deviceId) {\n            metadata.push('#'+deviceId)\n        }\n\n        if (deviceType) {\n            metadata.push(deviceType)\n        }\n\n        let icon\n\n        const deviceIcons = {\n            ...icons,\n            \"windows\": icons[\"deviceWin\"],\n            \"ipad\": icons[\"deviceMac\"],\n        }\n\n        if (deviceType && deviceIcons[deviceType]) {\n            icon = deviceIcons[deviceType]\n        } else {\n            icon = deviceIcons[\"device\"]\n        }\n\n\n\n        return {\n            icon: icon,\n            imageUrl: imageUrl,\n            title: deviceTitle ||title,\n            description: description,\n            metadata: metadata,\n            typeLabel: typeLabel\n        }\n      \n    }\n    \n}","export default {\n    \"ui:field\": \"pageSettings\",\n    \"ui:nav\": true,\n    \"ui:fieldset\": [\n        \"device\",\n    ],\n    \"device\": {\n        \"ui:layout\": \"section\",\n        \"ui:fieldset\": [\n            \"content\"\n        ],\n        \"content\": {\n            \"ui:fieldset\": [\n                \"deviceTitle\",\n                \"deviceId\"\n            ],\n            \"deviceTitle\": {\n                \"ui:title\": \"Intern tittel\"\n            },\n            \"deviceId\": {\n                \"ui:title\": \"DeviceId\"\n            }\n        }\n    }\n}","export default {\n    \"ui:layout\": \"section\",\n    \"ui:icon\": \"settings\",\n    \"ui:options\" : {\n        \"expanded\": true,\n//        \"collapsible\": true,\n        \"spacing\": 2\n    },\n    \"ui:title\": \"Enhet\",\n    \"ui:preview\": {\n        \"select\": {\n            \"description\": \"description\"\n        },\n        prepare({formData, formContext}) {\n            const localeId = \"locale:\" + formContext.currentLocale\n            const description = formData.deviceTitle \n\n            return {\n                description: description\n            }\n\n        }\n    },\n    \"ui:fieldset\": [\n        \"deviceTitle\",\n        \"deviceId\",\n        \"deviceType\",\n        \"serialNumber\",\n        \"startPageId\"\n    ],\n    \"deviceTitle\": {\n        \"ui:title\": \"Intern tittel\"\n    },\n    \"deviceId\": {\n        \"ui:title\": \"Id\",\n    },\n    \"deviceType\": {\n        \"ui:title\": \"Type enhet\",\n    },\n    \"serialNumber\": {\n        \"ui:title\": \"Serienummer\"\n    },\n    \"leadtext\": {\n        \"ui:title\": \"Ingress\",\n        \"ui:widget\": \"textarea\"\n    },\n    \"bodytext\": {\n        \"ui:title\": \"Brdtekst\",\n        \"ui:widget\": \"textarea\"\n    }\n}","export default {\n    \"ui:layout\": \"section\",\n    \"ui:icon\": \"image\",\n    \"ui:title\": \"Bakgrunnsbilde\",\n    \"ui:options\": {\n//        \"collapsible\": true\n    },\n    \"ui:fieldset\": [\n        \"backgroundImage\",\n    ],\n    \"backgroundImage\": {\n        \"ui:buttons\": [\n            {\n                \"icon\": \"search\",\n                \"title\": \"Finn bakgrunnsbilde\",\n                \"type\": \"sidebar\"\n            }\n        ]\n    }\n}","export default {\n    \"ui:layout\": \"section\",\n    \"ui:icon\": \"menu\",\n    \"ui:title\": \"Innhold\",\n    \"ui:options\" : {\n        \"draggable\": true\n    },\n    \"ui:preview\": {\n        \"select\": {\n            \"title\": \"title\"\n        },\n        prepare({formData}) {\n            const count = formData && formData.length;\n            if (count) {\n                return {\n                    \"title\": count + \" sider\"\n                }\n            }\n            return {\n               \"title\": \"Ingen sider\"\n            }\n        }\n    },\n    \"ui:dialog\": {\n        \"query\": {\n            \"models\": \"documents\",\n            \"documentType\": \"page*\"\n        }\n    },\n    \"ui:buttons\": [\n        {\n            \"type\": \"sidebar\",\n            \"icon\": \"search\",\n            \"title\": \"Finn side\"\n        },\n    ],\n    \"items\": {\n        \"ui:options\": {\n            \"editable\": false\n        },\n        \"ui:field\": \"kpDeviceLink\"\n    }\n}","import mediaSchemas from \"@kit-ui/schema/es/Media/schemas\"\nimport schemas from \"./\"\n\nlet schemasByName = {\n}\n\nconst allSchemas = [\n    ...mediaSchemas,\n    ...schemas\n]\n\nallSchemas.map(schema => {\n    const { schemaType, name } = schema\n\n    if (schemaType && name) {\n        schemasByName[schemaType + \"/\" + name] = schema\n    }\n})\n\nexport default schemasByName","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { SchemaBase } from '@kit-ui/schema';\nimport { bulkChange, bulkSubmit } from '../redux/bulk';\n\n\nconst BulkPreview = ({schema = {}, formData = {}, ...props}) => {\n\n    const dispatch = useDispatch()\n    const bulk = useSelector(state => state.bulk)\n\n    const bulkCount = bulk.count\n\n\n    return (\n        <div>\n            Selected: {bulkCount}\n        </div>\n    )\n    \n}\n\nexport default BulkPreview","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { SchemaBase } from '@kit-ui/schema';\nimport { bulkChange, bulkSubmit } from '../redux/bulk';\n\nimport registry from \"../components/registry\"\nimport schemasByName from \"../schemas/schemasByName\"\n\nimport BulkPreview from \"./BulkPreview\"\n\nconst uiSchema = {\n    \"ui:options\": {\n        \"spacing\": 2\n    }\n\n}\n\nconst BulkEditor = ({schema = {}, formData = {}, ...props}) => {\n\n    const renderDebug = () => {\n\n        return (\n            <div style={{position: \"absolute\", bottom: \"100px\", left: 0, right: 0}}>\n                <hr />\n                {JSON.stringify(schema)}\n                <hr />\n                {JSON.stringify(formData)}\n            </div>\n        )\n\n    }\n\n    const dispatch = useDispatch()\n\n    const _onChange = ({formData}) => {\n        dispatch(bulkChange({formData}))\n    }\n\n    const _onSubmit = ({formData}) => {\n        dispatch(bulkSubmit({formData}))\n    }\n\n    const formContext = {}\n\n    return (\n        <div>\n\n            { renderDebug() }\n\n            <BulkPreview />\n\n        <SchemaBase {...registry} \n            noValidate={true}\n            schema={schema}\n            uiSchema={uiSchema}\n            formData={formData}\n            formContext={formContext}\n            onChange={_onChange}\n            onSubmit={_onSubmit} />\n        </div>\n    )\n    \n}\n\nexport default BulkEditor","import React, {useEffect, useState } from \"react\"\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getSubview, getLayout } from '../redux/app';\n\nimport BulkLayout from \"./BulkLayout\"\nimport BulkEditor from \"./BulkEditor\"\n\nconst FinderBulk = ({children}) => {\n    const dispatch = useDispatch()\n    const bulk = useSelector(state => state.bulk)\n\n    useEffect(() => {\n\n        if (bulk.count) {\n            dispatch(getLayout(\"finder/subview\"))\n        } else {\n            dispatch(getLayout(\"finder\"))\n        }\n\n        bulk.count && dispatch(getSubview({\n            title: \"Subview\",\n            description: bulk.count + \" selected\"\n        }))\n\n        \n    }, [bulk.count])\n\n    return (\n        <React.Fragment>\n            <BulkLayout {...bulk} expanded={bulk.count && true}>\n                <BulkEditor {...bulk} /> \n            </BulkLayout>\n            {children}\n        </React.Fragment>\n    )\n\n}\n\nexport default FinderBulk","\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from \"prop-types\"\nimport { NavPath, NavView } from \"@kit-ui/admin\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    finder: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n    },\n    header: {\n        position: \"relative\",\n        height: theme.spacing(8),\n        display: \"flex\",\n        alignItems: \"center\",\n        zIndex: 1,\n        padding: theme.spacing(0,1),\n        \"& + *\": {\n            marginTop: theme.spacing(8),\n            marginRight: theme.spacing(2),\n            marginBottom: theme.spacing(2),\n            marginLeft: theme.spacing(2),\n        }\n    },\n    body: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        overflowY: \"scroll\"\n    },  \n    path: {\n        flexBasis: 0,\n        flexGrow: 1,\n        margin: theme.spacing(0,1),\n    },\n    view: {\n        margin: theme.spacing(1)\n    }\n}));\n\nconst FinderLayout = ({\n    parents,\n    onSelect,\n    viewOptions,\n    view,\n    onView,\n    children,\n    ...props\n}) => {\n\n    const classes = useStyles()\n\n    return (\n        <div className={classes.finder}>\n            <header className={classes.header}>\n                {parents && <NavPath className={classes.path} parents={parents} onSelect={onSelect} /> }\n                { viewOptions && <NavView className={classes.view} options={viewOptions} value={view} onChange={onView} /> }\n            </header>\n            <div className={classes.body}>\n                {children}\n            </div>\n        </div>\n    )\n\n}\n\nFinderLayout.defaultProps = {\n\n}\n\nFinderLayout.propTypes = {\n\n}\n\nexport default FinderLayout;","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getModel, deleteModel, restoreModel, eraseModel, selectModel } from '../redux/modelsById';\nimport { useTranslation } from 'react-i18next';\n\nimport schemasByName from \"../schemas/schemasByName\"\n\nimport { utils } from '@kit-ui/schema';\nconst { getUiPreview } = utils;\n\nconst FinderModel = ({\n    model, \n    viewable = false,\n    linkable = true,\n    selectable = true, \n    editable = true, \n    deletable = true, \n    deleted = false,\n    restorable = true, \n    erasable = true,\n    erased = false,\n    children,\n    ...props\n}) => {\n\n    const { t, i18n } = useTranslation();\n\n    const { modelName, id, uniqueId, source, sourceId, } = model;\n\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        if (modelName && uniqueId && !modelsById[uniqueId]) {\n            dispatch(getModel({modelName: modelName, uniqueId: uniqueId}))\n        }\n    }, [uniqueId])\n\n    const _onClick = props.onClick\n\n    const _onView = () => {\n        props.onView && props.onView() ||props.history && props.history.push(props.location.pathname + '/' + uniqueId)\n    }\n\n    const _onEdit = (event) => {\n        event.stopPropagation()\n        props.onEdit && props.onEdit() ||props.history && props.history.push(props.location.pathname + '/' + uniqueId + \"/edit\")\n    }\n\n    const _onLink = () => {\n        props.onLink && props.onLink() ||props.history && props.history.push(props.location.pathname + '/' + uniqueId + \"/link\")\n    }\n\n    const _onDelete = () => {\n        props.onDelete && props.onDelete() ||dispatch(deleteModel({modelName: modelName, uniqueId: uniqueId}))\n    }\n\n    const _onRestore = () => {\n        props.onRestore && props.onRestore() ||dispatch(restoreModel({modelName: modelName, uniqueId: uniqueId}))\n    }\n\n    const _onErase = () => {\n        props.onErase && props.onErase() ||dispatch(eraseModel({modelName: modelName, uniqueId: uniqueId}))\n    }\n\n    const _onSelect = () => {\n        props.onSelect && props.onSelect() ||dispatch(selectModel({modelName: modelName, uniqueId: uniqueId}))\n    }\n\n    // uniqueModel\n\n    const modelsById = useSelector(state => state.modelsById)\n    const uniqueModel = modelsById && modelsById[uniqueId] ||{}\n\n    const bulkById = useSelector(state => state.bulk.bulkById)\n    const bulkModel = bulkById && bulkById[uniqueId] ||{}\n\n    // uiPreview\n\n    const documentType = uniqueModel && uniqueModel.documentType ||model && model.documentType\n    const documentModel = documentType && schemasByName && schemasByName[\"documents/\" + documentType]\n\n    const mediaType = uniqueModel && uniqueModel.mediaType ||model && model.mediaType\n    const mediaModel = mediaType && schemasByName && schemasByName[\"media/\" + mediaType]\n\n    const collectionType = uniqueModel && uniqueModel.collectionType ||model && model.collectionType\n    const collectionModel = collectionType && schemasByName && schemasByName[\"collections/\" + collectionType]\n    \n    const schemaModel = documentModel ||mediaModel ||collectionModel\n\n    const uiPreview = schemaModel && uniqueModel.uniqueId && getUiPreview({...schemaModel, formData: uniqueModel}) ||{}\n\n    // model\n\n    model = {\n        ...uniqueModel,\n        ...bulkModel,\n        ...model,\n        ...uiPreview\n    }\n\n\n    const {selected, status } = model\n\n    if (selected) {\n        editable = false\n        deletable = false\n    }\n\n    if (status === \"trash\") {\n        deleted = true\n        deletable = false\n    }\n\n    if (status === \"erased\") {\n        erased = true\n        selectable = false\n        editable = false\n        deletable = false\n    }\n\n    /*\n\n    const getToolbar = () => {\n\n        if (selected) {\n            return false\n        }\n\n        if (status === \"erased\") {\n            return false\n        }\n\n        if (status === \"trash\") {\n            return [\n                {\n                    icon: \"restore\",\n                    onClick: _onRestore\n                },\n                {\n                    icon: \"delete_forever\",\n                    onClick: _onErase\n                },\n                \n            ]\n        }\n\n        return [\n            {\n                icon: \"edit\",\n                onClick: _onEdit\n            },\n            {\n                icon: \"delete\",\n                onClick: _onDelete\n            },\n            {\n                icon: \"links\",\n                onClick: _onLink\n            }\n        ]\n\n    }\n\n\n    const toolbar = getToolbar()\n\n    */\n\n    const mediaLabel = mediaType && t('mediaType:'+mediaType)\n    const documentLabel = documentType && t('documentType:'+documentType)\n\n    const modelLabel = documentLabel ||mediaLabel\n    const statusLabel = t('status:'+status)\n\n    const author = model.deletedByName || model.updatedByName || model.createdByName ||\"N/A\"\n    const datetime = model.deletedAt || model.updatedAt || model.createdAt\n\n    model = {\n        ...model,\n        modelLabel: modelLabel,\n        mediaLabel: mediaLabel,\n        documentLabel: documentLabel,\n        statusLabel: statusLabel,\n        author: author,\n        datetime: datetime,\n    }\n\n\n    const childrenWithProps = React.Children.map(children, (child, index) => {\n        // checking isValidElement is the safe way and avoids a typescript error too\n        if (React.isValidElement(child)) {\n\n            return React.cloneElement(child, { \n                ...model,\n                editable: editable,\n                onEdit: _onEdit,\n                viewable: viewable,\n                onView: _onView,\n                linkable: linkable,\n                onLink: _onLink,\n                selectable: selectable,\n                selected: selected,\n                onSelect: _onSelect,\n                deletable: deletable,\n                deleted: deleted,\n                onDelete: _onDelete,\n                restorable: restorable,\n                onRestore: _onRestore,\n                erasable: erasable,\n                erased: erased,\n                onErase: _onErase,\n                onClick: _onClick,\n                ...props\n//                ...child.props\n            });\n        }\n        return child;\n    });\n\n    return (\n        <>\n            {childrenWithProps}\n        </>\n    )\n\n}\n\nexport default FinderModel","import React from 'react';\nimport FinderModel from \"./FinderModel\"\nimport { useTranslation } from 'react-i18next';\nimport { ListView, ListModule } from \"@kit-ui/admin\"\n\nconst ViewList = ({resultsLoaded, ...props}) => {\n    const { t, i18n } = useTranslation('search');\n\n    const { isLoading, resultsByPage, count, page, pages, onPage } = props\n\n    const title = props.title ||t('{{count}} hits', { count });\n    const description = t('{{page}} of {{pages}} pages', { pages, page });\n    const loadingTitle = t('Searching, please wait') + \"...\";\n    const emptyTitle = t('No hits')\n\n    const pagedResults = resultsByPage && resultsByPage[page]\n\n    if (isLoading) {\n        return <ListView title={loadingTitle} />\n    } else if (!count) {\n        return <ListView title={emptyTitle} />\n    }\n    \n    return (\n        <ListView {...props} title={title} description={description}>\n            {pagedResults && pagedResults.map((model, index) => {\n                return (\n                    <FinderModel {...props} model={model} key={index}>\n                        <ListModule />\n                    </FinderModel>\n                )\n            })}\n        </ListView>\n    )\n\n}\n\nexport default ViewList","import React from 'react';\nimport FinderModel from \"./FinderModel\"\nimport { useTranslation } from 'react-i18next';\nimport { TableView, TableModule } from \"@kit-ui/admin\"\n\nconst ViewTable = ({resultsLoaded, ...props}) => {\n    const { t, i18n } = useTranslation('search');\n\n    const { resultsByPage, count, page, pages, onPage } = props\n\n    const title = props.title ||t('{{count}} hits', { count });\n    const description = t('{{page}} of {{pages}} pages', { pages, page });\n    const loadingTitle = t('Searching, please wait') + \"...\";\n    const emptyTitle = t('No hits')\n\n    const pagedResults = resultsByPage && resultsByPage[page]\n\n    return (\n        <TableView {...props} loadingTitle={loadingTitle} emptyTitle={emptyTitle} title={title} description={description}>\n            {pagedResults && pagedResults.map((model, index) => {\n                return (\n                    <FinderModel {...props} model={model}>\n                        <TableModule {...model} key={index} />\n                    </FinderModel>\n                )\n            })}\n        </TableView>\n    )\n\n}\n\nexport default ViewTable","import React from 'react';\nimport FinderModel from \"./FinderModel\"\nimport { useTranslation } from 'react-i18next';\nimport { IconsView, IconsModule } from \"@kit-ui/admin\"\n\nconst ViewGrid = ({resultsLoaded, ...props}) => {\n    const { t, i18n } = useTranslation('search');\n\n    const { isLoading, resultsByPage, count, page, pages, onPage } = props\n\n    const title = props.title ||t('{{count}} hits', { count });\n    const description = t('{{page}} of {{pages}} pages', { pages, page });\n    const loadingTitle = t('Searching, please wait') + \"...\";\n    const emptyTitle = t('No hits')\n\n    const pagedResults = resultsByPage && resultsByPage[page]\n\n    if (isLoading) {\n        return <IconsView title={loadingTitle} />\n    } else if (!count) {\n        return <IconsView title={emptyTitle} />\n    }\n\n    return (\n        <IconsView {...props} title={title} description={description}>\n            {pagedResults && pagedResults.map((model, index) => {\n                return (\n                    <FinderModel {...props} model={model} key={index}>\n                        <IconsModule />\n                    </FinderModel>\n                )\n            })}\n        </IconsView>\n    )\n\n}\n\nexport default ViewGrid","import React from 'react';\nimport FinderModel from \"./FinderModel\"\nimport { useTranslation } from 'react-i18next';\nimport { MasonryView, MasonryModule } from \"@kit-ui/admin\"\n\nconst ViewList = ({resultsLoaded, ...props}) => {\n    const { t, i18n } = useTranslation('search');\n\n    const { isLoading, resultsByPage, count, page, pages, onPage } = props\n\n    const title = props.title ||t('{{count}} hits', { count });\n    const description = t('{{page}} of {{pages}} pages', { pages, page });\n    const loadingTitle = t('Searching, please wait') + \"...\";\n    const emptyTitle = t('No hits')\n\n    const pagedResults = resultsByPage && resultsByPage[page]\n\n    if (isLoading) {\n        return <MasonryView title={loadingTitle} />\n    } else if (!count) {\n        return <MasonryView title={emptyTitle} />\n    }\n    \n    return (\n        <MasonryView {...props} title={title} description={description}>\n            {pagedResults && pagedResults.map((model, index) => {\n                return (\n                    <FinderModel {...props} model={model} key={index}>\n                        <MasonryModule />\n                    </FinderModel>\n                )\n            })}\n        </MasonryView>\n    )\n\n}\n\nexport default ViewList","import React, { useEffect, useState } from 'react';\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from 'react-i18next';\n\nimport { GalleryView, GalleryModule } from \"@kit-ui/admin\"\nimport FinderModel from \"./FinderModel\"\n\nconst ViewGallery = ({resultsLoaded = [], mediaHeight = 180, mediaLayout = \"cover\", ...props}) => {\n    const { t, i18n } = useTranslation(['search']);\n\n    const { query, start, isLoading, count, page, prevPage, nextPage, pages, onPage } = props\n\n    // prev, next buttons\n    \n    if (resultsLoaded && prevPage) {\n\n        resultsLoaded = [\n            {\n                role: \"button\",\n                title: t('Page {{page}}', { page:prevPage }) + \" ...\",\n                mediaWidth: mediaHeight,\n                onClick: () => onPage(prevPage)\n            },\n            ...resultsLoaded\n        ]\n\n    }\n\n    if (resultsLoaded && nextPage) {\n\n        resultsLoaded = [\n            ...resultsLoaded,\n            {\n                role: \"button\",\n                title: t('Page {{page}}', { page:nextPage }) + \" ...\",\n                mediaWidth: mediaHeight,\n                onClick: () => onPage(nextPage)\n            },\n        ]\n\n    }\n\n    const title = props.title ||t('{{count}} hits', { count });\n    const description = t('{{page}} of {{pages}} pages', { pages, page });\n    const loadingTitle = t('Searching, please wait') + \"...\";\n    const emptyTitle = t('No hits')\n\n\n    if (resultsLoaded.length && isLoading && query.start > start) {\n\n        resultsLoaded.pop()\n\n        resultsLoaded = [\n            ...resultsLoaded,\n            {\n                role: \"button\",\n                title: t('Loading page {{page}}', { page:nextPage }) + \" ...\",\n                mediaWidth: mediaHeight,\n            }\n        ]\n    \n    } else if (resultsLoaded.length && isLoading) {\n\n        resultsLoaded.shift()\n\n        resultsLoaded = [\n            {\n                role: \"button\",\n                title: t('Loading page {{page}}', { page:prevPage }) + \" ...\",\n                mediaWidth: mediaHeight,\n            },\n            ...resultsLoaded,\n        ]\n\n    } else if (isLoading) {\n        return <GalleryView title={loadingTitle} />\n    } else if (!count) {\n        return <GalleryView title={emptyTitle} />\n    }\n\n    return (\n        <GalleryView {...props} pages={undefined} padding={0} spacing={2} title={title} description={description}>\n\n            { resultsLoaded && resultsLoaded.map((model, index) => {\n\n                let width, height;\n                    \n                if (model.mediaWidth && model.mediaHeight) {\n                    width = model.mediaWidth\n                    height = model.mediaHeight\n                } else if (model.imageWidth && model.imageHeight) {\n                    width = model.imageWidth\n                    height = model.imageHeight\n                }\n\n                model = {\n                    ...model,\n                    width: Math.floor(mediaHeight * (width / height)) || mediaHeight,\n                    mediaHeight: mediaHeight,\n                    mediaLayout: mediaLayout\n                }\n\n                return (\n                    <FinderModel {...props} layout=\"gallery\" model={model} width={model.width} onClick={model && model.onClick} key={index}>\n                        <GalleryModule />\n                    </FinderModel>\n                )\n            })}\n        </GalleryView>\n    )    \n}\n\nexport default ViewGallery;","import React, {useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getModel, deleteModel, restoreModel, eraseModel, selectModel } from '../redux/modelsById';\n\nimport ButtonBase from \"@material-ui/core/ButtonBase\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport SelectIcon from \"@material-ui/icons/ChevronRight\"\n\nimport Typography from \"@material-ui/core/Typography\"\n\nimport {ModuleLabel } from \"@kit-ui/admin\"\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    module: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"flex-start\",\n        alignItems: \"center\",\n        margin: theme.spacing(1),\n\n        \n    },\n\n    header: {\n        margin: theme.spacing(2),\n        flexBasis: 0,\n        flexGrow: 1,\n        color: \"inherit\",\n        textAlign: \"center\",\n\n    },\n    title: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontWeight: \"bold\",\n        fontSize: 24\n    },\n\n    footer: {\n        display: \"flex\",\n        overflow: \"hidden\",\n        \"& > * + *\": {\n            marginLeft: theme.spacing(1)\n        }\n    },\n    select: {\n        }\n\n\n}));\n\n\nconst FinderPreview = ({model, ...props}) => {\n\n    const dispatch = useDispatch()\n\n    const { modelName, uniqueId } = model\n\n    useEffect(() => {\n        if (modelName && uniqueId && !modelsById[uniqueId]) {\n            dispatch(getModel({modelName: modelName, uniqueId: uniqueId}))\n        }\n    }, [uniqueId])\n\n    const classes = useStyles()\n\n    const modelsById = useSelector(state => state.modelsById)\n    const uniqueModel = modelsById && modelsById[uniqueId] ||{}\n\n    model = {\n        ...model,\n        ...uniqueModel,\n    }\n\n    const { title, description, documentType, content } = model\n\n    return (\n        <div className={classes.module}>\n            <header className={classes.header}>\n                <Typography className={classes.title} component=\"h2\">{title}</Typography>\n                <Typography className={classes.description} component=\"h3\">{description}</Typography>\n                <ModuleLabel>{documentType}</ModuleLabel>\n           </header>\n            <div className={classes.content}>\n                {JSON.stringify(content)}\n            </div>\n            <footer className={classes.footer}>\n                footer\n            </footer>\n        </div>\n\n    )\n\n    \n}\n\nexport default FinderPreview","import React, { useEffect, useState } from 'react';\n\nimport {\n    ColumnView,\n    ColumnList,\n    ColumnModule,\n} from \"../components/\"\n\nimport FinderPreview from \"./FinderPreview\"\nimport FinderModel from \"./FinderModel\"\n\nconst ViewColumn = ({layout = \"list\", resultsLoaded, onPage, ...props})  => {\n\n    const _onEdit = () => {\n        alert(\"edit\")\n    }\n\n    return (\n        <ColumnView>\n            <ColumnList>\n\n                    {resultsLoaded && resultsLoaded.map((model, index) => {\n                        return (\n                            <FinderModel model={model} onEdit={_onEdit}>\n                                <ColumnModule  />\n                            </FinderModel>\n                        )\n                    })}\n\n            </ColumnList>\n            <ColumnList>\n                <FinderPreview model={{title: \"Untitled\"}} />\n            </ColumnList>\n        </ColumnView>\n    )\n\n}\n\nViewColumn.defaultProps = {\n}\n\nexport default ViewColumn","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport { deleteModel, restoreModel, eraseModel, selectModel } from '../redux/modelsById';\n\nimport ViewList from \"./ViewList\"\nimport ViewTable from \"./ViewTable\"\nimport ViewIcons from \"./ViewIcons\"\nimport ViewMasonry from \"./ViewMasonry\"\nimport ViewGallery from \"./ViewGallery\"\nimport ViewColumn from \"./ViewColumn\"\n\nconst FinderView = ({view = \"list\", template, ...props}) => {\n\n    const { t, i18n } = useTranslation()\n\n    const templates = {\n        \"list\": ViewList,\n        \"table\": ViewTable,\n        \"icons\": ViewIcons,\n        \"masonry\": ViewMasonry,\n        \"gallery\": ViewGallery,\n        \"column\": ViewColumn\n    }\n\n    // actions\n\n    const dispatch = useDispatch()\n\n    const _onEdit = ({uniqueId}) => {\n        uniqueId && props.history.push(props.location.pathname + '/' + uniqueId + \"/edit\")\n    }\n\n    const _onDelete = ({modelName, uniqueId}) => {\n        dispatch(deleteModel({modelName: modelName, uniqueId: uniqueId}))\n    }\n\n    const _onRestore = ({modelName, uniqueId}) => {\n        dispatch(restoreModel({modelName: modelName, uniqueId: uniqueId}))\n    }\n\n    const _onErase = ({modelName, uniqueId}) => {\n        dispatch(eraseModel({modelName: modelName, uniqueId: uniqueId}))\n    }\n\n    const _onSelect = ({modelName, uniqueId}) => {\n        dispatch(selectModel({modelName: modelName, uniqueId: uniqueId}))\n    }\n\n    // template\n\n    if (!template && templates[view]) {\n        template = templates[view]\n    } else if (!template) {\n        template = \"list\"\n    }\n    \n    const Template = template\n\n    // sortOptions\n\n    const sortOptions = props.sortOptions && props.sortOptions.map(option => {\n        \n        if (typeof option === \"string\" ||typeof option === \"number\") {\n            return {\n                label: t(\"sort:\"+option),\n                value: option\n            }\n        }\n\n        return option\n\n    })\n\n    // rowsOptions\n\n    const rowsOptions = props.rowsOptions && props.rowsOptions.map(option => {\n        \n        if (typeof option === \"string\" ||typeof option === \"number\") {\n            return {\n                label: t('view:{{rows}} rows', { rows: option }),\n                value: option\n            }\n        }\n\n        return option\n\n    })    \n\n    if (Template) {\n        return (\n            <Template {...props} sortOptions={sortOptions} rowsOptions={rowsOptions} />\n        )\n        \n    }\n\n\n}\n\nFinderView.defaultProps = {\n}\n\nexport default FinderView","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getView, getSort } from '../redux/finder';\nimport { getQuery } from '../redux/searchByUrl';\nimport qs from 'query-string';\n\nimport Bulk from \"./Bulk\"\n\nimport FinderLoader from \"./FinderLoader\"\nimport FinderLayout from \"./FinderLayout\"\nimport View from \"./View\"\n\nconst FinderQuery = ({query = {}, viewOptions = [], ...props}) => {\n    const dispatch = useDispatch()\n\n    const app = useSelector(state => state.app)\n    const finder = useSelector(state => state.finder)\n\n    // set query\n\n    const pathname = props.location.pathname\n    const sq = props.location.search && qs.parse(props.location.search)\n\n    let q = []\n\n    query.q && q.push(query.q)\n    sq.q && q.push(sq.q)\n\n    query = {\n        ...query,\n        url: pathname,\n        collectionId: query.collectionId ||app && app.collectionId,\n        siteId: query.siteId ||app && app.siteId,\n        page: sq.page || 1,\n        rows: sq.rows ||10,\n        sort: sq.sort ||query.sort ||undefined,\n        fl: query.fl ||\"id,parentId,uniqueId,title,imageUrl,documentType,mediaType,mediaWidth,mediaHeight,updatedByName\",\n        q: q && q.join(\" \") ||undefined,\n    };\n\n\n    // query\n\n    useEffect(() => {\n        query.models && dispatch(getQuery(query))\n    }, [pathname, query.models, query.q, sq.sort, sq.rows])\n\n    // search\n\n    const searchByUrl = useSelector(state => state.searchByUrl)\n    const currentSearch = searchByUrl && searchByUrl[query.url] ||{}\n    \n    const _onPage = (page) => {\n        const sq = props.location.search && qs.parse(props.location.search)\n        const url = props.location.pathname + \"?\" + qs.stringify({...sq, page: page});\n        props.history.replace(url)\n\n        dispatch(getQuery({\n            ...query,\n            page: page\n        }))\n    }\n\n    const _onCreate = () => {\n        props.history.push(props.location.pathname + '/' + query.documentType + \"/new\")\n    }\n\n    const _onSelect = ({url}) => {\n        url && props.history.push(url)\n    }\n\n    const _onRows = (rows) => {\n        const sq = props.location.search && qs.parse(props.location.search)\n        const url = props.location.pathname + \"?\" + qs.stringify({...sq, rows: rows});\n        props.history.replace(url)\n\n//        dispatch(getSort({sort}))\n\n    }\n\n    const _onSort = (sort) => {\n        const sq = props.location.search && qs.parse(props.location.search)\n        const url = props.location.pathname + \"?\" + qs.stringify({...sq, sort: sort});\n        props.history.replace(url)\n\n//        dispatch(getSort({sort}))\n\n    }\n\n    const _onView = (view) => {\n        const sq = props.location.search && qs.parse(props.location.search)\n        const url = props.location.pathname + \"?\" + qs.stringify({...sq, view: view});\n        props.history.replace(url)\n\n//        dispatch(getView({view}))\n\n    }\n\n    const view = sq.view || finder.view || viewOptions && viewOptions[0] ||\"list\"\n\n    return (\n        <Bulk>\n            <FinderLayout {...finder} {...sq} onSelect={_onSelect} onView={_onView}>\n                <View {...finder} {...sq} {...props} {...currentSearch} view={view} onPage={_onPage} onSort={_onSort} onRows={_onRows} />\n            </FinderLayout>\n        </Bulk>\n    )\n\n\n\n}\n\nFinderQuery.defaultProps = {\n}\n\nexport default FinderQuery","import { API } from \"../settings\"\nimport { createSlice } from '@reduxjs/toolkit'\nimport qs from 'query-string';\n\nimport EXIF from 'exif-js';\nimport * as mm from 'music-metadata-browser';\n\n\nconst uploadByUrlSlice = createSlice({\n    name: 'upload',\n    initialState: {\n    }, \n    reducers: {\n        requestUpload(state, action) {\n            const { id, requested } = action.payload\n\n            return {\n                ...state,\n                [id]: {\n//                    acceptedFiles: acceptedFiles,\n//                    rejectedFiles: rejectedFiles,\n                    requested: requested,\n                    received: 0,\n                    count: 0,\n                    resultsLoaded: []\n                }\n            }\n        },\n        receiveUpload(state, action) {\n            const { id, results } = action.payload\n\n            return state\n        },\n        requestUploadModel(state, action) {\n            const { id, model } = action.payload\n\n            return {\n                ...state,\n                [id]: {\n                    ...state[id],\n//                    received: state[id].received + 1,\n                }\n            }\n            \n        },\n        receiveUploadModel(state, action) {\n            const { id, data } = action.payload\n\n            return {\n                ...state,\n                [id]: {\n                    ...state[id],\n                    count: state[id].count + 1,\n                    resultsLoaded: [\n                        ...state[id].resultsLoaded,\n                        data\n                    ]\n                }\n            }\n        },\n        receiveUploadProgress(state, action) {\n            const { id, progress } = action.payload\n\n            return state\n            \n        },\n        receiveUploadStatus(state, action) {\n            const { id, status } = action.payload\n\n            return state\n        }\n    }\n})\n\nexport const getUpload = ({id, acceptedFiles = [], uploadData = { status: \"upload\" }}) => dispatch => {\n\n    const requested = acceptedFiles.length ||0\n\n    dispatch(requestUpload({id, requested}))\n\n    acceptedFiles && acceptedFiles.map((file, index) => {\n//      dispatch(requestUploadModel({id}))\n        dispatch(getUploadUrl({id, file, uploadData}))\n    })\n\n}\n\nexport const getUploadUrl = ({id, file, uploadData = {}}) => dispatch => {\n\n    console.log('getUploadMetadata', file)\n\n    const { name, type, size } = file\n\n    uploadData = {\n        ...uploadData,\n        title: uploadData.title || name,\n        filename: name,\n        mimeType: type,\n        mediaSize: size,\n        content: {\n            ...uploadData.content,\n            title: name,\n            filename: name\n        }\n    }\n\n    // where to upload?\n\n    let url = API + '/admin/api/media/upload';\n  \n    if (type.startsWith('image/')) {\n        url = url + '/image'\n    } else if (type.startsWith('video/')) {\n        url = url + '/video'\n    } else if (type.startsWith('audio/')) {\n        url = url + '/audio'\n    } else {\n        url = url + '/misc'\n    }\n\n    console.log('url', url);\n\n    const payload = JSON.stringify(uploadData);\n\n    fetch(url, {\n        method: \"POST\",\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json; charset=utf-8\",\n        },\n        body: payload\n    })\n    .then(\n        response => response.json(),\n        error => console.log('An error occurred.', error)\n    )\n    .then(data => dispatch(getUploadData({id, file, data})))        \n\n}\n\n\n\nexport const getUploadData = ({id, file, data}) => dispatch => {\n\n    // uniqueId + uploadUrl\n\n    const { uniqueId, uploadUrl } = data;\n\n    dispatch(receiveUploadModel({id, data}))\n\n    const handleStatus = (uniqueId, event) => {\n        let uploadProgress;\n\n        if (event && event.lengthComputable) {\n            uploadProgress = Math.round(event.loaded * 100 / event.total);\n        } else {\n            uploadProgress = 100\n        }\n    \n        let url = API + '/admin/api/media/upload/status/' + uniqueId\n    \n        fetch(url, {\n            method: \"GET\",\n            headers: {\n                \"Accept\": \"application/json\",\n            },\n        })\n        .then(\n            response => response.json(),\n            error => console.log('An error occurred.', error)\n        )\n        .then(data => {\n            dispatch(receiveUploadStatus(uniqueId, data))\n        })\n\n    }\n\n    const _onProgress = (event) => {\n        let uploadProgress;\n\n        if (event.lengthComputable) {\n            uploadProgress = Math.round(event.loaded * 100 / event.total);\n        } else {\n            uploadProgress = 100\n        }\n\n        console.log(\"PROGRESS\", uploadProgress)\n    \n//        dispatch(receiveUploadProgress(uniqueId, uploadProgress))\n    \n    }\n\n\n    // do the upload\n\n    let payload = new FormData();\n    payload.append('file', file);\n\n    var xhr = new XMLHttpRequest();\n//    onLoadStart && xhr.upload.addEventListener(\"load\", (event) => _onLoadStatus(event), false);\n        xhr.upload.addEventListener(\"progress\", (event) => _onProgress(event), false);\n//    onAbort && xhr.upload.addEventListener(\"abort\", (event) => _onAbort(event), false);\n//    onError && xhr.upload.addEventListener(\"error\", (event) => _onError(event), false);\n//    onLoad && xhr.upload.addEventListener(\"load\", (event) => _onLoad(event), false);\n//    onTimeout && xhr.upload.addEventListener(\"timeout\", (event) => _onTimeout(event), false);\n//    onLoadEnd && xhr.upload.addEventListener(\"loadend\", (event) => _onLoadEnd(event), false);\n    xhr.open(\"POST\", uploadUrl);\n    xhr.send(payload);\n\n\n//    getUploadModel({id, file, uploadData, callback: (props) => dispatch(handleUpload(props))})\n\n}\n\n\n\nexport const { requestUpload, requestUploadModel, receiveUploadModel, receiveUploadStatus, receiveUploadProgress } = uploadByUrlSlice.actions\nexport default uploadByUrlSlice.reducer","import React from 'react';\nimport PropTypes from \"prop-types\"\nimport Dropzone from 'react-dropzone'\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Paper from '@material-ui/core/Paper';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport CloudDoneIcon from '@material-ui/icons/CloudDone';\n\nimport Typography from '@material-ui/core/Typography';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyles = makeStyles(theme => ({\n    upload: {\n        position: \"sticky\",\n        zIndex: 2,\n        bottom: 0,\n        color: \"inherit\",\n\n        minHeight: theme.spacing(16),\n\n        \"&[aria-expanded=true]\": {\n            top: 0,\n            height: \"100%\",\n\n            \"& $dropzone\": {\n                margin: 0\n            },\n\n            \"& $dropButton\": {\n                border: 0\n            }\n\n        },\n\n       \"& + *\": {\n            marginTop: theme.spacing(8),\n        }\n   \n    },\n    closeButton: {\n        position: \"absolute\",\n        zIndex: \"2\",\n        top: \"0\",\n        right: \"0\",\n        margin: theme.spacing(1),\n    },\n    dropzone: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        flexGrow: 1,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        color: \"inherit\",\n//        overflow: \"hidden\",\n        margin: theme.spacing(2),\n    },\n    dropButton: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        flexGrow: 1,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        border: \"1px solid\",\n        borderColor: theme.palette.divider,\n        backgroundColor: theme.palette.background.default,\n        backgroundColor: \"#eee\",\n        color: theme.palette.text.secondary,\n\n        \"&:hover\": {\n            cursor: \"pointer\"\n        },\n\n        \"& > *\": {\n            margin: theme.spacing(.5)\n        },\n\n    },\n    label: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"14px\",\n        fontWeight: \"normal\"\n    },\n\n}));\n\nconst UploadDropzone = ({className, accept, multiple, onUpload, onCancel, currentUpload = {}, children, expanded = false, ...props}) => {\n    const { t, i18n } = useTranslation('dialog');\n    const classes = useStyles()\n\n    const handleDrop = (acceptedFiles, rejectedFiles) => {\n        onUpload && onUpload(acceptedFiles)\n        console.log('acceptedFiles', acceptedFiles)\n        console.log('rejectedFiles', rejectedFiles)\n    }\n\n    const { requested, received } = currentUpload;\n\n    let label\n\n    if (!expanded) {\n        label = t('Upload more');\n    } else if (received > 0 && requested < received) {\n        label = t('Uploading {{requested}} of {{received}}', { requested, received }) + \"...\";\n    } else {\n        label = t('Click or drop files to upload');\n    }\n\n    const ButtonClose = ({className, onClick}) => {\n        return (\n            <IconButton className={className} onClick={onClick}>\n                <CloseIcon />\n            </IconButton>\n        )\n    }\n\n    return (\n        <div className={classes.upload} aria-expanded={expanded}>\n            <Dropzone multiple={multiple} accept={accept} onDrop={handleDrop}>\n                {({getRootProps, getInputProps}) => (\n                    <div className={classes.dropzone} {...getRootProps()}>\n                        <input {...getInputProps()} />\n                        <Paper className={classes.dropButton} elevation={1} square={true}>\n                            <CloudUploadIcon className={classes.icon} />\n                            <Typography className={classes.label}>{label}</Typography>\n                        </Paper>\n                    </div>\n                )}\n            </Dropzone>\n            {expanded && <ButtonClose className={classes.closeButton} onClick={onCancel} /> }\n        </div>\n    )\n    \n}\n\nUploadDropzone.propTypes = {\n    onUpload: PropTypes.func\n}\n\nUploadDropzone.defaultProps = {\n    multiple: true,\n    accept: \"image/*, video/*, audio/*\",\n}\n\nexport default UploadDropzone","import React, {useEffect, useState } from \"react\"\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getApp, getLayout, getParents } from '../redux/app';\nimport { getUpload } from '../redux/uploadByUrl';\n\nimport View from \"./View\"\nimport UploadDropzone from \"../Upload/UploadDropzone\"\n\nconst MediaUpload = (props) => {\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        dispatch(getLayout(\"finder\"))\n    }, [])\n\n    const app = useSelector(state => state.app)\n    const menuByUrl = app && app.menuByUrl\n\n    const { pathname } = props.location\n\n    useEffect(() => {\n        menuByUrl && dispatch(getParents({menuByUrl, pathname: pathname}))\n    }, [menuByUrl, pathname])\n\n\n    const _onUpload = (acceptedFiles = []) => {\n\n        const uploadData = {\n            collectionId: app.collectionId,\n            status: \"upload\"\n        }\n\n        dispatch(getUpload({\n            id: pathname,\n            acceptedFiles,\n            uploadData\n        }))\n\n    }\n\n\n    const uploadByUrl = useSelector(state => state.uploadByUrl)\n\n    const currentUpload = uploadByUrl && uploadByUrl[pathname] ||{}\n\n\n    return (\n        <>\n            <View {...currentUpload} {...props} />\n            <UploadDropzone onUpload={_onUpload} />\n        </>\n    )\n\n}\n\nMediaUpload.defaultProps = {\n}\n\nexport default MediaUpload","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport FinderModel from \"./FinderModel\"\nimport { TreeView, TreeList, TreeModule } from \"../components\"\n\nconst DocumentTreeList = ({\n    parent,\n    resultsLoaded,\n    getChildren,\n    onToggle,\n    onSelect,\n    onDragEnd,\n    ...props\n}) => {\n\n    const searchByUrl = useSelector(state => state.searchByUrl)\n    const modelsById = useSelector(state => state.modelsById)\n\n    const finder = useSelector(state => state.finder)\n    const menuByUrl = finder.menuByUrl\n    const parents = finder.parents\n\n    const DraggableChild = ({child, level, index}) => {\n\n        child = {\n            ...child,\n            ...modelsById[child.uniqueId],\n            url: parent.url + \"/\" + child.uniqueId\n        }\n\n        !searchByUrl[child.url] && getChildren(child)\n\n        const childrenSearch = searchByUrl[child.url]\n        const children = childrenSearch && childrenSearch.resultsLoaded && childrenSearch.resultsLoaded.map(child => {\n            return {\n                ...child,\n                url: parent.url + \"/\" + child.uniqueId\n            }\n        })\n\n        let selected = false\n\n        parents.map(parent => {\n            if (parent.url && parent.url === child.url) {\n                selected = true\n            }\n        })\n\n        let collapsible, expanded\n\n        if (menuByUrl[child.url]) {\n            expanded = menuByUrl[child.url].expanded\n        }\n\n        if (children && children.length) {\n            collapsible = true\n//            expanded = true\n        }\n\n        child = {\n            ...child,\n            selected: selected,\n            collapsible: collapsible,\n            expanded: selected || expanded,\n        }\n\n        return (\n            <Draggable index={index} draggableId={child.url} key={child.url}>\n                {(provided, snapshot) => (\n                    <FinderModel {...props} model={child} onSelect={() => onSelect(child)} onToggle={() => onToggle(child)}>\n                        <TreeModule {...child} index={index} draggable={{provided, snapshot}} level={level}>\n                        { child.expanded && <DroppableChildren {...child} children={children} level={level+1} /> }\n                        </TreeModule>\n                    </FinderModel>\n                )}\n            </Draggable>\n        )\n\n    }\n\n    const DroppableChildren = ({children, index, level, ...parent}) => {\n\n        return (\n            <Droppable isCombineEnabled={true} index={index} droppableId={parent.url} key={parent.url}>\n                {(provided, snapshot) => (\n                    <TreeList droppable={{provided, snapshot}}>\n                        {children && children.map((child, index) => {\n                            return (\n                                <DraggableChild child={child} level={level} index={index} />\n                            )\n                        })}\n                    </TreeList>\n                )}\n            </Droppable>\n\n        )\n        \n    }\n\n    return (\n        <TreeView>\n            <DragDropContext onDragEnd={onDragEnd}>\n                { parent && <DroppableChildren {...parent} index={0} level={1} /> }\n            </DragDropContext>        \n        </TreeView>\n    )\n\n\n}\n\nDocumentTreeList.defaultProps = {\n}\n\nexport default DocumentTreeList","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport FinderModel from \"./FinderModel\"\n\nimport {\n    ColumnView,\n    ColumnList,\n    ColumnModule,\n} from \"../components/ColumnView\"\n\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\n\nconst TreeColumn = ({\n    resultsLoaded,\n    parent,\n    getChildren,\n    onToggle,\n    onSelect,\n    onEdit,\n    onCreate,\n    onDragEnd,\n    ...props\n}) => {\n\n    const searchByUrl = useSelector(state => state.searchByUrl)\n    const modelsById = useSelector(state => state.modelsById)\n\n    const finder = useSelector(state => state.finder)\n    const parents = finder.parents\n\n    const DraggableChild = ({child = {}, level, index}) => {\n\n        !searchByUrl[child.url] && getChildren(child)\n\n        const currentSearch = searchByUrl[child.url]\n        const children = currentSearch && currentSearch.resultsLoaded && currentSearch.resultsLoaded\n\n        let selected = false\n\n        parents.map(parent => {\n            if (parent.url && parent.url === child.url) {\n                selected = true\n            }\n        })\n\n        let collapsible = false\n\n        if (children && children.length) {\n            collapsible = true\n        }\n\n        child = {\n            ...child,\n            selected: selected,\n            collapsible: collapsible,\n        }\n\n        return (\n            <Draggable index={index} draggableId={child.url} key={child.url}>\n                {(provided, snapshot) => (\n                    <FinderModel model={child} onSelect={() => onSelect(child)}>\n                        <ColumnModule {...child} index={index} draggable={{provided, snapshot}} level={level}>\n                        </ColumnModule>\n                    </FinderModel>\n                )}\n            </Draggable>\n        )\n\n    }    \n    \n\n    const DroppableChildren = ({children, index, level, ...parent}) => {\n\n        return (\n            <Droppable isCombineEnabled={true} index={index} droppableId={parent.url} key={parent.url}>\n                {(provided, snapshot) => (\n                    <ColumnList droppable={{provided, snapshot}}>\n                        {children && children.map((child, index) => {\n                            return (\n                                <DraggableChild child={child} level={level} index={index} key={index} />\n                            )\n                        })}\n                    </ColumnList>\n                )}\n            </Droppable>\n\n        )\n        \n    }\n\n    return (\n        <ColumnView>\n            <DragDropContext onDragEnd={onDragEnd}>\n                { parents && parents.map((parent, index) => {\n                    return <DroppableChildren {...parent} index={index} level={index+2} />\n                })}\n            </DragDropContext>\n        </ColumnView>\n    )\n\n\n\n\n}\n\nTreeColumn.defaultProps = {\n}\n\nexport default TreeColumn","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getMenuTree, getMenuTreeNode, toggleMenuItem } from '../redux/finder';\nimport { getQuery } from '../redux/searchByUrl';\nimport { receiveSave } from '../redux/modelsById';\nimport { API } from \"../redux/settings\"\nimport qs from 'query-string';\n\nimport TreeListView from \"./DocumentTreeList\"\nimport TreeColumnView from \"./DocumentTreeColumn\"\nimport FinderLayout from \"./FinderLayout\"\n\nconst DocumentTree = (props) => {\n    const dispatch = useDispatch()\n\n    const pathname = props.location.pathname\n    const sq = props.location.search && qs.parse(props.location.search)\n\n    const app = useSelector(state => state.app)\n    const finder = useSelector(state => state.finder)\n    const menuByUrl = finder && finder.menuByUrl\n\n\n    const menuItem = menuByUrl && menuByUrl[pathname]\n    const parents = finder && finder.parents\n\n    useEffect(() => {\n        dispatch(getMenuTree(menuItem))\n    }, [pathname])\n\n    const [treeParent, setTreeParent] = useState({})\n    const [query, setQuery] = useState({})\n\n    useEffect(() => {\n\n        parents && parents.map(parent => {\n            if (parent.type === \"tree\") {\n                setTreeParent(parent) \n            }\n        })\n\n\n    }, [parents])\n\n    // set top query from treeParent\n\n    useEffect(() => {\n\n        treeParent && treeParent.query && setQuery({\n            ...treeParent.query,\n            url: treeParent && treeParent.url,\n            collectionId: app && app.collectionId,\n            fl: \"id,parentId,uniqueId,title,imageUrl,documentType,mediaType,mediaWidth,mediaHeight,updatedByName\",\n        })\n\n    }, [treeParent])\n\n    // query\n\n    let q = []\n    \n    query.q && q.push(query.q)\n    sq.q && q.push(sq.q)\n\n    useEffect(() => {\n\n        query.url && dispatch(getQuery({\n            ...query, \n            page: sq.page || 1,\n            rows: sq.rows ||10,\n            sort: sq.sort ||query.sort ||undefined,\n            q: q && q.join(\" \") ||undefined,\n        }))\n\n    }, [query.url, sq.q, sq.sort, sq.rows])\n\n    // get parent\n\n    const searchByUrl = useSelector(state => state.searchByUrl)\n    const currentSearch = searchByUrl && searchByUrl[query.url] ||{}\n    const resultsLoaded = currentSearch && currentSearch.resultsLoaded\n\n    const [parent, setParent] = useState(null)\n\n\n\n    useEffect(() => {\n\n        resultsLoaded && setParent({\n            ...treeParent,\n            children: resultsLoaded && resultsLoaded.map(child => {\n                return {\n                    ...child,\n                    url: child && child.uniqueId && pathname + \"/\" + child.uniqueId\n                }\n            })\n        })\n\n    }, [resultsLoaded])\n\n    // get children\n\n    const _getChildren = ({uniqueId, id}) => {\n\n        dispatch(getQuery({\n            url: query.url + \"/\" + uniqueId,\n            models: query.models,\n            fl: query.fl,\n            q: sq.q ||undefined,\n            parentId: id,\n            fl: \"id,parentId,uniqueId,title,imageUrl,documentType,mediaType,mediaWidth,mediaHeight,updatedByName\",\n        }))\n        \n    }\n\n    useEffect(() => {\n        parent && parent.children && parent.children.map(child => _getChildren(child))\n    }, [parent])\n    \n    // actions\n\n    const _onSelect = ({url}) => {\n        if (sq) {\n            url = url + \"?\" + qs.stringify(sq);\n        }\n\n        url && props.history.push(url)\n    }\n\n    const _onToggle = ({url}) => {\n        url && dispatch(toggleMenuItem({url}))\n    }    \n\n    const _onCreate = ({url, id}) => {\n        const parentId = Number.isInteger(id) && id ||null\n        const createUrl = url && url + \"/new?\" + qs.stringify({documentType: \"pageTopic\", parentId: parentId})\n        createUrl && props.history.push(createUrl)\n    }\n\n\n    const _onSubmit = ({formData = {}, queries = []}) => {\n\n        const url = API + '/admin/api/documents';\n\n        fetch(url, {\n            method: \"POST\",\n            headers: {\n                \"Accept\": \"application/json\",\n                \"Content-Type\": \"application/json; charset=utf-8\",\n            },\n            body: JSON.stringify(formData)\n        })\n        .then(\n            response => response.json(),\n            error => console.log('An error occurred.', error)\n        )\n        .then(formData => {\n            dispatch(receiveSave(formData))\n            queries && queries.map(query => dispatch(getQuery(query)))\n        })\n\n    }\n\n    const _onDragEnd = (results) => {\n\n        const { draggableId, source, destination, combine } = results\n\n        if (source && destination && source.droppableId !== destination.droppableId) {\n\n            const id = searchByUrl[draggableId].query.parentId\n            const parentId = searchByUrl[destination.droppableId].query.parentId ||null\n\n            const queries = [\n                {\n                    ...searchByUrl[source.droppableId].query,\n                    url: source.droppableId\n                },\n                {\n                    ...searchByUrl[destination.droppableId].query,\n                    url: destination.droppableId\n                }\n            ]\n\n            _onSubmit({\n                formData: {\n                    id: id,\n                    parentId: parentId\n                },\n                queries: queries\n            })\n\n\n        } else if (combine && combine.draggableId !== source.droppableId && draggableId !== combine.draggableId) {\n\n            const id = searchByUrl[draggableId].query.parentId\n            const parentId = searchByUrl[combine.draggableId].query.parentId ||null\n\n            const queries = [\n                {\n                    ...searchByUrl[source.droppableId].query,\n                    url: source.droppableId\n                },\n                {\n                    ...searchByUrl[combine.draggableId].query,\n                    url: combine.draggableId\n                }\n            ]\n\n            _onSubmit({\n                formData: {\n                    id: id,\n                    parentId: parentId\n                },\n                queries: queries\n            })\n\n        }\n\n    }\n\n    // viewOptions\n\n    const viewOptions = [\"list\",\"column\"]\n    const view = sq.view ||viewOptions[0]\n\n    const _onView = (view) => {\n        const sq = props.location.search && qs.parse(props.location.search)\n        const url = props.location.pathname + \"?\" + qs.stringify({...sq, view: view});\n        props.history.replace(url)\n    }\n\n    // template\n\n    const templates = {\n        \"list\": TreeListView,\n        \"column\": TreeColumnView\n    }\n    \n    let template;\n\n    if (!template && templates[view]) {\n        template = templates[view]\n    } else if (!template) {\n        template = \"list\"\n    }\n    \n    const Template = template\n\n\n    return (\n        <FinderLayout {...finder} viewOptions={viewOptions} view={view} onView={_onView}>\n            <Template {...props} \n                {...currentSearch}\n                parent={parent}\n                getChildren={_getChildren}\n                onToggle={_onToggle}\n                onSelect={_onSelect}\n                onCreate={_onCreate}\n                onDragEnd={_onDragEnd} />\n        </FinderLayout>\n    )\n\n\n\n}\n\nDocumentTree.defaultProps = {\n}\n\nexport default DocumentTree","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getLayout } from '../redux/app';\nimport { getFinder, getMenuItem, getParents } from '../redux/finder';\n\nimport FinderLoader from \"./FinderLoader\"\nimport FinderQuery from \"./FinderQuery\"\nimport FinderUpload from \"./FinderUpload\"\n\nimport DocumentTree from \"./DocumentTree\"\n\nconst templates = {\n    \"finder/query\": FinderQuery,\n    \"finder/tree\": DocumentTree,\n    \"tree\": DocumentTree,\n    \"treeitem\": DocumentTree,\n    \"upload\": FinderUpload,\n}\n\nconst Finder = (props) => {\n    const pathname = props.location.pathname\n    const finder = useSelector(state => state.finder)\n\n    const menuByUrl = finder.menuByUrl\n    const menuItem = pathname && menuByUrl && menuByUrl[pathname] ||{}\n\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        dispatch(getLayout(\"finder\"))\n    }, [])\n\n    const template = menuItem && menuItem.template\n    const FinderTemplate = templates && templates[template] ||FinderQuery\n\n    return (\n        <FinderLoader {...props}>\n            <FinderTemplate \n                query={menuItem && menuItem.query}\n                views={menuItem && menuItem.views}\n                {...props} />\n        </FinderLoader>\n    )\n\n}\n\nFinder.defaultProps = {\n}\n\nexport default Finder","import { API } from \"../settings\"\nimport { createSlice } from '@reduxjs/toolkit'\nimport { requestModel, receiveModel } from \"../modelsById\"\n\nconst editorSlide = createSlice({\n    name: 'editor',\n    initialState: {\n        isLoading: true,\n//        isSaving: undefined,\n        pathname: undefined,\n        collectionId: undefined,\n        uniqueId: undefined,\n        parents: [],\n        currentId: undefined,\n        schema: {},\n        uiSchema: {},\n        formData: {},\n        formContext: {\n            isLoading: true,\n            isSaving: undefined,\n        },\n        dialog: {}\n    }, \n    reducers: {\n        requestEditor(state, action) {\n            const { pathname } = action.payload\n            return {\n                ...state,\n                pathname: pathname,\n                isLoading: true,\n                formContext: {\n                    ...state.formContext,\n                    isLoading: true\n                }\n            }\n        },\n        receiveEditor(state, action) {\n            const { pathname, uniqueId, languages } = action.payload\n            return {\n                ...state,\n                pathname: pathname,\n                uniqueId: uniqueId,\n                isLoading: false,\n                formContext: {\n                    ...state.formContext,\n                    languages: languages,\n                    isLoading: false\n                }\n            }\n        },\n        requestParents(state, action) {\n            return state            \n        },\n        receiveParents(state, action) {\n            const { parents } = action.payload\n            return {\n                ...state,\n                parents: parents,\n                formContext: {\n                    ...state.formContext,\n                    parents: parents\n                }\n            }\n        },\n        requestEdit(state, action) {\n            const { uniqueId } = action.payload\n\n            return {\n                isLoading: true,\n                formData: {\n                    uniqueId: uniqueId\n                }\n            }\n\n        },\n        receiveEdit(state, action) {\n            const { uniqueId, ...formData } = action.payload\n\n            if (uniqueId) {\n                return {\n                    ...state,\n                    uniqueId: uniqueId,\n                    formData: {\n                        ...formData,\n                        uniqueId: uniqueId\n                    }\n                }\n            } else {\n                return {\n                    ...state,\n                    formData: formData\n                }\n            }\n\n        },\n        requestSave(state, action) {\n           return {\n                ...state,\n                isSaving: true,\n                formContext: {\n                    ...state.formContext,\n                    isSaving: true\n                }\n            }\n\n        },\n        receiveSave(state, action) {\n            const { uniqueId, ...formData } = action.payload\n\n            return {\n                ...state,\n                isSaving: false,\n                formData: {\n                    ...formData,\n                    uniqueId: uniqueId\n                },\n                formContext: {\n                    ...state.formContext,\n                    isSaving: false\n                }\n            }\n        },\n        receiveCurrentId(state, action) {\n            const { currentId } = action.payload\n            return {\n                ...state,\n                currentId: currentId,\n                formContext: {\n                    ...state.formContext,\n                    currentId: currentId,\n                }\n            }\n        },\n        receiveCurrentLocale(state, action) {\n            const { currentLocale } = action.payload\n            return {\n                ...state,\n                currentLocale: currentLocale,\n                formContext: {\n                    ...state.formContext,\n                    currentLocale: currentLocale,\n                }\n            }\n        },\n        requestDialog(state, action) {\n            return {\n                ...state,\n                dialog: {},\n            }\n        },\n        receiveDialog(state, action) {\n            const { id, schema, uiSchema, formData, onChange } = action.payload\n            return {\n                ...state,\n                dialog: {\n                    id: id,\n                    expanded: true,\n                    schema: schema,\n                    uiSchema: uiSchema,\n                    formData: formData,\n                    onChange: onChange\n                },\n            }\n        }        \n    }\n})\n\nexport const getEditor = ({pathname, uniqueId, schema, uiSchema}) => (dispatch, getState) => {\n    dispatch(requestEditor({pathname}))\n\n    const state = getState()\n    const app = state.app\n    const finder = state.finder\n\n    dispatch(getParents({url: pathname, uniqueId}))\n\n    schema && uiSchema && dispatch(receiveEditor({pathname, uniqueId, languages: app.languages}))\n\n}\n\nexport const getParents = ({url, uniqueId}) => (dispatch, getState) => {\n\n    const state = getState()\n    const menuByUrl = state.finder.menuByUrl\n    const menuById = state.finder.menuById\n\n    const pathnames = url.split('/');\n    pathnames.pop()\n\n    const parentUrl = pathnames.join(\"/\")\n\n    let parents = []\n\n    let parent = menuByUrl[parentUrl] || menuById[pathnames.length-1]\n\n    // find parent by last child\n\n    if (parent) {\n\n        console.log('parents by last child', parent)\n\n        while (parent) {\n            parents.push(parent)\n            parent = parent.parentId && menuById[parent.parentId] || !parent.id && parent.parentUrl && menuByUrl[parent.parentUrl]\n        }\n\n        parents = parents.reverse()\n\n    } else {\n\n        let path = [], pathUrl\n\n        pathnames.map(pathname => {\n\n            path.push(pathname)\n            pathUrl = path.join('/')\n\n            console.log('parents by path', pathUrl)\n\n\n            if (menuByUrl[pathUrl]) {\n                parents.push(menuByUrl[pathUrl])\n            }\n\n        })\n\n\n    }\n\n\n    if (uniqueId) {\n        parents = parents.filter(parent => parent.uniqueId !== uniqueId)\n    }\n\n\n    dispatch(receiveParents({parents}))\n  \n}\n\n/** Edit model from uniqueId */\n\nexport const editModel = ({modelName = \"documents\", uniqueId, ...formData}) => dispatch => {\n\n    const url = API + '/admin/api/' + modelName + '/' + uniqueId;\n\n    if (uniqueId) {\n        dispatch(requestEdit({uniqueId}))\n        \n        fetch(url, {\n            method: \"GET\",\n            headers: {\n                \"Accept\": \"application/json\",\n                \"Content-Type\": \"application/json; charset=utf-8\",\n            }})\n            .then(\n                response => response.json(),\n                error => console.log('An error occurred.', error)\n            )\n            .then(formData => {\n                dispatch(receiveEdit(formData))\n                dispatch(receiveModel(formData))\n            })\n\n    } else if (formData) {\n        dispatch(receiveEdit(formData))\n    }\n\n}\n\n/** Save model from formData  */\n\nexport const saveModel = ({modelName = \"documents\", ...formData}) => dispatch => {\n    const url = API + '/admin/api/' + modelName;\n\n    dispatch(requestSave())\n\n    fetch(url, {\n        method: \"POST\",\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json; charset=utf-8\",\n        },\n        body: JSON.stringify(formData)\n    })\n    .then(\n        response => response.json(),\n        error => console.log('An error occurred.', error)\n    )\n    .then(formData => {\n        dispatch(receiveSave(formData))\n        dispatch(receiveModel(formData))\n    })\n\n}\n\nexport const { \n    requestEditor, receiveEditor, \n    requestParents, receiveParents,\n    receiveCurrentId, \n    receiveCurrentLocale,\n    requestEdit, receiveEdit, \n    requestSave, receiveSave, \n    requestDialog, receiveDialog\n} = editorSlide.actions\nexport default editorSlide.reducer","import React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    dialog: {\n        backgroundColor: theme.palette.background.default,\n        backgroundColor: \"#eee\",\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n    }\n}));\n\n\nconst DialogBase = ({children}) => {\n    const classes = useStyles()\n\n    return (\n        <section className={classes.dialog}>\n            {children}\n        </section>\n    )\n}\n\nexport default DialogBase","import React, { useState } from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\n\nconst useStyles = makeStyles(theme => ({\n    footer: {\n        position: \"absolute\",\n        zIndex: 2,\n        bottom: 0,\n        left: 0,\n        right: 0,\n\n        backgroundColor: \"inherit\",\n\n        \"& + *\": {\n            marginBottom: theme.spacing(8)\n        }\n\n    },\n    navigation: {\n        backgroundColor: \"inherit\",\n        width: \"100%\"\n    },\n}));\n\nconst Menu = withStyles(theme => ({\n    root: {\n        minHeight: theme.spacing(8)\n    }\n}))(BottomNavigation);\n\nconst MenuItem = withStyles(theme => ({\n    root: {\n    },\n    label: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"12px !important\",\n    },\n    selected: {\n    },\n}))(BottomNavigationAction);\n\nconst DialogFooter = ({menu = [], tabIndex = 0}) => {\n \n    const classes = useStyles();\n\n    const [value, setValue] = useState(tabIndex);\n\n    const handleChange = (event, index) => {\n        setValue(index)\n\n        if (menu[index].onClick) {\n            menu[index].onClick()\n        }\n\n    }\n    \n    return (\n        <Paper component=\"footer\" elevation={4} square={true} className={classes.footer}>\n            <Menu \n                value={value} \n                onChange={handleChange}\n                showLabels\n                className={classes.navigation}>\n                    { menu && menu.map((item, index) => {\n                        return (\n                            <MenuItem {...item} key={index} />\n                        )\n                    })}\n            </Menu>\n        </Paper>\n    )\n}\n\nexport default DialogFooter","import React, { useState, useEffect } from 'react';\nimport { AppSearch, NavTabs } from '@kit-ui/admin';\nimport { makeStyles } from '@material-ui/core/styles';\nimport _ from \"lodash\"\n\nconst useStyles = makeStyles(theme => ({\n    search: {\n        position: \"absolute\",\n        zIndex: 2,\n        top: 0,\n        right: 0,\n        bottom: \"auto\",\n        left: 0,\n        display: \"flex\",\n        backgroundColor: \"inherit\",\n        color: \"black\",\n        width: \"100%\",\n        height: theme.spacing(8),\n        overflow: \"hidden\",\n\n        transition: \".125s ease-out\",\n        marginTop: theme.spacing(-8),\n\n        \"&[aria-expanded=true]\": {\n            marginTop: 0,\n \n            \"& + *\": {\n                marginTop: theme.spacing(8),\n            }\n    \n        },\n\n \n    },\n}));\n\n\nconst DialogSearch = ({placeholder, q, onChange, onReset, expanded = false}) => {\n    const classes = useStyles()\n\n    return (\n        <AppSearch className={classes.search} placeholder={placeholder} onChange={onChange} onReset={onReset} expanded={expanded} />\n    )\n}\n\nexport default DialogSearch","import React, { useState } from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\n\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nimport Typography from '@material-ui/core/Typography';\n\nconst DialogTabpanel = withStyles(theme => ({\n    root: {\n        minHeight: theme.spacing(3),\n    },\n    indicator: {\n        bottom: \"auto\",\n        top: 0\n    },\n}))(Tabs);\n\nconst DialogTab = withStyles(theme => ({\n    root: {\n        textTransform: 'none',\n        letterSpacing: 0,\n        minWidth: 0,\n        minHeight: theme.spacing(3),\n        paddingLeft: 0,\n        paddingRight: 0,\n        marginLeft: 0,\n        marginRight: theme.spacing(2),\n        color: \"inherit\",\n        '&:hover': {\n          color: \"inherit\",\n          opacity: 1,\n        },\n        '&$selected': {\n          opacity: 1,\n        },\n        '&:focus': {\n          opacity: 1,\n        },\n    },\n    selected: {},\n\n}))(props => <Tab disableRipple label={<DialogLabel {...props} />} {...props} />);\n\nconst useStyles = makeStyles(theme => ({\n    label: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"14px\",\n    },\n    title: {\n        fontWeight: \"bold\",\n    },\n    count: {\n        color: theme.palette.text.secondary,\n        marginLeft: theme.spacing(.5)\n    }\n\n}))\n\nconst DialogLabel = ({title, count}) => {\n\n    const classes = useStyles()\n\n    return (\n        <Typography className={classes.label}>\n            <b className={classes.title}>{title}</b>\n            { count && <i className={classes.count}>({count})</i> || \"\" }\n        </Typography>\n    )\n}\n\n\nconst DialogTabs = ({tabs = [], tabIndex = 0}) => {\n    const [value, setValue] = useState(tabIndex);\n\n    const handleChange = (event, index) => {\n        setValue(index)\n\n        if (tabs[index].onClick) {\n            tabs[index].onClick()\n        }\n\n    }\n\n    return (\n        <DialogTabpanel\n            value={tabIndex ||value}\n            onChange={handleChange}\n            indicatorColor=\"primary\"\n            textColor=\"inherit\">\n            { tabs && tabs.map((tab, index) => {\n                return (\n                    <DialogTab {...tab} value={index} key={index} />\n                )\n            })}\n        </DialogTabpanel>        \n    )\n\n}\n\nexport default DialogTabs;","import React, { Component } from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\n\nimport DialogTabs from \"./DialogTabs\"\n\nimport { NavSettings } from \"@kit-ui/admin\"\n\nconst useStyles = makeStyles(theme => ({\n    header: {\n        position: \"sticky\",\n        zIndex: 2,\n        top: 0,\n        padding: 0,\n        marginLeft: theme.spacing(2),\n        marginRight: theme.spacing(2),\n//        minHeight: theme.spacing(4.5),\n        borderTop: \"1px solid\",\n        borderColor: theme.palette.divider,\n    },\n    tabs: {\n\n    },\n    settings: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        margin: theme.spacing(.75,.5)\n\n    }\n}))\n\nconst DialogHeader = ({tabs, tabIndex, settings}) => {\n\n    const classes = useStyles()\n\n    return (\n        <header className={classes.header}>\n            { tabs && <DialogTabs className={classes.tabs} tabs={tabs} tabIndex={tabIndex} /> }\n            { settings && <NavSettings className={classes.settings} settings={settings} /> }\n        </header>\n    )\n}\n\n\nexport default DialogHeader;","import React, { useRef, useState, useEffect } from 'react';\nimport { withResizeDetector } from 'react-resize-detector';\nimport { makeStyles } from '@material-ui/core/styles';\nimport _ from \"lodash\"\n\nconst useStyles = makeStyles(theme => ({\n    section: {\n        position: \"absolute\",\n        zIndex: 1,\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        overflowY: \"scroll\",\n    }\n}));\n\nconst DialogSection = ({height, onScroll, children}) => {\n    const classes = useStyles()\n\n    const parentRef = useRef()\n\n    const handleScroll = _.debounce((event) => {\n        onScroll && onScroll(event)\n    }, 500)\n\n    useEffect(() => {\n        const ph = parentRef.current && parentRef.current.offsetHeight\n        const ch = parentRef.current && parentRef.current.children && parentRef.current.children[0] && parentRef.current.children[0].offsetHeight\n\n        parentRef.current.addEventListener(\"scroll\", handleScroll);\n\n        if (ph < ch) {\n//            setOverflow(true)\n        }\n\n        return () => {\n            parentRef.current.removeEventListener(\"scroll\", handleScroll);\n        };\n\n    }, [children, height]);\n\n\n    return (\n        <section className={classes.section} ref={parentRef}>\n            {children}\n        </section>\n    )\n}\n\nexport default withResizeDetector(DialogSection)","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyles = makeStyles(theme => ({\n    loader: {\n        display: \"flex\",\n        alignItems: \"baseline\",\n        color: theme.palette.text.secondary,\n        margin: theme.spacing(2),\n    },\n    title: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"14px\",\n        color: theme.palette.text.primary\n    }\n}));\n\nconst ResultsLoader = ({query = {}, results = {}, children}) => {\n    const { t, i18n } = useTranslation('search');\n\n    const classes = useStyles()\n\n    const { models = [], count, rows } = results\n\n    let title;\n\n    const q = query.q && query.q.replace('*', '')\n\n    if (rows && !count) {\n        title = t('No hits')\n    } else if (!models.length) {\n        title = t('Searching, please wait', {q}) + \"...\";\n    }\n\n    if (title) {\n        return (\n            <div className={classes.loader}>\n                <Typography className={classes.title}>{title}</Typography>\n            </div>\n        )\n    }\n\n    return children\n\n}\n\nexport default ResultsLoader","import React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useTranslation } from 'react-i18next';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport MoreIcon from '@material-ui/icons/MoreHoriz';\n\nconst useStyles = makeStyles(theme => ({\n    footer: {\n        position: \"relative\",\n        width: \"100%\",\n        minHeight: theme.spacing(16),\n\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n\n    },\n    button: {\n        flexGrow: 1,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n\n        \"&:hover\": {\n            cursor: \"pointer\"\n        },\n\n        /*\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        */\n        border: \"1px solid\",\n        borderColor: theme.palette.divider,\n        backgroundColor: theme.palette.background.default,\n        backgroundColor: \"#eee\",\n        color: theme.palette.text.secondary,\n\n        minHeight: theme.spacing(12),\n        padding: 0,\n        margin: theme.spacing(2),\n\n        \"& > *\": {\n            margin: theme.spacing(.5)\n        },\n\n    },\n    label: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"14px\",\n        fontWeight: \"normal\"\n    },\n\n}));\n\nconst ResultsFooter = ({start, rows, count, page, pages, nextPage, onPage}) => {\n    const { t, i18n } = useTranslation(['search']);\n    const classes = useStyles()\n\n    if (!nextPage) {\n        return false\n    }\n\n    const from = start+rows+1\n    const to = from+rows-1\n\n    const label = t('Get results {{from}}{{to}}', {from, to}) + \" ...\"\n\n    return (\n        <footer className={classes.footer}>\n            <Paper elevation={1} square={true} component=\"button\" className={classes.button} onClick={() => onPage(nextPage)}>\n                {/* <MoreIcon className={classes.icon} /> */}\n                <Typography className={classes.label}>{label}</Typography>\n            </Paper>\n        </footer>\n    )    \n}\n\nexport default ResultsFooter;","import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { loadModel } from '../redux/modelsById';\n\nimport { ListModule, TableModule, GalleryModule } from '@kit-ui/admin';\nimport { getUiPreview } from '@kit-ui/schema/lib';\n\nimport { useTranslation } from 'react-i18next';\nimport qs from 'query-string';\n\nconst layouts = {\n    \"table\": TableModule,\n    \"list\": ListModule,\n    \"gallery\": GalleryModule,\n}\n\nconst ModuleLoader = ({app, dialog, query, model, layout = \"table\", size = \"medium\", modelsSelected = [], onAdd, onRemove, ...props}) => {\n    const { t, i18n } = useTranslation(['dialog']);\n    const dispatch = useDispatch()\n\n    const schemasByName = {}\n\n    const modelsById = useSelector(state => state.modelsById)\n    const modelsBySource = {}\n\n    const { uniqueId, source, sourceId, documentType, mediaType } = model;\n\n    useEffect(() => {\n        if (modelName && uniqueId && !modelsById[uniqueId]) {\n            dispatch(loadModel({modelName: modelName, uniqueId: uniqueId}))\n        }\n    }, [uniqueId])\n\n    const appDocumentType = documentType && app && app.root + \"/\" + documentType\n    const sourceDocumentType = source && \"document/\" + source\n\n    let modelName = model.modelName === \"doc_schemas\" && \"schemas\" ||model.modelName\n    let modelSchema;\n\n    if (modelName === \"users\") {\n        modelSchema = schemasByName['user']\n    } else if (modelName === \"sites\") {\n        modelSchema = schemasByName['site']\n    } else if (modelName === \"collections\") {\n        modelSchema = schemasByName['collection']\n    } else if (modelName === \"doc_schemas\") {\n        modelSchema = schemasByName['schema']\n    }else if (modelName === \"documents\" || documentType) {\n        if (schemasByName[appDocumentType]) {\n            modelSchema = schemasByName[appDocumentType]\n        } else if (source && schemasByName[sourceDocumentType]) {\n            modelSchema = schemasByName[sourceDocumentType]\n        } else if (documentType) {\n            modelSchema = schemasByName[documentType]\n        }\n    } else if (modelName === \"media\" ||mediaType) {\n        modelSchema = mediaType && schemasByName[\"media/\"+mediaType]\n    }\n\n\n    const [preview, setPreview] = useState(model)\n\n    const getImageUrl = (model) => {\n        const { imageUrl, uploadStatus, uploadProgress } = model\n\n        const imageUrlParts = imageUrl && imageUrl.split(\"?\")\n        const imageParams = imageUrlParts && imageUrlParts[1] && qs.parse(imageUrlParts[1])\n\n        if (!imageParams) {\n            return imageUrl\n        }\n\n        const newImageParams = qs.stringify({\n            ...imageParams,\n            uploadStatus: uploadStatus,\n            uploadProgress: uploadProgress,\n            dimension: \"250x250\"\n        })\n\n        const newImageUrl = imageUrlParts[0] + \"?\" + newImageParams\n        \n        return newImageUrl\n\n    }\n\n    const uniqueModel = source && sourceId && modelsBySource && modelsBySource[source + \"/\" + sourceId] || uniqueId && modelsById && modelsById[uniqueId]; //  || model\n\n    useEffect(() => {\n        let uiPreview = {}\n\n        if (modelSchema && uniqueModel) {\n            uiPreview = getUiPreview({...modelSchema, formData: uniqueModel, formContext: {t:t}})\n        }\n\n        const newModel = {\n            ...uniqueModel,\n            ...model,\n            ...uiPreview,\n        }\n\n        const newImageUrl = getImageUrl(newModel)\n\n        setPreview({\n            ...newModel,\n            imageUrl: newImageUrl,\n        })\n\n    }, [uniqueModel])\n\n    const {status, createdAt, createdByName, updatedAt, updatedByName, deletedAt, deletedByName } = preview;\n\n    const author = deletedByName ||updatedByName || createdByName ||\"N/A\"\n    const datetime = deletedAt ||updatedAt || createdAt\n\n    const statusLabel = t(\"status:\"+status ||undefined)\n    const LayoutTemplate = layout && layouts[layout]\n\n    let selected;\n\n    if (source && sourceId) {\n        selected = modelsSelected && modelsSelected.includes(source + \"/\" + sourceId)\n    } else if (uniqueId) {\n        selected = modelsSelected && modelsSelected.includes(uniqueId)\n    }\n\n    const handleSelect = () => {\n\n        console.log(\"ADD/REMOVE\", uniqueModel)\n\n        if (selected) {\n            onRemove && onRemove(uniqueModel)\n        } else {\n            onAdd && onAdd(uniqueModel)\n        }\n\n    }\n\n    const selectable = uniqueModel && true || false\n    const onClick = selectable ? handleSelect : undefined\n\n    return (\n        <LayoutTemplate {...preview} size={size} \n            statusLabel={statusLabel} author={author} datetime={datetime}\n            selectable={selectable} selected={selected} onClick={onClick} />\n    )\n\n}\n\nexport default ModuleLoader","import React from 'react';\n//import { ListLayout } from \"@kit-ui/admin\"\n\nimport ResultsLoader from \"./ResultsLoader\"\nimport ResultsFooter from \"./ResultsFooter\"\nimport DialogModel from \"./DialogModel\"\n\nconst ListLayout = ({children}) => {\n    return <div>{children}</div>\n}\n\nconst ResultsList = ({layout = \"list\", query = {}, results = {}, resultsLoaded = [], selected = [], onPage, ...props}) => {\n\n    return (\n        <ResultsLoader query={query} results={results}>\n            <ListLayout padding={2}>\n                {resultsLoaded && resultsLoaded.map((model, index) => {\n                    return (\n                        <DialogModel model={model} layout={layout} modelsSelected={selected} {...props} key={index} />\n                    )\n                })}\n            </ListLayout>\n            <ResultsFooter {...results} onPage={onPage} />\n        </ResultsLoader>\n    )\n\n}\n\nexport default ResultsList","import React, { useEffect, useState } from 'react';\nimport PropTypes from \"prop-types\";\nimport { Gallery } from \"@kit-ui/admin\"\n\nimport DialogModel from \"./DialogModel\"\nimport ResultsLoader from \"./ResultsLoader\"\nimport ResultsHeader from \"./ResultsHeader\"\nimport ResultsFooter from \"./ResultsFooter\"\n\nconst LayoutGallery = ({children}) => {\n    return children\n}\n\n\nconst ResultsGallery = ({layout = \"gallery\", query = {}, results = {}, resultsLoaded = [], selected = [], onPage, mediaHeight = 120, mediaLayout = \"cover\", spacing = 1, padding = 2, ...props}) => {\n\n    return (\n        <ResultsLoader query={query} results={results}>\n            <Gallery padding={padding} spacing={spacing}>\n                { resultsLoaded && resultsLoaded.map((model, index) => {\n\n                    let width, height;\n                        \n                    if (model.mediaWidth && model.mediaHeight) {\n                        width = model.mediaWidth\n                        height = model.mediaHeight\n                    } else if (model.imageWidth && model.imageHeight) {\n                        width = model.imageWidth\n                        height = model.imageHeight\n                    }\n\n                    model = {\n                        ...model,\n                        width: Math.floor(mediaHeight * (width / height)) || mediaHeight,\n                        mediaHeight: mediaHeight,\n                        mediaLayout: mediaLayout\n                    }\n\n                    return (\n                        <DialogModel {...props} layout=\"gallery\" model={model} modelsSelected={selected} width={model.width} key={index} />\n                    )\n                })}\n            </Gallery>\n            <ResultsFooter {...results} onPage={onPage} />\n        </ResultsLoader>\n    )    \n}\n\nResultsGallery.propTypes = {\n    spacing: PropTypes.number,\n    padding: PropTypes.number,\n    models: PropTypes.array \n}\n\nexport default ResultsGallery;","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: \"flex\",\n        alignItems: \"baseline\",\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"14px\",\n        color: theme.palette.text.primary,\n        \"& * + *\": {\n            marginLeft: theme.spacing(.5)\n        },\n        marginLeft: theme.spacing(2),\n        marginRight: theme.spacing(2),\n        borderTop: \"1px solid\",\n        borderColor: theme.palette.divider,\n        paddingTop: theme.spacing(1)\n    },\n    title: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"14px\",\n        fontWeight: \"bold\"\n    },\n    description: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"14px\",\n    }\n}));\n\nconst ResultsHeader = ({resultsLoaded = [], count, start, rows, pages, page, onPage}) => {\n    const { t, i18n } = useTranslation('search');\n\n    rows = resultsLoaded.length;\n\n    let title;\n\n    if (count > rows) {\n        title = t('{{rows}} of {{count}} hits', { pages, page, count,rows });\n    } else {\n        title = t('{{count}} hits', { pages, page, count, rows });\n    }\n    \n    const classes = useStyles()\n\n    return (\n        <header className={classes.root}>\n            <Typography className={classes.title}>{title}</Typography>\n        </header>\n    )\n\n}\n\nexport default ResultsHeader","import React from 'react';\n//import { ListLayout } from \"@kit-ui/admin\"\nimport { useTranslation } from 'react-i18next';\n\nimport ResultsLoader from \"./ResultsLoader\"\nimport ResultsFooter from \"./ResultsFooter\"\nimport DialogModel from \"./DialogModel\"\n\nconst ListLayout = ({children}) => {\n    return children\n}\n\n\nconst ResultsUploads = ({layout = \"list\", query = {}, results = {}, ...props}) => {\n    const { uploads, resultsLoaded, selected } = results\n    const { t, i18n } = useTranslation('upload');\n\n    if (query.q) {\n\n        return (\n            <ResultsLoader {...props}>\n                <ListLayout padding={2} title=\"Searching uploads\">\n                    {resultsLoaded && resultsLoaded.map((model, index) => {\n                        return (\n                            <DialogModel model={model} layout={layout} modelsSelected={selected} {...props} key={index} />\n                        )\n                    })}\n                </ListLayout>\n                <ResultsFooter {...props} />\n            </ResultsLoader>\n        )\n        \n    }\n\n    if (!uploads.length) {\n        return false\n    }\n\n    const count = uploads.length;\n    const title = t('{{count}} new uploads today', {count});\n\n    return (\n        <ListLayout padding={2}>\n            { uploads && uploads.map((model, index) => {\n                return (\n                    <DialogModel {...props} model={model} modelsSelected={selected} layout=\"list\" key={index} />\n                )\n            })}\n        </ListLayout>\n    )\n\n}\n\nexport default ResultsUploads;","import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport { getMediaSource } from '../redux/modelsById';\n\nimport ResultsList from \"./ResultsList\"\nimport ResultsGallery from \"./ResultsGallery\"\nimport ResultsUploads from \"./ResultsUploads\"\n\nimport { utils } from '@kit-ui/schema';\nconst { getDefaultFormState } = utils\n\nconst templates = {\n    \"list\": ResultsList,\n    \"gallery\": ResultsGallery,\n    \"uploads\": ResultsUploads\n}\n\nconst MediaResults = ({schema, formData, onChange, query = {}, search = {}, layout = \"list\", ...props}) => {\n    const { t, i18n } = useTranslation(['dialog']);\n    const dispatch = useDispatch()\n\n    // schema\n\n    let itemSchema;\n\n    if (schema.type === \"array\") {\n        itemSchema = schema.items\n    } else {\n        itemSchema = schema\n    }\n\n    // set selected\n\n    const [modelsSelected, setModelsSelected] = useState([])\n\n    const getSelected = (formData) => {\n        let items = []\n\n        if (schema.type === \"array\") {\n            items = formData ||[]\n        } else {\n            items = formData && [formData] ||[]\n        }\n\n        const selected = items.map(({media, mediaId}) => { \n\n            if (media.source && media.sourceId) {\n                return media.source + \"/\" + media.sourceId\n            }\n\n            return mediaId\n        })\n\n        setModelsSelected(selected)\n    }\n\n    useEffect(() => {\n        getSelected(formData)\n    }, [formData])\n\n    // change\n\n    const handleChange = (formData) => {\n        const newFormData = getDefaultFormState(schema, formData)\n        onChange(newFormData);\n    }\n\n    // add\n\n    const addModel = (model) => {\n        \n        const item = getDefaultFormState(itemSchema, {\n            mediaId: model.uniqueId,\n            media: model\n        })\n\n        let newFormData;\n\n        if (schema.type === \"array\") {\n            newFormData = [].concat(formData, item);\n        } else {\n            newFormData = item\n        }\n\n        handleChange(newFormData);\n\n    }\n\n    const handleAdd = (model) => {\n        const { uniqueId, sourceId, mediaType } = model;\n\n        console.log('addModel', model)\n\n        if (sourceId) {\n            console.log('sourceId', sourceId)\n\n            const source = {\n                ...model,\n                identifier: sourceId,\n                mimeType: mediaType,\n                collectionId: query.collectionId\n            }\n\n            console.log('source', source)\n\n            dispatch(getMediaSource({\n                ...model,\n                identifier: sourceId,\n                mimeType: mediaType,\n                collectionId: query.collectionId\n            }, (model) => addModel(model)))\n\n        } else if (uniqueId) {\n            addModel(model)\n        }\n     \n    }\n\n    // remove\n\n    const removeItem = ({uniqueId, source, sourceId}) => {\n        return formData.filter(item => item.mediaId !== uniqueId)\n    }\n    \n    const handleRemove = (model) => {\n        const uniqueId = model && model.uniqueId\n\n        console.log('remove', model)\n\n        let newFormData;\n\n        if (schema.type === \"array\") {\n            newFormData = removeItem({uniqueId})\n        } else {\n            newFormData = getDefaultFormState(itemSchema, {\n                mediaId: undefined,\n                media: {}\n            })\n        }\n\n        handleChange(newFormData);\n\n    }\n\n    // get template\n\n    const ResultsTemplate = templates && templates[layout]\n\n    if (!ResultsTemplate) {\n        return (\n            <p>No template for {layout}</p>\n        )\n    }\n\n    return (\n        <ResultsTemplate \n            {...props}\n            {...search}\n            selected={modelsSelected}\n            query={query}\n            onAdd={handleAdd}\n            onRemove={handleRemove} />\n    )\n\n    \n}\n\nexport default MediaResults","import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport { getDocumentSource } from '../redux/modelsById';\n\nimport ResultsList from \"./ResultsList\"\nimport ResultsGallery from \"./ResultsGallery\"\n\nimport { utils } from '@kit-ui/schema';\nconst { getDefaultFormState } = utils;\n\nconst templates = {\n    \"list\": ResultsList,\n    \"gallery\": ResultsGallery\n}\n\nconst DocumentsResults = ({schema, formData, onChange, query = {}, search = {}, layout = \"list\", ...props}) => {\n    const { t, i18n } = useTranslation(['dialog']);\n    const dispatch = useDispatch()\n\n    let itemSchema;\n\n    if (schema.type === \"array\") {\n        itemSchema = schema.items\n    } else {\n        itemSchema = schema\n    }\n\n    const [modelsSelected, setModelsSelected] = useState([])\n\n    const getSelected = (formData) => {\n        let items = []\n\n        if (schema.type === \"array\") {\n            items = formData ||[]\n        } else {\n            items = formData && [formData] ||[]\n        }\n\n        console.log('ITEMS', items)\n\n        const selected = items.map(({reference, referenceId}) => { \n\n            const uniqueId = reference && reference.uniqueId\n\n            if (reference.source && reference.sourceId) {\n                return reference.source + \"/\" + reference.sourceId\n            }\n\n            return uniqueId\n        })\n\n        setModelsSelected(selected)\n\n        \n    }\n\n    useEffect(() => {\n        getSelected(formData)\n    }, [formData])\n\n    const handleChange = (formData) => {\n        const newFormData = getDefaultFormState(schema, formData)\n        console.log(\"NEW\", newFormData)\n        onChange && onChange(newFormData);\n        getSelected(newFormData);\n    }\n\n    const addModel = (model) => {\n\n        console.log(itemSchema)\n\n        const item = getDefaultFormState(itemSchema, {\n            referenceId: model.uniqueId,\n            reference: model\n        })\n\n        let newFormData;\n\n        if (schema.type === \"array\") {\n            newFormData = formData && formData.length && [].concat(formData, item) ||[item];\n        } else {\n            newFormData = item\n        }\n\n        handleChange(newFormData);\n\n    }\n\n    const handleAdd = (model) => {\n        const { source, sourceId, uniqueId, mediaType } = model;\n\n        console.log('addModel', model)\n\n        if (sourceId) {\n\n            console.log('sourceId', sourceId)\n\n            props.addDocumentSource({\n                ...model,\n                collectionId: query.collectionId\n            }, (model) => addModel(model))\n\n        }else if (source && uniqueId) {\n\n            delete model.uniqueId\n            \n            console.log('sourceId', sourceId)\n\n            dispatch(getDocumentSource({\n                ...model,\n                sourceId: uniqueId,\n                collectionId: query.collectionId\n            }, (model) => addModel(model)))\n\n        } else if (uniqueId) {\n            addModel(model)\n        }\n     \n    }\n\n    const removeItem = ({uniqueId}) => {\n        return formData.filter(item => item.referenceId !== uniqueId)\n    }\n    \n    const handleRemove = (model) => {\n        const uniqueId = model && model.uniqueId\n\n        console.log('remove', model)\n\n        let newFormData;\n\n        if (schema.type === \"array\") {\n            newFormData = removeItem({uniqueId})\n        } else {\n            newFormData = getDefaultFormState(itemSchema, {\n                referenceId: undefined,\n                reference: {}\n            })\n        }\n\n        handleChange(newFormData);\n\n    }\n\n    // get template\n\n    const ResultsTemplate = templates && templates[layout]\n\n    if (!ResultsTemplate) {\n        return (\n            <p>No template for {layout}</p>\n        )\n    }\n\n    return (\n        <ResultsTemplate \n            {...props}\n            {...search}\n            selected={modelsSelected}\n            query={query}\n            onAdd={handleAdd}\n            onRemove={handleRemove} />\n    )    \n\n}\n\nexport default DocumentsResults","import React, { useState, useEffect } from 'react';\nimport { getDefaultFormState } from '@kit-ui/schema/lib';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { useTranslation } from 'react-i18next';\n\nimport ResultsList from \"./ResultsList\"\nimport ResultsGallery from \"./ResultsGallery\"\nimport ResultsUploads from \"./ResultsUploads\"\n\nconst templates = {\n    \"list\": ResultsList,\n    \"gallery\": ResultsGallery,\n    \"uploads\": ResultsUploads\n}\n\nconst SearchResultsDefault = ({schema, formData, onChange, query = {}, results = {}, layout = \"list\", ...props}) => {\n    const { t, i18n } = useTranslation(['dialog']);\n\n    // schema\n\n    let itemSchema;\n\n    if (schema.type === \"array\") {\n        itemSchema = schema.items\n    } else {\n        itemSchema = schema\n    }\n\n    // set selected\n\n    const [modelsSelected, setModelsSelected] = useState([])\n\n    const getSelected = (formData) => {\n        let items = []\n\n        if (schema.type === \"array\") {\n            items = formData\n        } else {\n            items = [formData]\n        }\n\n        const selected = items.map(({uniqueId}) => { \n            return uniqueId\n        })\n\n        setModelsSelected(selected)\n    }\n\n    useEffect(() => {\n        getSelected(formData)\n    }, [formData])\n\n    // change\n\n    const handleChange = (formData) => {\n        const newFormData = getDefaultFormState(schema, formData)\n        onChange(newFormData);\n        getSelected(newFormData);\n    }\n\n    // add\n\n    const addModel = (model) => {\n\n        const item = getDefaultFormState(itemSchema, {\n            uniqueId: model.uniqueId,\n            model: model\n        })\n\n        let newFormData;\n\n        if (schema.type === \"array\") {\n            newFormData = [].concat(formData, item);\n        } else {\n            newFormData = item\n        }\n\n        handleChange(newFormData);\n\n    }\n\n    const handleAdd = (model) => {\n        addModel(model)\n    }\n\n    // remove\n\n    const removeItem = ({uniqueId}) => {\n        return formData.filter(item => item.uniqueId !== uniqueId)\n    }\n    \n    const handleRemove = (model) => {\n        const uniqueId = model && model.uniqueId\n\n        console.log('remove', model)\n\n        let newFormData;\n\n        if (schema.type === \"array\") {\n            newFormData = removeItem({uniqueId})\n        } else {\n            newFormData = getDefaultFormState(itemSchema, {\n                uniqueId: undefined,\n            })\n        }\n\n        handleChange(newFormData);\n\n    }\n\n    // get template\n\n    const ResultsTemplate = templates && templates[layout]\n\n    if (!ResultsTemplate) {\n        return (\n            <p>No template for {layout}</p>\n        )\n    }\n\n    return (\n        <ResultsTemplate \n            {...props}\n            results={{\n                ...results,\n                selected: modelsSelected\n            }}\n            query={query}\n            onAdd={handleAdd}\n            onRemove={handleRemove} />\n    )\n\n    \n}\n\nconst mapDispatchToProps = (dispatch) =>\n    bindActionCreators({\n    }, \ndispatch);\n\nconst mapStateToProps = (state) => {\n\treturn {\n        searchByUrl: state.searchByUrl,\n        uploadByUrl: state.uploadByUrl\n\t};\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps,\n)(SearchResultsDefault);","import React from 'react';\n\nimport MediaResults from \"./MediaResults\"\nimport DocumentsResults from \"./DocumentsResults\"\nimport ResultsDefault from \"./SearchResultsDefault\"\n\nconst templates = {\n    \"default\": ResultsDefault,\n    \"media\": MediaResults,\n    \"youtube\": MediaResults,\n    \"vimeo\": MediaResults,\n    \"sketchfab\": MediaResults,\n    \"documents\": DocumentsResults,\n    \"ekultur\": DocumentsResults\n}\n\nconst SearchResults = ({query = {}, ...props}) => {\n\n    const ResultsTemplate = query.models && templates && templates[query.models] ||templates['default']\n\n    if (!ResultsTemplate) {\n        return (\n            <p>No template for {query.models}</p>\n        )\n    }\n\n    return (\n        <ResultsTemplate \n            {...props}\n            query={query} />\n    )\n\n    \n}\n\nexport default SearchResults","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getQuery } from '../redux/searchByUrl';\n\nimport DialogBase from \"./DialogBase\"\nimport DialogSearch from \"./DialogSearch\"\n\nimport DialogHeader from \"./DialogHeader\"\nimport DialogSection from \"./DialogSection\"\n\nimport SearchResults from \"./SearchResults\"\n\nimport qs from 'query-string';\nimport _ from \"lodash\"\n\nconst SearchDialog = ({schema, formData, onChange, onClose, query = {}, ...props}) => {\n    const { t, i18n } = useTranslation(['dialog']);\n    const dispatch = useDispatch()\n\n    const searchByUrl = useSelector(state => state.searchByUrl)\n\n    console.log('query', query)\n\n    // user query\n\n    const [userQ, setUserQ] = useState(\"\")\n\n    const handleQuery = _.debounce((q, event) => {\n        setUserQ(q)\n    }, 500)\n\n    const handleReset = () => {\n        if (q) {\n            setUserQ(\"\")\n        } else if (onClose) {\n            onClose()\n        }\n    }\n\n    // set q\n\n    let q\n\n    if (query.q && userQ) {\n        q = query.q + \" \" + userQ.trim() + \"*\";\n    } else if (userQ) {\n        q = userQ.trim() + \"*\"\n    } else if (query.q) {\n        q = query.q\n    }\n\n    // sort\n\n    const sortOptions = [\n        \"updatedAt DESC\",\n        \"title\", \n    ]\n\n    const [sort, setSort] = useState(sortOptions[0])\n\n    const sortSettings =  {\n        \"name\": \"sort\",\n        \"value\": sort,\n        \"onChange\": (name, value) => setSort(value),\n        \"options\": sortOptions.map(value => {\n            return {\n                label: t(\"sort:\"+value || value),\n                value: value\n            }\n        })\n    }\n\n    // base query\n\n    query = {\n        ...query,\n        url: \"/dialog/search\",\n        start: 0,\n        rows: 20,\n        sort: sort,\n        status: \"NOT trash\",\n        fl: \"uniqueId,source,sourceId,documentType,mediaType,imageUrl,title,description,status,mediaWidth,mediaHeight,updatedAt,updatedByName\",\n        q: q,\n    }\n\n    // dm\n\n    const dmOwnerOptions = [\n        \"*\",\n        \"AHS\",\n        \"NF\", \n    ]\n\n    const [dmOwner, setDmOwner] = useState(dmOwnerOptions[0])\n\n    const dmOwnerSettings =  {\n        \"name\": \"dmOwner\",\n        \"value\": dmOwner,\n        \"onChange\": (name, value) => setDmOwner(value),\n        \"options\": dmOwnerOptions.map(value => {\n            return {\n                label: \"owner:\" + value,\n                value: value\n            }\n        })\n    }\n\n\n    const getMediaSource = (source) => {\n        const queryUrl = query.url + \"/\" + source + \"/\" + query.q\n\n        return {\n            title: \"media/\" + source,\n            layout: \"gallery\",\n            query: {\n                url: queryUrl,\n                models: source,\n                siteId: query.siteId,\n                collectionId: query.collectionId,\n                rows: query.rows,\n                q: query.q\n            }\n        }\n\n    }\n\n    const getMediaType = (mediaType) => {\n        const queryUrl = query.url + \"/\" + mediaType + \"/\" + query.q\n\n        return {\n            title: \"media/\" + mediaType,\n            layout: mediaType.includes(\"audio\") && \"list\" ||\"gallery\",\n            settings: [\n                sortSettings\n            ],\n            query: {\n                ...query,\n                url: queryUrl,\n                mediaType: mediaType\n            }\n        }\n\n    }\n\n    const getMediaSections = () => {\n\n        let mediaTypes = []\n\n        if (Array.isArray(query.mediaType)) {\n            mediaTypes = query.mediaType\n        } else if (query.mediaType) {\n            mediaTypes = [query.mediaType]\n        } else if (query.models === \"media\") {\n            mediaTypes = ['image*','video*','audio*']\n        }\n\n        return mediaTypes && mediaTypes.map(mediaType => {\n            if (mediaType === \"youtube\" || mediaType == \"vimeo\" || mediaType === \"sketchfab\") {\n                return getMediaSource(mediaType)\n            } else {\n                return getMediaType(mediaType)\n            }\n        })\n\n    }\n\n    // get documentSections\n\n    const getDocumentSource = (source) => {\n        return {\n            title: \"documents/\" + source,\n            layout: \"list\",\n            settings: [\n                dmOwnerSettings\n            ],\n            query: {\n                models: source,\n                url: query.url + \"/\" + source + \"/\" + query.q,\n                owner: dmOwner,\n                siteId: query.siteId,\n                collectionId: query.collectionId,\n                rows: query.rows,\n                q: query.q\n            }\n        }\n        \n    }    \n\n    const getDocumentType = (documentType) => {\n        return {\n            title: \"documents/\" + documentType,\n            layout: \"list\",\n            settings: [\n                sortSettings\n            ],\n            query: {\n                ...query,\n                url: query.url + \"/\" + documentType + \"/\" + query.q,\n                documentType: documentType\n            }\n        }\n    }\n\n    const getDocumentSections = () => {\n        let documentTypes = []\n\n        if (Array.isArray(query.documentType)) {\n            documentTypes = query.documentType\n        } else if (query.documentType) {\n            documentTypes = [query.documentType]\n        } else if (query.models === \"documents\") {\n            documentTypes = ['*']\n        }\n\n        return documentTypes && documentTypes.map(documentType => {\n            if (documentType === \"ekultur\") {\n                return getDocumentSource(documentType)\n            } else {\n                return getDocumentType(documentType)\n            }\n        })   \n\n    }\n\n\n    let sections = []\n\n    if (query.models === \"media\") {\n        sections = getMediaSections()\n    } else if (query.models === \"documents\") {\n        sections = getDocumentSections()\n    } else if (query.models === \"ekultur\") {\n        sections = [getDocumentSource(\"ekultur\")]\n    } else if (query.models) {\n        sections = [\n            {\n                title: query.models,\n                query: {\n                    ...query,\n                    models: query.models,\n                    url: query.url + \"/\" + query.models + \"/\" + query.q,\n                }\n            }\n        ]\n    }\n    // get tabs\n\n    const [tabIndex, setTabIndex] = useState(0)\n    const currentTab = sections[tabIndex]\n\n    // get search count\n\n    const getSearchCount = () => {\n        sections.map((section, index) => {\n            const { query } = section;\n\n            if (query.models === \"media\" && tabIndex !== index) {\n                dispatch(getQuery({...query, rows: 0}))\n            }\n\n            if (query.models === \"documents\" && tabIndex !== index) {\n                dispatch(getQuery({...query, rows: 0}))\n            }\n\n        })\n        \n    }\n\n    // setup tabs\n\n    const handleTab = (index) => {\n        setTabIndex(index)\n    }\n\n    const tabs = sections.map((section, index) => {\n        const { title, query } = section;\n\n        const currentSearch = searchByUrl && searchByUrl[query.url]\n        const resultsLoaded = currentSearch && currentSearch.resultsLoaded\n        \n        let count;\n\n        if (section.layout === \"uploads\") {\n            count = section.count\n        } else if (currentSearch && currentSearch.count) {\n            count = currentSearch && currentSearch.count\n        } else if (resultsLoaded && resultsLoaded.length && currentSearch.nextToken) {\n            count = resultsLoaded && resultsLoaded.length && resultsLoaded.length + \"+\";\n        } else if (resultsLoaded && resultsLoaded.length) {\n            count = resultsLoaded && resultsLoaded.length && resultsLoaded.length;\n        }\n\n        return {\n            title: t(title),\n            count: count,\n            onClick: () => handleTab(index)\n        }\n\n    })\n\n    const getSearch = () => {\n        currentTab && currentTab.query && dispatch(getQuery(currentTab.query))\n    }\n\n    useEffect(() => {\n        getSearch()\n    }, [tabIndex, query.q, query.sort, dmOwner])\n\n    // current query and search \n\n    const currentQuery = currentTab && currentTab.query\n    const currentSearch = currentQuery.url && searchByUrl && searchByUrl[currentQuery.url];\n\n    useEffect(() => {\n        getSearchCount()\n    }, [query.q])\n\n    // handle page\n\n    const handlePage = (page) => {\n        dispatch(getQuery({\n            ...currentQuery,\n            page: page,\n            start: currentQuery.rows * (page-1),\n            nextToken: currentSearch && currentSearch.nextToken\n        }))\n    }\n\n    // pages\n    \n    const [pages, setPages] = useState(0)\n    const [currentPage, setCurrentPage] = useState(0)\n    const [nextPage, setNextPage] = useState(0)\n\n    const getPages = () => {\n        const pages = Math.ceil(currentSearch.count/currentSearch.rows)\n        const page = Math.ceil((currentSearch.start+currentSearch.rows)/currentSearch.rows)\n\n        setPages(pages)\n        setCurrentPage(page)\n\n        let nextPage = 0\n\n        for (let p = page; p <= pages; p++) {\n            if (!currentSearch.resultsByPage[p]) {\n                nextPage = p\n                break\n            }\n        }    \n\n        setNextPage(nextPage)\n    \n    }\n\n    useEffect(() => {\n        currentSearch && currentSearch.count && getPages()\n    }, [currentSearch])\n\n    // search\n\n    let search = {\n        placeholder: \"Search\"\n    }\n\n    if (!search.placeholder) {\n\n        if (tabs.length === 1 && currentQuery.models === \"media\" && currentQuery.mediaType) {\n            search.placeholder = t(\"Search media/\" + currentQuery.mediaType)\n        } else if (tabs.length === 1 && currentQuery.models === \"ekultur\" ) {\n            search.placeholder = t(\"Search ekultur\")\n        } else if (query.models === \"media\") {\n            search.placeholder = t(\"Search media\")\n        } else if (query.models === \"documents\") {\n            search.placeholder = t(\"Search documents\")\n        } else {\n            search.placeholder = t(\"Search models\")\n        }\n\n    }\n\n    return (\n        <DialogBase>\n            <DialogSection>\n                <DialogSearch \n                    {...search} \n                    expanded={true}\n                    onChange={handleQuery}\n                    onReset={handleReset} />\n                <DialogHeader \n                    tabs={tabs}\n                    tabIndex={tabIndex}\n                    settings={currentTab && currentTab.settings} />\n                <SearchResults \n                    schema={schema}\n                    formData={formData}\n                    onChange={onChange}\n                    query={currentQuery}\n                    layout={currentTab && currentTab.layout}\n                    search={currentSearch}\n                    results={{\n                        ...currentSearch,\n                        pages: pages,\n                        page: currentPage,\n                        nextPage: nextPage\n                    }}\n                    onPage={handlePage}                    \n                    />\n            </DialogSection>\n        </DialogBase>        \n    )\n\n}\n\n\nexport default SearchDialog","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport DialogBase from \"./DialogBase\"\nimport SearchDialog from \"./SearchDialog\"\n\nconst FavouritesDialog = ({query, favourites, ...props}) => {\n    const { t, i18n } = useTranslation(['dialog']);\n\n    const search = {\n        placeholder: t('Search favorites')\n    }\n\n    const getFavouritesQuery = (uniqueIds = []) => {\n\n        if (uniqueIds.length) {\n            return {\n                ...query,\n                q: \"uniqueId:\" + uniqueIds.join(\" OR \")\n            }\n        } else {\n            return {\n                ...query,\n                q: \"uniqueId:false\"\n            }\n\n        }\n\n        return query\n\n    }\n\n    if (query.models && favourites[query.models]) {\n        query = getFavouritesQuery(favourites[query.models])\n    }\n\n    return (\n        <DialogBase>\n            <SearchDialog query={query} search={search} {...props} />\n        </DialogBase>\n    )\n\n}\n\nFavouritesDialog.defaultProps = {\n    favourites: {\n        media: [],\n        documents: []\n    }\n}\n\nconst mapDispatchToProps = (dispatch) =>\n    bindActionCreators({\n    }, \ndispatch);\n\nconst mapStateToProps = (state) => {\n\treturn {\n        favourites: state.favourites,\n\t};\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps,\n)(FavouritesDialog);","import React from 'react';\nimport PropTypes from \"prop-types\"\nimport Dropzone from 'react-dropzone'\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Paper from '@material-ui/core/Paper';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport CloudDoneIcon from '@material-ui/icons/CloudDone';\n\nimport Typography from '@material-ui/core/Typography';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyles = makeStyles(theme => ({\n    upload: {\n        position: \"sticky\",\n        zIndex: 2,\n        bottom: 0,\n        color: \"inherit\",\n\n        minHeight: theme.spacing(16),\n\n        \"&[aria-expanded=true]\": {\n            top: 0,\n            height: \"100%\",\n\n            \"& $dropzone\": {\n                margin: 0\n            },\n\n            \"& $dropButton\": {\n                border: 0\n            }\n\n        },\n\n       \"& + *\": {\n            marginTop: theme.spacing(8),\n        }\n   \n    },\n    closeButton: {\n        position: \"absolute\",\n        zIndex: \"2\",\n        top: \"0\",\n        right: \"0\",\n        margin: theme.spacing(1),\n    },\n    dropzone: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        flexGrow: 1,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        color: \"inherit\",\n//        overflow: \"hidden\",\n        margin: theme.spacing(2),\n    },\n    dropButton: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        flexGrow: 1,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        border: \"1px solid\",\n        borderColor: theme.palette.divider,\n        backgroundColor: theme.palette.background.default,\n        backgroundColor: \"#eee\",\n        color: theme.palette.text.secondary,\n\n        \"&:hover\": {\n            cursor: \"pointer\"\n        },\n\n        \"& > *\": {\n            margin: theme.spacing(.5)\n        },\n\n    },\n    label: {\n        fontFamily: \"Akkurat, sans-serif\",\n        fontSize: \"14px\",\n        fontWeight: \"normal\"\n    },\n\n}));\n\nconst DialogUpload = ({className, accept, multiple, onUpload, onCancel, currentUpload = {}, children, expanded = false, ...props}) => {\n    const { t, i18n } = useTranslation('dialog');\n    const classes = useStyles()\n\n    const handleDrop = (acceptedFiles, rejectedFiles) => {\n        onUpload && onUpload(acceptedFiles)\n        console.log('acceptedFiles', acceptedFiles)\n        console.log('rejectedFiles', rejectedFiles)\n    }\n\n    const { requested, received } = currentUpload;\n\n    let label\n\n    if (!expanded) {\n        label = t('Upload more');\n    } else if (received > 0 && requested < received) {\n        label = t('Uploading {{requested}} of {{received}}', { requested, received }) + \"...\";\n    } else {\n        label = t('Click or drop files to upload');\n    }\n\n    const ButtonClose = ({className, onClick}) => {\n        return (\n            <IconButton className={className} onClick={onClick}>\n                <CloseIcon />\n            </IconButton>\n        )\n    }\n\n    return (\n        <div className={classes.upload} aria-expanded={expanded}>\n            <Dropzone multiple={multiple} accept={accept} onDrop={handleDrop}>\n                {({getRootProps, getInputProps}) => (\n                    <div className={classes.dropzone} {...getRootProps()}>\n                        <input {...getInputProps()} />\n                        <Paper className={classes.dropButton} elevation={1} square={true}>\n                            <CloudUploadIcon className={classes.icon} />\n                            <Typography className={classes.label}>{label}</Typography>\n                        </Paper>\n                    </div>\n                )}\n            </Dropzone>\n            {expanded && <ButtonClose className={classes.closeButton} onClick={onCancel} /> }\n        </div>\n    )\n    \n}\n\nDialogUpload.propTypes = {\n    onUpload: PropTypes.func\n}\n\nDialogUpload.defaultProps = {\n    multiple: true,\n    accept: \"image/*, video/*, audio/*\",\n}\n\nexport default DialogUpload","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getQuery } from '../redux/searchByUrl';\n\nimport DialogBase from \"./DialogBase\"\nimport DialogSearch from \"./DialogSearch\"\nimport DialogUpload from \"./DialogUpload\"\n\nimport DialogHeader from \"./DialogHeader\"\nimport DialogSection from \"./DialogSection\"\n\nimport SearchResults from \"./SearchResults\"\n\nimport qs from 'query-string';\n\nconst UploadDialog = ({schema, formData, onChange, onClose, query, upload, ...props}) => {\n    const { t, i18n } = useTranslation(['dialog']);\n    const dispatch = useDispatch()\n\n    const searchByUrl = useSelector(state => state.searchByUrl)\n    const uploadByUrl = {}\n\n    const [q, setQ] = useState(\"\")\n\n    const handleQuery = (q) => {\n        setQ(q)\n    }\n\n    const handleReset = () => {\n        if (q) {\n            setQ(\"\")\n        } else if (onClose) {\n            onClose()\n        }\n    }\n\n    const search = {\n        placeholder: t(\"Search uploads\"),\n    }\n\n    // handle upload\n\n    const [uploadSession, setUploadSession] = useState(false)\n\n    const handleUpload = (acceptedFiles = []) => {\n\n        const uploadData = {\n            collectionId: query.collectionId,\n            status: \"upload\"\n        }\n\n        props.getUpload({id: upload.id, session: uploadSession, acceptedFiles, uploadData})\n\n        setUploadSession(true)\n\n    }\n    \n    // current uploads \n\n    const currentUpload = upload.id && uploadByUrl && uploadByUrl[upload.id];\n    const uploadModels = currentUpload && currentUpload.models \n\n    const uploadResults = uploadModels && q && uploadModels.filter((model) => { \n        const { title } = model\n\n        if (title.includes(q)) {\n            return true\n        }\n\n        return false\n    }) ||uploadModels\n\n\n    let placeholder = t(\"Search uploads\")\n\n    const tabs = uploadResults && [\n        {\n            title: t(\"media\"),\n            count: uploadResults.length             \n        }\n    ]\n\n    return (\n        <DialogBase>\n           <DialogSection>\n                <DialogSearch {...search} \n                    placeholder={placeholder}\n                    expanded={uploadResults && true}\n                    onChange={handleQuery}\n                    onReset={handleReset}\n                    \n                />\n                <DialogHeader tabs={tabs}></DialogHeader>\n                <SearchResults \n                    schema={schema}\n                    formData={formData}\n                    onChange={onChange}\n                    query={query}\n                    layout=\"uploads\"\n                    results={{\n                        ...currentUpload,\n                        uploads: uploadResults ||[],\n//                        resultsLoaded: currentUpload && currentUpload.models,\n//                        pages: pages,\n//                        page: currentPage,\n//                        nextPage: nextPage\n                    }}\n                />\n                <DialogUpload \n                    {...upload} \n                    currentUpload={currentUpload} expanded={!currentUpload} onUpload={handleUpload} onCancel={handleReset}></DialogUpload>\n            </DialogSection>\n       </DialogBase>        \n    )\n\n}\n\nUploadDialog.defaultProps = {\n    upload: {\n        id: \"/dialog/upload\",\n        accept: [\n            \"image/*\",\n        ],\n    },\n    query: {\n//        mediaType: \"*\"\n    }\n}\n\nexport default UploadDialog","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport DialogBase from \"./DialogBase\"\nimport DialogFooter from \"./DialogFooter\"\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport FavouriteIcon from '@material-ui/icons/Favorite';\nimport UploadIcon from '@material-ui/icons/CloudUpload';\nimport UploadDoneIcon from '@material-ui/icons/CloudDone';\n\nimport Badge from '@material-ui/core/Badge';\n\n\nimport SearchDialog from \"./SearchDialog\"\nimport FavoritesDialog from './FavouritesDialog';\nimport UploadDialog from \"./UploadDialog\"\n\nconst MediaDialog = ({query, favourites, uploadByUrl, ...props}) => {\n    const { t, i18n } = useTranslation(['dialog']);\n\n    const [template, setTemplate] = useState(\"search\")\n\n    // get mediaTypes\n\n    let mediaTypes = []\n\n    if (Array.isArray(query.mediaType)) {\n        mediaTypes = query.mediaType\n    } else if (query.mediaType) {\n        mediaTypes = [query.mediaType]\n    } else if (query.models === \"media\") {\n        mediaTypes = ['image*','video*','audio*']\n    }\n\n    // get upload\n\n    let upload = {\n        id: \"/dialog/upload\",\n        accept: []\n    }\n\n    mediaTypes && mediaTypes.map(mediaType => {\n\n        if (mediaType.includes('image')) {\n            upload.accept.push('image/*')\n        }\n    \n        if (mediaType.includes(\"video\")) {\n            upload.accept.push('video/*')\n        }\n    \n        if (mediaType.includes(\"audio\")) {\n            upload.accept.push('audio/*')\n        }\n    \n    })    \n\n    const mediaFavourites = favourites && favourites[\"media\"] && favourites[\"media\"].length\n    const mediaUploads = uploadByUrl && uploadByUrl[upload.id] && uploadByUrl[upload.id].models\n\n    const FavouriteBadge = () => {\n        return (\n            <Badge badgeContent={2} variant=\"dot\" invisible={!mediaFavourites && true} color=\"primary\">\n                <FavouriteIcon />\n            </Badge>\n        )\n    }\n\n    const UploadBadge = () => {\n        return (\n            <Badge badgeContent={2} variant=\"dot\" invisible={!mediaUploads && true} color=\"primary\">\n                { mediaUploads && <UploadDoneIcon /> || <UploadIcon /> }\n            </Badge>\n        )\n    }\n\n    const menu = [\n        {\n            label: t(\"Search\"),\n            icon: <SearchIcon />,\n            onClick: () => setTemplate('search')\n        },\n        {\n            label: t(\"Favorites\"),\n            icon: <FavouriteBadge />,\n            onClick: () => setTemplate('favourites')\n        },\n        {\n            label: t(\"Upload\"),\n            icon: <UploadBadge />,\n            onClick: () => setTemplate('upload')\n        }\n    ]\n\n    return (\n        <DialogBase>\n            <DialogFooter menu={menu} />\n            { template === \"search\" && <SearchDialog query={query} {...props} /> }\n            { template === \"favourites\" && <FavoritesDialog query={query} favourites={favourites} {...props} /> }\n            { template === \"upload\" && <UploadDialog upload={upload} query={query} {...props} /> }\n        </DialogBase>\n    )\n\n}\n\nMediaDialog.defaultProps = {\n    query: {\n        models: \"media\",\n        mediaType: \"*\"\n    }\n}\n\nconst mapDispatchToProps = (dispatch) =>\n    bindActionCreators({\n    }, \ndispatch);\n\nconst mapStateToProps = (state) => {\n\treturn {\n        favourites: state.favourites,\n        uploadByUrl: state.uploadByUrl\n\t};\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps,\n)(MediaDialog);","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport SearchDialog from \"./SearchDialog\"\n\nconst DocumentsDialog = ({schema, formData, ...props}) => {\n\n    return (\n        <SearchDialog schema={schema} formData={formData} {...props} />\n    )\n\n}\n\nDocumentsDialog.defaultProps = {\n    query: {\n        models: \"documents\",\n        documentType: \"*\"\n    }\n}\n\nexport default DocumentsDialog","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getApp } from '../redux/app';\n\nimport MediaDialog from \"./MediaDialog\"\nimport DocumentsDialog from \"./DocumentsDialog\"\nimport SearchDialog from \"./SearchDialog\"\n\nimport { utils } from '@kit-ui/schema';\nconst { getUiOptions } = utils\n\nconst templates = {\n    \"media\": MediaDialog,\n    \"documents\": DocumentsDialog,\n    \"search\": SearchDialog\n}\n\nconst EditorDialog = (props) => {\n    const dispatch = useDispatch()\n\n    console.log(\"DIALOG\", props)\n\n    \n\n    const { schema = {}, uiSchema = {}, onChange, onClose } = props;\n\n    const [formData, setFormData] = useState(props.formData)\n\n    useEffect(() => {\n        setFormData(props.formData)\n    }, [props.formData])\n\n    const _onChange = (formData) => {\n        setFormData(formData)\n        onChange(formData);\n    }\n\n    const app = useSelector(state => state.app)\n\n    let itemSchema;\n\n    if (schema && schema.type === \"array\") {\n        itemSchema = schema.items\n    } else if (schema) {\n        itemSchema = schema\n    }\n\n    const getReferenceQuery = (query) => {\n        const documentSchema = itemSchema && itemSchema.properties && itemSchema.properties.reference\n        const documentType = documentSchema && documentSchema.properties.documentType\n    \n        query.documentType = \"*\"\n    \n        if (documentType && documentType.enum) {\n            query.documentType = documentType.enum\n        }\n    \n        if (documentType && documentType.default) {\n            query.documentType = documentType.default\n        }\n\n        return {\n            ...query,\n            models: \"documents\"\n        } \n        \n    }\n\n    const getMediaQuery = (query) => {\n        const mediaSchema = itemSchema && itemSchema.properties && itemSchema.properties.media\n        const mediaType = mediaSchema && mediaSchema.properties.mediaType\n    \n//        query.mediaType = \"*\"\n\n        if (mediaType && mediaType.enum) {\n            query.mediaType = mediaType.enum\n        }\n    \n        if (mediaType && mediaType.default) {\n            query.mediaType = mediaType.default\n        }\n\n        return {\n            ...query,\n            models: \"media\"\n        }\n        \n    }\n\n    const getQuery = () => {\n\n        const uiOptions = uiSchema && getUiOptions(uiSchema)\n\n        const { dialog } = uiOptions\n\n        if (dialog && dialog.query) {\n            return {\n                ...dialog.query,\n                siteId: app.siteId,\n                collectionId: app.collectionId\n            }\n        }\n\n\n        if (itemSchema.properties && itemSchema.properties.referenceId) {\n            return getReferenceQuery({\n                siteId: app.siteId,\n                collectionId: app.collectionId\n            })\n        }\n\n        if (itemSchema.properties && itemSchema.properties.mediaId) {\n            return getMediaQuery({\n                siteId: app.siteId,\n                collectionId: app.collectionId\n            })\n        }\n\n        return {\n        }\n\n    }\n\n    const query = getQuery()\n    const template = query.models;\n\n    const DialogTemplate = template && templates[template]; // ||templates[\"search\"]\n\n    if (!DialogTemplate) {\n        return (\n            <div>\n                Missing template for {JSON.stringify(props)}.\n                <button onClick={onClose}>Close</button>\n            </div>\n        )\n    }\n\n    return (\n        <DialogTemplate query={query} schema={schema} formData={formData} onChange={_onChange} onClose={onClose} /> \n    )\n\n}\n\nexport default EditorDialog","import React from \"react\"\n\nimport Dialog from \"../Dialog/Dialog\"\n\n\nconst EditorDialog = (props) => {\n\n    const { expanded, schema = {}, uiSchema = {}, formData = {}, formContext, onChange, onClose } = props\n\n    if (!expanded) {\n        return false\n    }\n\n    return <Dialog {...props} />\n\n    const _addImage = () => {\n        onChange && onChange({\n            mediaId: 1,\n            media: {\n                mediaType: \"image\",\n                imageUrl: \"https://akamai.vgc.no/drfront/images/2020/09/22/c=144,24,404,232;w=362;h=208;557008.jpg\"\n            }\n        })\n    }\n\n    return (\n        <div>\n            {JSON.stringify(schema)}\n            {JSON.stringify(formData)}\n\n            <button onClick={() => _addImage()}>Add img</button>\n\n            <button onClick={() => onClose()}>Close</button>\n\n        </div>\n    )\n\n\n}\n\nexport default EditorDialog","import React from \"react\"\n\nimport Dialog from \"../Dialog/Dialog\"\n\n\nconst EditorOverlay = (props) => {\n\n    const { expanded, schema = {}, uiSchema = {}, formData = {}, formContext, onChange, template, onClose, children } = props\n\n    if (!expanded) {\n        return false\n    }\n\n    return (\n        <div>\n            {JSON.stringify(schema)}\n            {JSON.stringify(formData)}\n\n            {children}\n           \n\n            <button onClick={() => onClose()}>Close</button>\n\n        </div>\n    )\n\n\n}\n\nexport default EditorOverlay","import React, { useRef, useState, useEffect } from \"react\"\nimport { SchemaBase } from \"@kit-ui/schema\"\nimport { useHistory } from \"react-router-dom\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport { getLayout } from '../redux/app';\nimport { receiveEdit, receiveCurrentId, receiveCurrentLocale, requestDialog, receiveDialog } from '../redux/editor';\n\nimport registry from \"../components/registry\"\n\nimport EditorDialog from \"./EditorDialog\"\nimport EditorOverlay from \"./EditorOverlay\"\n\nimport EditorPreview from \"./EditorPreview\"\n\nconst Editor = ({schema, uiSchema, onSubmit, ...props}) => {\n    const { t, i18n } = useTranslation('schema');\n\n    let history = useHistory();\n\n    const editorRef = useRef(null)\n\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        dispatch(getLayout(\"editor\"))\n    }, [])\n\n    const app = useSelector(state => state.app)\n\n    const editor = useSelector(state => state.editor)\n    const formData = editor.formData\n\n    const currentId = editor.formContext.currentId\n    const currentLocale = editor.formContext.currentLocale ||formData.locale\n\n    // overlay\n\n    const [overlay, setOverlay] = useState({})\n\n    const _onOverlay = (props) => {\n        const {id, formData, schema, uiSchema, onChange, template} = props\n        console.log(\"Editor:onOverlay\", props)\n\n        if (overlay && overlay.id) {\n            setOverlay({})\n        } else {\n            setOverlay({\n                ...props,\n                id: id,\n                formData: formData,\n                schema: schema,\n                uiSchema: uiSchema,\n                onChange: onChange,\n                template: template ||EditorOverlay,\n                expanded: true,\n            })\n        }\n\n    }\n\n    // dialog\n\n    const [dialog, setDialog] = useState({})\n\n    const _onDialog = (props) => {\n        const {id, formData, schema, uiSchema, onChange} = props\n        console.log(\"Editor:onDialog\", props)\n\n        if (dialog && dialog.id) {\n            setDialog({})\n        } else {\n            setDialog({\n                id: id,\n                formData: formData,\n                schema: schema,\n                uiSchema: uiSchema,\n                onChange: onChange,\n                expanded: true\n            })\n        }\n\n    }\n    \n    // change\n\n    const _onChange = ({formData}) => {\n        dispatch(receiveEdit(formData))\n    }\n\n    // submit\n\n    const _onSubmit = ({formData}) => {\n        onSubmit && onSubmit({formData})\n\n        if (dialog && dialog.id) {\n            _onDialog({})\n        }\n\n    }\n\n    // locale\n\n    const _onLocale = (locale) => {\n        dispatch(receiveCurrentLocale({currentLocale: locale}))\n    }\n\n    // hashId toggling\n\n    const hashId = props.location.hash && props.location.hash.replace('#','') ||null\n\n    useEffect(() => {\n        dispatch(receiveCurrentId({currentId: hashId}))\n    }, [hashId])\n\n    const _onCurrentId = (currentId) => {\n        const hashUrl = props.location.pathname + \"#\" + currentId; \n        history.replace(hashUrl);\n    }\n\n    const _onToggle = ({id, ...props}) => {\n        console.log('onToggle', props)\n\n        let parentId = id.split('_');\n        parentId.pop();\n        parentId = parentId.join('_');\n        \n        let expandId = undefined\n\n        if (id && currentId && currentId.startsWith(id)) {\n            expandId = parentId;            \n        } else {\n            expandId = id;\n        }\n\n        _onCurrentId(expandId)\n\n    }\n    \n    const _onExpand = ({id}) => {\n        console.log('onExpand', props)\n        _onCurrentId(id)\n    }\n\n    const _onCollapse = ({id}) => {\n        console.log('onCollapse', props)\n        _onToggle({id})\n    }\n\n    // navigation\n\n    const _onBack = () => {\n        props.history.goBack()\n    }\n\n    const _onSelect = ({url}) => {\n        props.history.push(url)\n    }\n\n    // reference\n\n    const _onEditReference = ({id, referenceId, reference}) => {\n\n        const referenceUrl = app.root + \"/documents/\" + referenceId + \"/edit\"\n\n        props.history.push({\n            pathname: referenceUrl,\n            hash: id,\n//            search: \"?backUrl=\" + props.location.pathname + \"&backId=\" + currentId\n        })\n        \n    }\n\n    // formContext\n\n    const formContext = {\n        t: t,\n\n        ...editor.formContext,\n        ...props.formContext,\n\n        onLocale: _onLocale,\n        onToggle: _onToggle,\n\n        onExpand: _onExpand,\n        onCollapse: _onCollapse,\n\n        onEdit: _onExpand,\n        onSave: _onCollapse,\n\n        onBack: _onBack,\n        onSelect: _onSelect,\n\n        onEditReference: _onEditReference,\n\n        onSubmit: (event) => _onSubmit(event), // (e) => editorRef && editorRef.current && editorRef.current.onSubmit(e),\n\n        onDialog: _onDialog,\n\n        sidebar: {\n            ...dialog,\n            onClose: () => _onDialog({}),\n            template: EditorDialog\n        },\n\n        onOverlay: _onOverlay,\n\n        overlay: {\n            ...overlay,\n            onClose: () => _onOverlay({}),\n        },\n\n    }    \n\n    return (\n        <SchemaBase\n            {...registry}\n            ref={editorRef}\n            schema={schema}\n            uiSchema={uiSchema}\n            formData={formData}\n            formContext={formContext}\n            onChange={_onChange}\n            onSubmit={_onSubmit}\n            />\n    )\n\n\n}\n\nEditor.defaultProps = {\n    schema: {},\n    formData: {},\n    formContext: {}\n}\n\nexport default Editor","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getEditor } from '../redux/editor';\n\nimport { Loader } from \"@kit-ui/admin\"\nimport { EditorIcon } from \"@kit-ui/icons\"\nimport icons from \"../icons\"\n\nconst EditorLoader = ({formData = {}, schema, uiSchema, children, ...props}) => {\n    const pathname = props.location.pathname\n\n    const app = useSelector(state => state.app)\n    const finder = useSelector(state => state.finder)\n    const editor = useSelector(state => state.editor)\n    \n    const uniqueId = editor.formData && editor.formData.uniqueId\n\n    const appIcon = icons[app.icon]\n\n    const title = formData.title ||app && app.title || \"Editor\"\n    const description = app.isLoading && \"Loading app ...\" || editor.isLoading && \"Loading editor ...\" ||!schema && \"Loading schema ...\" ||!uiSchema && \"Loading uiSchema ...\" ||\"Editor loaded\"\n    const isLoading = app.isLoading || finder.isLoading ||!finder.menuById ||editor.isLoading || false\n    const icon = app.isLoading && appIcon || finder.isLoading && appIcon ||<EditorIcon color={app.theme.palette.primary.main} />\n\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        dispatch(getEditor({\n            pathname, \n            uniqueId, \n            schema, \n            uiSchema\n        }))\n    }, [pathname, uniqueId, schema, uiSchema])\n\n    return (\n        <Loader\n            isLoading={isLoading}\n            icon={icon}\n            title={title}\n            description={description}>\n                {children}\n        </Loader>\n    )\n\n}\n\nEditorLoader.defaultProps = {\n}\n\nexport default EditorLoader","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { \n    PreviewBase, \n    PreviewOptions, \n    PreviewJSON, \n    PreviewMedia\n} from \"@kit-ui/admin\"\n\nimport schemasByName from \"../schemas/schemasByName\"\n\nconst MediaPreview = (props) => {\n    const editor = useSelector(state => state.editor)\n\n    const { formData } = editor\n    const { mediaType } = formData\n\n    const modelType = mediaType && \"media/\"+mediaType \n    const model = schemasByName && schemasByName[modelType]\n\n    const schema = model && model.schema\n    const uiSchema = model && model.uiSchema\n\n    let previewOptions = [\n        {\n            \"title\": \"JSON\",\n            \"value\": \"formData\",\n            \"template\": () => <PreviewJSON>{formData}</PreviewJSON> \n        },\n        {\n            \"title\": \"uiSchema\",\n            \"value\": \"uiSchema\",\n            \"template\": () => <PreviewJSON>{uiSchema}</PreviewJSON> \n        },\n        {\n            \"title\": \"schema\",\n            \"value\": \"schema\",\n            \"template\": () => <PreviewJSON>{schema}</PreviewJSON> \n        },\n    ]    \n\n    if (mediaType) {\n\n        previewOptions = [\n            {\n//                ...model.preview,\n                template: () => <PreviewMedia {...formData}></PreviewMedia>,\n                title: \"Preview\",\n                value: \"preview\"\n            },\n            ...previewOptions\n        ]\n            \n    }\n\n    const [value, setValue] = useState(previewOptions[0].value)\n\n    const _onChange = (value) => {\n        setValue(value)\n    }\n\n    const currentPreview = previewOptions.find(option => option.value === value)\n    const PreviewTemplate = currentPreview && currentPreview.template\n    \n    return (\n\n        <PreviewBase>\n            { PreviewTemplate && <PreviewTemplate formData={formData} /> }\n            <PreviewOptions options={previewOptions} value={value} onChange={_onChange} />\n        </PreviewBase>\n\n    )\n\n}\n\nMediaPreview.defaultProps = {\n}\n\nexport default MediaPreview","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { editModel, saveModel } from '../redux/editor';\n\nimport Editor from \"../Editor/Editor\"\nimport EditorLoader from \"../Editor/EditorLoader\"\n\nimport MediaPreview from \"./MediaPreview\"\n\nimport schemasByName from \"../schemas/schemasByName\"\n\nimport { utils } from '@kit-ui/schema';\nconst { getUiPreview, getDefaultFormState } = utils\n\nconst MediaEditor = (props) => {\n    const { uniqueId } = props.match.params\n\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        uniqueId && dispatch(editModel({modelName: \"media\", uniqueId: uniqueId}))\n    }, [uniqueId])\n\n\n    // set formContext\n\n    const _onBack = () => {\n        props.history.goBack()\n    }\n\n    const _onSelect = ({url}) => {\n        url && props.history.push(url)\n    }\n\n    const editor = useSelector(state => state.editor)\n    const formData = editor.formData\n\n    const formContext = {\n        isLoading: editor && editor.isLoading,\n        isSaving: editor && editor.isSaving,\n        onBack: _onBack,\n        onSelect: _onSelect,\n        preview: {\n            template: MediaPreview\n        }\n    }\n\n    // get schemas based on documentType\n\n    const mediaType = uniqueId && formData && formData.mediaType\n    const mediaModel = mediaType && \"media/\" + mediaType\n    const model = schemasByName && schemasByName[mediaModel]\n\n    const schema = model && model.schema\n    const uiSchema = model && model.uiSchema\n\n    // submit\n\n    const collectionId = useSelector(state => state.app.collectionId)\n\n    const _onSubmit = ({formData}) => {\n\n        const uiPreview = getUiPreview({schema, uiSchema, formData})\n        \n        formData = {\n            ...formData,\n            ...uiPreview,\n            modelName: \"media\",\n            collectionId: collectionId,\n            schemaId: 1,\n            locale: \"no\",\n        }\n\n        dispatch(saveModel(formData))\n    }\n\n\n    return (\n        <EditorLoader formData={formData} schema={schema} uiSchema={uiSchema} {...props}>\n            <Editor {...props}\n                schema={schema}\n                uiSchema={uiSchema}\n                formData={formData}\n                formContext={formContext}\n                onSubmit={_onSubmit} />\n        </EditorLoader>\n    )\n\n}\n\nMediaEditor.defaultProps = {\n}\n\nexport default MediaEditor","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { \n    PreviewBase, \n    PreviewOptions, \n    PreviewJSON\n} from \"@kit-ui/admin\"\n\nimport schemasByName from \"../schemas/schemasByName\"\n\nconst DocumentPreview = (props) => {\n    const editor = useSelector(state => state.editor)\n\n    const { formData } = editor\n    const { documentType } = formData\n\n    const modelType = documentType && \"documents/\"+documentType \n    const model = schemasByName && schemasByName[modelType]\n\n    const schema = model && model.schema\n    const uiSchema = model && model.uiSchema\n\n    let previewOptions = [\n        {\n            \"title\": \"JSON\",\n            \"value\": \"formData\",\n            \"template\": () => <PreviewJSON>{formData}</PreviewJSON> \n        },\n        {\n            \"title\": \"uiSchema\",\n            \"value\": \"uiSchema\",\n            \"template\": () => <PreviewJSON>{uiSchema}</PreviewJSON> \n        },\n        {\n            \"title\": \"schema\",\n            \"value\": \"schema\",\n            \"template\": () => <PreviewJSON>{schema}</PreviewJSON> \n        },\n    ]    \n\n    if (model.preview && model.preview.template) {\n\n        previewOptions = [\n            {\n                ...model.preview,\n                title: \"Preview\",\n                value: \"preview\"\n            },\n            ...previewOptions\n        ]\n            \n    }\n\n    const [value, setValue] = useState(previewOptions[0].value)\n\n    const _onChange = (value) => {\n        setValue(value)\n    }\n\n    const currentPreview = previewOptions.find(option => option.value === value)\n    const PreviewTemplate = currentPreview && currentPreview.template\n    \n    return (\n\n        <PreviewBase>\n            <PreviewTemplate formData={formData} />\n            <PreviewOptions options={previewOptions} value={value} onChange={_onChange} />\n        </PreviewBase>\n\n    )\n\n}\n\nDocumentPreview.defaultProps = {\n}\n\nexport default DocumentPreview","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { editModel, saveModel } from '../redux/editor';\nimport qs from 'query-string';\n\nimport Editor from \"../Editor/Editor\"\nimport EditorLoader from \"../Editor/EditorLoader\"\n\nimport DocumentPreview from \"./DocumentPreview\"\n\nimport schemasByName from \"../schemas/schemasByName\"\n\nimport { utils } from '@kit-ui/schema';\nconst { getUiPreview, getDefaultFormState } = utils\n\nconst DocumentEditor = (props) => {\n    const { uniqueId, documentType } = props.match.params\n    const pathname = props.location.pathname\n    const sq = props.location.search && qs.parse(props.location.search) ||{}\n\n    const dispatch = useDispatch()\n\n    const app = useSelector(state => state.app)\n    const editor = useSelector(state => state.editor)\n    const formData = editor.formData\n\n    // create new document\n\n    useEffect(() => {\n        sq.documentType && dispatch(editModel({\n            collectionId: app.collectionId,\n            schemaId: 1,\n            locale: \"no\",\n            parentId: sq.parentId ||null,\n            documentType: sq.documentType,\n            content: sq.content && JSON.parse(sq.content) || {}\n        }))\n    }, [sq.documentType])\n\n    // load uniqueId\n\n    useEffect(() => {\n        uniqueId && dispatch(editModel({uniqueId: uniqueId}))\n    }, [uniqueId])\n\n    // uniqueId has changed, update location\n\n    const _onHistory = (uniqueId) => {\n\n        const { path, params } = props.match;\n        const { hash, search } = props.location;\n        \n        let location = path;\n    \n        if (hash) {\n            location = location + hash;\n        }\n    \n        for (let key in params) {\n      \n            let value;\n          \n            if (key === \"uniqueId\") {\n                value = uniqueId\n            } else if (key === \"new\") {\n//                value = uniqueId + \"/edit\"\n            } else {\n                value = params[key];\n            }\n\n            if (value) {\n                location = location.replace(':'+key+\"*\", value);\n                location = location.replace(':'+key, value);\n            } else {\n                location = location.replace(':'+key+\"*\", '');\n                location = location.replace(':'+key, '');\n            }\n\n            location = location.replace(\"//\", \"/\");\n\n        }\n\n        location = location.replace(\"new\", uniqueId + \"/edit\");\n        props.history.replace(location);\n\n    }\n\n    // set formContext\n\n    const formContext = {\n        preview: {\n            template: DocumentPreview\n        }\n    }\n\n    // get schemas based on documentType\n\n    const modelType = formData.documentType // ||documentType\n    const documentModel = modelType && \"documents/\"+modelType \n    const model = schemasByName && schemasByName[documentModel]\n\n    const schema = model && model.schema\n    const uiSchema = model && model.uiSchema\n\n    // submit\n\n    const collectionId = useSelector(state => state.app.collectionId)\n\n    const _onSubmit = ({formData}) => {\n\n        const uiPreview = getUiPreview({schema, uiSchema, formData})\n        \n        formData = {\n            ...formData,\n            ...uiPreview,\n            locale: formData.locale ||\"no\",\n            collectionId: formData.collectionId ||collectionId,\n            schemaId: 1,\n        }\n\n        dispatch(saveModel(formData))\n\n        if (!uniqueId && formData.uniqueId) {\n            _onHistory(formData.uniqueId)\n        }\n\n    }\n\n\n    return (\n        <EditorLoader formData={formData} schema={schema} uiSchema={uiSchema} {...props}>\n            <Editor {...props}\n                schema={schema}\n                uiSchema={uiSchema}\n                formData={formData}\n                formContext={formContext}\n                preview={model && model.preview}\n                onSubmit={_onSubmit} />\n        </EditorLoader>\n    )\n\n}\n\nDocumentEditor.defaultProps = {\n}\n\nexport default DocumentEditor","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { \n    PreviewBase, \n    PreviewOptions, \n    PreviewJSON\n} from \"@kit-ui/admin\"\n\nimport schemasByName from \"../schemas/schemasByName\"\n\nconst CollectionPreview = (props) => {\n    const editor = useSelector(state => state.editor)\n\n    const { formData, formContext } = editor\n    const { collectionType } = formData\n\n    const modelType = collectionType && \"collections/\"+collectionType \n    const model = schemasByName && schemasByName[modelType]\n\n    const schema = model && model.schema\n    const uiSchema = model && model.uiSchema\n\n    let previewOptions = [\n        {\n            \"title\": \"JSON\",\n            \"value\": \"formData\",\n            \"template\": () => <PreviewJSON>{formData}</PreviewJSON> \n        },\n        {\n            \"title\": \"formContext\",\n            \"value\": \"formContext\",\n            \"template\": () => <PreviewJSON>{formContext}</PreviewJSON> \n        },\n        {\n            \"title\": \"uiSchema\",\n            \"value\": \"uiSchema\",\n            \"template\": () => <PreviewJSON>{uiSchema}</PreviewJSON> \n        },\n        {\n            \"title\": \"schema\",\n            \"value\": \"schema\",\n            \"template\": () => <PreviewJSON>{schema}</PreviewJSON> \n        },\n    ]    \n\n    if (model.preview && model.preview.template) {\n\n        previewOptions = [\n            {\n                ...model.preview,\n                title: \"Preview\",\n                value: \"preview\"\n            },\n            ...previewOptions\n        ]\n            \n    }\n\n    const [value, setValue] = useState(previewOptions[0].value)\n\n    const _onChange = (value) => {\n        setValue(value)\n    }\n\n    const currentPreview = previewOptions.find(option => option.value === value)\n    const PreviewTemplate = currentPreview && currentPreview.template\n    \n    return (\n\n        <PreviewBase>\n            <PreviewTemplate formData={formData} formContext={formContext} />\n            <PreviewOptions options={previewOptions} value={value} onChange={_onChange} />\n        </PreviewBase>\n\n    )\n\n}\n\nCollectionPreview.defaultProps = {\n}\n\nexport default CollectionPreview","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { editModel, saveModel } from '../redux/editor';\nimport qs from 'query-string';\n\nimport Editor from \"../Editor/Editor\"\nimport EditorLoader from \"../Editor/EditorLoader\"\n\nimport CollectionPreview from \"./CollectionPreview\"\nimport schemasByName from \"../schemas/schemasByName\"\n\nimport { utils } from '@kit-ui/schema';\nconst { getUiPreview, getDefaultFormState } = utils\n\nconst CollectionEditor = (props) => {\n    const { uniqueId } = props.match.params\n    const sq = props.location.search && qs.parse(props.location.search) ||{}\n\n    const dispatch = useDispatch()\n\n    const app = useSelector(state => state.app)\n    const editor = useSelector(state => state.editor)\n    const formData = editor.formData\n\n    // create new\n\n    useEffect(() => {\n        sq.collectionType && dispatch(editModel({\n            modelName: \"collections\",\n            collectionType: sq.collectionType,\n            defaultLocale: \"no\",\n            content: sq.content && JSON.parse(sq.content) || {}\n        }))\n    }, [sq.collectionType])\n\n    // load uniqueId\n\n    useEffect(() => {\n        uniqueId && dispatch(editModel({modelName: \"collections\", uniqueId: uniqueId}))\n    }, [uniqueId])\n\n    // uniqueId has changed, update location\n\n    const _onHistory = (uniqueId) => {\n\n        const { path, params } = props.match;\n        const { hash, search } = props.location;\n        \n        let location = path;\n    \n        if (hash) {\n            location = location + hash;\n        }\n    \n        for (let key in params) {\n      \n            let value;\n          \n            if (key === \"uniqueId\") {\n                value = uniqueId\n            } else if (key === \"new\") {\n//                value = uniqueId + \"/edit\"\n            } else {\n                value = params[key];\n            }\n\n            if (value) {\n                location = location.replace(':'+key+\"*\", value);\n                location = location.replace(':'+key, value);\n            } else {\n                location = location.replace(':'+key+\"*\", '');\n                location = location.replace(':'+key, '');\n            }\n\n            location = location.replace(\"//\", \"/\");\n\n        }\n\n        location = location.replace(\"new\", uniqueId + \"/edit\");\n        props.history.replace(location);\n\n    }\n\n    // set formContext\n\n    const formContext = {\n        preview: {\n            template: CollectionPreview\n        }\n    }\n\n    // get schemas based on collectionType\n\n    const modelType = formData.collectionType\n    const modelId = modelType && \"collections/\"+modelType \n    const model = schemasByName && schemasByName[modelId]\n\n    const schema = model && model.schema\n    const uiSchema = model && model.uiSchema\n\n    // submit\n\n    const _onSubmit = ({formData}) => {\n\n        const status = formData && formData.status\n\n        const uiPreview = getUiPreview({schema, uiSchema, formData})\n        \n        formData = {\n            ...formData,\n            ...uiPreview,\n        }\n\n        if (status === \"copy\") {\n            formData.name = formData.name + \" (copy)\"\n            formData.status = \"draft\"\n            delete formData.id\n            delete formData.uniqueId\n        }\n\n\n        dispatch(saveModel(formData))\n    }\n\n    useEffect(() => {\n        editor.isSaving && formData.uniqueId && _onHistory(formData.uniqueId)\n    }, [editor.isSaving])\n\n\n    return (\n        <EditorLoader formData={formData} schema={schema} uiSchema={uiSchema} {...props}>\n            <Editor {...props}\n                schema={schema}\n                uiSchema={uiSchema}\n                formData={formData}\n                formContext={formContext}\n                preview={model && model.preview}\n                onSubmit={_onSubmit} />\n        </EditorLoader>\n    )\n\n}\n\nCollectionEditor.defaultProps = {\n}\n\nexport default CollectionEditor","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport qs from 'query-string';\n\nimport MediaEditor from \"../Finder/MediaEditor\"\nimport DocumentEditor from \"../Finder/DocumentEditor\"\nimport CollectionEditor from \"../Finder/CollectionEditor\"\n\nconst FinderEditor = (props) => {\n    const { uniqueId } = props.match.params\n    const sq = props.location.search && qs.parse(props.location.search) ||{}\n\n    const modelsById = useSelector(state => state.modelsById)\n    const uniqueModel = uniqueId && modelsById && modelsById[uniqueId]\n\n    if (uniqueModel && uniqueModel.documentType ||sq.documentType) {\n\n        return (\n            <DocumentEditor {...props} />\n        )\n\n    }\n\n    if (uniqueModel && uniqueModel.mediaType) {\n\n        return (\n            <MediaEditor {...props} />\n        )\n\n    }\n\n\n    if (uniqueModel && uniqueModel.collectionType ||sq.collectionType) {\n\n        return (\n            <CollectionEditor {...props} />\n        )\n\n    }\n\n    return (\n        <DocumentEditor {...props} />\n    )\n\n    return (\n        <p>Unknown editor for { uniqueId } </p>\n    )    \n\n}\n\nFinderEditor.defaultProps = {\n}\n\nexport default FinderEditor","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getLayout } from '../redux/app';\nimport { getModel } from '../redux/modelsById';\nimport { getQuery } from '../redux/searchByUrl';\n\nimport FinderLayout from \"./FinderLayout\"\nimport FinderQuery from \"./FinderQuery\"\nimport View from \"./View\"\n\nimport FinderModel from \"./FinderModel\"\nimport { IconsView, IconsModule } from \"@kit-ui/admin\"\n\n\nconst Finder = (props) => {\n    const pathname = props.location.pathname\n\n    const app = useSelector(state => state.app)\n    const finder = useSelector(state => state.finder)\n    const modelsById = useSelector(state => state.modelsById)\n    const searchByUrl = useSelector(state => state.searchByUrl)\n\n    const { uniqueId } = props.match.params\n\n    useEffect(() => {\n        uniqueId && dispatch(getQuery({\n            url: pathname,\n            models: \"documents\",\n            collectionId: app && app.collectionId,\n            uniqueId: uniqueId,\n            fl: \"id,title,uniqueId,parentId\"\n        }))\n\n    }, [uniqueId])\n\n    const uniqueModel = modelsById && modelsById[uniqueId] ||{}\n    const id = uniqueModel && uniqueModel.id\n\n    const parentId = uniqueModel && uniqueModel.parentId\n\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        dispatch(getLayout(\"finder\"))\n    }, [])\n\n    const parentQuery = {\n        models: \"documents\",\n        uniqueId: parentId,\n    };\n\n    const q1 = {\n        url: pathname + \"/parents\",\n        models: \"documents\",\n        collectionId: app && app.collectionId,\n        q: \"id:\"+parentId,\n        fl: \"id,title,uniqueId,parentId\"\n    };\n\n    const q2 = {\n        url: pathname + \"/children\",\n        models: \"documents\",\n        collectionId: app && app.collectionId,\n        parentId: id,\n        fl: \"id,title,uniqueId,parentId\"\n    };\n\n    useEffect(() => {\n        parentId && dispatch(getQuery(q1))\n        id && dispatch(getQuery(q2))\n    }, [parentId])\n\n\n    const parents = searchByUrl && searchByUrl[q1.url] ||{}\n    const parentUniqueId = parents && parents.resultsLoaded && parents.resultsLoaded[0]\n    const parentModel = parentUniqueId && modelsById && modelsById[parentUniqueId]\n\n    const children = searchByUrl && searchByUrl[q2.url] ||{}\n    \n    return (\n        <FinderLayout parents={[...finder.parents, uniqueModel]}>\n\n\n            {parentModel && \n            \n                <IconsView>\n                    <FinderModel {...props} model={parentModel}>\n                        <IconsModule />\n                    </FinderModel>\n                </IconsView>\n            \n            }\n            \n\n\n            <IconsView>\n                <FinderModel {...props} model={uniqueModel}>\n                    <IconsModule />\n                </FinderModel>\n            </IconsView>\n\n            <View {...props} {...children} view=\"list\" title=\"Barn\" />\n        </FinderLayout>\n    )\n\n    return (\n        <FinderQuery {...props} />\n    )\n\n}\n\nFinder.defaultProps = {\n}\n\nexport default Finder","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport Finder from \"../Finder/Finder\"\n\nimport FinderEditor from \"../Finder/FinderEditor\"\n\nimport MediaEditor from \"../Finder/MediaEditor\"\nimport DocumentEditor from \"../Finder/DocumentEditor\"\nimport DocumentPreview from \"../Finder/DocumentPreview\"\nimport DocumentLinks from \"../Finder/DocumentLinks\"\n\nimport CollectionEditor from \"../Finder/CollectionEditor\"\n\n\nconst AdminRoutes = (props) => {\n\n\n    return (\n        <Switch>\n            <Route path=\"/:root*/collections/:parents*/:uniqueId/edit\" component={ CollectionEditor } />\n            <Route path=\"/:root*/media/:parents*/:uniqueId/edit\" component={ MediaEditor } />\n            <Route path=\"/:root*/documents/:parents*/:uniqueId/edit\" component={ DocumentEditor } />\n\n            <Route path=\"/:root*/:parents*/new\" component={ FinderEditor } />\n            <Route path=\"/:root*/:parents*/:uniqueId/edit\" component={ FinderEditor } />\n            <Route path=\"/:root*/:parents*/:uniqueId/view\" component={ DocumentPreview } />\n            <Route path=\"/:root*/:parents*/:uniqueId/link\" component={ DocumentLinks } />\n            <Route path=\"/:root*/:parents*\" component={ Finder } />\n            <Route path=\"/:root*\" component={ Finder } />\n        </Switch>\n      )\n\n}\n\nexport default AdminRoutes","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Loader } from \"@kit-ui/admin\"\nimport icons from \"../icons/\"\n\nconst AdminLoader = ({children, ...props}) => {\n    const app = useSelector(state => state.app)\n    const appIcon = app.icon && icons[app.icon]\n\n    return (\n        <Loader\n            isLoading={app.isLoading}\n            icon={appIcon}\n            title={app.title ||\"App\"}\n            description={app.uniqueId && \"App loaded ...\"}>\n                {children}\n        </Loader>\n    )\n\n}\n\nAdminLoader.defaultProps = {\n}\n\nexport default AdminLoader","import Admin from \"./Admin\"\nexport default Admin","import React, {useEffect, useState } from \"react\"\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getLayout, toggleSearch, toggleSidebar } from '../redux/app';\nimport { toggleMenuItem } from '../redux/finder';\n\nimport _ from \"lodash\"\nimport qs from 'query-string';\n\nimport AdminRoutes from \"./AdminRoutes\"\n// import AdminLayout from \"./AdminLayout\"\nimport AdminLoader from \"./AdminLoader\"\n\nimport { AppLayout } from \"@kit-ui/admin\"\n\nimport icons from \"../icons\"\n\nconst Admin = (props) => {\n    const {pathname } = props.location\n    const sq = props.location.search && qs.parse(props.location.search) ||{}\n\n    const dispatch = useDispatch()\n\n    const app = useSelector(state => state.app)\n    const finder = useSelector(state => state.finder)\n\n    // date + view\n\n    let date = sq.date\n    let view = sq.view\n\n    if (!view) {\n        view = \"week\"\n    }\n\n    // select menu or calendar\n\n    const _onToggle = ({url}) => {\n        url && dispatch(toggleMenuItem({url}))\n    }\n\n    const _onSelect = ({url, date}) => {\n\n        console.log('onSelect', url)\n\n        if (!url && date) {\n            sq.date = date\n            props.history.replace(pathname + \"?\" + qs.stringify(sq))\n        }\n\n        url && props.history.push(url)\n    }\n\n    // search\n\n    const [q, setQ] = useState(\"\")\n\n    useEffect(() => {\n        if (q) {\n            sq.q = q.replace(' ', '+')\n        } else {\n            delete sq.q\n        }\n\n        let query = qs.stringify(sq)\n\n        const pathname = props.location.pathname + \"?\" + query;\n        const hash = props.location.hash;\n\n        const url = hash && pathname + hash ||pathname\n        \n        if (props.history) {\n            props.history.replace(url)\n        }\n\n    }, [q])\n\n    const _onSearchQuery = _.debounce((q) => {\n        setQ(q)\n    }, 500)\n\n    const _onSearchReset = () => {\n\n        if (q) {\n            setQ(\"\")\n            delete sq.q\n        } else {\n            dispatch(toggleSearch())\n        }\n\n    }\n\n    // header\n\n    const header = {\n        ...app.header,\n        title: app.title,\n        subtitle: app.siteTitle\n    }\n\n    // search\n\n    const search = {\n        ...app.search,\n        onChange: (q, event) => { _onSearchQuery(q) },\n        onReset: () => _onSearchReset(),\n        onToggle: () => dispatch(toggleSearch())\n    }\n\n    // sidebar\n\n    const sidebar = {\n        ...app.sidebar,\n        collapsible: true,\n        onToggle: () => dispatch(toggleSidebar())\n    }\n\n    // subview\n\n    const subview = app.subview && {\n        ...app.subview,\n        onToggle: () => dispatch(getLayout('finder'))\n    }\n\n    return  (\n        <AppLayout \n            theme={app.theme}\n            icons={icons}\n\n            header={header}\n            search={search}\n            sidebar={sidebar}\n            subview={subview}\n\n            primaryAction={finder.primaryAction}\n            menu={finder && finder.menu}\n            menuByUrl={finder && finder.menuByUrl}\n\n            currentUrl={pathname}\n\n            onSelect={_onSelect}\n            onToggle={_onToggle}>\n            <AdminRoutes {...props} />\n    </AppLayout>\n    )\n\n    return (\n        <AdminLoader {...props}>\n            <AppLayout \n                theme={app.theme}\n                icons={icons}\n\n                header={header}\n                search={search}\n                sidebar={sidebar}\n                subview={subview}\n\n                primaryAction={app.primaryAction}\n\n                menu={finder && finder.menu}\n                menuByUrl={finder && finder.menuByUrl}\n\n                currentUrl={pathname}\n\n                onSelect={_onSelect}\n                onToggle={_onToggle}\n            >\n                <AdminRoutes {...props} />\n            </AppLayout>\n        </AdminLoader>\n    )\n\n    \n}\n\nexport default Admin","export default {\n    role: \"group\",\n    title: \"Artikler\",\n    icon: \"article\",\n    pathname: \"article\",\n    query: {\n        models: \"documents\",\n        documentType: \"article\",\n        status: \"NOT trash\"\n    }\n}","export default {\n    role: \"group\",\n    icon: \"photo\",\n    title: \"Media\",\n    pathname: \"media\",\n    query: {\n        models: \"media\",\n        mediaType: \"*\",\n        collectionId: \"*\",\n        status: \"NOT trash\"\n    },\n    children: [\n        {\n            title: \"Images\",\n            pathname: \"images\",\n            query: {\n                models: \"media\",\n                mediaType: \"image\"\n            },\n        },\n        {\n            title: \"Video\",\n            pathname: \"video\",\n            query: {\n                models: \"media\",\n                mediaType: \"video\"\n            },\n        },\n        {\n            title: \"Audio\",\n            pathname: \"audio\",\n            query: {\n                models: \"media\",\n                mediaType: \"audio\"\n            },\n        },\n        {\n            title: \"Misc\",\n            pathname: \"misc\",\n            query: {\n                models: \"media\",\n                mediaType: \"misc\"\n            },\n        },\n        {\n            title: \"Apps\",\n            pathname: \"apps\",\n            query: {\n                models: \"media\",\n                mediaType: \"misc\"\n            },\n        },\n        {\n            title: \"Upload\",\n            pathname: \"upload\"\n        }\n    ]\n}","export default {\n    role: \"group\",\n    title: \"Latest\",\n    pathname: \"latest\",\n    icon: \"access_time\",\n    query: {\n        models: \"documents\",\n        status: \"NOT trash\",\n        models: \"documents\",\n        sort: \"updatedAt DESC\"\n    }\n}","export default {\n    role: \"group\",\n    icon: \"delete\",\n    title: \"Trash\",\n    pathname: \"trash\",\n    query: {\n        models: \"documents\",\n        status: \"trash\",\n        models: \"documents\",\n        sort: \"deletedAt DESC\",\n    }\n}","export default {\n    icon: \"settings\",\n    title: \"Settings\",\n    url: \"/admin\",\n}\n","export default {\n    role: \"section\",\n    title: \"favoritter\",\n    pathname: \"favourites\",\n\n    children: [\n        {\n            title: \"Papirkurv\",\n            pathname: \"/latest\",\n            icon: \"access_time\",\n            query: {\n                models: \"documents\",\n                status: \"NOT trash\",\n                models: \"documents\",\n                sort: \"updatedAt DESC\"\n            }\n        },\n        {\n            title: \"Slettet\",\n            icon: \"delete\",\n            pathname: \"/trash\",\n            query: {\n                models: \"documents\",\n                status: \"trash\",\n                models: \"documents\",\n                sort: \"deletedAt DESC\",\n            }\n        }\n    ]\n\n}","export default {\n    icon: \"trending_flat\",\n    title: \"Collections\",\n    url: \"/\",\n}\n","import app from \"./app\"\n\nexport default app","import menu from \"./menu\"\nimport primaryAction from \"./action\"\nimport theme from \"./theme\"\n\nexport default {\n    theme: theme,\n    icon: \"kpApp\",\n    root: \"/kp\",\n    siteId: 1,\n    collectionId: 54,\n    title: \"KulturPunkt\",\n    subtitle: \"Museum\",\n    menu: menu,\n    primaryAction: primaryAction,\n    languages: [\n        \"no\", \"sv\", \"en\", \"de\", \"es\", \"fr\"\n    ],\n    search: {\n        \"expanded\": false,\n        \"placeholder\": \"Sk i KulturPunkt\"\n    }\n}","import {\n    kpHome,\n    kpPages,\n    kpLink,\n\n    kioskHome,\n    kioskPages,\n    kioskDevices,\n    kioskLink,\n\n    ekultur,\n    articles,\n    media,\n    latest,\n    trash,\n    adminLink,\n    collectionsLink\n} from \"../menu/\"\n\nexport default [\n    kpHome,\n    articles,\n    kpPages,\n    media,\n    latest,\n    trash,\n    {\n        role: \"section\",\n        title: \"Favoritter\",\n        pathname: \"favourites\",\n        children: [\n            kioskLink,\n            collectionsLink,\n            adminLink,\n        ]\n    }\n]","export default {\n    type: \"tree\",\n    role: \"group\",\n    title: \"KulturPunkt\",\n    icon: \"kpMenu\",\n    url: \"/:siteName/kp\",\n    template: \"finder/tree\",\n    query: {\n        rows: 100,\n        models: \"documents\",\n        status: \"NOT trash\",\n        documentType: \"page*\",\n        q: \"NOT parentId:*\"\n    },\n}","export default {\n    role: \"section\",\n//    hidden: true,\n    title: \"Sider\",\n    pathname: \"pages\",\n//    viewOptions: [\"list\",\"grid\"],\n    view: \"grid\",\n    query: {\n        models: \"documents\",\n        documentType: \"page*\",\n        status: \"NOT trash\"\n    },\n    children: [\n        {\n            title: \"Hjemmeside\",\n            icon: \"pageHome\",\n            pathname: \"home\",\n            query: {\n                models: \"documents\",\n                documentType: \"pageHome\",\n                status: \"NOT trash\"\n            }\n        },\n        {\n            title: \"Tema\",\n            icon: \"pageParent\",\n            pathname: \"topic\",\n            query: {\n                models: \"documents\",\n                documentType: \"pageTopic\",\n                status: \"NOT trash\"\n            }\n        },\n        {\n            title: \"Kart\",\n            icon: \"pageMap\",\n            pathname: \"map\",\n            query: {\n                models: \"documents\",\n                documentType: \"pageMap\",\n                status: \"NOT trash\"\n            }\n        }\n    ]\n}","export default {\n    icon: \"kioskMenu\",\n    title: \"Kiosk\",\n    url: \"/:siteName/kiosk\",\n    search: \"link=true\"\n}","\nconst kpArticle = {\n    icon: \"article\",\n    title: \"Ny artikkel\",\n    pathname: \"/article/new?documentType=article\"\n}\n\n\nconst kpPages = {\n    role: \"group\",\n    children: [\n        {\n            icon: \"pageHome\",\n            title: \"Ny forside\",\n            pathname: \"/pages/new?documentType=pageHome\"\n        },\n        {\n            icon: \"pageMap\",\n            title: \"Nytt kart\",\n            pathname: \"/pages/new?documentType=pageMap\"\n        },\n        {\n            icon: \"pageTopic\",\n            title: \"Nytt tema\",\n            pathname: \"/pages/new?documentType=pageTopic\"\n        },\n    ]\n}\n\n\nexport default {\n    title: \"Nytt innhold\",\n    pathname: \"/create\",\n    \"children\": [\n        kpArticle,\n        kpPages\n    ]\n\n}","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getSiteApp } from \"../redux/app\"\nimport AppLoader from \"./AppLoader\"\nimport Admin from \"../Admin\"\nimport app from \"./kp\"\n\nconst KpApp = ({children, ...props}) => {\n    const { siteName } = props.match.params\n  \n    const dispatch = useDispatch()\n\n    const collectionType = \"kp\"\n    const root = \"/\" + siteName + \"/kp\"\n    \n    useEffect(() => {\n        root && dispatch(getSiteApp({\n            ...app,\n            root: root,\n            siteName: siteName,\n            collectionType: collectionType,\n        }))\n    }, [root])\n\n    return (\n        <AppLoader {...props}>\n            <Admin {...props} />\n        </AppLoader>\n    )\n\n\n}\n\nKpApp.defaultProps = {\n}\n\nexport default KpApp","import menu from \"./menu\"\nimport theme from \"./theme\"\nimport primaryAction from \"./action\"\n\nexport default {\n    theme: theme,\n    icon: \"kioskApp\",\n    root: \"/kiosk\",\n    siteId: 1,\n    collectionId: 54,\n    title: \"Kiosk\",\n    subtitle: \"Museum\",\n    menu: menu,\n    primaryAction: primaryAction,\n    languages: [\n        \"no\", \"sv\", \"en\", \"de\", \"es\", \"fr\"\n    ],\n    search: {\n        \"expanded\": false,\n        \"placeholder\": \"Sk i Kiosk\"\n    }\n}","import {\n    kpHome,\n    kpPages,\n    kpLink,\n\n    kioskHome,\n    kioskPages,\n    kioskDevices,\n    kioskLink,\n\n    ekultur,\n    articles,\n    media,\n    latest,\n    trash,\n    collectionsLink,\n    adminLink,\n} from \"../menu/\"\n\nexport default [\n    kioskHome,\n    articles,\n    media,\n    kioskPages,\n    kioskDevices,\n    latest,\n    trash,\n    {\n        role: \"section\",\n        title: \"Favoritter\",\n        pathname: \"favourites\",\n        children: [\n            kpLink,\n            collectionsLink,\n            adminLink,\n        ]\n    }\n]","export default {\n    icon: \"kioskMenu\",\n    url: \"/:siteName/kiosk\",\n    title: \"Kiosk\",\n    view: \"icons\",\n    viewOptions: [\"list\",\"icons\"],\n    query: {\n        models: \"documents\",\n        documentType: \"device*\",\n        status: \"NOT trash\"\n    }\n}","export default {\n    role: \"section\",\n//    hidden: true,\n    title: \"Presentasjoner\",\n    pathname: \"pages\",\n    view: \"grid\",\n    query: {\n        models: \"documents\",\n        documentType: \"page*\",\n//        status: \"NOT trash\"\n    },\n    children: [\n        {\n            title: \"Mosaikk\",\n            icon: \"pageGrid\",\n            pathname: \"grid\",\n            query: {\n                models: \"documents\",\n                documentType: \"pageGrid\",\n                status: \"NOT trash\"\n            }\n        },\n        {\n            title: \"Tidslinje\",\n            icon: \"pageTimeline\",\n            pathname: \"timeline\",\n            query: {\n                models: \"documents\",\n                documentType: \"pageTimeline\",\n                status: \"NOT trash\"\n            }\n        },\n        {\n            title: \"Bildekart\",\n            icon: \"pageAnnotate\",\n            pathname: \"annotate\",\n            query: {\n                models: \"documents\",\n                documentType: \"pageAnnotate\",\n                status: \"NOT trash\"\n            }\n        },\n        {\n            title: \"Media\",\n            icon: \"pageMedia\",\n            pathname: \"media\",\n            query: {\n                models: \"documents\",\n                documentType: \"pageMedia\",\n                status: \"NOT trash\"\n            }\n        },\n        {\n            title: \"Liste\",\n            icon: \"pageList\",\n            pathname: \"list\",\n            query: {\n                models: \"documents\",\n                documentType: \"pageList\",\n                status: \"NOT trash\"\n            }\n        }\n    ]\n}","export default {\n    role: \"group\",\n    title: \"Enheter\",\n    icon: \"bug_report\",\n    pathname: \"device\",\n    query: {\n        models: \"documents\",\n        documentType: \"device\",\n        status: \"NOT trash\"\n    }\n}","export default {\n    icon: \"kpMenu\",\n    title: \"KulturPunkt\",\n    url: \"/:siteName/kp\",\n    search: \"link=true\"\n}","\nconst kpArticle = {\n    icon: \"article\",\n    title: \"Ny artikkel\",\n    pathname: \"/article/new?documentType=article\"\n}\n\nconst kioskPages = {\n    role: \"group\",\n    children: [\n        {\n            icon: \"pageGrid\",\n            title: \"Ny mosaikkk\",\n            pathname: \"/kiosk/new?documentType=pageGrid\"\n        },\n        {\n            icon: \"pageTimeline\",\n            title: \"Ny tidslinje\",\n            pathname: \"/kiosk/new?documentType=pageTimeline\"\n        },\n        {\n            icon: \"pageAnnotate\",\n            title: \"Nytt bildekart\",\n            pathname: \"/kiosk/new?documentType=pageAnnotate\"\n        },\n        {\n            icon: \"pageMedia\",\n            title: \"Ny media\",\n            pathname: \"/kiosk/new?documentType=pageMedia\"\n        },\n        {\n            icon: \"pageList\",\n            title: \"Ny liste\",\n            pathname: \"/kiosk/new?documentType=pageList\"\n        },\n    ]\n}\n\nconst kioskDevice = {\n    role: \"group\",\n    children: [\n        {\n            icon: \"bug_report\",\n            title: \"Ny enhet\",\n            pathname: \"/device/new?documentType=device\"\n        },\n    ]\n}\n\nexport default {\n    title: \"Nytt innhold\",\n    pathname: \"/create\",\n    \"children\": [\n        kpArticle,\n        kioskPages,\n        kioskDevice\n    ]\n\n}","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getSiteApp } from \"../redux/app\"\nimport AppLoader from \"./AppLoader\"\nimport Admin from \"../Admin\"\nimport app from \"./kiosk/app\"\n\nconst KioskApp = ({children, ...props}) => {\n    const { siteName } = props.match.params\n  \n    const dispatch = useDispatch()\n\n    const collectionType = \"kp\"\n    const root = \"/\" + siteName + \"/kiosk\"\n    \n    useEffect(() => {\n        root && dispatch(getSiteApp({\n            ...app,\n            root: root,\n            siteName: siteName,\n            collectionType: collectionType,\n        }))\n    }, [root])\n\n    return (\n        <AppLoader {...props}>\n            <Admin {...props} />\n        </AppLoader>\n    )\n\n\n}\n\nKioskApp.defaultProps = {\n}\n\nexport default KioskApp","import menu from \"./menu\"\nimport theme from \"./theme\"\nimport primaryAction from \"./action\"\n\nexport default {\n    theme: theme,\n    icon: \"kpApp\",\n    root: \"/admin\",\n    siteId: 1,\n    collectionId: 54,\n    title: \"Kp+Kiosk admin\",\n    subtitle: \"Museum\",\n    menu: menu,\n    primaryAction: primaryAction,\n    languages: [\n        \"no\", \"sv\", \"en\", \"de\", \"es\", \"fr\"\n    ],\n    search: {\n        \"expanded\": false,\n        \"placeholder\": \"Sk i Kiosk\"\n    }\n}","export default {\n    \"palette\": {\n        \"primary\": {\n            \"main\": \"#D94353\",\n            \"light\": \"#EE7E8F\",\n            \"dark\": \"#AE3552\"\n        },\n        \"secondary\": {\n            \"main\": \"#D94353\",\n            \"light\": \"#EE7E8F\",\n            \"dark\": \"#AE3552\"\n        }\n    }\n}","import {\n    latest,\n    trash,\n} from \"../menu/\"\n\nconst sites = {\n    icon: \"business\",\n    title: \"Sites\",\n    pathname: \"sites\",\n    query: {\n        models: \"sites\",\n        status: \"NOT trash\"\n    }\n}\n\nconst users = {\n    icon: \"people\",\n    title: \"Users\",\n    pathname: \"users\",\n    query: {\n        models: \"users\",\n        status: \"NOT trash\"\n    }\n}\n\nconst collections = {\n    icon: \"folder\",\n    title: \"Collections\",\n    pathname: \"collections\",\n    query: {\n        models: \"collections\",\n        collectionType: \"kp\",\n        status: \"NOT trash\"\n    }\n}\n\nconst home = {\n    title: \"Admin\",\n    url: \"/admin\",\n    role: \"section\",\n    viewOptions: [\"icons\"],\n    query: {\n        models: \"collections\",\n        collectionType: \"kp\",\n        status: \"NOT trash\"\n    },\n    children: [\n        collections,\n        sites,\n        users,\n    ]\n}\n\nconst loaders = {\n    role: \"section\",\n    title: \"Favoritter\",\n    pathname: \"favourites\",\n    children: [\n        {\n            icon: \"folder\",\n            title: \"Swich collection\",\n            url: \"/\",\n        }\n    ]\n\n}\n\n\nexport default [\n    home,\n//    collections,\n//    sites,\n//    users,\n    loaders\n]","\nexport default {\n    title: \"Nytt innhold\",\n    \"children\": [\n        {\n            icon: \"add\",\n            title: \"Ny collection\",\n            url: \"/admin/collections/new?collectionType=kp\"\n        },\n    ]\n\n}","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getAppProperties } from \"../redux/app\"\nimport Admin from \"../Admin\"\nimport app from \"./admin/app\"\n\nconst AdminApp = ({children, ...props}) => {\n  \n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        dispatch(getAppProperties(app))\n    }, [])\n\n    return (\n        <Admin {...props} />\n    )\n\n}\n\nAdminApp.defaultProps = {\n}\n\nexport default AdminApp","import { API } from \"../settings\"\nimport { createSlice } from '@reduxjs/toolkit'\nimport qs from 'query-string';\n\nconst siteSlice = createSlice({\n    name: 'site',\n    initialState: {\n        isLoading: true,\n    }, \n    reducers: {\n        requestSite(state, action) {\n            return {\n                isLoading: true,\n            }\n        },\n        receiveSite(state, action) {\n            return {\n                ...state,\n                isLoading: false,\n                ...action.payload\n            }\n        },\n        requestSiteCollections(state, action) {\n            return {\n                ...state,\n                collections: undefined\n            }\n        },\n        receiveSiteCollections(state, action) {\n            const { models } = action.payload\n            return {\n                ...state,\n                collections: models\n            }\n        }\n    }\n})\n\nexport const getSite = ({id, uniqueId, name}) => dispatch => {\n\n    if (id) {\n        dispatch(getSiteById({id}))\n    } else if (uniqueId) {\n        dispatch(getSiteById({id: uniqueId}))\n    } else if (name) {\n        dispatch(getSiteByName({name}))\n    }\n\n}    \n\nexport const getSiteById = ({id}) => dispatch => {\n    const apiUrl = API + '/admin/api/sites/' + id;\n\n    dispatch(requestSite({id}))\n\n    fetch(apiUrl, {\n        method: \"GET\",\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json; charset=utf-8\",\n        }})\n        .then(\n            response => response.json(),\n            error => console.log('An error occurred.', error)\n        )\n        .then(site => {\n            dispatch(receiveSite(site))\n        })\n    \n}\n\nexport const getSiteByName = ({name}) => dispatch => {\n    const apiUrl = API + '/admin/api/sites/search?name=' + name + \"&fl=id\";\n\n    fetch(apiUrl, {\n        method: \"GET\",\n        headers: {\n            \"Accept\": \"application/json\",\n        },\n    })\n    .then(\n        response => response.json(),\n        error => console.log('An error occurred.', error)\n    )\n    .then(results => {\n        results.models && results.models[0] && dispatch(getSiteById(results.models[0]))\n    })\n\n}\n\nexport const { \n    requestSite, receiveSite,\n    requestSiteCollections, receiveSiteCollections\n} = siteSlice.actions\n\nexport default siteSlice.reducer","import { API } from \"../settings\"\nimport { createSlice } from '@reduxjs/toolkit'\nimport qs from 'query-string';\n\nimport { getSite } from \"../site\"\n\nconst collectionSlice = createSlice({\n    name: 'collection',\n    initialState: {\n        isLoading: true,\n    }, \n    reducers: {\n        requestCollection(state, action) {\n            return {\n                isLoading: true,\n            }\n        },\n        receiveCollection(state, action) {\n            return {\n                ...state,\n                isLoading: false,\n                ...action.payload\n            }\n        }\n    }\n})\n\nexport const getCollection = ({id, uniqueId, siteName, collectionType}) => dispatch => {\n\n    if (id) {\n        dispatch(getCollectionById({id}))\n    } else if (uniqueId) {\n        dispatch(getCollectionById({id: uniqueId}))\n    } else if (siteName && collectionType) {\n        dispatch(getCollectionByType({siteName, collectionType}))\n    }\n\n}\n\nexport const getCollectionById = ({id}) => dispatch => {\n\n    const apiUrl = API + '/admin/api/collections/' + id;\n\n    dispatch(requestCollection({id}))\n\n    fetch(apiUrl, {\n        method: \"GET\",\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json; charset=utf-8\",\n        }})\n        .then(\n            response => response.json(),\n            error => console.log('An error occurred.', error)\n        )\n        .then(collection => {\n            dispatch(receiveCollection(collection))\n        })\n    \n}\n\nexport const getCollectionByType = ({siteName, collectionType}) => dispatch => {\n\n    const apiUrl = API + '/admin/api/collections/search?siteName=' + siteName + \"&collectionType=\"+ collectionType +\"&fl=id\";\n\n    fetch(apiUrl, {\n        method: \"GET\",\n        headers: {\n            \"Accept\": \"application/json\",\n        },\n    })\n    .then(\n        response => response.json(),\n        error => console.log('An error occurred.', error)\n    )\n    .then(results => {\n        results.models && results.models[0] && dispatch(getCollectionById(results.models[0]))\n    })\n\n\n}\n\n\nexport const { requestCollection, receiveCollection } = collectionSlice.actions\nexport default collectionSlice.reducer","import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getCollection } from '../redux/collection';\n\nimport Link from \"@material-ui/core/Link\"\n\nimport FinderQuery from \"../Finder/FinderQuery\"\nimport FinderModel from \"../Finder/FinderModel\"\n\nimport {ModuleBase, ModuleTitle, ModuleDescription, ListView } from \"@kit-ui/admin\"\n\nconst CollectionSwitcher = ({query, ...props}) => {\n\n    const _onSelect = ({url}) => {\n        url && props.history.push(url)\n    }\n\n    const CollectionItem = ({id, siteName, title, collectionType}) => {\n\n        const kpUrl = \"/\"+siteName+\"/kp\"\n        const kioskUrl = \"/\"+siteName+\"/kiosk\"\n        \n        const kpLink = <Link onClick={() => _onSelect({url: kpUrl})}>KulturPunkt</Link>\n        const kioskLink = <Link onClick={() => _onSelect({url: kioskUrl})}>Kiosk</Link>\n\n        return (\n            <ModuleBase>\n                <ModuleTitle>{title}</ModuleTitle>\n                <ModuleDescription>CollectionId: {id}  SiteName: {siteName}  {kpLink}  {kioskLink}</ModuleDescription>\n            </ModuleBase>\n        )\n    \n    }\n    \n    const CollectionList = ({layout = \"list\", resultsLoaded, onPage, ...props}) => {\n\n        return (\n            <ListView>\n                {resultsLoaded && resultsLoaded.map((model, index) => <FinderModel model={model}><CollectionItem model={model} key={index} /></FinderModel>)}\n            </ListView>\n        )\n    \n    }\n\n    const parents = [{title: \"Switch collection\"}]\n    \n    return (\n        <FinderQuery parents={parents} query={query} template={CollectionList} {...props} />\n    )\n\n\n}\n\nCollectionSwitcher.defaultProps = {\n    query: {\n        models: \"collections\",\n        siteId: \"*\",\n        collectionId: \"*\",\n        collectionType: \"kp\",\n        fl: \"id,uniqueId,title,collectionType,siteName,siteId\",\n        status: \"NOT trash\"\n    }\n}\n\nexport default CollectionSwitcher","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\n\nimport KpApp from \"./KpApp\"\nimport KioskApp from \"./KioskApp\"\nimport AdminApp from \"./AdminApp\"\n\nimport CollectionSwitcher from \"./CollectionSwitcher\"\n\nconst AppRoutes = (props) => {\n\n    return (\n        <Switch>\n            <Route path=\"/admin\" component={AdminApp} />\n            <Route path=\"/:siteName/kiosk\" component={KioskApp} />\n            <Route path=\"/:siteName/kp\" component={KpApp} />\n            <Route path=\"/\" component={CollectionSwitcher} />\n        </Switch>\n    )\n\n}\n\nexport default AppRoutes","import App from \"./App\"\nexport default App","import React, { useEffect } from \"react\";\nimport {\n    BrowserRouter as Router,\n    Switch,\n} from \"react-router-dom\";\n\nimport \"../styles/reset.css\"\nimport \"../styles/Akkurat.css\"\nimport \"../styles/AkkuratMono.css\"\nimport \"../styles/MaterialIcons.css\"\n\nimport AppRoutes from \"./AppRoutes\"\n\nconst App = (props) => {\n\n    return (\n        <Router>\n            <AppRoutes {...props} />\n        </Router>\n    )\n}\n\nexport default App","import { API } from \"../settings\"\nimport { createSlice } from '@reduxjs/toolkit'\nimport qs from 'query-string';\n\nconst userSlice = createSlice({\n    name: 'user',\n    initialState: {\n        isLoading: true,\n    }, \n    reducers: {\n        requestUser(state, action) {\n            return {\n                isLoading: true,\n            }\n        },\n        receiveUser(state, action) {\n            return {\n                ...state,\n                isLoading: false,\n                ...action.payload\n            }\n        }\n    }\n})\n\nexport const getUser = ({modelName = \"users\", uniqueId}) => dispatch => {\n\n    const url = API + '/admin/api/' + modelName + '/' + uniqueId;\n\n    dispatch(requestUser({uniqueId}))\n\n    fetch(url, {\n        method: \"GET\",\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json; charset=utf-8\",\n        }})\n        .then(\n            response => response.json(),\n            error => console.log('An error occurred.', error)\n        )\n        .then(formData => {\n            dispatch(receiveUser(formData))\n        })\n\n}    \n\n\nexport const { requestUser, receiveUser } = userSlice.actions\nexport default userSlice.reducer","import { combineReducers } from '@reduxjs/toolkit'\n\nimport userReducer from './user/userSlice'\nimport siteReducer from './site/siteSlice'\nimport collectionReducer from './collection/collectionSlice'\n\nimport appReducer from './app/appSlice'\nimport finderReducer from './finder/finderSlice'\nimport editorReducer from './editor/editorSlice'\nimport bulkReducer from './bulk/bulkSlice'\n\nimport searchByUrlReducer from './searchByUrl/searchByUrlSlice'\n\nimport uploadByUrlReducer from './uploadByUrl/uploadByUrlSlice'\nimport modelsByIdReducer from './modelsById/modelsByIdSlice'\n\nexport default combineReducers({\n    user: userReducer,\n    site: siteReducer,\n    collection: collectionReducer,\n    app: appReducer,\n    editor: editorReducer,\n    finder: finderReducer,\n    bulk: bulkReducer,\n    modelsById: modelsByIdReducer,\n    searchByUrl: searchByUrlReducer,\n    uploadByUrl: uploadByUrlReducer,\n})","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\r\nimport logger from 'redux-logger'\r\n\r\nimport rootReducer from \"./rootReducer\"\r\nconst middleware = [...getDefaultMiddleware({\r\n    serializableCheck: {\r\n      // Ignore these action types\r\n      ignoredActions: ['editor/receiveDialog'],\r\n      // Ignore these field paths in all actions\r\n//      ignoredActionPaths: ['meta.arg', 'payload.timestamp'],\r\n      // Ignore these paths in the state\r\n//        ignoredPaths: ['items.dates']\r\n    }\r\n  }), logger]\r\n\r\nexport default configureStore({\r\n    reducer: rootReducer,\r\n    middleware\r\n});","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","export default {\n    editor: {\n        \"Loading\": \"Laster\",\n        \"Saving\": \"Lagrer\",\n        \"Save\": \"Lagre\",\n        \"Save as draft\": \"Lagre som utkast\",\n        \"Save and publish\": \"Lagre og publiser\",\n        \"Save and exit\": \"Lagre og avslutt\",\n        \"Save as\": \"Lagre som\",\n        \"Empty trash\": \"Tm papirkurv\",\n        \"Restore\": \"Gjenopprett\",\n        \"Erase\": \"Slett for alltid\"\n    },\n    layout: {\n        \"table\": \"Tabell\",\n        \"grid\": \"Grid\",\n        \"list\": \"Liste\",\n        \"gallery\": \"Galleri\",\n    },\n    dialog: {\n        \"Search\": \"Sk\",\n        \"Search documents\": \"Sk i dokumenter\",\n        \"Search media\": \"Sk i media\",\n        \"Search media/image\": \"Sk i bilder\",\n        \"Search media/video\": \"Sk i videoer\",\n        \"Search media/audio\": \"Sk i audio\",\n        \"Search media/misc\": \"Sk i filer\",\n        \"Search ekultur\": \"Sk i DigitaltMuseum\",\n        \"Search favorites\": \"Sk i favoritter\",\n        \"Search uploads\": \"Sk i opplastede filer\",\n        \"Search models\": \"Sk i referanser\",\n        \"Favorites\": \"Favoritter\",\n        \"Upload\": \"Last opp\",\n        \"Upload media\": \"Last opp media\",\n        \"media\": \"Media\",\n        \"media/*\": \"Media\",\n        \"media/image\": \"Bilder\",\n        \"media/image*\": \"Bilder\",\n        \"media/video\": \"Video\",\n        \"media/video*\": \"Video\",\n        \"media/audio\": \"Audio\",\n        \"media/audio*\": \"Audio\",\n        \"media/misc\": \"Filer\",\n        \"media/misc*\": \"Filer\",\n        \"media/youtube\": \"YouTube\",\n        \"media/vimeo\": \"Vimeo\",\n        \"media/sketchfab\": \"Sketchfab\",\n        \"documents/*\": \"Dokumenter\",\n        \"documents/ekultur\": \"Objekter\",\n        \"youtube\": \"YouTube\",\n        \"vimeo\": \"Vimeo\",\n        \"sketchfab\": \"Sketchfab\",\n        \"ekultur\": \"Objekter\",\n    },\n    upload: {\n        \"Uploading {{requested}} of {{received}}\": \"Laster opp {{requested}} av {{received}}\",\n        \"Click or drop files to upload\": \"Klikk eller dra filer her for  laste opp\",\n        \"Fetching unprocessed uploads\": \"Finner ubehandlede opplastninger\",\n        \"No unprocessed uploads\": \"Ingen ubehandlede opplastninger\",\n        \"{{count}} unprocessed uploads\": \"{{count}} ubehandlede opplastninger\",\n    },\n    search: {\n        \"Fetching data, please wait\": \"Henter data, vennligst vent\",\n        \"No hits\": \"Ingen treff\",\n        \"{{count}} hits\": \"{{count}} treff\",\n        \"{{page}} of {{pages}} pages\": \"Side {{page}} av {{pages}}\",\n        \"More results\": \"Flere resultater\",\n        \"Next page\": \"Neste side\",\n        \"Previous page\": \"Forrige side\",\n        \"Page {{page}}\": \"Side {{page}}\",\n        \"Searching, please wait\": \"Sker, vennligst vent\",\n        \"Loading page {{page}}\": \"Henter side {{page}}\",\n    },\n    view: {\n        \"{{rows}} rows\": \"{{rows}} rader\",\n    },\n    sort: {\n        \"title\": \"Sortert alfabetisk\",\n        \"updatedAt DESC\": \"Sist oppdatert\",\n        \"createdAt ASC\": \"Opprettet dato, frst\",\n        \"createdAt DESC\": \"Opprettet dato\",\n    },\n    mediaType: {\n        \"image\": \"Bilde\",\n        \"video\": \"Video\",\n        \"audio\": \"Audio\",\n    },\n    documentType: {\n        \"article\": \"Artikkel\",\n        \"pageHome\": \"Hjemmeside\",\n        \"pageTopic\": \"Tema\",\n        \"pageMap\": \"Kart\",\n        \"pageGrid\": \"Mosaikk\",\n        \"pageList\": \"Liste\",\n        \"pageAnnotate\": \"Bildekart\",\n        \"pageMedia\": \"Media\",\n        \"device\": \"Enhet\",\n    },\n    status: {\n        \"error\": \"Feil\",\n        \"general\": \"N/A\",\n        \"draft\": \"Utkast\",\n        \"publish\": \"Publisert\",\n        \"trash\": \"Papirkurv\",\n        \"erased\": \"Slettet\",\n        \"restore\": \"Gjenopprettet\",\n        \"upload\": \"Ubehandlet\",\n        \"new\": \"Ny\"\n    },\n    uploadStatus: {\n        \"init\": \"Laster opp\",\n        \"done\": \"Lastet opp\",\n        \"convert\": \"Konverterer media\",\n    },\n    bylineTitle: {\n        \"photographer\": \"Foto\",\n        \"rightsmanager\": \"Rettighetsforvalter\",\n        \"director\": \"Regissr\",\n        \"photograph\": \"Foto\",\n        \"vector\": \"Grafikk\",\n        \"illustration\": \"Illustrasjon\",\n        \"painting\": \"Maleri\",\n    },\n    license: {\n        \"copyright\": \"Opphavsrett\",\n        \"by\": \"Navngivelse\",\n        \"by-sa\": \"Navngivelse-DelPSammeVilkr\",\n        \"by-nd\": \"Navngivelse-IngenBearbeidelse\",\n        \"by-nc\": \"Navngivelse-IkkeKommersiell\",\n        \"by-nc-sa\": \"Navngivelse-IkkeKommersiell-DelPSammeVilkr\",\n        \"pdm\": \"Public Domain Mark\",\n        \"pdd\": \"Public Domain Dedication\",\n    },\n    licenseGroup: {\n        \"by\": \"Kan gjenbrukes ved navngivelse\",\n        \"by-nd\": \"Kan kun gjenbrukes ved tillatelse\",\n        \"by-nc\": \"Kan ikke gjenbrukes kommersielt\",\n        \"pd\": \"pne lisenser (kan gjenbrukes)\"\n    }\n}","import translations from \"./nb\"\n\nexport default {\n    ...translations\n}","import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\n\nimport Backend from 'i18next-xhr-backend';\nimport LanguageDetector from 'i18next-browser-languagedetector';\n// not like to use this?\n// have a look at the Quick start guide \n// for passing in lng and translations on init\n\nimport en from \"./translations/en\";\nimport nn from \"./translations/nn\";\nimport nb from \"./translations/nb\";\nimport sv from \"./translations/sv\";\n\n\ni18n\n    // load translation using xhr -> see /public/locales (i.e. https://github.com/i18next/react-i18next/tree/master/example/react/public/locales)\n    // learn more: https://github.com/i18next/i18next-xhr-backend\n//    .use(Backend)\n    // detect user language\n    // learn more: https://github.com/i18next/i18next-browser-languageDetector\n    .use(LanguageDetector)\n    // pass the i18n instance to react-i18next.\n    .use(initReactI18next)\n    // init i18next\n    // for all options read: https://www.i18next.com/overview/configuration-options\n    .init({\n\n        resources: {\n            en: en,\n            nb: nb,\n            nn: nn,\n            sv: sv\n        },\n\n        fallbackLng: 'en',\n        debug: true,\n\n        interpolation: {\n            escapeValue: false, // not needed for react as it escapes by default\n        }\n    });\n\n\nexport default i18n;","export default {\n    editor: {\n        \"Loading\": \"Loading\",\n        \"Saving\": \"Saving\",\n        \"Save\": \"Save\",\n        \"Save as draft\": \"Save as draft\",\n        \"Save and publish\": \"Save and publish\",\n        \"Save and exit\": \"Save and exit\",\n        \"Save as\": \"Save as\"\n    }\n}","export default {\n    editor: {\n        \"Loading\": \"Lsa\",\n        \"Saving\": \"Spara\",\n        \"Save\": \"Spara\",\n        \"Save as draft\": \"Spara som utkast\",\n        \"Save and publish\": \"Spara och publicera\",\n        \"Save and exit\": \"Spare och avsluta\",\n        \"Save as\": \"Spare som\"\n    }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\nimport store from './redux/store';\nimport { Provider } from 'react-redux';\n\nimport * as serviceWorker from './serviceWorker';\n\n// i18next\nimport './i18n';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}