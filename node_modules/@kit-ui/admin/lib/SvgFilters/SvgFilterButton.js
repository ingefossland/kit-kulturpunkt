"use strict";

exports.__esModule = true;
exports.default = void 0;

var _react = _interopRequireWildcard(require("react"));

var _IconButton = _interopRequireDefault(require("@material-ui/core/IconButton"));

var _Icon = _interopRequireDefault(require("@material-ui/core/Icon"));

var _styles = require("@material-ui/core/styles");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

var useStyles = (0, _styles.makeStyles)(function (theme) {
  var _button;

  return {
    button: (_button = {
      backgroundColor: "transparent",
      width: theme.spacing(6),
      height: theme.spacing(6),
      marginLeft: theme.spacing(.5),
      marginRight: theme.spacing(.5),
      borderRadius: "100%"
    }, _button["backgroundColor"] = function backgroundColor(props) {
      return props.selected && theme.palette.primary.main || "transparent";
    }, _button.color = function color(props) {
      return props.selected && theme.palette.primary.contrastText || props.value && theme.palette.primary.main || "currentColor";
    }, _button["&:hover"] = {
      backgroundColor: function backgroundColor(props) {
        return props.selected && theme.palette.primary.main || "transparent";
      },
      opacity: 1
    }, _button),
    label: {
      fontFamily: "Akkurat, sans-serif",
      fontSize: "16px",
      position: "absolute",
      top: 0,
      height: "1em",
      marginTop: "-2em",
      width: "100%",
      overflow: "visible"
    },
    value: {
      fontFamily: "Akkurat, sans-serif",
      fontSize: "16px"
    },
    circle: {
      transition: "stroke-dashoffset 0.35s",
      transform: "rotate(-90deg)",
      transformOrigin: "50% 50%",
      position: "absolute",
      top: 0,
      right: 0,
      bottom: 0,
      left: 0,
      width: "100%",
      height: "100%"
    },
    circleBackground: {
      fill: "transparent",
      stroke: "currentColor",
      opacity: .25
    },
    circleProgress: {
      stroke: "currentColor"
    }
  };
});

var FilterButton = function FilterButton(_ref) {
  var min = _ref.min,
      max = _ref.max,
      icon = _ref.icon,
      label = _ref.label,
      name = _ref.name,
      _ref$value = _ref.value,
      value = _ref$value === void 0 ? 0 : _ref$value,
      selected = _ref.selected,
      onClick = _ref.onClick;
  var progress = value;
  var classes = useStyles({
    progress: progress,
    selected: selected,
    value: value
  });

  var ProgressCircle = function ProgressCircle(_ref2) {
    var _ref2$radius = _ref2.radius,
        radius = _ref2$radius === void 0 ? 24 : _ref2$radius,
        _ref2$stroke = _ref2.stroke,
        stroke = _ref2$stroke === void 0 ? 2 : _ref2$stroke,
        progress = _ref2.progress;
    var normalizedRadius = radius - stroke / 2 * 2;
    var circumference = normalizedRadius * 2 * Math.PI;
    var strokeDashoffset = circumference - progress / 100 * circumference;
    return /*#__PURE__*/_react.default.createElement("svg", {
      className: classes.circle,
      width: radius * 2,
      height: radius * 2
    }, /*#__PURE__*/_react.default.createElement("circle", {
      className: classes.circleBackground,
      stroke: "black",
      fill: "transparent",
      strokeWidth: stroke,
      r: normalizedRadius,
      cx: radius,
      cy: radius
    }), /*#__PURE__*/_react.default.createElement("circle", {
      className: classes.circleProgress,
      stroke: "black",
      fill: "transparent",
      strokeWidth: stroke,
      strokeDasharray: circumference + ' ' + circumference,
      style: {
        strokeDashoffset: strokeDashoffset
      },
      "stroke-width": stroke,
      r: normalizedRadius,
      cx: radius,
      cy: radius
    }));
  };

  return /*#__PURE__*/_react.default.createElement(_IconButton.default, {
    className: classes.button,
    "aria-selected": selected,
    onClick: onClick
  }, /*#__PURE__*/_react.default.createElement(ProgressCircle, {
    progress: value
  }), selected && value && /*#__PURE__*/_react.default.createElement("b", {
    className: classes.value
  }, value) || /*#__PURE__*/_react.default.createElement(_Icon.default, {
    className: classes.icon
  }, icon));
};

var _default = FilterButton;
exports.default = _default;
module.exports = exports.default;