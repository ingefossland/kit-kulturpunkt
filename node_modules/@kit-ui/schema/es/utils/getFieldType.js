function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

import fieldTypes from "../fieldTypes";
export var getFieldType = function getFieldType(props) {
  var schema = props && props.schema;
  var schemaType = schema && schema.type;
  var itemSchema = props && props.schema && props.schema.items;
  var itemType = itemSchema && itemSchema.type;
  var field = {};

  if (schemaType && schemaType in fieldTypes) {
    var convertFieldType = fieldTypes[schemaType];
    field = convertFieldType(_extends({}, props));
    field.schema = _extends({}, field.schema, {
      _type: schemaType
    });
  } else if (schemaType === "array" && itemType && itemType in fieldTypes) {
    console.log("convert item", itemSchema);
    var convertItemType = fieldTypes[itemType];
    var itemField = convertItemType({
      schema: itemSchema,
      uiSchema: props.uiSchema && props.uiSchema.items
    });
    console.log("new item", itemField);
    field = _extends({}, props, {
      schema: _extends({}, schema, {
        items: _extends({}, itemField.schema, {
          _type: itemType
        })
      }),
      uiSchema: _extends({}, props.uiSchema, {
        items: _extends({}, itemField.uiSchema)
      })
    });
  } else {
    field = props;
  }

  return field;
};
export default getFieldType;