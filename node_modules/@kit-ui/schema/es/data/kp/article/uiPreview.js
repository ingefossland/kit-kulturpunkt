export default {
  "select": {
    "imageUrl": "imageUrl",
    "title": "title",
    "description": "description",
    "metadata": "metadata",
    "typeLabel": "typeLabel"
  },
  prepare: function prepare(_ref) {
    var formData = _ref.formData,
        formContext = _ref.formContext;
    var documentType = formData.documentType,
        title = formData.title,
        content = formData.content,
        description = formData.description;
    var defaultLocale = formContext && formContext.defaultLocale;
    var currentLocale = formContext && formContext.currentLocale;
    var locale = defaultLocale || currentLocale || formData.locale;
    var localeId = "locale:" + locale;
    var metadata = [];
    var headerImage = content && content.headerImage;
    var imageUrl = headerImage && headerImage.media && headerImage.media.imageUrl;

    if (content) {
      title = content.title && content.title[localeId];
      description = content.description && content.description[localeId];
      var location = content.location,
          sections = content.sections,
          isPartOf = content.isPartOf;

      if (location && location.lat && location.lng) {
        if (location.address) {
          metadata.push(location.address);
        } else {
          metadata.push("Sted");
        }
      }

      if (sections && sections.length) {
        metadata.push(sections.length + ' seksjoner');
      }

      if (isPartOf && isPartOf.length) {
        metadata.push(isPartOf.length + ' tema');
      }
    }

    return {
      imageUrl: imageUrl,
      untitled: "Ny artikkel",
      title: title || "Uten tittel",
      description: description,
      metadata: metadata,
      typeLabel: documentType
    };
  }
};