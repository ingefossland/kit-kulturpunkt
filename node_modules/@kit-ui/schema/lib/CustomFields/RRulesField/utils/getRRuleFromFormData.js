"use strict";

exports.__esModule = true;
exports.getRRuleFromFormData = void 0;

var _moment = _interopRequireDefault(require("moment"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var getRRuleFromFormData = function getRRuleFromFormData(formData) {
  if (formData === void 0) {
    formData = {};
  }

  if (!formData) {
    return;
  }

  var _formData = formData,
      FREQ = _formData.FREQ,
      INTERVAL = _formData.INTERVAL,
      BYMONTH = _formData.BYMONTH,
      BYMONTHDAY = _formData.BYMONTHDAY,
      BYDAY = _formData.BYDAY,
      BYSETPOS = _formData.BYSETPOS,
      ENDS = _formData.ENDS,
      COUNT = _formData.COUNT,
      UNTIL = _formData.UNTIL;

  if (!FREQ || FREQ === "undefined") {
    return undefined;
  }

  var rrule = [];
  rrule.push("FREQ=" + FREQ);

  if (INTERVAL) {
    rrule.push("INTERVAL=" + INTERVAL);
  } // YEARLY


  if (FREQ === "YEARLY") {
    if (BYMONTH && BYMONTH.length) {
      rrule.push("BYMONTH=" + BYMONTH.join(","));
    }
  }

  if (FREQ === "YEARLY" || FREQ === "MONTHLY") {
    if (BYSETPOS && BYSETPOS.length) {
      rrule.push("BYSETPOS=" + BYSETPOS.join(","));
      rrule.push("BYDAY=" + BYDAY.join(","));
    } else if (BYMONTHDAY && BYMONTHDAY.length) {
      rrule.push("BYMONTHDAY=" + BYMONTHDAY.join(","));
    }
  }

  if (FREQ === "WEEKLY" || FREQ === "HOURLY" || FREQ === "MINUTELY") {
    if (BYDAY && BYDAY.length) {
      rrule.push("BYDAY=" + BYDAY.join(","));
    }
  } // ends


  if (ENDS) {
    if (UNTIL) {
      rrule.push("UNTIL=" + (0, _moment.default)(UNTIL).format('YYYYMMDD'));
    }

    if (COUNT) {
      rrule.push("COUNT=" + COUNT);
    }
  }

  return rrule.join(";");
};

exports.getRRuleFromFormData = getRRuleFromFormData;