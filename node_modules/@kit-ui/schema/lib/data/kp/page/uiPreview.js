"use strict";

exports.__esModule = true;
exports.default = void 0;

var _icons = _interopRequireDefault(require("./icons"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _default = {
  "select": {
    "imageUrl": "imageUrl",
    "title": "title",
    "description": "description",
    "metadata": "metadata",
    "typeLabel": "typeLabel"
  },
  prepare: function prepare(_ref) {
    var formData = _ref.formData,
        formContext = _ref.formContext;
    var documentType = formData.documentType,
        content = formData.content;
    var defaultLocale = formContext && formContext.defaultLocale;
    var currentLocale = formContext && formContext.currentLocale;
    var locale = defaultLocale || currentLocale || formData.locale;
    var localeId = "locale:" + locale;
    var metadata = [];
    var pageIcon = documentType && _icons.default[documentType];
    var backgroundImage = content && content.backgroundImage;
    var imageUrl = backgroundImage && backgroundImage.media && backgroundImage.media.imageUrl;
    var title = content && content.title && content.title[localeId] || formData.title;
    var description = content && content.description && content.description[localeId];
    return {
      imageUrl: imageUrl || pageIcon,
      title: title || "Untitled",
      description: description,
      metadata: metadata,
      typeLabel: documentType
    };
  }
};
exports.default = _default;
module.exports = exports.default;