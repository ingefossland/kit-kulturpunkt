"use strict";

exports.__esModule = true;
exports.default = void 0;

var _react = _interopRequireDefault(require("react"));

var _color = _interopRequireDefault(require("color"));

var _SvgIcon = _interopRequireDefault(require("@material-ui/core/SvgIcon"));

var _styles = require("@material-ui/core/styles");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var getInitialsFromName = function getInitialsFromName(_ref) {
  var name = _ref.name;
  var parts = name.split(' ');
  var initials = [];
  parts.map(function (part) {
    initials.push(part.substr(0, 1).toUpperCase());
  });
  return initials.join('');
};

var UserIcon = function UserIcon(_ref2) {
  var className = _ref2.className,
      _ref2$defaultColor = _ref2.defaultColor,
      defaultColor = _ref2$defaultColor === void 0 ? "#000" : _ref2$defaultColor,
      color = _ref2.color,
      label = _ref2.label,
      imageUrl = _ref2.imageUrl,
      name = _ref2.name,
      initials = _ref2.initials;
  var fill = color || defaultColor;
  var text = label || initials || name && getInitialsFromName({
    name: name
  });
  fill = (0, _color.default)(fill);
  var contrast;

  if (fill.isDark()) {
    contrast = 'white';
  } else {
    contrast = 'black';
  }

  if (imageUrl) {
    return /*#__PURE__*/_react.default.createElement(_SvgIcon.default, {
      className: className,
      title: name
    }, /*#__PURE__*/_react.default.createElement("defs", null, /*#__PURE__*/_react.default.createElement("clipPath", {
      id: "circle"
    }, /*#__PURE__*/_react.default.createElement("circle", {
      cx: "12",
      cy: "12",
      r: "12"
    }))), /*#__PURE__*/_react.default.createElement("image", {
      href: imageUrl,
      x: "0",
      y: "0",
      width: "100%",
      height: "100%",
      preserveAspectRatio: "xMidYMid slice",
      clipPath: "url(#circle)"
    }), /*#__PURE__*/_react.default.createElement("text", {
      x: "12",
      y: "12.5",
      fill: contrast,
      fontFamily: "Akkurat, sans-serif",
      fontSize: "9",
      fontWeight: "normal",
      dominantBaseline: "middle",
      textAnchor: "middle"
    }, text));
  }

  return /*#__PURE__*/_react.default.createElement(_SvgIcon.default, {
    className: className,
    title: name
  }, /*#__PURE__*/_react.default.createElement("image", {
    href: imageUrl,
    x: "0",
    y: "0",
    width: "100%",
    height: "100%",
    preserveAspectRatio: "xMinYMin slice"
  }), /*#__PURE__*/_react.default.createElement("circle", {
    cx: "12",
    cy: "12",
    r: "12",
    fill: fill
  }), /*#__PURE__*/_react.default.createElement("text", {
    x: "12",
    y: "12.5",
    fill: contrast,
    fontFamily: "Akkurat, sans-serif",
    fontSize: "9",
    fontWeight: "normal",
    dominantBaseline: "middle",
    textAnchor: "middle"
  }, text));
};

var _default = UserIcon;
exports.default = _default;
module.exports = exports.default;