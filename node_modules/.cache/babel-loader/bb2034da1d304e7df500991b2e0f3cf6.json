{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _Array$isArray from \"@babel/runtime-corejs2/core-js/array/is-array\";\nimport _typeof from \"@babel/runtime-corejs2/helpers/esm/typeof\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _pick from \"lodash/pick\";\nimport _get from \"lodash/get\";\nimport _isEmpty from \"lodash/isEmpty\";\nimport { default as DefaultErrorList } from \"./ErrorList\";\nimport { getDefaultFormState, retrieveSchema, shouldRender, toIdSchema, getDefaultRegistry, deepEquals, toPathSchema, isObject } from \"../utils\";\nimport validateFormData, { toErrorList } from \"../validate\";\nimport { mergeObjects } from \"../utils\";\n\nvar Form = /*#__PURE__*/function (_Component) {\n  _inherits(Form, _Component);\n\n  function Form(props) {\n    var _this;\n\n    _classCallCheck(this, Form);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Form).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"getUsedFormData\", function (formData, fields) {\n      //for the case of a single input form\n      if (fields.length === 0 && _typeof(formData) !== \"object\") {\n        return formData;\n      }\n\n      var data = _pick(formData, fields);\n\n      if (_Array$isArray(formData)) {\n        return _Object$keys(data).map(function (key) {\n          return data[key];\n        });\n      }\n\n      return data;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getFieldNames\", function (pathSchema, formData) {\n      var getAllPaths = function getAllPaths(_obj) {\n        var acc = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n        var paths = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [\"\"];\n\n        _Object$keys(_obj).forEach(function (key) {\n          if (_typeof(_obj[key]) === \"object\") {\n            var newPaths = paths.map(function (path) {\n              return \"\".concat(path, \".\").concat(key);\n            }); // If an object is marked with additionalProperties, all its keys are valid\n\n            if (_obj[key].__rjsf_additionalProperties && _obj[key].$name !== \"\") {\n              acc.push(_obj[key].$name);\n            } else {\n              getAllPaths(_obj[key], acc, newPaths);\n            }\n          } else if (key === \"$name\" && _obj[key] !== \"\") {\n            paths.forEach(function (path) {\n              path = path.replace(/^\\./, \"\");\n\n              var formValue = _get(formData, path); // adds path to fieldNames if it points to a value\n              // or an empty object/array\n\n\n              if (_typeof(formValue) !== \"object\" || _isEmpty(formValue)) {\n                acc.push(path);\n              }\n            });\n          }\n        });\n\n        return acc;\n      };\n\n      return getAllPaths(pathSchema);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (formData, newErrorSchema) {\n      if (isObject(formData) || _Array$isArray(formData)) {\n        var newState = _this.getStateFromProps(_this.props, formData);\n\n        formData = newState.formData;\n      }\n\n      var mustValidate = !_this.props.noValidate && _this.props.liveValidate;\n      var state = {\n        formData: formData\n      };\n      var newFormData = formData;\n\n      if (_this.props.omitExtraData === true && _this.props.liveOmit === true) {\n        var retrievedSchema = retrieveSchema(_this.state.schema, _this.state.schema, formData);\n        var pathSchema = toPathSchema(retrievedSchema, \"\", _this.state.schema, formData);\n\n        var fieldNames = _this.getFieldNames(pathSchema, formData);\n\n        newFormData = _this.getUsedFormData(formData, fieldNames);\n        state = {\n          formData: newFormData\n        };\n      }\n\n      if (mustValidate) {\n        var schemaValidation = _this.validate(newFormData);\n\n        var errors = schemaValidation.errors;\n        var errorSchema = schemaValidation.errorSchema;\n        var schemaValidationErrors = errors;\n        var schemaValidationErrorSchema = errorSchema;\n\n        if (_this.props.extraErrors) {\n          errorSchema = mergeObjects(errorSchema, _this.props.extraErrors, !!\"concat arrays\");\n          errors = toErrorList(errorSchema);\n        }\n\n        state = {\n          formData: newFormData,\n          errors: errors,\n          errorSchema: errorSchema,\n          schemaValidationErrors: schemaValidationErrors,\n          schemaValidationErrorSchema: schemaValidationErrorSchema\n        };\n      } else if (!_this.props.noValidate && newErrorSchema) {\n        var _errorSchema = _this.props.extraErrors ? mergeObjects(newErrorSchema, _this.props.extraErrors, !!\"concat arrays\") : newErrorSchema;\n\n        state = {\n          formData: newFormData,\n          errorSchema: _errorSchema,\n          errors: toErrorList(_errorSchema)\n        };\n      }\n\n      _this.setState(state, function () {\n        return _this.props.onChange && _this.props.onChange(_this.state);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onBlur\", function () {\n      if (_this.props.onBlur) {\n        var _this$props;\n\n        (_this$props = _this.props).onBlur.apply(_this$props, arguments);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFocus\", function () {\n      if (_this.props.onFocus) {\n        var _this$props2;\n\n        (_this$props2 = _this.props).onFocus.apply(_this$props2, arguments);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\", function (event) {\n      event.preventDefault();\n\n      if (event.target !== event.currentTarget) {\n        return;\n      }\n\n      event.persist();\n      var newFormData = _this.state.formData;\n\n      if (_this.props.omitExtraData === true) {\n        var retrievedSchema = retrieveSchema(_this.state.schema, _this.state.schema, newFormData);\n        var pathSchema = toPathSchema(retrievedSchema, \"\", _this.state.schema, newFormData);\n\n        var fieldNames = _this.getFieldNames(pathSchema, newFormData);\n\n        newFormData = _this.getUsedFormData(newFormData, fieldNames);\n      }\n\n      if (!_this.props.noValidate) {\n        var schemaValidation = _this.validate(newFormData);\n\n        var _errors = schemaValidation.errors;\n        var _errorSchema2 = schemaValidation.errorSchema;\n        var schemaValidationErrors = _errors;\n        var schemaValidationErrorSchema = _errorSchema2;\n\n        if (_Object$keys(_errors).length > 0) {\n          if (_this.props.extraErrors) {\n            _errorSchema2 = mergeObjects(_errorSchema2, _this.props.extraErrors, !!\"concat arrays\");\n            _errors = toErrorList(_errorSchema2);\n          }\n\n          _this.setState({\n            errors: _errors,\n            errorSchema: _errorSchema2,\n            schemaValidationErrors: schemaValidationErrors,\n            schemaValidationErrorSchema: schemaValidationErrorSchema\n          }, function () {\n            if (_this.props.onError) {\n              _this.props.onError(_errors);\n            } else {\n              console.error(\"Form validation failed\", _errors);\n            }\n          });\n\n          return;\n        }\n      }\n\n      var errorSchema;\n      var errors;\n\n      if (_this.props.extraErrors) {\n        errorSchema = _this.props.extraErrors;\n        errors = toErrorList(errorSchema);\n      } else {\n        errorSchema = {};\n        errors = [];\n      }\n\n      _this.setState({\n        formData: newFormData,\n        errors: errors,\n        errorSchema: errorSchema\n      }, function () {\n        if (_this.props.onSubmit) {\n          _this.props.onSubmit(_objectSpread({}, _this.state, {\n            formData: newFormData,\n            status: \"submitted\"\n          }), event);\n        }\n      });\n    });\n\n    _this.state = _this.getStateFromProps(props, props.formData);\n\n    if (_this.props.onChange && !deepEquals(_this.state.formData, _this.props.formData)) {\n      _this.props.onChange(_this.state);\n    }\n\n    _this.formElement = null;\n    return _this;\n  }\n\n  _createClass(Form, [{\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      var nextState = this.getStateFromProps(nextProps, nextProps.formData);\n\n      if (!deepEquals(nextState.formData, nextProps.formData) && !deepEquals(nextState.formData, this.state.formData) && this.props.onChange) {\n        this.props.onChange(nextState);\n      }\n\n      this.setState(nextState);\n    }\n  }, {\n    key: \"getStateFromProps\",\n    value: function getStateFromProps(props, inputFormData) {\n      var state = this.state || {};\n      var schema = \"schema\" in props ? props.schema : this.props.schema;\n      var uiSchema = \"uiSchema\" in props ? props.uiSchema : this.props.uiSchema;\n      var edit = typeof inputFormData !== \"undefined\";\n      var liveValidate = \"liveValidate\" in props ? props.liveValidate : this.props.liveValidate;\n      var mustValidate = edit && !props.noValidate && liveValidate;\n      var rootSchema = schema;\n      var formData = getDefaultFormState(schema, inputFormData, rootSchema);\n      var retrievedSchema = retrieveSchema(schema, rootSchema, formData);\n      var customFormats = props.customFormats;\n      var additionalMetaSchemas = props.additionalMetaSchemas;\n\n      var getCurrentErrors = function getCurrentErrors() {\n        if (props.noValidate) {\n          return {\n            errors: [],\n            errorSchema: {}\n          };\n        } else if (!props.liveValidate) {\n          return {\n            errors: state.schemaValidationErrors || [],\n            errorSchema: state.schemaValidationErrorSchema || {}\n          };\n        }\n\n        return {\n          errors: state.errors || [],\n          errorSchema: state.errorSchema || {}\n        };\n      };\n\n      var errors, errorSchema, schemaValidationErrors, schemaValidationErrorSchema;\n\n      if (mustValidate) {\n        var schemaValidation = this.validate(formData, schema, additionalMetaSchemas, customFormats);\n        errors = schemaValidation.errors;\n        errorSchema = schemaValidation.errorSchema;\n        schemaValidationErrors = errors;\n        schemaValidationErrorSchema = errorSchema;\n      } else {\n        var currentErrors = getCurrentErrors();\n        errors = currentErrors.errors;\n        errorSchema = currentErrors.errorSchema;\n        schemaValidationErrors = state.schemaValidationErrors;\n        schemaValidationErrorSchema = state.schemaValidationErrorSchema;\n      }\n\n      if (props.extraErrors) {\n        errorSchema = mergeObjects(errorSchema, props.extraErrors, !!\"concat arrays\");\n        errors = toErrorList(errorSchema);\n      }\n\n      var idSchema = toIdSchema(retrievedSchema, uiSchema[\"ui:rootFieldId\"], rootSchema, formData, props.idPrefix);\n      var nextState = {\n        schema: schema,\n        uiSchema: uiSchema,\n        idSchema: idSchema,\n        formData: formData,\n        edit: edit,\n        errors: errors,\n        errorSchema: errorSchema,\n        additionalMetaSchemas: additionalMetaSchemas\n      };\n\n      if (schemaValidationErrors) {\n        nextState.schemaValidationErrors = schemaValidationErrors;\n        nextState.schemaValidationErrorSchema = schemaValidationErrorSchema;\n      }\n\n      return nextState;\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return shouldRender(this, nextProps, nextState);\n    }\n  }, {\n    key: \"validate\",\n    value: function validate(formData) {\n      var schema = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.props.schema;\n      var additionalMetaSchemas = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.props.additionalMetaSchemas;\n      var customFormats = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.props.customFormats;\n      var _this$props3 = this.props,\n          validate = _this$props3.validate,\n          transformErrors = _this$props3.transformErrors;\n\n      var _this$getRegistry = this.getRegistry(),\n          rootSchema = _this$getRegistry.rootSchema;\n\n      var resolvedSchema = retrieveSchema(schema, rootSchema, formData);\n      return validateFormData(formData, resolvedSchema, validate, transformErrors, additionalMetaSchemas, customFormats);\n    }\n  }, {\n    key: \"renderErrors\",\n    value: function renderErrors() {\n      var _this$state = this.state,\n          errors = _this$state.errors,\n          errorSchema = _this$state.errorSchema,\n          schema = _this$state.schema,\n          uiSchema = _this$state.uiSchema;\n      var _this$props4 = this.props,\n          ErrorList = _this$props4.ErrorList,\n          showErrorList = _this$props4.showErrorList,\n          formContext = _this$props4.formContext;\n\n      if (errors.length && showErrorList != false) {\n        return React.createElement(ErrorList, {\n          errors: errors,\n          errorSchema: errorSchema,\n          schema: schema,\n          uiSchema: uiSchema,\n          formContext: formContext\n        });\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getRegistry\",\n    value: function getRegistry() {\n      // For BC, accept passed SchemaField and TitleField props and pass them to\n      // the \"fields\" registry one.\n      var _getDefaultRegistry = getDefaultRegistry(),\n          fields = _getDefaultRegistry.fields,\n          widgets = _getDefaultRegistry.widgets;\n\n      return {\n        fields: _objectSpread({}, fields, this.props.fields),\n        widgets: _objectSpread({}, widgets, this.props.widgets),\n        ArrayFieldTemplate: this.props.ArrayFieldTemplate,\n        ObjectFieldTemplate: this.props.ObjectFieldTemplate,\n        FieldTemplate: this.props.FieldTemplate,\n        definitions: this.props.schema.definitions || {},\n        rootSchema: this.props.schema,\n        formContext: this.props.formContext || {}\n      };\n    }\n  }, {\n    key: \"submit\",\n    value: function submit() {\n      if (this.formElement) {\n        this.formElement.dispatchEvent(new CustomEvent(\"submit\", {\n          cancelable: true\n        }));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props5 = this.props,\n          children = _this$props5.children,\n          id = _this$props5.id,\n          idPrefix = _this$props5.idPrefix,\n          className = _this$props5.className,\n          tagName = _this$props5.tagName,\n          name = _this$props5.name,\n          method = _this$props5.method,\n          target = _this$props5.target,\n          action = _this$props5.action,\n          deprecatedAutocomplete = _this$props5.autocomplete,\n          currentAutoComplete = _this$props5.autoComplete,\n          enctype = _this$props5.enctype,\n          acceptcharset = _this$props5.acceptcharset,\n          noHtml5Validate = _this$props5.noHtml5Validate,\n          disabled = _this$props5.disabled,\n          formContext = _this$props5.formContext;\n      var _this$state2 = this.state,\n          schema = _this$state2.schema,\n          uiSchema = _this$state2.uiSchema,\n          formData = _this$state2.formData,\n          errorSchema = _this$state2.errorSchema,\n          idSchema = _this$state2.idSchema;\n      var registry = this.getRegistry();\n      var _SchemaField = registry.fields.SchemaField;\n      var FormTag = tagName ? tagName : \"form\";\n\n      if (deprecatedAutocomplete) {\n        console.warn(\"Using autocomplete property of Form is deprecated, use autoComplete instead.\");\n      }\n\n      var autoComplete = currentAutoComplete ? currentAutoComplete : deprecatedAutocomplete;\n      return React.createElement(FormTag, {\n        className: className ? className : \"rjsf\",\n        id: id,\n        name: name,\n        method: method,\n        target: target,\n        action: action,\n        autoComplete: autoComplete,\n        encType: enctype,\n        acceptCharset: acceptcharset,\n        noValidate: noHtml5Validate,\n        onSubmit: this.onSubmit,\n        ref: function ref(form) {\n          _this2.formElement = form;\n        }\n      }, this.renderErrors(), React.createElement(_SchemaField, {\n        schema: schema,\n        uiSchema: uiSchema,\n        errorSchema: errorSchema,\n        idSchema: idSchema,\n        idPrefix: idPrefix,\n        formContext: formContext,\n        formData: formData,\n        onChange: this.onChange,\n        onBlur: this.onBlur,\n        onFocus: this.onFocus,\n        registry: registry,\n        disabled: disabled\n      }), children ? children : React.createElement(\"div\", null, React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-info\"\n      }, \"Submit\")));\n    }\n  }]);\n\n  return Form;\n}(Component);\n\n_defineProperty(Form, \"defaultProps\", {\n  uiSchema: {},\n  noValidate: false,\n  liveValidate: false,\n  disabled: false,\n  noHtml5Validate: false,\n  ErrorList: DefaultErrorList,\n  omitExtraData: false\n});\n\nexport { Form as default };\n\nif (process.env.NODE_ENV !== \"production\") {\n  Form.propTypes = {\n    schema: PropTypes.object.isRequired,\n    uiSchema: PropTypes.object,\n    formData: PropTypes.any,\n    widgets: PropTypes.objectOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object])),\n    fields: PropTypes.objectOf(PropTypes.elementType),\n    ArrayFieldTemplate: PropTypes.elementType,\n    ObjectFieldTemplate: PropTypes.elementType,\n    FieldTemplate: PropTypes.elementType,\n    ErrorList: PropTypes.func,\n    onChange: PropTypes.func,\n    onError: PropTypes.func,\n    showErrorList: PropTypes.bool,\n    onSubmit: PropTypes.func,\n    id: PropTypes.string,\n    className: PropTypes.string,\n    tagName: PropTypes.elementType,\n    name: PropTypes.string,\n    method: PropTypes.string,\n    target: PropTypes.string,\n    action: PropTypes.string,\n    autocomplete: PropTypes.string,\n    autoComplete: PropTypes.string,\n    enctype: PropTypes.string,\n    acceptcharset: PropTypes.string,\n    noValidate: PropTypes.bool,\n    noHtml5Validate: PropTypes.bool,\n    liveValidate: PropTypes.bool,\n    validate: PropTypes.func,\n    transformErrors: PropTypes.func,\n    formContext: PropTypes.object,\n    customFormats: PropTypes.object,\n    additionalMetaSchemas: PropTypes.arrayOf(PropTypes.object),\n    omitExtraData: PropTypes.bool,\n    extraErrors: PropTypes.object\n  };\n}","map":{"version":3,"sources":["/Users/inge/Sites/kit-kulturpunkt/node_modules/@rjsf/core/dist/es/components/Form.js"],"names":["_objectSpread","_Object$keys","_Array$isArray","_typeof","_classCallCheck","_createClass","_possibleConstructorReturn","_getPrototypeOf","_assertThisInitialized","_inherits","_defineProperty","React","Component","PropTypes","_pick","_get","_isEmpty","default","DefaultErrorList","getDefaultFormState","retrieveSchema","shouldRender","toIdSchema","getDefaultRegistry","deepEquals","toPathSchema","isObject","validateFormData","toErrorList","mergeObjects","Form","_Component","props","_this","call","formData","fields","length","data","map","key","pathSchema","getAllPaths","_obj","acc","arguments","undefined","paths","forEach","newPaths","path","concat","__rjsf_additionalProperties","$name","push","replace","formValue","newErrorSchema","newState","getStateFromProps","mustValidate","noValidate","liveValidate","state","newFormData","omitExtraData","liveOmit","retrievedSchema","schema","fieldNames","getFieldNames","getUsedFormData","schemaValidation","validate","errors","errorSchema","schemaValidationErrors","schemaValidationErrorSchema","extraErrors","_errorSchema","setState","onChange","onBlur","_this$props","apply","onFocus","_this$props2","event","preventDefault","target","currentTarget","persist","_errors","_errorSchema2","onError","console","error","onSubmit","status","formElement","value","UNSAFE_componentWillReceiveProps","nextProps","nextState","inputFormData","uiSchema","edit","rootSchema","customFormats","additionalMetaSchemas","getCurrentErrors","currentErrors","idSchema","idPrefix","shouldComponentUpdate","_this$props3","transformErrors","_this$getRegistry","getRegistry","resolvedSchema","renderErrors","_this$state","_this$props4","ErrorList","showErrorList","formContext","createElement","_getDefaultRegistry","widgets","ArrayFieldTemplate","ObjectFieldTemplate","FieldTemplate","definitions","submit","dispatchEvent","CustomEvent","cancelable","render","_this2","_this$props5","children","id","className","tagName","name","method","action","deprecatedAutocomplete","autocomplete","currentAutoComplete","autoComplete","enctype","acceptcharset","noHtml5Validate","disabled","_this$state2","registry","_SchemaField","SchemaField","FormTag","warn","encType","acceptCharset","ref","form","type","process","env","NODE_ENV","propTypes","object","isRequired","any","objectOf","oneOfType","func","elementType","bool","string","arrayOf"],"mappings":"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","sourcesContent":["import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _Array$isArray from \"@babel/runtime-corejs2/core-js/array/is-array\";\nimport _typeof from \"@babel/runtime-corejs2/helpers/esm/typeof\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _pick from \"lodash/pick\";\nimport _get from \"lodash/get\";\nimport _isEmpty from \"lodash/isEmpty\";\nimport { default as DefaultErrorList } from \"./ErrorList\";\nimport { getDefaultFormState, retrieveSchema, shouldRender, toIdSchema, getDefaultRegistry, deepEquals, toPathSchema, isObject } from \"../utils\";\nimport validateFormData, { toErrorList } from \"../validate\";\nimport { mergeObjects } from \"../utils\";\n\nvar Form =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Form, _Component);\n\n  function Form(props) {\n    var _this;\n\n    _classCallCheck(this, Form);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Form).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"getUsedFormData\", function (formData, fields) {\n      //for the case of a single input form\n      if (fields.length === 0 && _typeof(formData) !== \"object\") {\n        return formData;\n      }\n\n      var data = _pick(formData, fields);\n\n      if (_Array$isArray(formData)) {\n        return _Object$keys(data).map(function (key) {\n          return data[key];\n        });\n      }\n\n      return data;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getFieldNames\", function (pathSchema, formData) {\n      var getAllPaths = function getAllPaths(_obj) {\n        var acc = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n        var paths = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [\"\"];\n\n        _Object$keys(_obj).forEach(function (key) {\n          if (_typeof(_obj[key]) === \"object\") {\n            var newPaths = paths.map(function (path) {\n              return \"\".concat(path, \".\").concat(key);\n            }); // If an object is marked with additionalProperties, all its keys are valid\n\n            if (_obj[key].__rjsf_additionalProperties && _obj[key].$name !== \"\") {\n              acc.push(_obj[key].$name);\n            } else {\n              getAllPaths(_obj[key], acc, newPaths);\n            }\n          } else if (key === \"$name\" && _obj[key] !== \"\") {\n            paths.forEach(function (path) {\n              path = path.replace(/^\\./, \"\");\n\n              var formValue = _get(formData, path); // adds path to fieldNames if it points to a value\n              // or an empty object/array\n\n\n              if (_typeof(formValue) !== \"object\" || _isEmpty(formValue)) {\n                acc.push(path);\n              }\n            });\n          }\n        });\n\n        return acc;\n      };\n\n      return getAllPaths(pathSchema);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (formData, newErrorSchema) {\n      if (isObject(formData) || _Array$isArray(formData)) {\n        var newState = _this.getStateFromProps(_this.props, formData);\n\n        formData = newState.formData;\n      }\n\n      var mustValidate = !_this.props.noValidate && _this.props.liveValidate;\n      var state = {\n        formData: formData\n      };\n      var newFormData = formData;\n\n      if (_this.props.omitExtraData === true && _this.props.liveOmit === true) {\n        var retrievedSchema = retrieveSchema(_this.state.schema, _this.state.schema, formData);\n        var pathSchema = toPathSchema(retrievedSchema, \"\", _this.state.schema, formData);\n\n        var fieldNames = _this.getFieldNames(pathSchema, formData);\n\n        newFormData = _this.getUsedFormData(formData, fieldNames);\n        state = {\n          formData: newFormData\n        };\n      }\n\n      if (mustValidate) {\n        var schemaValidation = _this.validate(newFormData);\n\n        var errors = schemaValidation.errors;\n        var errorSchema = schemaValidation.errorSchema;\n        var schemaValidationErrors = errors;\n        var schemaValidationErrorSchema = errorSchema;\n\n        if (_this.props.extraErrors) {\n          errorSchema = mergeObjects(errorSchema, _this.props.extraErrors, !!\"concat arrays\");\n          errors = toErrorList(errorSchema);\n        }\n\n        state = {\n          formData: newFormData,\n          errors: errors,\n          errorSchema: errorSchema,\n          schemaValidationErrors: schemaValidationErrors,\n          schemaValidationErrorSchema: schemaValidationErrorSchema\n        };\n      } else if (!_this.props.noValidate && newErrorSchema) {\n        var _errorSchema = _this.props.extraErrors ? mergeObjects(newErrorSchema, _this.props.extraErrors, !!\"concat arrays\") : newErrorSchema;\n\n        state = {\n          formData: newFormData,\n          errorSchema: _errorSchema,\n          errors: toErrorList(_errorSchema)\n        };\n      }\n\n      _this.setState(state, function () {\n        return _this.props.onChange && _this.props.onChange(_this.state);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onBlur\", function () {\n      if (_this.props.onBlur) {\n        var _this$props;\n\n        (_this$props = _this.props).onBlur.apply(_this$props, arguments);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFocus\", function () {\n      if (_this.props.onFocus) {\n        var _this$props2;\n\n        (_this$props2 = _this.props).onFocus.apply(_this$props2, arguments);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\", function (event) {\n      event.preventDefault();\n\n      if (event.target !== event.currentTarget) {\n        return;\n      }\n\n      event.persist();\n      var newFormData = _this.state.formData;\n\n      if (_this.props.omitExtraData === true) {\n        var retrievedSchema = retrieveSchema(_this.state.schema, _this.state.schema, newFormData);\n        var pathSchema = toPathSchema(retrievedSchema, \"\", _this.state.schema, newFormData);\n\n        var fieldNames = _this.getFieldNames(pathSchema, newFormData);\n\n        newFormData = _this.getUsedFormData(newFormData, fieldNames);\n      }\n\n      if (!_this.props.noValidate) {\n        var schemaValidation = _this.validate(newFormData);\n\n        var _errors = schemaValidation.errors;\n        var _errorSchema2 = schemaValidation.errorSchema;\n        var schemaValidationErrors = _errors;\n        var schemaValidationErrorSchema = _errorSchema2;\n\n        if (_Object$keys(_errors).length > 0) {\n          if (_this.props.extraErrors) {\n            _errorSchema2 = mergeObjects(_errorSchema2, _this.props.extraErrors, !!\"concat arrays\");\n            _errors = toErrorList(_errorSchema2);\n          }\n\n          _this.setState({\n            errors: _errors,\n            errorSchema: _errorSchema2,\n            schemaValidationErrors: schemaValidationErrors,\n            schemaValidationErrorSchema: schemaValidationErrorSchema\n          }, function () {\n            if (_this.props.onError) {\n              _this.props.onError(_errors);\n            } else {\n              console.error(\"Form validation failed\", _errors);\n            }\n          });\n\n          return;\n        }\n      }\n\n      var errorSchema;\n      var errors;\n\n      if (_this.props.extraErrors) {\n        errorSchema = _this.props.extraErrors;\n        errors = toErrorList(errorSchema);\n      } else {\n        errorSchema = {};\n        errors = [];\n      }\n\n      _this.setState({\n        formData: newFormData,\n        errors: errors,\n        errorSchema: errorSchema\n      }, function () {\n        if (_this.props.onSubmit) {\n          _this.props.onSubmit(_objectSpread({}, _this.state, {\n            formData: newFormData,\n            status: \"submitted\"\n          }), event);\n        }\n      });\n    });\n\n    _this.state = _this.getStateFromProps(props, props.formData);\n\n    if (_this.props.onChange && !deepEquals(_this.state.formData, _this.props.formData)) {\n      _this.props.onChange(_this.state);\n    }\n\n    _this.formElement = null;\n    return _this;\n  }\n\n  _createClass(Form, [{\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      var nextState = this.getStateFromProps(nextProps, nextProps.formData);\n\n      if (!deepEquals(nextState.formData, nextProps.formData) && !deepEquals(nextState.formData, this.state.formData) && this.props.onChange) {\n        this.props.onChange(nextState);\n      }\n\n      this.setState(nextState);\n    }\n  }, {\n    key: \"getStateFromProps\",\n    value: function getStateFromProps(props, inputFormData) {\n      var state = this.state || {};\n      var schema = \"schema\" in props ? props.schema : this.props.schema;\n      var uiSchema = \"uiSchema\" in props ? props.uiSchema : this.props.uiSchema;\n      var edit = typeof inputFormData !== \"undefined\";\n      var liveValidate = \"liveValidate\" in props ? props.liveValidate : this.props.liveValidate;\n      var mustValidate = edit && !props.noValidate && liveValidate;\n      var rootSchema = schema;\n      var formData = getDefaultFormState(schema, inputFormData, rootSchema);\n      var retrievedSchema = retrieveSchema(schema, rootSchema, formData);\n      var customFormats = props.customFormats;\n      var additionalMetaSchemas = props.additionalMetaSchemas;\n\n      var getCurrentErrors = function getCurrentErrors() {\n        if (props.noValidate) {\n          return {\n            errors: [],\n            errorSchema: {}\n          };\n        } else if (!props.liveValidate) {\n          return {\n            errors: state.schemaValidationErrors || [],\n            errorSchema: state.schemaValidationErrorSchema || {}\n          };\n        }\n\n        return {\n          errors: state.errors || [],\n          errorSchema: state.errorSchema || {}\n        };\n      };\n\n      var errors, errorSchema, schemaValidationErrors, schemaValidationErrorSchema;\n\n      if (mustValidate) {\n        var schemaValidation = this.validate(formData, schema, additionalMetaSchemas, customFormats);\n        errors = schemaValidation.errors;\n        errorSchema = schemaValidation.errorSchema;\n        schemaValidationErrors = errors;\n        schemaValidationErrorSchema = errorSchema;\n      } else {\n        var currentErrors = getCurrentErrors();\n        errors = currentErrors.errors;\n        errorSchema = currentErrors.errorSchema;\n        schemaValidationErrors = state.schemaValidationErrors;\n        schemaValidationErrorSchema = state.schemaValidationErrorSchema;\n      }\n\n      if (props.extraErrors) {\n        errorSchema = mergeObjects(errorSchema, props.extraErrors, !!\"concat arrays\");\n        errors = toErrorList(errorSchema);\n      }\n\n      var idSchema = toIdSchema(retrievedSchema, uiSchema[\"ui:rootFieldId\"], rootSchema, formData, props.idPrefix);\n      var nextState = {\n        schema: schema,\n        uiSchema: uiSchema,\n        idSchema: idSchema,\n        formData: formData,\n        edit: edit,\n        errors: errors,\n        errorSchema: errorSchema,\n        additionalMetaSchemas: additionalMetaSchemas\n      };\n\n      if (schemaValidationErrors) {\n        nextState.schemaValidationErrors = schemaValidationErrors;\n        nextState.schemaValidationErrorSchema = schemaValidationErrorSchema;\n      }\n\n      return nextState;\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return shouldRender(this, nextProps, nextState);\n    }\n  }, {\n    key: \"validate\",\n    value: function validate(formData) {\n      var schema = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.props.schema;\n      var additionalMetaSchemas = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.props.additionalMetaSchemas;\n      var customFormats = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.props.customFormats;\n      var _this$props3 = this.props,\n          validate = _this$props3.validate,\n          transformErrors = _this$props3.transformErrors;\n\n      var _this$getRegistry = this.getRegistry(),\n          rootSchema = _this$getRegistry.rootSchema;\n\n      var resolvedSchema = retrieveSchema(schema, rootSchema, formData);\n      return validateFormData(formData, resolvedSchema, validate, transformErrors, additionalMetaSchemas, customFormats);\n    }\n  }, {\n    key: \"renderErrors\",\n    value: function renderErrors() {\n      var _this$state = this.state,\n          errors = _this$state.errors,\n          errorSchema = _this$state.errorSchema,\n          schema = _this$state.schema,\n          uiSchema = _this$state.uiSchema;\n      var _this$props4 = this.props,\n          ErrorList = _this$props4.ErrorList,\n          showErrorList = _this$props4.showErrorList,\n          formContext = _this$props4.formContext;\n\n      if (errors.length && showErrorList != false) {\n        return React.createElement(ErrorList, {\n          errors: errors,\n          errorSchema: errorSchema,\n          schema: schema,\n          uiSchema: uiSchema,\n          formContext: formContext\n        });\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getRegistry\",\n    value: function getRegistry() {\n      // For BC, accept passed SchemaField and TitleField props and pass them to\n      // the \"fields\" registry one.\n      var _getDefaultRegistry = getDefaultRegistry(),\n          fields = _getDefaultRegistry.fields,\n          widgets = _getDefaultRegistry.widgets;\n\n      return {\n        fields: _objectSpread({}, fields, this.props.fields),\n        widgets: _objectSpread({}, widgets, this.props.widgets),\n        ArrayFieldTemplate: this.props.ArrayFieldTemplate,\n        ObjectFieldTemplate: this.props.ObjectFieldTemplate,\n        FieldTemplate: this.props.FieldTemplate,\n        definitions: this.props.schema.definitions || {},\n        rootSchema: this.props.schema,\n        formContext: this.props.formContext || {}\n      };\n    }\n  }, {\n    key: \"submit\",\n    value: function submit() {\n      if (this.formElement) {\n        this.formElement.dispatchEvent(new CustomEvent(\"submit\", {\n          cancelable: true\n        }));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props5 = this.props,\n          children = _this$props5.children,\n          id = _this$props5.id,\n          idPrefix = _this$props5.idPrefix,\n          className = _this$props5.className,\n          tagName = _this$props5.tagName,\n          name = _this$props5.name,\n          method = _this$props5.method,\n          target = _this$props5.target,\n          action = _this$props5.action,\n          deprecatedAutocomplete = _this$props5.autocomplete,\n          currentAutoComplete = _this$props5.autoComplete,\n          enctype = _this$props5.enctype,\n          acceptcharset = _this$props5.acceptcharset,\n          noHtml5Validate = _this$props5.noHtml5Validate,\n          disabled = _this$props5.disabled,\n          formContext = _this$props5.formContext;\n      var _this$state2 = this.state,\n          schema = _this$state2.schema,\n          uiSchema = _this$state2.uiSchema,\n          formData = _this$state2.formData,\n          errorSchema = _this$state2.errorSchema,\n          idSchema = _this$state2.idSchema;\n      var registry = this.getRegistry();\n      var _SchemaField = registry.fields.SchemaField;\n      var FormTag = tagName ? tagName : \"form\";\n\n      if (deprecatedAutocomplete) {\n        console.warn(\"Using autocomplete property of Form is deprecated, use autoComplete instead.\");\n      }\n\n      var autoComplete = currentAutoComplete ? currentAutoComplete : deprecatedAutocomplete;\n      return React.createElement(FormTag, {\n        className: className ? className : \"rjsf\",\n        id: id,\n        name: name,\n        method: method,\n        target: target,\n        action: action,\n        autoComplete: autoComplete,\n        encType: enctype,\n        acceptCharset: acceptcharset,\n        noValidate: noHtml5Validate,\n        onSubmit: this.onSubmit,\n        ref: function ref(form) {\n          _this2.formElement = form;\n        }\n      }, this.renderErrors(), React.createElement(_SchemaField, {\n        schema: schema,\n        uiSchema: uiSchema,\n        errorSchema: errorSchema,\n        idSchema: idSchema,\n        idPrefix: idPrefix,\n        formContext: formContext,\n        formData: formData,\n        onChange: this.onChange,\n        onBlur: this.onBlur,\n        onFocus: this.onFocus,\n        registry: registry,\n        disabled: disabled\n      }), children ? children : React.createElement(\"div\", null, React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-info\"\n      }, \"Submit\")));\n    }\n  }]);\n\n  return Form;\n}(Component);\n\n_defineProperty(Form, \"defaultProps\", {\n  uiSchema: {},\n  noValidate: false,\n  liveValidate: false,\n  disabled: false,\n  noHtml5Validate: false,\n  ErrorList: DefaultErrorList,\n  omitExtraData: false\n});\n\nexport { Form as default };\n\nif (process.env.NODE_ENV !== \"production\") {\n  Form.propTypes = {\n    schema: PropTypes.object.isRequired,\n    uiSchema: PropTypes.object,\n    formData: PropTypes.any,\n    widgets: PropTypes.objectOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object])),\n    fields: PropTypes.objectOf(PropTypes.elementType),\n    ArrayFieldTemplate: PropTypes.elementType,\n    ObjectFieldTemplate: PropTypes.elementType,\n    FieldTemplate: PropTypes.elementType,\n    ErrorList: PropTypes.func,\n    onChange: PropTypes.func,\n    onError: PropTypes.func,\n    showErrorList: PropTypes.bool,\n    onSubmit: PropTypes.func,\n    id: PropTypes.string,\n    className: PropTypes.string,\n    tagName: PropTypes.elementType,\n    name: PropTypes.string,\n    method: PropTypes.string,\n    target: PropTypes.string,\n    action: PropTypes.string,\n    autocomplete: PropTypes.string,\n    autoComplete: PropTypes.string,\n    enctype: PropTypes.string,\n    acceptcharset: PropTypes.string,\n    noValidate: PropTypes.bool,\n    noHtml5Validate: PropTypes.bool,\n    liveValidate: PropTypes.bool,\n    validate: PropTypes.func,\n    transformErrors: PropTypes.func,\n    formContext: PropTypes.object,\n    customFormats: PropTypes.object,\n    additionalMetaSchemas: PropTypes.arrayOf(PropTypes.object),\n    omitExtraData: PropTypes.bool,\n    extraErrors: PropTypes.object\n  };\n}"]},"metadata":{},"sourceType":"module"}