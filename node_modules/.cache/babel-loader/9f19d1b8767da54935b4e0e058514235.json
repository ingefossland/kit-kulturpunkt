{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _utils = require(\"../utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar MediaField = function MediaField(props) {\n  var schema = props.schema,\n      _props$uiSchema = props.uiSchema,\n      uiSchema = _props$uiSchema === void 0 ? {} : _props$uiSchema,\n      _props$formData = props.formData,\n      formData = _props$formData === void 0 ? {} : _props$formData,\n      formContext = props.formContext;\n\n  var _onRemove = function _onRemove() {\n    var newFormData = (0, _utils.getDefaultFormState)(schema, {});\n    props.onChange(newFormData);\n  };\n\n  var _onCropdata = function _onCropdata(imageCropdata) {\n    props.onChange(_extends({}, formData, {\n      imageCropdata: imageCropdata\n    }));\n  };\n\n  var _onFocalpoint = function _onFocalpoint(imageFocalpoint) {\n    props.onChange(_extends({}, formData, {\n      imageFocalpoint: imageFocalpoint\n    }));\n  };\n\n  var _onFilters = function _onFilters(imageFilters) {\n    props.onChange(_extends({}, formData, {\n      imageFilters: imageFilters\n    }));\n  };\n\n  var _onAnnotations = function _onAnnotations(imageAnnotations) {\n    props.onChange(_extends({}, formData, {\n      imageAnnotations: imageAnnotations\n    }));\n  };\n\n  var getUiSchema = function getUiSchema() {\n    var uiOptions = (0, _utils.getUiOptions)(uiSchema);\n    var fieldset = uiOptions.fieldset || [];\n\n    if (!uiOptions.fieldset && schema.properties) {\n      Object.keys(schema.properties).map(function (name) {\n        var type = schema.properties[name] && schema.properties[name].type || undefined;\n\n        if (type === \"object\") {\n          fieldset.push(name);\n        }\n\n        if (type === \"array\") {\n          fieldset.push(name);\n        }\n      });\n    }\n\n    var mediaId = formData && formData.mediaId;\n    var media = formData && formData.media;\n    var uiMediaProps = {\n      \"ui:mediaId\": mediaId,\n      \"ui:media\": media,\n      \"ui:uploadProgress\": media && media.uploadProgress,\n      \"ui:mediaType\": media && media.mediaType,\n      \"ui:resources\": media && media.resources,\n      \"ui:imageUrl\": media && media.imageUrl,\n      \"ui:imageCropdata\": formData && formData.imageCropdata,\n      \"ui:imageFocalpoint\": formData && formData.imageFocalpoint,\n      \"ui:imageFilters\": formData && formData.imageFilters,\n      \"ui:imageAnnotations\": formData && formData.imageAnnotations\n    };\n    var uiMedia, uiContent, uiCropdata, uiFocalpoint, uiFilters, uiAnnotations;\n\n    if (fieldset && fieldset.includes('media')) {\n      var uiSchemaMedia = uiSchema && uiSchema.media;\n      uiMedia = _extends({\n        \"ui:title\": \"Preview\",\n        \"ui:layout\": \"mediaPreview\"\n      }, uiMediaProps, uiSchemaMedia);\n    }\n\n    if (fieldset && fieldset.includes('content')) {\n      var uiSchemaContent = uiSchema && uiSchema.content;\n      uiContent = _extends({\n        \"ui:title\": \"Innhold\",\n        \"ui:layout\": \"mediaContent\"\n      }, uiMediaProps, uiSchemaContent);\n    }\n\n    if (fieldset && fieldset.includes('imageCropdata')) {\n      var uiSchemaCropdata = uiSchema && uiSchema.imageCropdata;\n      uiCropdata = _extends({\n        \"ui:title\": \"Crop\",\n        \"ui:layout\": \"imageCropper\",\n        \"ui:onChange\": function uiOnChange(cropdata) {\n          return _onCropdata(cropdata);\n        }\n      }, uiMediaProps, uiSchemaCropdata);\n    }\n\n    if (fieldset && fieldset.includes('imageFocalpoint')) {\n      var uiSchemaFocalpoint = uiSchema && uiSchema.imageFocalpoint;\n      uiFocalpoint = _extends({\n        \"ui:title\": \"Focalpoint\",\n        \"ui:layout\": \"imageFocalpoint\",\n        \"ui:onChange\": function uiOnChange(focalpoint) {\n          return _onFocalpoint(focalpoint);\n        }\n      }, uiMediaProps, uiSchemaFocalpoint);\n    }\n\n    if (fieldset && fieldset.includes('imageFilters')) {\n      var uiSchemaFilters = uiSchema && uiSchema.imageFilters;\n      uiFilters = _extends({\n        \"ui:title\": \"Filters\",\n        \"ui:layout\": \"imageFilters\",\n        \"ui:onChange\": function uiOnChange(filters) {\n          return _onFilters(filters);\n        }\n      }, uiMediaProps, uiSchemaFilters);\n    }\n\n    if (fieldset && fieldset.includes('imageAnnotations')) {\n      var uiSchemaAnnotations = uiSchema && uiSchema.imageAnnotations;\n      uiAnnotations = _extends({\n        \"ui:title\": \"Annotations\",\n        \"ui:layout\": \"imageAnnotations\",\n        \"ui:onChange\": function uiOnChange(annotations) {\n          return _onAnnotations(annotations);\n        }\n      }, uiMediaProps, uiSchemaAnnotations);\n    }\n\n    var layout = uiOptions.layout || \"media\";\n    return _extends({\n      \"ui:editable\": true,\n      \"ui:removable\": true\n    }, uiSchema, uiMediaProps, {\n      \"ui:minHeight\": uiOptions.minHeight || 256,\n      \"ui:layout\": layout,\n      \"ui:fieldset\": fieldset,\n      \"ui:buttons\": (0, _utils.getMediaButtons)(props),\n      \"ui:nav\": \"tabs\",\n      \"media\": uiMedia,\n      \"content\": uiContent,\n      \"imageCropdata\": uiCropdata,\n      \"imageFocalpoint\": uiFocalpoint,\n      \"imageFilters\": uiFilters,\n      \"imageAnnotations\": uiAnnotations,\n      \"onRemove\": function onRemove() {\n        return _onRemove();\n      },\n      \"ui:preview\": {\n        \"select\": {\n          \"title\": \"title\",\n          \"status\": \"status\"\n        },\n        prepare: function prepare(_ref) {\n          var formData = _ref.formData;\n          var media = formData.media;\n          return {\n            title: media && media.title,\n            status: media && media.status\n          };\n        }\n      }\n    });\n  };\n\n  var ObjectField = props.registry.fields.ObjectField;\n  var newUiSchema = getUiSchema();\n  return /*#__PURE__*/_react.default.createElement(ObjectField, _extends({}, props, {\n    uiSchema: newUiSchema\n  }));\n};\n\nvar _default = MediaField;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["/Users/inge/Sites/kit-kulturpunkt/node_modules/@kit-ui/schema/lib/Media/MediaField.js"],"names":["exports","__esModule","default","_react","_interopRequireDefault","require","_utils","obj","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","MediaField","props","schema","_props$uiSchema","uiSchema","_props$formData","formData","formContext","_onRemove","newFormData","getDefaultFormState","onChange","_onCropdata","imageCropdata","_onFocalpoint","imageFocalpoint","_onFilters","imageFilters","_onAnnotations","imageAnnotations","getUiSchema","uiOptions","getUiOptions","fieldset","properties","keys","map","name","type","undefined","push","mediaId","media","uiMediaProps","uploadProgress","mediaType","resources","imageUrl","uiMedia","uiContent","uiCropdata","uiFocalpoint","uiFilters","uiAnnotations","includes","uiSchemaMedia","uiSchemaContent","content","uiSchemaCropdata","uiOnChange","cropdata","uiSchemaFocalpoint","focalpoint","uiSchemaFilters","filters","uiSchemaAnnotations","annotations","layout","minHeight","getMediaButtons","onRemove","prepare","_ref","title","status","ObjectField","registry","fields","newUiSchema","createElement","_default","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _utils = require(\"../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nvar MediaField = function MediaField(props) {\n  var schema = props.schema,\n      _props$uiSchema = props.uiSchema,\n      uiSchema = _props$uiSchema === void 0 ? {} : _props$uiSchema,\n      _props$formData = props.formData,\n      formData = _props$formData === void 0 ? {} : _props$formData,\n      formContext = props.formContext;\n\n  var _onRemove = function _onRemove() {\n    var newFormData = (0, _utils.getDefaultFormState)(schema, {});\n    props.onChange(newFormData);\n  };\n\n  var _onCropdata = function _onCropdata(imageCropdata) {\n    props.onChange(_extends({}, formData, {\n      imageCropdata: imageCropdata\n    }));\n  };\n\n  var _onFocalpoint = function _onFocalpoint(imageFocalpoint) {\n    props.onChange(_extends({}, formData, {\n      imageFocalpoint: imageFocalpoint\n    }));\n  };\n\n  var _onFilters = function _onFilters(imageFilters) {\n    props.onChange(_extends({}, formData, {\n      imageFilters: imageFilters\n    }));\n  };\n\n  var _onAnnotations = function _onAnnotations(imageAnnotations) {\n    props.onChange(_extends({}, formData, {\n      imageAnnotations: imageAnnotations\n    }));\n  };\n\n  var getUiSchema = function getUiSchema() {\n    var uiOptions = (0, _utils.getUiOptions)(uiSchema);\n    var fieldset = uiOptions.fieldset || [];\n\n    if (!uiOptions.fieldset && schema.properties) {\n      Object.keys(schema.properties).map(function (name) {\n        var type = schema.properties[name] && schema.properties[name].type || undefined;\n\n        if (type === \"object\") {\n          fieldset.push(name);\n        }\n\n        if (type === \"array\") {\n          fieldset.push(name);\n        }\n      });\n    }\n\n    var mediaId = formData && formData.mediaId;\n    var media = formData && formData.media;\n    var uiMediaProps = {\n      \"ui:mediaId\": mediaId,\n      \"ui:media\": media,\n      \"ui:uploadProgress\": media && media.uploadProgress,\n      \"ui:mediaType\": media && media.mediaType,\n      \"ui:resources\": media && media.resources,\n      \"ui:imageUrl\": media && media.imageUrl,\n      \"ui:imageCropdata\": formData && formData.imageCropdata,\n      \"ui:imageFocalpoint\": formData && formData.imageFocalpoint,\n      \"ui:imageFilters\": formData && formData.imageFilters,\n      \"ui:imageAnnotations\": formData && formData.imageAnnotations\n    };\n    var uiMedia, uiContent, uiCropdata, uiFocalpoint, uiFilters, uiAnnotations;\n\n    if (fieldset && fieldset.includes('media')) {\n      var uiSchemaMedia = uiSchema && uiSchema.media;\n      uiMedia = _extends({\n        \"ui:title\": \"Preview\",\n        \"ui:layout\": \"mediaPreview\"\n      }, uiMediaProps, uiSchemaMedia);\n    }\n\n    if (fieldset && fieldset.includes('content')) {\n      var uiSchemaContent = uiSchema && uiSchema.content;\n      uiContent = _extends({\n        \"ui:title\": \"Innhold\",\n        \"ui:layout\": \"mediaContent\"\n      }, uiMediaProps, uiSchemaContent);\n    }\n\n    if (fieldset && fieldset.includes('imageCropdata')) {\n      var uiSchemaCropdata = uiSchema && uiSchema.imageCropdata;\n      uiCropdata = _extends({\n        \"ui:title\": \"Crop\",\n        \"ui:layout\": \"imageCropper\",\n        \"ui:onChange\": function uiOnChange(cropdata) {\n          return _onCropdata(cropdata);\n        }\n      }, uiMediaProps, uiSchemaCropdata);\n    }\n\n    if (fieldset && fieldset.includes('imageFocalpoint')) {\n      var uiSchemaFocalpoint = uiSchema && uiSchema.imageFocalpoint;\n      uiFocalpoint = _extends({\n        \"ui:title\": \"Focalpoint\",\n        \"ui:layout\": \"imageFocalpoint\",\n        \"ui:onChange\": function uiOnChange(focalpoint) {\n          return _onFocalpoint(focalpoint);\n        }\n      }, uiMediaProps, uiSchemaFocalpoint);\n    }\n\n    if (fieldset && fieldset.includes('imageFilters')) {\n      var uiSchemaFilters = uiSchema && uiSchema.imageFilters;\n      uiFilters = _extends({\n        \"ui:title\": \"Filters\",\n        \"ui:layout\": \"imageFilters\",\n        \"ui:onChange\": function uiOnChange(filters) {\n          return _onFilters(filters);\n        }\n      }, uiMediaProps, uiSchemaFilters);\n    }\n\n    if (fieldset && fieldset.includes('imageAnnotations')) {\n      var uiSchemaAnnotations = uiSchema && uiSchema.imageAnnotations;\n      uiAnnotations = _extends({\n        \"ui:title\": \"Annotations\",\n        \"ui:layout\": \"imageAnnotations\",\n        \"ui:onChange\": function uiOnChange(annotations) {\n          return _onAnnotations(annotations);\n        }\n      }, uiMediaProps, uiSchemaAnnotations);\n    }\n\n    var layout = uiOptions.layout || \"media\";\n    return _extends({\n      \"ui:editable\": true,\n      \"ui:removable\": true\n    }, uiSchema, uiMediaProps, {\n      \"ui:minHeight\": uiOptions.minHeight || 256,\n      \"ui:layout\": layout,\n      \"ui:fieldset\": fieldset,\n      \"ui:buttons\": (0, _utils.getMediaButtons)(props),\n      \"ui:nav\": \"tabs\",\n      \"media\": uiMedia,\n      \"content\": uiContent,\n      \"imageCropdata\": uiCropdata,\n      \"imageFocalpoint\": uiFocalpoint,\n      \"imageFilters\": uiFilters,\n      \"imageAnnotations\": uiAnnotations,\n      \"onRemove\": function onRemove() {\n        return _onRemove();\n      },\n      \"ui:preview\": {\n        \"select\": {\n          \"title\": \"title\",\n          \"status\": \"status\"\n        },\n        prepare: function prepare(_ref) {\n          var formData = _ref.formData;\n          var media = formData.media;\n          return {\n            title: media && media.title,\n            status: media && media.status\n          };\n        }\n      }\n    });\n  };\n\n  var ObjectField = props.registry.fields.ObjectField;\n  var newUiSchema = getUiSchema();\n  return /*#__PURE__*/_react.default.createElement(ObjectField, _extends({}, props, {\n    uiSchema: newUiSchema\n  }));\n};\n\nvar _default = MediaField;\nexports.default = _default;\nmodule.exports = exports.default;"]},"metadata":{},"sourceType":"script"}