{"ast":null,"code":"import _ from 'lodash';\nimport moment from 'moment';\nimport { getEvents, getEventsByHour } from \"..\";\nexport var getTimetable = function getTimetable(_ref) {\n  var date = _ref.date,\n      days = _ref.days,\n      _ref$items = _ref.items,\n      items = _ref$items === void 0 ? [] : _ref$items,\n      _ref$timeFrom = _ref.timeFrom,\n      timeFrom = _ref$timeFrom === void 0 ? 0 : _ref$timeFrom,\n      _ref$timeTo = _ref.timeTo,\n      timeTo = _ref$timeTo === void 0 ? 23 : _ref$timeTo;\n\n  if (!days) {\n    days = 1;\n  }\n\n  var dt = moment(date).format('YYYY-MM-DD');\n  var dtStart = moment(dt).format('YYYY-MM-DD');\n  var dtEnd = moment(dt).add(days, 'days').format('YYYY-MM-DD');\n  var events = {};\n\n  if (items.length) {\n    events = getEvents({\n      items: items,\n      dtStart: dtStart,\n      dtEnd: dtEnd\n    });\n  }\n\n  var cols = [];\n\n  for (var d = 0; d < days; d++) {\n    var datetime = moment(dtStart).add(d, 'days');\n    datetime = moment(datetime).set('hour', 0);\n    datetime = moment(datetime).set('minute', 0);\n    datetime = moment(datetime).set('second', 0);\n    var rows = [];\n\n    for (var h = timeFrom; h <= timeTo; h++) {\n      datetime = moment(datetime).set('hour', h);\n      datetime = moment(datetime).set('minute', 0);\n      datetime = moment(datetime).set('second', 0);\n      var hour = getEventsByHour(datetime, events);\n      rows.push(hour);\n    }\n\n    cols.push(rows);\n  }\n\n  var timetable = {\n    dt: dt,\n    dtStart: dtStart,\n    dtEnd: dtEnd,\n    cols: cols,\n    events: events\n  };\n  return timetable;\n};","map":{"version":3,"sources":["/Users/inge/Sites/kit-kulturpunkt/node_modules/@kit-ui/admin/es/utils/getTimetable.js"],"names":["_","moment","getEvents","getEventsByHour","getTimetable","_ref","date","days","_ref$items","items","_ref$timeFrom","timeFrom","_ref$timeTo","timeTo","dt","format","dtStart","dtEnd","add","events","length","cols","d","datetime","set","rows","h","hour","push","timetable"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport moment from 'moment';\nimport { getEvents, getEventsByHour } from \"..\";\nexport var getTimetable = function getTimetable(_ref) {\n  var date = _ref.date,\n      days = _ref.days,\n      _ref$items = _ref.items,\n      items = _ref$items === void 0 ? [] : _ref$items,\n      _ref$timeFrom = _ref.timeFrom,\n      timeFrom = _ref$timeFrom === void 0 ? 0 : _ref$timeFrom,\n      _ref$timeTo = _ref.timeTo,\n      timeTo = _ref$timeTo === void 0 ? 23 : _ref$timeTo;\n\n  if (!days) {\n    days = 1;\n  }\n\n  var dt = moment(date).format('YYYY-MM-DD');\n  var dtStart = moment(dt).format('YYYY-MM-DD');\n  var dtEnd = moment(dt).add(days, 'days').format('YYYY-MM-DD');\n  var events = {};\n\n  if (items.length) {\n    events = getEvents({\n      items: items,\n      dtStart: dtStart,\n      dtEnd: dtEnd\n    });\n  }\n\n  var cols = [];\n\n  for (var d = 0; d < days; d++) {\n    var datetime = moment(dtStart).add(d, 'days');\n    datetime = moment(datetime).set('hour', 0);\n    datetime = moment(datetime).set('minute', 0);\n    datetime = moment(datetime).set('second', 0);\n    var rows = [];\n\n    for (var h = timeFrom; h <= timeTo; h++) {\n      datetime = moment(datetime).set('hour', h);\n      datetime = moment(datetime).set('minute', 0);\n      datetime = moment(datetime).set('second', 0);\n      var hour = getEventsByHour(datetime, events);\n      rows.push(hour);\n    }\n\n    cols.push(rows);\n  }\n\n  var timetable = {\n    dt: dt,\n    dtStart: dtStart,\n    dtEnd: dtEnd,\n    cols: cols,\n    events: events\n  };\n  return timetable;\n};"]},"metadata":{},"sourceType":"module"}