{"ast":null,"code":"function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React, { Component } from \"react\";\nimport includes from \"core-js/library/fn/array/includes\";\nimport { utils } from \"@rjsf/core\";\nimport shortid from \"shortid\";\nimport DefaultFixedArrayFieldTemplate from \"./FixedArrayFieldTemplate\";\nimport DefaultNormalArrayFieldTemplate from \"./NormalArrayFieldTemplate\";\nvar getWidget = utils.getWidget,\n    getDefaultFormState = utils.getDefaultFormState,\n    getUiOptions = utils.getUiOptions,\n    isMultiSelect = utils.isMultiSelect,\n    isFilesArray = utils.isFilesArray,\n    isFixedItems = utils.isFixedItems,\n    allowAdditionalItems = utils.allowAdditionalItems,\n    optionsList = utils.optionsList,\n    retrieveSchema = utils.retrieveSchema,\n    toIdSchema = utils.toIdSchema,\n    getDefaultRegistry = utils.getDefaultRegistry;\n\nfunction generateRowId() {\n  return shortid.generate();\n}\n\nfunction generateKeyedFormData(formData) {\n  return !Array.isArray(formData) ? [] : formData.map(function (item) {\n    return {\n      key: generateRowId(),\n      item: item\n    };\n  });\n}\n\nfunction keyedToPlainFormData(keyedFormData) {\n  return keyedFormData.map(function (keyedItem) {\n    return keyedItem.item;\n  });\n}\n\nvar ArrayField = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(ArrayField, _Component);\n\n  function ArrayField(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"_getNewFormDataRow\", function (item) {\n      if (item === void 0) {\n        item = undefined;\n      }\n\n      var _this$props = _this.props,\n          schema = _this$props.schema,\n          _this$props$registry = _this$props.registry,\n          registry = _this$props$registry === void 0 ? getDefaultRegistry() : _this$props$registry;\n      var rootSchema = registry.rootSchema;\n      var itemSchema = schema.items;\n\n      if (isFixedItems(schema) && allowAdditionalItems(schema)) {\n        itemSchema = schema.additionalItems;\n      }\n\n      return getDefaultFormState(itemSchema, item, rootSchema);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAddClick\", function (event) {\n      if (event) {\n        event.preventDefault();\n      }\n\n      var onChange = _this.props.onChange;\n      var newKeyedFormDataRow = {\n        key: generateRowId(),\n        item: _this._getNewFormDataRow()\n      };\n      var newKeyedFormData = [].concat(_this.state.keyedFormData, [newKeyedFormDataRow]);\n\n      _this.setState({\n        keyedFormData: newKeyedFormData,\n        updatedKeyedFormData: true\n      }, function () {\n        return onChange(keyedToPlainFormData(newKeyedFormData));\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAddItemClick\", function (item) {\n      var onChange = _this.props.onChange;\n      var newKeyedFormDataRow = {\n        key: generateRowId(),\n        item: _this._getNewFormDataRow(item)\n      };\n      var newKeyedFormData = [].concat(_this.state.keyedFormData, [newKeyedFormDataRow]);\n\n      _this.setState({\n        keyedFormData: newKeyedFormData,\n        updatedKeyedFormData: true\n      }, function () {\n        return onChange(keyedToPlainFormData(newKeyedFormData));\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAddIndexClick\", function (index) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n        }\n\n        var onChange = _this.props.onChange;\n        var newKeyedFormDataRow = {\n          key: generateRowId(),\n          item: _this._getNewFormDataRow()\n        };\n        var newKeyedFormData = [].concat(_this.state.keyedFormData);\n        newKeyedFormData.splice(index, 0, newKeyedFormDataRow);\n\n        _this.setState({\n          keyedFormData: newKeyedFormData,\n          updatedKeyedFormData: true\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData));\n        });\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDropIndexClick\", function (index) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n        }\n\n        var onChange = _this.props.onChange;\n        var keyedFormData = _this.state.keyedFormData; // refs #195: revalidate to ensure properly reindexing errors\n\n        var newErrorSchema;\n\n        if (_this.props.errorSchema) {\n          newErrorSchema = {};\n          var errorSchema = _this.props.errorSchema;\n\n          for (var i in errorSchema) {\n            i = parseInt(i);\n\n            if (i < index) {\n              newErrorSchema[i] = errorSchema[i];\n            } else if (i > index) {\n              newErrorSchema[i - 1] = errorSchema[i];\n            }\n          }\n        }\n\n        var newKeyedFormData = keyedFormData.filter(function (_, i) {\n          return i !== index;\n        });\n\n        _this.setState({\n          keyedFormData: newKeyedFormData,\n          updatedKeyedFormData: true\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema);\n        });\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onReorderClick\", function (index, newIndex) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n          event.target.blur();\n        }\n\n        var onChange = _this.props.onChange;\n        var newErrorSchema;\n\n        if (_this.props.errorSchema) {\n          newErrorSchema = {};\n          var errorSchema = _this.props.errorSchema;\n\n          for (var i in errorSchema) {\n            if (i == index) {\n              newErrorSchema[newIndex] = errorSchema[index];\n            } else if (i == newIndex) {\n              newErrorSchema[index] = errorSchema[newIndex];\n            } else {\n              newErrorSchema[i] = errorSchema[i];\n            }\n          }\n        }\n\n        var keyedFormData = _this.state.keyedFormData;\n\n        function reOrderArray() {\n          // Copy item\n          var _newKeyedFormData = keyedFormData.slice(); // Moves item from index to newIndex\n\n\n          _newKeyedFormData.splice(index, 1);\n\n          _newKeyedFormData.splice(newIndex, 0, keyedFormData[index]);\n\n          return _newKeyedFormData;\n        }\n\n        var newKeyedFormData = reOrderArray();\n\n        _this.setState({\n          keyedFormData: newKeyedFormData\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema);\n        });\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onArrayChange\", function (formData) {\n      var onChange = _this.props.onChange;\n      var newKeyedFormData = [];\n      formData.map(function (item) {\n        newKeyedFormData.push({\n          key: generateRowId(),\n          item: _this._getNewFormDataRow(item)\n        });\n      });\n\n      _this.setState({\n        keyedFormData: newKeyedFormData,\n        updatedKeyedFormData: true\n      }, function () {\n        return onChange(keyedToPlainFormData(newKeyedFormData));\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChangeForIndex\", function (index) {\n      return function (value, errorSchema) {\n        var _extends2;\n\n        var _this$props2 = _this.props,\n            formData = _this$props2.formData,\n            onChange = _this$props2.onChange;\n        var newFormData = formData.map(function (item, i) {\n          // We need to treat undefined items as nulls to have validation.\n          // See https://github.com/tdegrunt/jsonschema/issues/206\n          var jsonValue = typeof value === \"undefined\" ? null : value;\n          return index === i ? jsonValue : item;\n        });\n        onChange(newFormData, errorSchema && _this.props.errorSchema && _extends({}, _this.props.errorSchema, (_extends2 = {}, _extends2[index] = errorSchema, _extends2)));\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSelectChange\", function (value) {\n      _this.props.onChange(value);\n    });\n\n    var _formData = props.formData;\n\n    var _keyedFormData = generateKeyedFormData(_formData);\n\n    _this.state = {\n      keyedFormData: _keyedFormData,\n      updatedKeyedFormData: false\n    };\n    return _this;\n  }\n\n  ArrayField.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    // Don't call getDerivedStateFromProps if keyed formdata was just updated.\n    if (prevState.updatedKeyedFormData) {\n      return {\n        updatedKeyedFormData: false\n      };\n    }\n\n    var nextFormData = nextProps.formData;\n    var previousKeyedFormData = prevState.keyedFormData;\n    var newKeyedFormData = nextFormData.length === previousKeyedFormData.length ? previousKeyedFormData.map(function (previousKeyedFormDatum, index) {\n      return {\n        key: previousKeyedFormDatum.key,\n        item: nextFormData[index]\n      };\n    }) : generateKeyedFormData(nextFormData);\n    return {\n      keyedFormData: newKeyedFormData\n    };\n  };\n\n  var _proto = ArrayField.prototype;\n\n  _proto.isItemRequired = function isItemRequired(itemSchema) {\n    if (Array.isArray(itemSchema.type)) {\n      // While we don't yet support composite/nullable jsonschema types, it's\n      // future-proof to check for requirement against these.\n      return !includes(itemSchema.type, \"null\");\n    } // All non-null array item types are inherently required by design\n\n\n    return itemSchema.type !== \"null\";\n  };\n\n  _proto.canAddItem = function canAddItem(formItems) {\n    var _this$props3 = this.props,\n        schema = _this$props3.schema,\n        uiSchema = _this$props3.uiSchema;\n\n    var _getUiOptions = getUiOptions(uiSchema),\n        addable = _getUiOptions.addable;\n\n    if (addable !== false) {\n      // if ui:options.addable was not explicitly set to false, we can add\n      // another item if we have not exceeded maxItems yet\n      if (schema.maxItems !== undefined) {\n        addable = formItems.length < schema.maxItems;\n      } else {\n        addable = true;\n      }\n    }\n\n    return addable;\n  };\n\n  _proto.render = function render() {\n    var _this$props4 = this.props,\n        schema = _this$props4.schema,\n        uiSchema = _this$props4.uiSchema,\n        idSchema = _this$props4.idSchema,\n        _this$props4$registry = _this$props4.registry,\n        registry = _this$props4$registry === void 0 ? getDefaultRegistry() : _this$props4$registry;\n    var rootSchema = registry.rootSchema;\n\n    if (!schema.hasOwnProperty(\"items\")) {\n      var fields = registry.fields;\n      var UnsupportedField = fields.UnsupportedField;\n      return /*#__PURE__*/React.createElement(UnsupportedField, {\n        schema: schema,\n        idSchema: idSchema,\n        reason: \"Missing items definition\"\n      });\n    }\n\n    if (isFixedItems(schema)) {\n      return this.renderFixedArray();\n    }\n\n    if (isFilesArray(schema, uiSchema, rootSchema)) {\n      return this.renderFiles();\n    }\n\n    if (isMultiSelect(schema, rootSchema)) {\n      return this.renderMultiSelect();\n    }\n\n    return this.renderNormalArray();\n  };\n\n  _proto.renderNormalArray = function renderNormalArray() {\n    var _this2 = this;\n\n    var _this$props5 = this.props,\n        schema = _this$props5.schema,\n        uiSchema = _this$props5.uiSchema,\n        errorSchema = _this$props5.errorSchema,\n        idSchema = _this$props5.idSchema,\n        name = _this$props5.name,\n        required = _this$props5.required,\n        disabled = _this$props5.disabled,\n        readonly = _this$props5.readonly,\n        autofocus = _this$props5.autofocus,\n        _this$props5$registry = _this$props5.registry,\n        registry = _this$props5$registry === void 0 ? getDefaultRegistry() : _this$props5$registry,\n        onBlur = _this$props5.onBlur,\n        onFocus = _this$props5.onFocus,\n        idPrefix = _this$props5.idPrefix,\n        rawErrors = _this$props5.rawErrors;\n    var title = schema.title === undefined ? name : schema.title;\n    var ArrayFieldTemplate = registry.ArrayFieldTemplate,\n        rootSchema = registry.rootSchema,\n        fields = registry.fields,\n        formContext = registry.formContext;\n    var TitleField = fields.TitleField,\n        DescriptionField = fields.DescriptionField;\n    var itemsSchema = retrieveSchema(schema.items, rootSchema);\n    var formData = keyedToPlainFormData(this.state.keyedFormData);\n    var arrayProps = {\n      canAdd: this.canAddItem(formData),\n      items: this.state.keyedFormData.map(function (keyedItem, index) {\n        var key = keyedItem.key,\n            item = keyedItem.item;\n        var itemSchema = retrieveSchema(schema.items, rootSchema, item);\n        var itemErrorSchema = errorSchema ? errorSchema[index] : undefined;\n        var itemIdPrefix = idSchema.$id + \"_\" + index;\n        var itemIdSchema = toIdSchema(itemSchema, itemIdPrefix, rootSchema, item, idPrefix);\n        return _this2.renderArrayFieldItem({\n          key: key,\n          index: index,\n          canMoveUp: index > 0,\n          canMoveDown: index < formData.length - 1,\n          itemSchema: itemSchema,\n          itemIdSchema: itemIdSchema,\n          itemErrorSchema: itemErrorSchema,\n          itemData: item,\n          itemUiSchema: uiSchema.items,\n          autofocus: autofocus && index === 0,\n          onBlur: onBlur,\n          onFocus: onFocus\n        });\n      }),\n      className: \"field field-array field-array-of-\" + itemsSchema.type,\n      DescriptionField: DescriptionField,\n      disabled: disabled,\n      idSchema: idSchema,\n      uiSchema: uiSchema,\n      onChange: this.onArrayChange,\n      onAddClick: this.onAddClick,\n      onAddItemClick: function onAddItemClick(item) {\n        return _this2.onAddItemClick(item);\n      },\n      readonly: readonly,\n      required: required,\n      schema: schema,\n      title: title,\n      TitleField: TitleField,\n      formContext: formContext,\n      formData: formData,\n      rawErrors: rawErrors,\n      registry: registry\n    }; // Check if a custom render function was passed in\n\n    var Component = uiSchema[\"ui:ArrayFieldTemplate\"] || ArrayFieldTemplate || DefaultNormalArrayFieldTemplate;\n    return /*#__PURE__*/React.createElement(Component, arrayProps);\n  };\n\n  _proto.renderMultiSelect = function renderMultiSelect() {\n    var _this$props6 = this.props,\n        schema = _this$props6.schema,\n        idSchema = _this$props6.idSchema,\n        uiSchema = _this$props6.uiSchema,\n        formData = _this$props6.formData,\n        disabled = _this$props6.disabled,\n        readonly = _this$props6.readonly,\n        required = _this$props6.required,\n        label = _this$props6.label,\n        placeholder = _this$props6.placeholder,\n        autofocus = _this$props6.autofocus,\n        onBlur = _this$props6.onBlur,\n        onFocus = _this$props6.onFocus,\n        _this$props6$registry = _this$props6.registry,\n        registry = _this$props6$registry === void 0 ? getDefaultRegistry() : _this$props6$registry,\n        rawErrors = _this$props6.rawErrors;\n    var items = this.props.formData;\n    var widgets = registry.widgets,\n        rootSchema = registry.rootSchema,\n        formContext = registry.formContext;\n    var itemsSchema = retrieveSchema(schema.items, rootSchema, formData);\n    var enumOptions = optionsList(itemsSchema);\n\n    var _getUiOptions$enumOpt = _extends({}, getUiOptions(uiSchema), {\n      enumOptions: enumOptions\n    }),\n        _getUiOptions$enumOpt2 = _getUiOptions$enumOpt.widget,\n        widget = _getUiOptions$enumOpt2 === void 0 ? \"select\" : _getUiOptions$enumOpt2,\n        options = _objectWithoutPropertiesLoose(_getUiOptions$enumOpt, [\"widget\"]);\n\n    var Widget = getWidget(schema, widget, widgets);\n    return /*#__PURE__*/React.createElement(Widget, {\n      id: idSchema && idSchema.$id,\n      multiple: true,\n      onChange: this.onSelectChange,\n      onBlur: onBlur,\n      onFocus: onFocus,\n      options: options,\n      schema: schema,\n      registry: registry,\n      value: items,\n      disabled: disabled,\n      readonly: readonly,\n      required: required,\n      label: label,\n      placeholder: placeholder,\n      formContext: formContext,\n      autofocus: autofocus,\n      rawErrors: rawErrors\n    });\n  };\n\n  _proto.renderFiles = function renderFiles() {\n    var _this$props7 = this.props,\n        schema = _this$props7.schema,\n        uiSchema = _this$props7.uiSchema,\n        idSchema = _this$props7.idSchema,\n        name = _this$props7.name,\n        disabled = _this$props7.disabled,\n        readonly = _this$props7.readonly,\n        autofocus = _this$props7.autofocus,\n        onBlur = _this$props7.onBlur,\n        onFocus = _this$props7.onFocus,\n        _this$props7$registry = _this$props7.registry,\n        registry = _this$props7$registry === void 0 ? getDefaultRegistry() : _this$props7$registry,\n        rawErrors = _this$props7.rawErrors;\n    var title = schema.title || name;\n    var items = this.props.formData;\n    var widgets = registry.widgets,\n        formContext = registry.formContext;\n\n    var _getUiOptions2 = getUiOptions(uiSchema),\n        _getUiOptions2$widget = _getUiOptions2.widget,\n        widget = _getUiOptions2$widget === void 0 ? \"files\" : _getUiOptions2$widget,\n        options = _objectWithoutPropertiesLoose(_getUiOptions2, [\"widget\"]);\n\n    var Widget = getWidget(schema, widget, widgets);\n    return /*#__PURE__*/React.createElement(Widget, {\n      options: options,\n      id: idSchema && idSchema.$id,\n      multiple: true,\n      onChange: this.onSelectChange,\n      onBlur: onBlur,\n      onFocus: onFocus,\n      schema: schema,\n      title: title,\n      value: items,\n      disabled: disabled,\n      readonly: readonly,\n      formContext: formContext,\n      autofocus: autofocus,\n      rawErrors: rawErrors\n    });\n  };\n\n  _proto.renderFixedArray = function renderFixedArray() {\n    var _this3 = this;\n\n    var _this$props8 = this.props,\n        schema = _this$props8.schema,\n        uiSchema = _this$props8.uiSchema,\n        formData = _this$props8.formData,\n        errorSchema = _this$props8.errorSchema,\n        idPrefix = _this$props8.idPrefix,\n        idSchema = _this$props8.idSchema,\n        name = _this$props8.name,\n        required = _this$props8.required,\n        disabled = _this$props8.disabled,\n        readonly = _this$props8.readonly,\n        autofocus = _this$props8.autofocus,\n        _this$props8$registry = _this$props8.registry,\n        registry = _this$props8$registry === void 0 ? getDefaultRegistry() : _this$props8$registry,\n        onBlur = _this$props8.onBlur,\n        onFocus = _this$props8.onFocus,\n        rawErrors = _this$props8.rawErrors;\n    var title = schema.title || name;\n    var items = this.props.formData;\n    var ArrayFieldTemplate = registry.ArrayFieldTemplate,\n        rootSchema = registry.rootSchema,\n        fields = registry.fields,\n        formContext = registry.formContext;\n    var TitleField = fields.TitleField;\n    var itemSchemas = schema.items.map(function (item, index) {\n      return retrieveSchema(item, rootSchema, formData[index]);\n    });\n    var additionalSchema = allowAdditionalItems(schema) ? retrieveSchema(schema.additionalItems, rootSchema, formData) : null;\n\n    if (!items || items.length < itemSchemas.length) {\n      // to make sure at least all fixed items are generated\n      items = items || [];\n      items = items.concat(new Array(itemSchemas.length - items.length));\n    } // These are the props passed into the render function\n\n\n    var arrayProps = {\n      canAdd: this.canAddItem(items) && additionalSchema,\n      className: \"field field-array field-array-fixed-items\",\n      disabled: disabled,\n      idSchema: idSchema,\n      formData: formData,\n      items: this.state.keyedFormData.map(function (keyedItem, index) {\n        var key = keyedItem.key,\n            item = keyedItem.item;\n        var additional = index >= itemSchemas.length;\n        var itemSchema = additional ? retrieveSchema(schema.additionalItems, rootSchema, item) : itemSchemas[index];\n        var itemIdPrefix = idSchema.$id + \"_\" + index;\n        var itemIdSchema = toIdSchema(itemSchema, itemIdPrefix, rootSchema, item, idPrefix);\n        var itemUiSchema = additional ? uiSchema.additionalItems || {} : Array.isArray(uiSchema.items) ? uiSchema.items[index] : uiSchema.items || {};\n        var itemErrorSchema = errorSchema ? errorSchema[index] : undefined;\n        return _this3.renderArrayFieldItem({\n          key: key,\n          index: index,\n          canRemove: additional,\n          canMoveUp: index >= itemSchemas.length + 1,\n          canMoveDown: additional && index < items.length - 1,\n          itemSchema: itemSchema,\n          itemData: item,\n          itemUiSchema: itemUiSchema,\n          itemIdSchema: itemIdSchema,\n          itemErrorSchema: itemErrorSchema,\n          autofocus: autofocus && index === 0,\n          onBlur: onBlur,\n          onFocus: onFocus\n        });\n      }),\n      onChange: this.onArrayChange,\n      onAddClick: this.onAddClick,\n      onAddItemClick: function onAddItemClick(item) {\n        return _this3.onAddItemClick(item);\n      },\n      readonly: readonly,\n      required: required,\n      schema: schema,\n      uiSchema: uiSchema,\n      title: title,\n      TitleField: TitleField,\n      formContext: formContext,\n      rawErrors: rawErrors\n    }; // Check if a custom template template was passed in\n\n    var Template = uiSchema[\"ui:ArrayFieldTemplate\"] || ArrayFieldTemplate || DefaultFixedArrayFieldTemplate;\n    return /*#__PURE__*/React.createElement(Template, arrayProps);\n  };\n\n  _proto.renderArrayFieldItem = function renderArrayFieldItem(props) {\n    var key = props.key,\n        index = props.index,\n        _props$canRemove = props.canRemove,\n        canRemove = _props$canRemove === void 0 ? true : _props$canRemove,\n        _props$canMoveUp = props.canMoveUp,\n        canMoveUp = _props$canMoveUp === void 0 ? true : _props$canMoveUp,\n        _props$canMoveDown = props.canMoveDown,\n        canMoveDown = _props$canMoveDown === void 0 ? true : _props$canMoveDown,\n        itemSchema = props.itemSchema,\n        itemData = props.itemData,\n        itemUiSchema = props.itemUiSchema,\n        itemIdSchema = props.itemIdSchema,\n        itemErrorSchema = props.itemErrorSchema,\n        autofocus = props.autofocus,\n        onBlur = props.onBlur,\n        onFocus = props.onFocus,\n        rawErrors = props.rawErrors;\n    var _this$props9 = this.props,\n        disabled = _this$props9.disabled,\n        readonly = _this$props9.readonly,\n        uiSchema = _this$props9.uiSchema,\n        _this$props9$registry = _this$props9.registry,\n        registry = _this$props9$registry === void 0 ? getDefaultRegistry() : _this$props9$registry;\n    var SchemaField = registry.fields.SchemaField;\n\n    var _orderable$removable$ = _extends({\n      orderable: true,\n      removable: true\n    }, uiSchema[\"ui:options\"]),\n        orderable = _orderable$removable$.orderable,\n        removable = _orderable$removable$.removable;\n\n    var has = {\n      moveUp: orderable && canMoveUp,\n      moveDown: orderable && canMoveDown,\n      remove: removable && canRemove\n    };\n    has.toolbar = Object.keys(has).some(function (key) {\n      return has[key];\n    });\n    return {\n      children: /*#__PURE__*/React.createElement(SchemaField, {\n        index: index,\n        schema: itemSchema,\n        uiSchema: itemUiSchema,\n        formData: itemData,\n        errorSchema: itemErrorSchema,\n        idSchema: itemIdSchema,\n        required: this.isItemRequired(itemSchema),\n        onChange: this.onChangeForIndex(index),\n        onBlur: onBlur,\n        onFocus: onFocus,\n        registry: this.props.registry,\n        disabled: this.props.disabled,\n        readonly: this.props.readonly,\n        autofocus: autofocus,\n        rawErrors: rawErrors\n      }),\n      className: \"array-item\",\n      disabled: disabled,\n      hasToolbar: has.toolbar,\n      hasMoveUp: has.moveUp,\n      hasMoveDown: has.moveDown,\n      hasRemove: has.remove,\n      index: index,\n      key: key,\n      onAddIndexClick: this.onAddIndexClick,\n      onDropIndexClick: this.onDropIndexClick,\n      onReorderClick: this.onReorderClick,\n      readonly: readonly\n    };\n  };\n\n  _createClass(ArrayField, [{\n    key: \"itemTitle\",\n    get: function get() {\n      var schema = this.props.schema;\n      return schema.items.title || schema.items.description || \"Item\";\n    }\n  }]);\n\n  return ArrayField;\n}(Component);\n\n_defineProperty(ArrayField, \"defaultProps\", {\n  uiSchema: {},\n  formData: [],\n  idSchema: {},\n  required: false,\n  disabled: false,\n  readonly: false,\n  autofocus: false\n});\n\nexport default ArrayField;","map":{"version":3,"sources":["/Users/inge/Sites/kit-kulturpunkt/node_modules/@kit-ui/schema/es/ArrayField/ArrayField.js"],"names":["_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","Object","keys","key","i","length","indexOf","_extends","assign","arguments","prototype","hasOwnProperty","call","apply","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","_createClass","Constructor","protoProps","staticProps","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","create","constructor","__proto__","_defineProperty","obj","value","React","Component","includes","utils","shortid","DefaultFixedArrayFieldTemplate","DefaultNormalArrayFieldTemplate","getWidget","getDefaultFormState","getUiOptions","isMultiSelect","isFilesArray","isFixedItems","allowAdditionalItems","optionsList","retrieveSchema","toIdSchema","getDefaultRegistry","generateRowId","generate","generateKeyedFormData","formData","Array","isArray","map","item","keyedToPlainFormData","keyedFormData","keyedItem","ArrayField","_Component","_this","undefined","_this$props","schema","_this$props$registry","registry","rootSchema","itemSchema","items","additionalItems","event","preventDefault","onChange","newKeyedFormDataRow","_getNewFormDataRow","newKeyedFormData","concat","state","setState","updatedKeyedFormData","index","splice","newErrorSchema","errorSchema","parseInt","filter","_","newIndex","blur","reOrderArray","_newKeyedFormData","slice","push","_extends2","_this$props2","newFormData","jsonValue","_formData","_keyedFormData","getDerivedStateFromProps","nextProps","prevState","nextFormData","previousKeyedFormData","previousKeyedFormDatum","_proto","isItemRequired","type","canAddItem","formItems","_this$props3","uiSchema","_getUiOptions","addable","maxItems","render","_this$props4","idSchema","_this$props4$registry","fields","UnsupportedField","createElement","reason","renderFixedArray","renderFiles","renderMultiSelect","renderNormalArray","_this2","_this$props5","name","required","disabled","readonly","autofocus","_this$props5$registry","onBlur","onFocus","idPrefix","rawErrors","title","ArrayFieldTemplate","formContext","TitleField","DescriptionField","itemsSchema","arrayProps","canAdd","itemErrorSchema","itemIdPrefix","$id","itemIdSchema","renderArrayFieldItem","canMoveUp","canMoveDown","itemData","itemUiSchema","className","onArrayChange","onAddClick","onAddItemClick","_this$props6","label","placeholder","_this$props6$registry","widgets","enumOptions","_getUiOptions$enumOpt","_getUiOptions$enumOpt2","widget","options","Widget","id","multiple","onSelectChange","_this$props7","_this$props7$registry","_getUiOptions2","_getUiOptions2$widget","_this3","_this$props8","_this$props8$registry","itemSchemas","additionalSchema","additional","canRemove","Template","_props$canRemove","_props$canMoveUp","_props$canMoveDown","_this$props9","_this$props9$registry","SchemaField","_orderable$removable$","orderable","removable","has","moveUp","moveDown","remove","toolbar","some","children","onChangeForIndex","hasToolbar","hasMoveUp","hasMoveDown","hasRemove","onAddIndexClick","onDropIndexClick","onReorderClick","get","description"],"mappings":"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","sourcesContent":["function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from \"react\";\nimport includes from \"core-js/library/fn/array/includes\";\nimport { utils } from \"@rjsf/core\";\nimport shortid from \"shortid\";\nimport DefaultFixedArrayFieldTemplate from \"./FixedArrayFieldTemplate\";\nimport DefaultNormalArrayFieldTemplate from \"./NormalArrayFieldTemplate\";\nvar getWidget = utils.getWidget,\n    getDefaultFormState = utils.getDefaultFormState,\n    getUiOptions = utils.getUiOptions,\n    isMultiSelect = utils.isMultiSelect,\n    isFilesArray = utils.isFilesArray,\n    isFixedItems = utils.isFixedItems,\n    allowAdditionalItems = utils.allowAdditionalItems,\n    optionsList = utils.optionsList,\n    retrieveSchema = utils.retrieveSchema,\n    toIdSchema = utils.toIdSchema,\n    getDefaultRegistry = utils.getDefaultRegistry;\n\nfunction generateRowId() {\n  return shortid.generate();\n}\n\nfunction generateKeyedFormData(formData) {\n  return !Array.isArray(formData) ? [] : formData.map(function (item) {\n    return {\n      key: generateRowId(),\n      item: item\n    };\n  });\n}\n\nfunction keyedToPlainFormData(keyedFormData) {\n  return keyedFormData.map(function (keyedItem) {\n    return keyedItem.item;\n  });\n}\n\nvar ArrayField = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(ArrayField, _Component);\n\n  function ArrayField(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"_getNewFormDataRow\", function (item) {\n      if (item === void 0) {\n        item = undefined;\n      }\n\n      var _this$props = _this.props,\n          schema = _this$props.schema,\n          _this$props$registry = _this$props.registry,\n          registry = _this$props$registry === void 0 ? getDefaultRegistry() : _this$props$registry;\n      var rootSchema = registry.rootSchema;\n      var itemSchema = schema.items;\n\n      if (isFixedItems(schema) && allowAdditionalItems(schema)) {\n        itemSchema = schema.additionalItems;\n      }\n\n      return getDefaultFormState(itemSchema, item, rootSchema);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAddClick\", function (event) {\n      if (event) {\n        event.preventDefault();\n      }\n\n      var onChange = _this.props.onChange;\n      var newKeyedFormDataRow = {\n        key: generateRowId(),\n        item: _this._getNewFormDataRow()\n      };\n      var newKeyedFormData = [].concat(_this.state.keyedFormData, [newKeyedFormDataRow]);\n\n      _this.setState({\n        keyedFormData: newKeyedFormData,\n        updatedKeyedFormData: true\n      }, function () {\n        return onChange(keyedToPlainFormData(newKeyedFormData));\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAddItemClick\", function (item) {\n      var onChange = _this.props.onChange;\n      var newKeyedFormDataRow = {\n        key: generateRowId(),\n        item: _this._getNewFormDataRow(item)\n      };\n      var newKeyedFormData = [].concat(_this.state.keyedFormData, [newKeyedFormDataRow]);\n\n      _this.setState({\n        keyedFormData: newKeyedFormData,\n        updatedKeyedFormData: true\n      }, function () {\n        return onChange(keyedToPlainFormData(newKeyedFormData));\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAddIndexClick\", function (index) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n        }\n\n        var onChange = _this.props.onChange;\n        var newKeyedFormDataRow = {\n          key: generateRowId(),\n          item: _this._getNewFormDataRow()\n        };\n        var newKeyedFormData = [].concat(_this.state.keyedFormData);\n        newKeyedFormData.splice(index, 0, newKeyedFormDataRow);\n\n        _this.setState({\n          keyedFormData: newKeyedFormData,\n          updatedKeyedFormData: true\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData));\n        });\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDropIndexClick\", function (index) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n        }\n\n        var onChange = _this.props.onChange;\n        var keyedFormData = _this.state.keyedFormData; // refs #195: revalidate to ensure properly reindexing errors\n\n        var newErrorSchema;\n\n        if (_this.props.errorSchema) {\n          newErrorSchema = {};\n          var errorSchema = _this.props.errorSchema;\n\n          for (var i in errorSchema) {\n            i = parseInt(i);\n\n            if (i < index) {\n              newErrorSchema[i] = errorSchema[i];\n            } else if (i > index) {\n              newErrorSchema[i - 1] = errorSchema[i];\n            }\n          }\n        }\n\n        var newKeyedFormData = keyedFormData.filter(function (_, i) {\n          return i !== index;\n        });\n\n        _this.setState({\n          keyedFormData: newKeyedFormData,\n          updatedKeyedFormData: true\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema);\n        });\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onReorderClick\", function (index, newIndex) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n          event.target.blur();\n        }\n\n        var onChange = _this.props.onChange;\n        var newErrorSchema;\n\n        if (_this.props.errorSchema) {\n          newErrorSchema = {};\n          var errorSchema = _this.props.errorSchema;\n\n          for (var i in errorSchema) {\n            if (i == index) {\n              newErrorSchema[newIndex] = errorSchema[index];\n            } else if (i == newIndex) {\n              newErrorSchema[index] = errorSchema[newIndex];\n            } else {\n              newErrorSchema[i] = errorSchema[i];\n            }\n          }\n        }\n\n        var keyedFormData = _this.state.keyedFormData;\n\n        function reOrderArray() {\n          // Copy item\n          var _newKeyedFormData = keyedFormData.slice(); // Moves item from index to newIndex\n\n\n          _newKeyedFormData.splice(index, 1);\n\n          _newKeyedFormData.splice(newIndex, 0, keyedFormData[index]);\n\n          return _newKeyedFormData;\n        }\n\n        var newKeyedFormData = reOrderArray();\n\n        _this.setState({\n          keyedFormData: newKeyedFormData\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema);\n        });\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onArrayChange\", function (formData) {\n      var onChange = _this.props.onChange;\n      var newKeyedFormData = [];\n      formData.map(function (item) {\n        newKeyedFormData.push({\n          key: generateRowId(),\n          item: _this._getNewFormDataRow(item)\n        });\n      });\n\n      _this.setState({\n        keyedFormData: newKeyedFormData,\n        updatedKeyedFormData: true\n      }, function () {\n        return onChange(keyedToPlainFormData(newKeyedFormData));\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChangeForIndex\", function (index) {\n      return function (value, errorSchema) {\n        var _extends2;\n\n        var _this$props2 = _this.props,\n            formData = _this$props2.formData,\n            onChange = _this$props2.onChange;\n        var newFormData = formData.map(function (item, i) {\n          // We need to treat undefined items as nulls to have validation.\n          // See https://github.com/tdegrunt/jsonschema/issues/206\n          var jsonValue = typeof value === \"undefined\" ? null : value;\n          return index === i ? jsonValue : item;\n        });\n        onChange(newFormData, errorSchema && _this.props.errorSchema && _extends({}, _this.props.errorSchema, (_extends2 = {}, _extends2[index] = errorSchema, _extends2)));\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSelectChange\", function (value) {\n      _this.props.onChange(value);\n    });\n\n    var _formData = props.formData;\n\n    var _keyedFormData = generateKeyedFormData(_formData);\n\n    _this.state = {\n      keyedFormData: _keyedFormData,\n      updatedKeyedFormData: false\n    };\n    return _this;\n  }\n\n  ArrayField.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    // Don't call getDerivedStateFromProps if keyed formdata was just updated.\n    if (prevState.updatedKeyedFormData) {\n      return {\n        updatedKeyedFormData: false\n      };\n    }\n\n    var nextFormData = nextProps.formData;\n    var previousKeyedFormData = prevState.keyedFormData;\n    var newKeyedFormData = nextFormData.length === previousKeyedFormData.length ? previousKeyedFormData.map(function (previousKeyedFormDatum, index) {\n      return {\n        key: previousKeyedFormDatum.key,\n        item: nextFormData[index]\n      };\n    }) : generateKeyedFormData(nextFormData);\n    return {\n      keyedFormData: newKeyedFormData\n    };\n  };\n\n  var _proto = ArrayField.prototype;\n\n  _proto.isItemRequired = function isItemRequired(itemSchema) {\n    if (Array.isArray(itemSchema.type)) {\n      // While we don't yet support composite/nullable jsonschema types, it's\n      // future-proof to check for requirement against these.\n      return !includes(itemSchema.type, \"null\");\n    } // All non-null array item types are inherently required by design\n\n\n    return itemSchema.type !== \"null\";\n  };\n\n  _proto.canAddItem = function canAddItem(formItems) {\n    var _this$props3 = this.props,\n        schema = _this$props3.schema,\n        uiSchema = _this$props3.uiSchema;\n\n    var _getUiOptions = getUiOptions(uiSchema),\n        addable = _getUiOptions.addable;\n\n    if (addable !== false) {\n      // if ui:options.addable was not explicitly set to false, we can add\n      // another item if we have not exceeded maxItems yet\n      if (schema.maxItems !== undefined) {\n        addable = formItems.length < schema.maxItems;\n      } else {\n        addable = true;\n      }\n    }\n\n    return addable;\n  };\n\n  _proto.render = function render() {\n    var _this$props4 = this.props,\n        schema = _this$props4.schema,\n        uiSchema = _this$props4.uiSchema,\n        idSchema = _this$props4.idSchema,\n        _this$props4$registry = _this$props4.registry,\n        registry = _this$props4$registry === void 0 ? getDefaultRegistry() : _this$props4$registry;\n    var rootSchema = registry.rootSchema;\n\n    if (!schema.hasOwnProperty(\"items\")) {\n      var fields = registry.fields;\n      var UnsupportedField = fields.UnsupportedField;\n      return /*#__PURE__*/React.createElement(UnsupportedField, {\n        schema: schema,\n        idSchema: idSchema,\n        reason: \"Missing items definition\"\n      });\n    }\n\n    if (isFixedItems(schema)) {\n      return this.renderFixedArray();\n    }\n\n    if (isFilesArray(schema, uiSchema, rootSchema)) {\n      return this.renderFiles();\n    }\n\n    if (isMultiSelect(schema, rootSchema)) {\n      return this.renderMultiSelect();\n    }\n\n    return this.renderNormalArray();\n  };\n\n  _proto.renderNormalArray = function renderNormalArray() {\n    var _this2 = this;\n\n    var _this$props5 = this.props,\n        schema = _this$props5.schema,\n        uiSchema = _this$props5.uiSchema,\n        errorSchema = _this$props5.errorSchema,\n        idSchema = _this$props5.idSchema,\n        name = _this$props5.name,\n        required = _this$props5.required,\n        disabled = _this$props5.disabled,\n        readonly = _this$props5.readonly,\n        autofocus = _this$props5.autofocus,\n        _this$props5$registry = _this$props5.registry,\n        registry = _this$props5$registry === void 0 ? getDefaultRegistry() : _this$props5$registry,\n        onBlur = _this$props5.onBlur,\n        onFocus = _this$props5.onFocus,\n        idPrefix = _this$props5.idPrefix,\n        rawErrors = _this$props5.rawErrors;\n    var title = schema.title === undefined ? name : schema.title;\n    var ArrayFieldTemplate = registry.ArrayFieldTemplate,\n        rootSchema = registry.rootSchema,\n        fields = registry.fields,\n        formContext = registry.formContext;\n    var TitleField = fields.TitleField,\n        DescriptionField = fields.DescriptionField;\n    var itemsSchema = retrieveSchema(schema.items, rootSchema);\n    var formData = keyedToPlainFormData(this.state.keyedFormData);\n    var arrayProps = {\n      canAdd: this.canAddItem(formData),\n      items: this.state.keyedFormData.map(function (keyedItem, index) {\n        var key = keyedItem.key,\n            item = keyedItem.item;\n        var itemSchema = retrieveSchema(schema.items, rootSchema, item);\n        var itemErrorSchema = errorSchema ? errorSchema[index] : undefined;\n        var itemIdPrefix = idSchema.$id + \"_\" + index;\n        var itemIdSchema = toIdSchema(itemSchema, itemIdPrefix, rootSchema, item, idPrefix);\n        return _this2.renderArrayFieldItem({\n          key: key,\n          index: index,\n          canMoveUp: index > 0,\n          canMoveDown: index < formData.length - 1,\n          itemSchema: itemSchema,\n          itemIdSchema: itemIdSchema,\n          itemErrorSchema: itemErrorSchema,\n          itemData: item,\n          itemUiSchema: uiSchema.items,\n          autofocus: autofocus && index === 0,\n          onBlur: onBlur,\n          onFocus: onFocus\n        });\n      }),\n      className: \"field field-array field-array-of-\" + itemsSchema.type,\n      DescriptionField: DescriptionField,\n      disabled: disabled,\n      idSchema: idSchema,\n      uiSchema: uiSchema,\n      onChange: this.onArrayChange,\n      onAddClick: this.onAddClick,\n      onAddItemClick: function onAddItemClick(item) {\n        return _this2.onAddItemClick(item);\n      },\n      readonly: readonly,\n      required: required,\n      schema: schema,\n      title: title,\n      TitleField: TitleField,\n      formContext: formContext,\n      formData: formData,\n      rawErrors: rawErrors,\n      registry: registry\n    }; // Check if a custom render function was passed in\n\n    var Component = uiSchema[\"ui:ArrayFieldTemplate\"] || ArrayFieldTemplate || DefaultNormalArrayFieldTemplate;\n    return /*#__PURE__*/React.createElement(Component, arrayProps);\n  };\n\n  _proto.renderMultiSelect = function renderMultiSelect() {\n    var _this$props6 = this.props,\n        schema = _this$props6.schema,\n        idSchema = _this$props6.idSchema,\n        uiSchema = _this$props6.uiSchema,\n        formData = _this$props6.formData,\n        disabled = _this$props6.disabled,\n        readonly = _this$props6.readonly,\n        required = _this$props6.required,\n        label = _this$props6.label,\n        placeholder = _this$props6.placeholder,\n        autofocus = _this$props6.autofocus,\n        onBlur = _this$props6.onBlur,\n        onFocus = _this$props6.onFocus,\n        _this$props6$registry = _this$props6.registry,\n        registry = _this$props6$registry === void 0 ? getDefaultRegistry() : _this$props6$registry,\n        rawErrors = _this$props6.rawErrors;\n    var items = this.props.formData;\n    var widgets = registry.widgets,\n        rootSchema = registry.rootSchema,\n        formContext = registry.formContext;\n    var itemsSchema = retrieveSchema(schema.items, rootSchema, formData);\n    var enumOptions = optionsList(itemsSchema);\n\n    var _getUiOptions$enumOpt = _extends({}, getUiOptions(uiSchema), {\n      enumOptions: enumOptions\n    }),\n        _getUiOptions$enumOpt2 = _getUiOptions$enumOpt.widget,\n        widget = _getUiOptions$enumOpt2 === void 0 ? \"select\" : _getUiOptions$enumOpt2,\n        options = _objectWithoutPropertiesLoose(_getUiOptions$enumOpt, [\"widget\"]);\n\n    var Widget = getWidget(schema, widget, widgets);\n    return /*#__PURE__*/React.createElement(Widget, {\n      id: idSchema && idSchema.$id,\n      multiple: true,\n      onChange: this.onSelectChange,\n      onBlur: onBlur,\n      onFocus: onFocus,\n      options: options,\n      schema: schema,\n      registry: registry,\n      value: items,\n      disabled: disabled,\n      readonly: readonly,\n      required: required,\n      label: label,\n      placeholder: placeholder,\n      formContext: formContext,\n      autofocus: autofocus,\n      rawErrors: rawErrors\n    });\n  };\n\n  _proto.renderFiles = function renderFiles() {\n    var _this$props7 = this.props,\n        schema = _this$props7.schema,\n        uiSchema = _this$props7.uiSchema,\n        idSchema = _this$props7.idSchema,\n        name = _this$props7.name,\n        disabled = _this$props7.disabled,\n        readonly = _this$props7.readonly,\n        autofocus = _this$props7.autofocus,\n        onBlur = _this$props7.onBlur,\n        onFocus = _this$props7.onFocus,\n        _this$props7$registry = _this$props7.registry,\n        registry = _this$props7$registry === void 0 ? getDefaultRegistry() : _this$props7$registry,\n        rawErrors = _this$props7.rawErrors;\n    var title = schema.title || name;\n    var items = this.props.formData;\n    var widgets = registry.widgets,\n        formContext = registry.formContext;\n\n    var _getUiOptions2 = getUiOptions(uiSchema),\n        _getUiOptions2$widget = _getUiOptions2.widget,\n        widget = _getUiOptions2$widget === void 0 ? \"files\" : _getUiOptions2$widget,\n        options = _objectWithoutPropertiesLoose(_getUiOptions2, [\"widget\"]);\n\n    var Widget = getWidget(schema, widget, widgets);\n    return /*#__PURE__*/React.createElement(Widget, {\n      options: options,\n      id: idSchema && idSchema.$id,\n      multiple: true,\n      onChange: this.onSelectChange,\n      onBlur: onBlur,\n      onFocus: onFocus,\n      schema: schema,\n      title: title,\n      value: items,\n      disabled: disabled,\n      readonly: readonly,\n      formContext: formContext,\n      autofocus: autofocus,\n      rawErrors: rawErrors\n    });\n  };\n\n  _proto.renderFixedArray = function renderFixedArray() {\n    var _this3 = this;\n\n    var _this$props8 = this.props,\n        schema = _this$props8.schema,\n        uiSchema = _this$props8.uiSchema,\n        formData = _this$props8.formData,\n        errorSchema = _this$props8.errorSchema,\n        idPrefix = _this$props8.idPrefix,\n        idSchema = _this$props8.idSchema,\n        name = _this$props8.name,\n        required = _this$props8.required,\n        disabled = _this$props8.disabled,\n        readonly = _this$props8.readonly,\n        autofocus = _this$props8.autofocus,\n        _this$props8$registry = _this$props8.registry,\n        registry = _this$props8$registry === void 0 ? getDefaultRegistry() : _this$props8$registry,\n        onBlur = _this$props8.onBlur,\n        onFocus = _this$props8.onFocus,\n        rawErrors = _this$props8.rawErrors;\n    var title = schema.title || name;\n    var items = this.props.formData;\n    var ArrayFieldTemplate = registry.ArrayFieldTemplate,\n        rootSchema = registry.rootSchema,\n        fields = registry.fields,\n        formContext = registry.formContext;\n    var TitleField = fields.TitleField;\n    var itemSchemas = schema.items.map(function (item, index) {\n      return retrieveSchema(item, rootSchema, formData[index]);\n    });\n    var additionalSchema = allowAdditionalItems(schema) ? retrieveSchema(schema.additionalItems, rootSchema, formData) : null;\n\n    if (!items || items.length < itemSchemas.length) {\n      // to make sure at least all fixed items are generated\n      items = items || [];\n      items = items.concat(new Array(itemSchemas.length - items.length));\n    } // These are the props passed into the render function\n\n\n    var arrayProps = {\n      canAdd: this.canAddItem(items) && additionalSchema,\n      className: \"field field-array field-array-fixed-items\",\n      disabled: disabled,\n      idSchema: idSchema,\n      formData: formData,\n      items: this.state.keyedFormData.map(function (keyedItem, index) {\n        var key = keyedItem.key,\n            item = keyedItem.item;\n        var additional = index >= itemSchemas.length;\n        var itemSchema = additional ? retrieveSchema(schema.additionalItems, rootSchema, item) : itemSchemas[index];\n        var itemIdPrefix = idSchema.$id + \"_\" + index;\n        var itemIdSchema = toIdSchema(itemSchema, itemIdPrefix, rootSchema, item, idPrefix);\n        var itemUiSchema = additional ? uiSchema.additionalItems || {} : Array.isArray(uiSchema.items) ? uiSchema.items[index] : uiSchema.items || {};\n        var itemErrorSchema = errorSchema ? errorSchema[index] : undefined;\n        return _this3.renderArrayFieldItem({\n          key: key,\n          index: index,\n          canRemove: additional,\n          canMoveUp: index >= itemSchemas.length + 1,\n          canMoveDown: additional && index < items.length - 1,\n          itemSchema: itemSchema,\n          itemData: item,\n          itemUiSchema: itemUiSchema,\n          itemIdSchema: itemIdSchema,\n          itemErrorSchema: itemErrorSchema,\n          autofocus: autofocus && index === 0,\n          onBlur: onBlur,\n          onFocus: onFocus\n        });\n      }),\n      onChange: this.onArrayChange,\n      onAddClick: this.onAddClick,\n      onAddItemClick: function onAddItemClick(item) {\n        return _this3.onAddItemClick(item);\n      },\n      readonly: readonly,\n      required: required,\n      schema: schema,\n      uiSchema: uiSchema,\n      title: title,\n      TitleField: TitleField,\n      formContext: formContext,\n      rawErrors: rawErrors\n    }; // Check if a custom template template was passed in\n\n    var Template = uiSchema[\"ui:ArrayFieldTemplate\"] || ArrayFieldTemplate || DefaultFixedArrayFieldTemplate;\n    return /*#__PURE__*/React.createElement(Template, arrayProps);\n  };\n\n  _proto.renderArrayFieldItem = function renderArrayFieldItem(props) {\n    var key = props.key,\n        index = props.index,\n        _props$canRemove = props.canRemove,\n        canRemove = _props$canRemove === void 0 ? true : _props$canRemove,\n        _props$canMoveUp = props.canMoveUp,\n        canMoveUp = _props$canMoveUp === void 0 ? true : _props$canMoveUp,\n        _props$canMoveDown = props.canMoveDown,\n        canMoveDown = _props$canMoveDown === void 0 ? true : _props$canMoveDown,\n        itemSchema = props.itemSchema,\n        itemData = props.itemData,\n        itemUiSchema = props.itemUiSchema,\n        itemIdSchema = props.itemIdSchema,\n        itemErrorSchema = props.itemErrorSchema,\n        autofocus = props.autofocus,\n        onBlur = props.onBlur,\n        onFocus = props.onFocus,\n        rawErrors = props.rawErrors;\n    var _this$props9 = this.props,\n        disabled = _this$props9.disabled,\n        readonly = _this$props9.readonly,\n        uiSchema = _this$props9.uiSchema,\n        _this$props9$registry = _this$props9.registry,\n        registry = _this$props9$registry === void 0 ? getDefaultRegistry() : _this$props9$registry;\n    var SchemaField = registry.fields.SchemaField;\n\n    var _orderable$removable$ = _extends({\n      orderable: true,\n      removable: true\n    }, uiSchema[\"ui:options\"]),\n        orderable = _orderable$removable$.orderable,\n        removable = _orderable$removable$.removable;\n\n    var has = {\n      moveUp: orderable && canMoveUp,\n      moveDown: orderable && canMoveDown,\n      remove: removable && canRemove\n    };\n    has.toolbar = Object.keys(has).some(function (key) {\n      return has[key];\n    });\n    return {\n      children: /*#__PURE__*/React.createElement(SchemaField, {\n        index: index,\n        schema: itemSchema,\n        uiSchema: itemUiSchema,\n        formData: itemData,\n        errorSchema: itemErrorSchema,\n        idSchema: itemIdSchema,\n        required: this.isItemRequired(itemSchema),\n        onChange: this.onChangeForIndex(index),\n        onBlur: onBlur,\n        onFocus: onFocus,\n        registry: this.props.registry,\n        disabled: this.props.disabled,\n        readonly: this.props.readonly,\n        autofocus: autofocus,\n        rawErrors: rawErrors\n      }),\n      className: \"array-item\",\n      disabled: disabled,\n      hasToolbar: has.toolbar,\n      hasMoveUp: has.moveUp,\n      hasMoveDown: has.moveDown,\n      hasRemove: has.remove,\n      index: index,\n      key: key,\n      onAddIndexClick: this.onAddIndexClick,\n      onDropIndexClick: this.onDropIndexClick,\n      onReorderClick: this.onReorderClick,\n      readonly: readonly\n    };\n  };\n\n  _createClass(ArrayField, [{\n    key: \"itemTitle\",\n    get: function get() {\n      var schema = this.props.schema;\n      return schema.items.title || schema.items.description || \"Item\";\n    }\n  }]);\n\n  return ArrayField;\n}(Component);\n\n_defineProperty(ArrayField, \"defaultProps\", {\n  uiSchema: {},\n  formData: [],\n  idSchema: {},\n  required: false,\n  disabled: false,\n  readonly: false,\n  autofocus: false\n});\n\nexport default ArrayField;"]},"metadata":{},"sourceType":"module"}