{"ast":null,"code":"import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _Array$isArray from \"@babel/runtime-corejs2/core-js/array/is-array\";\nimport AddButton from \"../AddButton\";\nimport IconButton from \"../IconButton\";\nimport React, { Component } from \"react\";\nimport includes from \"core-js/library/fn/array/includes\";\nimport * as types from \"../../types\";\nimport { getWidget, getDefaultFormState, getUiOptions, isMultiSelect, isFilesArray, isFixedItems, allowAdditionalItems, optionsList, retrieveSchema, toIdSchema, getDefaultRegistry } from \"../../utils\";\nimport shortid from \"shortid\";\n\nfunction ArrayFieldTitle(_ref) {\n  var TitleField = _ref.TitleField,\n      idSchema = _ref.idSchema,\n      title = _ref.title,\n      required = _ref.required;\n\n  if (!title) {\n    return null;\n  }\n\n  var id = \"\".concat(idSchema.$id, \"__title\");\n  return React.createElement(TitleField, {\n    id: id,\n    title: title,\n    required: required\n  });\n}\n\nfunction ArrayFieldDescription(_ref2) {\n  var DescriptionField = _ref2.DescriptionField,\n      idSchema = _ref2.idSchema,\n      description = _ref2.description;\n\n  if (!description) {\n    return null;\n  }\n\n  var id = \"\".concat(idSchema.$id, \"__description\");\n  return React.createElement(DescriptionField, {\n    id: id,\n    description: description\n  });\n} // Used in the two templates\n\n\nfunction DefaultArrayItem(props) {\n  var btnStyle = {\n    flex: 1,\n    paddingLeft: 6,\n    paddingRight: 6,\n    fontWeight: \"bold\"\n  };\n  return React.createElement(\"div\", {\n    key: props.key,\n    className: props.className\n  }, React.createElement(\"div\", {\n    className: props.hasToolbar ? \"col-xs-9\" : \"col-xs-12\"\n  }, props.children), props.hasToolbar && React.createElement(\"div\", {\n    className: \"col-xs-3 array-item-toolbox\"\n  }, React.createElement(\"div\", {\n    className: \"btn-group\",\n    style: {\n      display: \"flex\",\n      justifyContent: \"space-around\"\n    }\n  }, (props.hasMoveUp || props.hasMoveDown) && React.createElement(IconButton, {\n    icon: \"arrow-up\",\n    \"aria-label\": \"Move up\",\n    className: \"array-item-move-up\",\n    tabIndex: \"-1\",\n    style: btnStyle,\n    disabled: props.disabled || props.readonly || !props.hasMoveUp,\n    onClick: props.onReorderClick(props.index, props.index - 1)\n  }), (props.hasMoveUp || props.hasMoveDown) && React.createElement(IconButton, {\n    icon: \"arrow-down\",\n    className: \"array-item-move-down\",\n    \"aria-label\": \"Move down\",\n    tabIndex: \"-1\",\n    style: btnStyle,\n    disabled: props.disabled || props.readonly || !props.hasMoveDown,\n    onClick: props.onReorderClick(props.index, props.index + 1)\n  }), props.hasRemove && React.createElement(IconButton, {\n    type: \"danger\",\n    icon: \"remove\",\n    \"aria-label\": \"Remove\",\n    className: \"array-item-remove\",\n    tabIndex: \"-1\",\n    style: btnStyle,\n    disabled: props.disabled || props.readonly,\n    onClick: props.onDropIndexClick(props.index)\n  }))));\n}\n\nfunction DefaultFixedArrayFieldTemplate(props) {\n  return React.createElement(\"fieldset\", {\n    className: props.className,\n    id: props.idSchema.$id\n  }, React.createElement(ArrayFieldTitle, {\n    key: \"array-field-title-\".concat(props.idSchema.$id),\n    TitleField: props.TitleField,\n    idSchema: props.idSchema,\n    title: props.uiSchema[\"ui:title\"] || props.title,\n    required: props.required\n  }), (props.uiSchema[\"ui:description\"] || props.schema.description) && React.createElement(\"div\", {\n    className: \"field-description\",\n    key: \"field-description-\".concat(props.idSchema.$id)\n  }, props.uiSchema[\"ui:description\"] || props.schema.description), React.createElement(\"div\", {\n    className: \"row array-item-list\",\n    key: \"array-item-list-\".concat(props.idSchema.$id)\n  }, props.items && props.items.map(DefaultArrayItem)), props.canAdd && React.createElement(AddButton, {\n    className: \"array-item-add\",\n    onClick: props.onAddClick,\n    disabled: props.disabled || props.readonly\n  }));\n}\n\nfunction DefaultNormalArrayFieldTemplate(props) {\n  return React.createElement(\"fieldset\", {\n    className: props.className,\n    id: props.idSchema.$id\n  }, React.createElement(ArrayFieldTitle, {\n    key: \"array-field-title-\".concat(props.idSchema.$id),\n    TitleField: props.TitleField,\n    idSchema: props.idSchema,\n    title: props.uiSchema[\"ui:title\"] || props.title,\n    required: props.required\n  }), (props.uiSchema[\"ui:description\"] || props.schema.description) && React.createElement(ArrayFieldDescription, {\n    key: \"array-field-description-\".concat(props.idSchema.$id),\n    DescriptionField: props.DescriptionField,\n    idSchema: props.idSchema,\n    description: props.uiSchema[\"ui:description\"] || props.schema.description\n  }), React.createElement(\"div\", {\n    className: \"row array-item-list\",\n    key: \"array-item-list-\".concat(props.idSchema.$id)\n  }, props.items && props.items.map(function (p) {\n    return DefaultArrayItem(p);\n  })), props.canAdd && React.createElement(AddButton, {\n    className: \"array-item-add\",\n    onClick: props.onAddClick,\n    disabled: props.disabled || props.readonly\n  }));\n}\n\nfunction generateRowId() {\n  return shortid.generate();\n}\n\nfunction generateKeyedFormData(formData) {\n  return !_Array$isArray(formData) ? [] : formData.map(function (item) {\n    return {\n      key: generateRowId(),\n      item: item\n    };\n  });\n}\n\nfunction keyedToPlainFormData(keyedFormData) {\n  return keyedFormData.map(function (keyedItem) {\n    return keyedItem.item;\n  });\n}\n\nvar ArrayField = /*#__PURE__*/function (_Component) {\n  _inherits(ArrayField, _Component);\n\n  function ArrayField(props) {\n    var _this;\n\n    _classCallCheck(this, ArrayField);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ArrayField).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"_getNewFormDataRow\", function () {\n      var _this$props = _this.props,\n          schema = _this$props.schema,\n          _this$props$registry = _this$props.registry,\n          registry = _this$props$registry === void 0 ? getDefaultRegistry() : _this$props$registry;\n      var rootSchema = registry.rootSchema;\n      var itemSchema = schema.items;\n\n      if (isFixedItems(schema) && allowAdditionalItems(schema)) {\n        itemSchema = schema.additionalItems;\n      }\n\n      return getDefaultFormState(itemSchema, undefined, rootSchema);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAddClick\", function (event) {\n      if (event) {\n        event.preventDefault();\n      }\n\n      var onChange = _this.props.onChange;\n      var newKeyedFormDataRow = {\n        key: generateRowId(),\n        item: _this._getNewFormDataRow()\n      };\n      var newKeyedFormData = [].concat(_toConsumableArray(_this.state.keyedFormData), [newKeyedFormDataRow]);\n\n      _this.setState({\n        keyedFormData: newKeyedFormData,\n        updatedKeyedFormData: true\n      }, function () {\n        return onChange(keyedToPlainFormData(newKeyedFormData));\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAddIndexClick\", function (index) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n        }\n\n        var onChange = _this.props.onChange;\n        var newKeyedFormDataRow = {\n          key: generateRowId(),\n          item: _this._getNewFormDataRow()\n        };\n\n        var newKeyedFormData = _toConsumableArray(_this.state.keyedFormData);\n\n        newKeyedFormData.splice(index, 0, newKeyedFormDataRow);\n\n        _this.setState({\n          keyedFormData: newKeyedFormData,\n          updatedKeyedFormData: true\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData));\n        });\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDropIndexClick\", function (index) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n        }\n\n        var onChange = _this.props.onChange;\n        var keyedFormData = _this.state.keyedFormData; // refs #195: revalidate to ensure properly reindexing errors\n\n        var newErrorSchema;\n\n        if (_this.props.errorSchema) {\n          newErrorSchema = {};\n          var errorSchema = _this.props.errorSchema;\n\n          for (var i in errorSchema) {\n            i = _parseInt(i);\n\n            if (i < index) {\n              newErrorSchema[i] = errorSchema[i];\n            } else if (i > index) {\n              newErrorSchema[i - 1] = errorSchema[i];\n            }\n          }\n        }\n\n        var newKeyedFormData = keyedFormData.filter(function (_, i) {\n          return i !== index;\n        });\n\n        _this.setState({\n          keyedFormData: newKeyedFormData,\n          updatedKeyedFormData: true\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema);\n        });\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onReorderClick\", function (index, newIndex) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n          event.target.blur();\n        }\n\n        var onChange = _this.props.onChange;\n        var newErrorSchema;\n\n        if (_this.props.errorSchema) {\n          newErrorSchema = {};\n          var errorSchema = _this.props.errorSchema;\n\n          for (var i in errorSchema) {\n            if (i == index) {\n              newErrorSchema[newIndex] = errorSchema[index];\n            } else if (i == newIndex) {\n              newErrorSchema[index] = errorSchema[newIndex];\n            } else {\n              newErrorSchema[i] = errorSchema[i];\n            }\n          }\n        }\n\n        var keyedFormData = _this.state.keyedFormData;\n\n        function reOrderArray() {\n          // Copy item\n          var _newKeyedFormData = keyedFormData.slice(); // Moves item from index to newIndex\n\n\n          _newKeyedFormData.splice(index, 1);\n\n          _newKeyedFormData.splice(newIndex, 0, keyedFormData[index]);\n\n          return _newKeyedFormData;\n        }\n\n        var newKeyedFormData = reOrderArray();\n\n        _this.setState({\n          keyedFormData: newKeyedFormData\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema);\n        });\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChangeForIndex\", function (index) {\n      return function (value, errorSchema) {\n        var _this$props2 = _this.props,\n            formData = _this$props2.formData,\n            onChange = _this$props2.onChange;\n        var newFormData = formData.map(function (item, i) {\n          // We need to treat undefined items as nulls to have validation.\n          // See https://github.com/tdegrunt/jsonschema/issues/206\n          var jsonValue = typeof value === \"undefined\" ? null : value;\n          return index === i ? jsonValue : item;\n        });\n        onChange(newFormData, errorSchema && _this.props.errorSchema && _objectSpread({}, _this.props.errorSchema, _defineProperty({}, index, errorSchema)));\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSelectChange\", function (value) {\n      _this.props.onChange(value);\n    });\n\n    var _formData = props.formData;\n\n    var _keyedFormData = generateKeyedFormData(_formData);\n\n    _this.state = {\n      keyedFormData: _keyedFormData,\n      updatedKeyedFormData: false\n    };\n    return _this;\n  }\n\n  _createClass(ArrayField, [{\n    key: \"isItemRequired\",\n    value: function isItemRequired(itemSchema) {\n      if (_Array$isArray(itemSchema.type)) {\n        // While we don't yet support composite/nullable jsonschema types, it's\n        // future-proof to check for requirement against these.\n        return !includes(itemSchema.type, \"null\");\n      } // All non-null array item types are inherently required by design\n\n\n      return itemSchema.type !== \"null\";\n    }\n  }, {\n    key: \"canAddItem\",\n    value: function canAddItem(formItems) {\n      var _this$props3 = this.props,\n          schema = _this$props3.schema,\n          uiSchema = _this$props3.uiSchema;\n\n      var _getUiOptions = getUiOptions(uiSchema),\n          addable = _getUiOptions.addable;\n\n      if (addable !== false) {\n        // if ui:options.addable was not explicitly set to false, we can add\n        // another item if we have not exceeded maxItems yet\n        if (schema.maxItems !== undefined) {\n          addable = formItems.length < schema.maxItems;\n        } else {\n          addable = true;\n        }\n      }\n\n      return addable;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          schema = _this$props4.schema,\n          uiSchema = _this$props4.uiSchema,\n          idSchema = _this$props4.idSchema,\n          _this$props4$registry = _this$props4.registry,\n          registry = _this$props4$registry === void 0 ? getDefaultRegistry() : _this$props4$registry;\n      var rootSchema = registry.rootSchema;\n\n      if (!schema.hasOwnProperty(\"items\")) {\n        var fields = registry.fields;\n        var UnsupportedField = fields.UnsupportedField;\n        return React.createElement(UnsupportedField, {\n          schema: schema,\n          idSchema: idSchema,\n          reason: \"Missing items definition\"\n        });\n      }\n\n      if (isFixedItems(schema)) {\n        return this.renderFixedArray();\n      }\n\n      if (isFilesArray(schema, uiSchema, rootSchema)) {\n        return this.renderFiles();\n      }\n\n      if (isMultiSelect(schema, rootSchema)) {\n        return this.renderMultiSelect();\n      }\n\n      return this.renderNormalArray();\n    }\n  }, {\n    key: \"renderNormalArray\",\n    value: function renderNormalArray() {\n      var _this2 = this;\n\n      var _this$props5 = this.props,\n          schema = _this$props5.schema,\n          uiSchema = _this$props5.uiSchema,\n          errorSchema = _this$props5.errorSchema,\n          idSchema = _this$props5.idSchema,\n          name = _this$props5.name,\n          required = _this$props5.required,\n          disabled = _this$props5.disabled,\n          readonly = _this$props5.readonly,\n          autofocus = _this$props5.autofocus,\n          _this$props5$registry = _this$props5.registry,\n          registry = _this$props5$registry === void 0 ? getDefaultRegistry() : _this$props5$registry,\n          onBlur = _this$props5.onBlur,\n          onFocus = _this$props5.onFocus,\n          idPrefix = _this$props5.idPrefix,\n          rawErrors = _this$props5.rawErrors;\n      var title = schema.title === undefined ? name : schema.title;\n      var ArrayFieldTemplate = registry.ArrayFieldTemplate,\n          rootSchema = registry.rootSchema,\n          fields = registry.fields,\n          formContext = registry.formContext;\n      var TitleField = fields.TitleField,\n          DescriptionField = fields.DescriptionField;\n      var itemsSchema = retrieveSchema(schema.items, rootSchema);\n      var formData = keyedToPlainFormData(this.state.keyedFormData);\n      var arrayProps = {\n        canAdd: this.canAddItem(formData),\n        items: this.state.keyedFormData.map(function (keyedItem, index) {\n          var key = keyedItem.key,\n              item = keyedItem.item;\n          var itemSchema = retrieveSchema(schema.items, rootSchema, item);\n          var itemErrorSchema = errorSchema ? errorSchema[index] : undefined;\n          var itemIdPrefix = idSchema.$id + \"_\" + index;\n          var itemIdSchema = toIdSchema(itemSchema, itemIdPrefix, rootSchema, item, idPrefix);\n          return _this2.renderArrayFieldItem({\n            key: key,\n            index: index,\n            canMoveUp: index > 0,\n            canMoveDown: index < formData.length - 1,\n            itemSchema: itemSchema,\n            itemIdSchema: itemIdSchema,\n            itemErrorSchema: itemErrorSchema,\n            itemData: item,\n            itemUiSchema: uiSchema.items,\n            autofocus: autofocus && index === 0,\n            onBlur: onBlur,\n            onFocus: onFocus\n          });\n        }),\n        className: \"field field-array field-array-of-\".concat(itemsSchema.type),\n        DescriptionField: DescriptionField,\n        disabled: disabled,\n        idSchema: idSchema,\n        uiSchema: uiSchema,\n        onAddClick: this.onAddClick,\n        readonly: readonly,\n        required: required,\n        schema: schema,\n        title: title,\n        TitleField: TitleField,\n        formContext: formContext,\n        formData: formData,\n        rawErrors: rawErrors,\n        registry: registry\n      }; // Check if a custom render function was passed in\n\n      var Component = uiSchema[\"ui:ArrayFieldTemplate\"] || ArrayFieldTemplate || DefaultNormalArrayFieldTemplate;\n      return React.createElement(Component, arrayProps);\n    }\n  }, {\n    key: \"renderMultiSelect\",\n    value: function renderMultiSelect() {\n      var _this$props6 = this.props,\n          schema = _this$props6.schema,\n          idSchema = _this$props6.idSchema,\n          uiSchema = _this$props6.uiSchema,\n          formData = _this$props6.formData,\n          disabled = _this$props6.disabled,\n          readonly = _this$props6.readonly,\n          required = _this$props6.required,\n          label = _this$props6.label,\n          placeholder = _this$props6.placeholder,\n          autofocus = _this$props6.autofocus,\n          onBlur = _this$props6.onBlur,\n          onFocus = _this$props6.onFocus,\n          _this$props6$registry = _this$props6.registry,\n          registry = _this$props6$registry === void 0 ? getDefaultRegistry() : _this$props6$registry,\n          rawErrors = _this$props6.rawErrors;\n      var items = this.props.formData;\n      var widgets = registry.widgets,\n          rootSchema = registry.rootSchema,\n          formContext = registry.formContext;\n      var itemsSchema = retrieveSchema(schema.items, rootSchema, formData);\n      var enumOptions = optionsList(itemsSchema);\n\n      var _getUiOptions$enumOpt = _objectSpread({}, getUiOptions(uiSchema), {\n        enumOptions: enumOptions\n      }),\n          _getUiOptions$enumOpt2 = _getUiOptions$enumOpt.widget,\n          widget = _getUiOptions$enumOpt2 === void 0 ? \"select\" : _getUiOptions$enumOpt2,\n          options = _objectWithoutProperties(_getUiOptions$enumOpt, [\"widget\"]);\n\n      var Widget = getWidget(schema, widget, widgets);\n      return React.createElement(Widget, {\n        id: idSchema && idSchema.$id,\n        multiple: true,\n        onChange: this.onSelectChange,\n        onBlur: onBlur,\n        onFocus: onFocus,\n        options: options,\n        schema: schema,\n        registry: registry,\n        value: items,\n        disabled: disabled,\n        readonly: readonly,\n        required: required,\n        label: label,\n        placeholder: placeholder,\n        formContext: formContext,\n        autofocus: autofocus,\n        rawErrors: rawErrors\n      });\n    }\n  }, {\n    key: \"renderFiles\",\n    value: function renderFiles() {\n      var _this$props7 = this.props,\n          schema = _this$props7.schema,\n          uiSchema = _this$props7.uiSchema,\n          idSchema = _this$props7.idSchema,\n          name = _this$props7.name,\n          disabled = _this$props7.disabled,\n          readonly = _this$props7.readonly,\n          autofocus = _this$props7.autofocus,\n          onBlur = _this$props7.onBlur,\n          onFocus = _this$props7.onFocus,\n          _this$props7$registry = _this$props7.registry,\n          registry = _this$props7$registry === void 0 ? getDefaultRegistry() : _this$props7$registry,\n          rawErrors = _this$props7.rawErrors;\n      var title = schema.title || name;\n      var items = this.props.formData;\n      var widgets = registry.widgets,\n          formContext = registry.formContext;\n\n      var _getUiOptions2 = getUiOptions(uiSchema),\n          _getUiOptions2$widget = _getUiOptions2.widget,\n          widget = _getUiOptions2$widget === void 0 ? \"files\" : _getUiOptions2$widget,\n          options = _objectWithoutProperties(_getUiOptions2, [\"widget\"]);\n\n      var Widget = getWidget(schema, widget, widgets);\n      return React.createElement(Widget, {\n        options: options,\n        id: idSchema && idSchema.$id,\n        multiple: true,\n        onChange: this.onSelectChange,\n        onBlur: onBlur,\n        onFocus: onFocus,\n        schema: schema,\n        title: title,\n        value: items,\n        disabled: disabled,\n        readonly: readonly,\n        formContext: formContext,\n        autofocus: autofocus,\n        rawErrors: rawErrors\n      });\n    }\n  }, {\n    key: \"renderFixedArray\",\n    value: function renderFixedArray() {\n      var _this3 = this;\n\n      var _this$props8 = this.props,\n          schema = _this$props8.schema,\n          uiSchema = _this$props8.uiSchema,\n          formData = _this$props8.formData,\n          errorSchema = _this$props8.errorSchema,\n          idPrefix = _this$props8.idPrefix,\n          idSchema = _this$props8.idSchema,\n          name = _this$props8.name,\n          required = _this$props8.required,\n          disabled = _this$props8.disabled,\n          readonly = _this$props8.readonly,\n          autofocus = _this$props8.autofocus,\n          _this$props8$registry = _this$props8.registry,\n          registry = _this$props8$registry === void 0 ? getDefaultRegistry() : _this$props8$registry,\n          onBlur = _this$props8.onBlur,\n          onFocus = _this$props8.onFocus,\n          rawErrors = _this$props8.rawErrors;\n      var title = schema.title || name;\n      var items = this.props.formData;\n      var ArrayFieldTemplate = registry.ArrayFieldTemplate,\n          rootSchema = registry.rootSchema,\n          fields = registry.fields,\n          formContext = registry.formContext;\n      var TitleField = fields.TitleField;\n      var itemSchemas = schema.items.map(function (item, index) {\n        return retrieveSchema(item, rootSchema, formData[index]);\n      });\n      var additionalSchema = allowAdditionalItems(schema) ? retrieveSchema(schema.additionalItems, rootSchema, formData) : null;\n\n      if (!items || items.length < itemSchemas.length) {\n        // to make sure at least all fixed items are generated\n        items = items || [];\n        items = items.concat(new Array(itemSchemas.length - items.length));\n      } // These are the props passed into the render function\n\n\n      var arrayProps = {\n        canAdd: this.canAddItem(items) && additionalSchema,\n        className: \"field field-array field-array-fixed-items\",\n        disabled: disabled,\n        idSchema: idSchema,\n        formData: formData,\n        items: this.state.keyedFormData.map(function (keyedItem, index) {\n          var key = keyedItem.key,\n              item = keyedItem.item;\n          var additional = index >= itemSchemas.length;\n          var itemSchema = additional ? retrieveSchema(schema.additionalItems, rootSchema, item) : itemSchemas[index];\n          var itemIdPrefix = idSchema.$id + \"_\" + index;\n          var itemIdSchema = toIdSchema(itemSchema, itemIdPrefix, rootSchema, item, idPrefix);\n          var itemUiSchema = additional ? uiSchema.additionalItems || {} : _Array$isArray(uiSchema.items) ? uiSchema.items[index] : uiSchema.items || {};\n          var itemErrorSchema = errorSchema ? errorSchema[index] : undefined;\n          return _this3.renderArrayFieldItem({\n            key: key,\n            index: index,\n            canRemove: additional,\n            canMoveUp: index >= itemSchemas.length + 1,\n            canMoveDown: additional && index < items.length - 1,\n            itemSchema: itemSchema,\n            itemData: item,\n            itemUiSchema: itemUiSchema,\n            itemIdSchema: itemIdSchema,\n            itemErrorSchema: itemErrorSchema,\n            autofocus: autofocus && index === 0,\n            onBlur: onBlur,\n            onFocus: onFocus\n          });\n        }),\n        onAddClick: this.onAddClick,\n        readonly: readonly,\n        required: required,\n        schema: schema,\n        uiSchema: uiSchema,\n        title: title,\n        TitleField: TitleField,\n        formContext: formContext,\n        rawErrors: rawErrors\n      }; // Check if a custom template template was passed in\n\n      var Template = uiSchema[\"ui:ArrayFieldTemplate\"] || ArrayFieldTemplate || DefaultFixedArrayFieldTemplate;\n      return React.createElement(Template, arrayProps);\n    }\n  }, {\n    key: \"renderArrayFieldItem\",\n    value: function renderArrayFieldItem(props) {\n      var key = props.key,\n          index = props.index,\n          _props$canRemove = props.canRemove,\n          canRemove = _props$canRemove === void 0 ? true : _props$canRemove,\n          _props$canMoveUp = props.canMoveUp,\n          canMoveUp = _props$canMoveUp === void 0 ? true : _props$canMoveUp,\n          _props$canMoveDown = props.canMoveDown,\n          canMoveDown = _props$canMoveDown === void 0 ? true : _props$canMoveDown,\n          itemSchema = props.itemSchema,\n          itemData = props.itemData,\n          itemUiSchema = props.itemUiSchema,\n          itemIdSchema = props.itemIdSchema,\n          itemErrorSchema = props.itemErrorSchema,\n          autofocus = props.autofocus,\n          onBlur = props.onBlur,\n          onFocus = props.onFocus,\n          rawErrors = props.rawErrors;\n      var _this$props9 = this.props,\n          disabled = _this$props9.disabled,\n          readonly = _this$props9.readonly,\n          uiSchema = _this$props9.uiSchema,\n          _this$props9$registry = _this$props9.registry,\n          registry = _this$props9$registry === void 0 ? getDefaultRegistry() : _this$props9$registry;\n      var SchemaField = registry.fields.SchemaField;\n\n      var _orderable$removable$ = _objectSpread({\n        orderable: true,\n        removable: true\n      }, uiSchema[\"ui:options\"]),\n          orderable = _orderable$removable$.orderable,\n          removable = _orderable$removable$.removable;\n\n      var has = {\n        moveUp: orderable && canMoveUp,\n        moveDown: orderable && canMoveDown,\n        remove: removable && canRemove\n      };\n      has.toolbar = _Object$keys(has).some(function (key) {\n        return has[key];\n      });\n      return {\n        children: React.createElement(SchemaField, {\n          index: index,\n          schema: itemSchema,\n          uiSchema: itemUiSchema,\n          formData: itemData,\n          errorSchema: itemErrorSchema,\n          idSchema: itemIdSchema,\n          required: this.isItemRequired(itemSchema),\n          onChange: this.onChangeForIndex(index),\n          onBlur: onBlur,\n          onFocus: onFocus,\n          registry: this.props.registry,\n          disabled: this.props.disabled,\n          readonly: this.props.readonly,\n          autofocus: autofocus,\n          rawErrors: rawErrors\n        }),\n        className: \"array-item\",\n        disabled: disabled,\n        hasToolbar: has.toolbar,\n        hasMoveUp: has.moveUp,\n        hasMoveDown: has.moveDown,\n        hasRemove: has.remove,\n        index: index,\n        key: key,\n        onAddIndexClick: this.onAddIndexClick,\n        onDropIndexClick: this.onDropIndexClick,\n        onReorderClick: this.onReorderClick,\n        readonly: readonly\n      };\n    }\n  }, {\n    key: \"itemTitle\",\n    get: function get() {\n      var schema = this.props.schema;\n      return schema.items.title || schema.items.description || \"Item\";\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      // Don't call getDerivedStateFromProps if keyed formdata was just updated.\n      if (prevState.updatedKeyedFormData) {\n        return {\n          updatedKeyedFormData: false\n        };\n      }\n\n      var nextFormData = nextProps.formData;\n      var previousKeyedFormData = prevState.keyedFormData;\n      var newKeyedFormData = nextFormData.length === previousKeyedFormData.length ? previousKeyedFormData.map(function (previousKeyedFormDatum, index) {\n        return {\n          key: previousKeyedFormDatum.key,\n          item: nextFormData[index]\n        };\n      }) : generateKeyedFormData(nextFormData);\n      return {\n        keyedFormData: newKeyedFormData\n      };\n    }\n  }]);\n\n  return ArrayField;\n}(Component);\n\n_defineProperty(ArrayField, \"defaultProps\", {\n  uiSchema: {},\n  formData: [],\n  idSchema: {},\n  required: false,\n  disabled: false,\n  readonly: false,\n  autofocus: false\n});\n\nif (process.env.NODE_ENV !== \"production\") {\n  ArrayField.propTypes = types.fieldProps;\n}\n\nexport default ArrayField;","map":{"version":3,"sources":["/Users/inge/Sites/kit-kulturpunkt/node_modules/@rjsf/core/dist/es/components/fields/ArrayField.js"],"names":["_Object$keys","_objectWithoutProperties","_objectSpread","_parseInt","_toConsumableArray","_classCallCheck","_createClass","_possibleConstructorReturn","_getPrototypeOf","_assertThisInitialized","_inherits","_defineProperty","_Array$isArray","AddButton","IconButton","React","Component","includes","types","getWidget","getDefaultFormState","getUiOptions","isMultiSelect","isFilesArray","isFixedItems","allowAdditionalItems","optionsList","retrieveSchema","toIdSchema","getDefaultRegistry","shortid","ArrayFieldTitle","_ref","TitleField","idSchema","title","required","id","concat","$id","createElement","ArrayFieldDescription","_ref2","DescriptionField","description","DefaultArrayItem","props","btnStyle","flex","paddingLeft","paddingRight","fontWeight","key","className","hasToolbar","children","style","display","justifyContent","hasMoveUp","hasMoveDown","icon","tabIndex","disabled","readonly","onClick","onReorderClick","index","hasRemove","type","onDropIndexClick","DefaultFixedArrayFieldTemplate","uiSchema","schema","items","map","canAdd","onAddClick","DefaultNormalArrayFieldTemplate","p","generateRowId","generate","generateKeyedFormData","formData","item","keyedToPlainFormData","keyedFormData","keyedItem","ArrayField","_Component","_this","call","_this$props","_this$props$registry","registry","rootSchema","itemSchema","additionalItems","undefined","event","preventDefault","onChange","newKeyedFormDataRow","_getNewFormDataRow","newKeyedFormData","state","setState","updatedKeyedFormData","splice","newErrorSchema","errorSchema","i","filter","_","newIndex","target","blur","reOrderArray","_newKeyedFormData","slice","value","_this$props2","newFormData","jsonValue","_formData","_keyedFormData","isItemRequired","canAddItem","formItems","_this$props3","_getUiOptions","addable","maxItems","length","render","_this$props4","_this$props4$registry","hasOwnProperty","fields","UnsupportedField","reason","renderFixedArray","renderFiles","renderMultiSelect","renderNormalArray","_this2","_this$props5","name","autofocus","_this$props5$registry","onBlur","onFocus","idPrefix","rawErrors","ArrayFieldTemplate","formContext","itemsSchema","arrayProps","itemErrorSchema","itemIdPrefix","itemIdSchema","renderArrayFieldItem","canMoveUp","canMoveDown","itemData","itemUiSchema","_this$props6","label","placeholder","_this$props6$registry","widgets","enumOptions","_getUiOptions$enumOpt","_getUiOptions$enumOpt2","widget","options","Widget","multiple","onSelectChange","_this$props7","_this$props7$registry","_getUiOptions2","_getUiOptions2$widget","_this3","_this$props8","_this$props8$registry","itemSchemas","additionalSchema","Array","additional","canRemove","Template","_props$canRemove","_props$canMoveUp","_props$canMoveDown","_this$props9","_this$props9$registry","SchemaField","_orderable$removable$","orderable","removable","has","moveUp","moveDown","remove","toolbar","some","onChangeForIndex","onAddIndexClick","get","getDerivedStateFromProps","nextProps","prevState","nextFormData","previousKeyedFormData","previousKeyedFormDatum","process","env","NODE_ENV","propTypes","fieldProps"],"mappings":"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","sourcesContent":["import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _Array$isArray from \"@babel/runtime-corejs2/core-js/array/is-array\";\nimport AddButton from \"../AddButton\";\nimport IconButton from \"../IconButton\";\nimport React, { Component } from \"react\";\nimport includes from \"core-js/library/fn/array/includes\";\nimport * as types from \"../../types\";\nimport { getWidget, getDefaultFormState, getUiOptions, isMultiSelect, isFilesArray, isFixedItems, allowAdditionalItems, optionsList, retrieveSchema, toIdSchema, getDefaultRegistry } from \"../../utils\";\nimport shortid from \"shortid\";\n\nfunction ArrayFieldTitle(_ref) {\n  var TitleField = _ref.TitleField,\n      idSchema = _ref.idSchema,\n      title = _ref.title,\n      required = _ref.required;\n\n  if (!title) {\n    return null;\n  }\n\n  var id = \"\".concat(idSchema.$id, \"__title\");\n  return React.createElement(TitleField, {\n    id: id,\n    title: title,\n    required: required\n  });\n}\n\nfunction ArrayFieldDescription(_ref2) {\n  var DescriptionField = _ref2.DescriptionField,\n      idSchema = _ref2.idSchema,\n      description = _ref2.description;\n\n  if (!description) {\n    return null;\n  }\n\n  var id = \"\".concat(idSchema.$id, \"__description\");\n  return React.createElement(DescriptionField, {\n    id: id,\n    description: description\n  });\n} // Used in the two templates\n\n\nfunction DefaultArrayItem(props) {\n  var btnStyle = {\n    flex: 1,\n    paddingLeft: 6,\n    paddingRight: 6,\n    fontWeight: \"bold\"\n  };\n  return React.createElement(\"div\", {\n    key: props.key,\n    className: props.className\n  }, React.createElement(\"div\", {\n    className: props.hasToolbar ? \"col-xs-9\" : \"col-xs-12\"\n  }, props.children), props.hasToolbar && React.createElement(\"div\", {\n    className: \"col-xs-3 array-item-toolbox\"\n  }, React.createElement(\"div\", {\n    className: \"btn-group\",\n    style: {\n      display: \"flex\",\n      justifyContent: \"space-around\"\n    }\n  }, (props.hasMoveUp || props.hasMoveDown) && React.createElement(IconButton, {\n    icon: \"arrow-up\",\n    \"aria-label\": \"Move up\",\n    className: \"array-item-move-up\",\n    tabIndex: \"-1\",\n    style: btnStyle,\n    disabled: props.disabled || props.readonly || !props.hasMoveUp,\n    onClick: props.onReorderClick(props.index, props.index - 1)\n  }), (props.hasMoveUp || props.hasMoveDown) && React.createElement(IconButton, {\n    icon: \"arrow-down\",\n    className: \"array-item-move-down\",\n    \"aria-label\": \"Move down\",\n    tabIndex: \"-1\",\n    style: btnStyle,\n    disabled: props.disabled || props.readonly || !props.hasMoveDown,\n    onClick: props.onReorderClick(props.index, props.index + 1)\n  }), props.hasRemove && React.createElement(IconButton, {\n    type: \"danger\",\n    icon: \"remove\",\n    \"aria-label\": \"Remove\",\n    className: \"array-item-remove\",\n    tabIndex: \"-1\",\n    style: btnStyle,\n    disabled: props.disabled || props.readonly,\n    onClick: props.onDropIndexClick(props.index)\n  }))));\n}\n\nfunction DefaultFixedArrayFieldTemplate(props) {\n  return React.createElement(\"fieldset\", {\n    className: props.className,\n    id: props.idSchema.$id\n  }, React.createElement(ArrayFieldTitle, {\n    key: \"array-field-title-\".concat(props.idSchema.$id),\n    TitleField: props.TitleField,\n    idSchema: props.idSchema,\n    title: props.uiSchema[\"ui:title\"] || props.title,\n    required: props.required\n  }), (props.uiSchema[\"ui:description\"] || props.schema.description) && React.createElement(\"div\", {\n    className: \"field-description\",\n    key: \"field-description-\".concat(props.idSchema.$id)\n  }, props.uiSchema[\"ui:description\"] || props.schema.description), React.createElement(\"div\", {\n    className: \"row array-item-list\",\n    key: \"array-item-list-\".concat(props.idSchema.$id)\n  }, props.items && props.items.map(DefaultArrayItem)), props.canAdd && React.createElement(AddButton, {\n    className: \"array-item-add\",\n    onClick: props.onAddClick,\n    disabled: props.disabled || props.readonly\n  }));\n}\n\nfunction DefaultNormalArrayFieldTemplate(props) {\n  return React.createElement(\"fieldset\", {\n    className: props.className,\n    id: props.idSchema.$id\n  }, React.createElement(ArrayFieldTitle, {\n    key: \"array-field-title-\".concat(props.idSchema.$id),\n    TitleField: props.TitleField,\n    idSchema: props.idSchema,\n    title: props.uiSchema[\"ui:title\"] || props.title,\n    required: props.required\n  }), (props.uiSchema[\"ui:description\"] || props.schema.description) && React.createElement(ArrayFieldDescription, {\n    key: \"array-field-description-\".concat(props.idSchema.$id),\n    DescriptionField: props.DescriptionField,\n    idSchema: props.idSchema,\n    description: props.uiSchema[\"ui:description\"] || props.schema.description\n  }), React.createElement(\"div\", {\n    className: \"row array-item-list\",\n    key: \"array-item-list-\".concat(props.idSchema.$id)\n  }, props.items && props.items.map(function (p) {\n    return DefaultArrayItem(p);\n  })), props.canAdd && React.createElement(AddButton, {\n    className: \"array-item-add\",\n    onClick: props.onAddClick,\n    disabled: props.disabled || props.readonly\n  }));\n}\n\nfunction generateRowId() {\n  return shortid.generate();\n}\n\nfunction generateKeyedFormData(formData) {\n  return !_Array$isArray(formData) ? [] : formData.map(function (item) {\n    return {\n      key: generateRowId(),\n      item: item\n    };\n  });\n}\n\nfunction keyedToPlainFormData(keyedFormData) {\n  return keyedFormData.map(function (keyedItem) {\n    return keyedItem.item;\n  });\n}\n\nvar ArrayField =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ArrayField, _Component);\n\n  function ArrayField(props) {\n    var _this;\n\n    _classCallCheck(this, ArrayField);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ArrayField).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"_getNewFormDataRow\", function () {\n      var _this$props = _this.props,\n          schema = _this$props.schema,\n          _this$props$registry = _this$props.registry,\n          registry = _this$props$registry === void 0 ? getDefaultRegistry() : _this$props$registry;\n      var rootSchema = registry.rootSchema;\n      var itemSchema = schema.items;\n\n      if (isFixedItems(schema) && allowAdditionalItems(schema)) {\n        itemSchema = schema.additionalItems;\n      }\n\n      return getDefaultFormState(itemSchema, undefined, rootSchema);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAddClick\", function (event) {\n      if (event) {\n        event.preventDefault();\n      }\n\n      var onChange = _this.props.onChange;\n      var newKeyedFormDataRow = {\n        key: generateRowId(),\n        item: _this._getNewFormDataRow()\n      };\n      var newKeyedFormData = [].concat(_toConsumableArray(_this.state.keyedFormData), [newKeyedFormDataRow]);\n\n      _this.setState({\n        keyedFormData: newKeyedFormData,\n        updatedKeyedFormData: true\n      }, function () {\n        return onChange(keyedToPlainFormData(newKeyedFormData));\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAddIndexClick\", function (index) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n        }\n\n        var onChange = _this.props.onChange;\n        var newKeyedFormDataRow = {\n          key: generateRowId(),\n          item: _this._getNewFormDataRow()\n        };\n\n        var newKeyedFormData = _toConsumableArray(_this.state.keyedFormData);\n\n        newKeyedFormData.splice(index, 0, newKeyedFormDataRow);\n\n        _this.setState({\n          keyedFormData: newKeyedFormData,\n          updatedKeyedFormData: true\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData));\n        });\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDropIndexClick\", function (index) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n        }\n\n        var onChange = _this.props.onChange;\n        var keyedFormData = _this.state.keyedFormData; // refs #195: revalidate to ensure properly reindexing errors\n\n        var newErrorSchema;\n\n        if (_this.props.errorSchema) {\n          newErrorSchema = {};\n          var errorSchema = _this.props.errorSchema;\n\n          for (var i in errorSchema) {\n            i = _parseInt(i);\n\n            if (i < index) {\n              newErrorSchema[i] = errorSchema[i];\n            } else if (i > index) {\n              newErrorSchema[i - 1] = errorSchema[i];\n            }\n          }\n        }\n\n        var newKeyedFormData = keyedFormData.filter(function (_, i) {\n          return i !== index;\n        });\n\n        _this.setState({\n          keyedFormData: newKeyedFormData,\n          updatedKeyedFormData: true\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema);\n        });\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onReorderClick\", function (index, newIndex) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n          event.target.blur();\n        }\n\n        var onChange = _this.props.onChange;\n        var newErrorSchema;\n\n        if (_this.props.errorSchema) {\n          newErrorSchema = {};\n          var errorSchema = _this.props.errorSchema;\n\n          for (var i in errorSchema) {\n            if (i == index) {\n              newErrorSchema[newIndex] = errorSchema[index];\n            } else if (i == newIndex) {\n              newErrorSchema[index] = errorSchema[newIndex];\n            } else {\n              newErrorSchema[i] = errorSchema[i];\n            }\n          }\n        }\n\n        var keyedFormData = _this.state.keyedFormData;\n\n        function reOrderArray() {\n          // Copy item\n          var _newKeyedFormData = keyedFormData.slice(); // Moves item from index to newIndex\n\n\n          _newKeyedFormData.splice(index, 1);\n\n          _newKeyedFormData.splice(newIndex, 0, keyedFormData[index]);\n\n          return _newKeyedFormData;\n        }\n\n        var newKeyedFormData = reOrderArray();\n\n        _this.setState({\n          keyedFormData: newKeyedFormData\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema);\n        });\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChangeForIndex\", function (index) {\n      return function (value, errorSchema) {\n        var _this$props2 = _this.props,\n            formData = _this$props2.formData,\n            onChange = _this$props2.onChange;\n        var newFormData = formData.map(function (item, i) {\n          // We need to treat undefined items as nulls to have validation.\n          // See https://github.com/tdegrunt/jsonschema/issues/206\n          var jsonValue = typeof value === \"undefined\" ? null : value;\n          return index === i ? jsonValue : item;\n        });\n        onChange(newFormData, errorSchema && _this.props.errorSchema && _objectSpread({}, _this.props.errorSchema, _defineProperty({}, index, errorSchema)));\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSelectChange\", function (value) {\n      _this.props.onChange(value);\n    });\n\n    var _formData = props.formData;\n\n    var _keyedFormData = generateKeyedFormData(_formData);\n\n    _this.state = {\n      keyedFormData: _keyedFormData,\n      updatedKeyedFormData: false\n    };\n    return _this;\n  }\n\n  _createClass(ArrayField, [{\n    key: \"isItemRequired\",\n    value: function isItemRequired(itemSchema) {\n      if (_Array$isArray(itemSchema.type)) {\n        // While we don't yet support composite/nullable jsonschema types, it's\n        // future-proof to check for requirement against these.\n        return !includes(itemSchema.type, \"null\");\n      } // All non-null array item types are inherently required by design\n\n\n      return itemSchema.type !== \"null\";\n    }\n  }, {\n    key: \"canAddItem\",\n    value: function canAddItem(formItems) {\n      var _this$props3 = this.props,\n          schema = _this$props3.schema,\n          uiSchema = _this$props3.uiSchema;\n\n      var _getUiOptions = getUiOptions(uiSchema),\n          addable = _getUiOptions.addable;\n\n      if (addable !== false) {\n        // if ui:options.addable was not explicitly set to false, we can add\n        // another item if we have not exceeded maxItems yet\n        if (schema.maxItems !== undefined) {\n          addable = formItems.length < schema.maxItems;\n        } else {\n          addable = true;\n        }\n      }\n\n      return addable;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          schema = _this$props4.schema,\n          uiSchema = _this$props4.uiSchema,\n          idSchema = _this$props4.idSchema,\n          _this$props4$registry = _this$props4.registry,\n          registry = _this$props4$registry === void 0 ? getDefaultRegistry() : _this$props4$registry;\n      var rootSchema = registry.rootSchema;\n\n      if (!schema.hasOwnProperty(\"items\")) {\n        var fields = registry.fields;\n        var UnsupportedField = fields.UnsupportedField;\n        return React.createElement(UnsupportedField, {\n          schema: schema,\n          idSchema: idSchema,\n          reason: \"Missing items definition\"\n        });\n      }\n\n      if (isFixedItems(schema)) {\n        return this.renderFixedArray();\n      }\n\n      if (isFilesArray(schema, uiSchema, rootSchema)) {\n        return this.renderFiles();\n      }\n\n      if (isMultiSelect(schema, rootSchema)) {\n        return this.renderMultiSelect();\n      }\n\n      return this.renderNormalArray();\n    }\n  }, {\n    key: \"renderNormalArray\",\n    value: function renderNormalArray() {\n      var _this2 = this;\n\n      var _this$props5 = this.props,\n          schema = _this$props5.schema,\n          uiSchema = _this$props5.uiSchema,\n          errorSchema = _this$props5.errorSchema,\n          idSchema = _this$props5.idSchema,\n          name = _this$props5.name,\n          required = _this$props5.required,\n          disabled = _this$props5.disabled,\n          readonly = _this$props5.readonly,\n          autofocus = _this$props5.autofocus,\n          _this$props5$registry = _this$props5.registry,\n          registry = _this$props5$registry === void 0 ? getDefaultRegistry() : _this$props5$registry,\n          onBlur = _this$props5.onBlur,\n          onFocus = _this$props5.onFocus,\n          idPrefix = _this$props5.idPrefix,\n          rawErrors = _this$props5.rawErrors;\n      var title = schema.title === undefined ? name : schema.title;\n      var ArrayFieldTemplate = registry.ArrayFieldTemplate,\n          rootSchema = registry.rootSchema,\n          fields = registry.fields,\n          formContext = registry.formContext;\n      var TitleField = fields.TitleField,\n          DescriptionField = fields.DescriptionField;\n      var itemsSchema = retrieveSchema(schema.items, rootSchema);\n      var formData = keyedToPlainFormData(this.state.keyedFormData);\n      var arrayProps = {\n        canAdd: this.canAddItem(formData),\n        items: this.state.keyedFormData.map(function (keyedItem, index) {\n          var key = keyedItem.key,\n              item = keyedItem.item;\n          var itemSchema = retrieveSchema(schema.items, rootSchema, item);\n          var itemErrorSchema = errorSchema ? errorSchema[index] : undefined;\n          var itemIdPrefix = idSchema.$id + \"_\" + index;\n          var itemIdSchema = toIdSchema(itemSchema, itemIdPrefix, rootSchema, item, idPrefix);\n          return _this2.renderArrayFieldItem({\n            key: key,\n            index: index,\n            canMoveUp: index > 0,\n            canMoveDown: index < formData.length - 1,\n            itemSchema: itemSchema,\n            itemIdSchema: itemIdSchema,\n            itemErrorSchema: itemErrorSchema,\n            itemData: item,\n            itemUiSchema: uiSchema.items,\n            autofocus: autofocus && index === 0,\n            onBlur: onBlur,\n            onFocus: onFocus\n          });\n        }),\n        className: \"field field-array field-array-of-\".concat(itemsSchema.type),\n        DescriptionField: DescriptionField,\n        disabled: disabled,\n        idSchema: idSchema,\n        uiSchema: uiSchema,\n        onAddClick: this.onAddClick,\n        readonly: readonly,\n        required: required,\n        schema: schema,\n        title: title,\n        TitleField: TitleField,\n        formContext: formContext,\n        formData: formData,\n        rawErrors: rawErrors,\n        registry: registry\n      }; // Check if a custom render function was passed in\n\n      var Component = uiSchema[\"ui:ArrayFieldTemplate\"] || ArrayFieldTemplate || DefaultNormalArrayFieldTemplate;\n      return React.createElement(Component, arrayProps);\n    }\n  }, {\n    key: \"renderMultiSelect\",\n    value: function renderMultiSelect() {\n      var _this$props6 = this.props,\n          schema = _this$props6.schema,\n          idSchema = _this$props6.idSchema,\n          uiSchema = _this$props6.uiSchema,\n          formData = _this$props6.formData,\n          disabled = _this$props6.disabled,\n          readonly = _this$props6.readonly,\n          required = _this$props6.required,\n          label = _this$props6.label,\n          placeholder = _this$props6.placeholder,\n          autofocus = _this$props6.autofocus,\n          onBlur = _this$props6.onBlur,\n          onFocus = _this$props6.onFocus,\n          _this$props6$registry = _this$props6.registry,\n          registry = _this$props6$registry === void 0 ? getDefaultRegistry() : _this$props6$registry,\n          rawErrors = _this$props6.rawErrors;\n      var items = this.props.formData;\n      var widgets = registry.widgets,\n          rootSchema = registry.rootSchema,\n          formContext = registry.formContext;\n      var itemsSchema = retrieveSchema(schema.items, rootSchema, formData);\n      var enumOptions = optionsList(itemsSchema);\n\n      var _getUiOptions$enumOpt = _objectSpread({}, getUiOptions(uiSchema), {\n        enumOptions: enumOptions\n      }),\n          _getUiOptions$enumOpt2 = _getUiOptions$enumOpt.widget,\n          widget = _getUiOptions$enumOpt2 === void 0 ? \"select\" : _getUiOptions$enumOpt2,\n          options = _objectWithoutProperties(_getUiOptions$enumOpt, [\"widget\"]);\n\n      var Widget = getWidget(schema, widget, widgets);\n      return React.createElement(Widget, {\n        id: idSchema && idSchema.$id,\n        multiple: true,\n        onChange: this.onSelectChange,\n        onBlur: onBlur,\n        onFocus: onFocus,\n        options: options,\n        schema: schema,\n        registry: registry,\n        value: items,\n        disabled: disabled,\n        readonly: readonly,\n        required: required,\n        label: label,\n        placeholder: placeholder,\n        formContext: formContext,\n        autofocus: autofocus,\n        rawErrors: rawErrors\n      });\n    }\n  }, {\n    key: \"renderFiles\",\n    value: function renderFiles() {\n      var _this$props7 = this.props,\n          schema = _this$props7.schema,\n          uiSchema = _this$props7.uiSchema,\n          idSchema = _this$props7.idSchema,\n          name = _this$props7.name,\n          disabled = _this$props7.disabled,\n          readonly = _this$props7.readonly,\n          autofocus = _this$props7.autofocus,\n          onBlur = _this$props7.onBlur,\n          onFocus = _this$props7.onFocus,\n          _this$props7$registry = _this$props7.registry,\n          registry = _this$props7$registry === void 0 ? getDefaultRegistry() : _this$props7$registry,\n          rawErrors = _this$props7.rawErrors;\n      var title = schema.title || name;\n      var items = this.props.formData;\n      var widgets = registry.widgets,\n          formContext = registry.formContext;\n\n      var _getUiOptions2 = getUiOptions(uiSchema),\n          _getUiOptions2$widget = _getUiOptions2.widget,\n          widget = _getUiOptions2$widget === void 0 ? \"files\" : _getUiOptions2$widget,\n          options = _objectWithoutProperties(_getUiOptions2, [\"widget\"]);\n\n      var Widget = getWidget(schema, widget, widgets);\n      return React.createElement(Widget, {\n        options: options,\n        id: idSchema && idSchema.$id,\n        multiple: true,\n        onChange: this.onSelectChange,\n        onBlur: onBlur,\n        onFocus: onFocus,\n        schema: schema,\n        title: title,\n        value: items,\n        disabled: disabled,\n        readonly: readonly,\n        formContext: formContext,\n        autofocus: autofocus,\n        rawErrors: rawErrors\n      });\n    }\n  }, {\n    key: \"renderFixedArray\",\n    value: function renderFixedArray() {\n      var _this3 = this;\n\n      var _this$props8 = this.props,\n          schema = _this$props8.schema,\n          uiSchema = _this$props8.uiSchema,\n          formData = _this$props8.formData,\n          errorSchema = _this$props8.errorSchema,\n          idPrefix = _this$props8.idPrefix,\n          idSchema = _this$props8.idSchema,\n          name = _this$props8.name,\n          required = _this$props8.required,\n          disabled = _this$props8.disabled,\n          readonly = _this$props8.readonly,\n          autofocus = _this$props8.autofocus,\n          _this$props8$registry = _this$props8.registry,\n          registry = _this$props8$registry === void 0 ? getDefaultRegistry() : _this$props8$registry,\n          onBlur = _this$props8.onBlur,\n          onFocus = _this$props8.onFocus,\n          rawErrors = _this$props8.rawErrors;\n      var title = schema.title || name;\n      var items = this.props.formData;\n      var ArrayFieldTemplate = registry.ArrayFieldTemplate,\n          rootSchema = registry.rootSchema,\n          fields = registry.fields,\n          formContext = registry.formContext;\n      var TitleField = fields.TitleField;\n      var itemSchemas = schema.items.map(function (item, index) {\n        return retrieveSchema(item, rootSchema, formData[index]);\n      });\n      var additionalSchema = allowAdditionalItems(schema) ? retrieveSchema(schema.additionalItems, rootSchema, formData) : null;\n\n      if (!items || items.length < itemSchemas.length) {\n        // to make sure at least all fixed items are generated\n        items = items || [];\n        items = items.concat(new Array(itemSchemas.length - items.length));\n      } // These are the props passed into the render function\n\n\n      var arrayProps = {\n        canAdd: this.canAddItem(items) && additionalSchema,\n        className: \"field field-array field-array-fixed-items\",\n        disabled: disabled,\n        idSchema: idSchema,\n        formData: formData,\n        items: this.state.keyedFormData.map(function (keyedItem, index) {\n          var key = keyedItem.key,\n              item = keyedItem.item;\n          var additional = index >= itemSchemas.length;\n          var itemSchema = additional ? retrieveSchema(schema.additionalItems, rootSchema, item) : itemSchemas[index];\n          var itemIdPrefix = idSchema.$id + \"_\" + index;\n          var itemIdSchema = toIdSchema(itemSchema, itemIdPrefix, rootSchema, item, idPrefix);\n          var itemUiSchema = additional ? uiSchema.additionalItems || {} : _Array$isArray(uiSchema.items) ? uiSchema.items[index] : uiSchema.items || {};\n          var itemErrorSchema = errorSchema ? errorSchema[index] : undefined;\n          return _this3.renderArrayFieldItem({\n            key: key,\n            index: index,\n            canRemove: additional,\n            canMoveUp: index >= itemSchemas.length + 1,\n            canMoveDown: additional && index < items.length - 1,\n            itemSchema: itemSchema,\n            itemData: item,\n            itemUiSchema: itemUiSchema,\n            itemIdSchema: itemIdSchema,\n            itemErrorSchema: itemErrorSchema,\n            autofocus: autofocus && index === 0,\n            onBlur: onBlur,\n            onFocus: onFocus\n          });\n        }),\n        onAddClick: this.onAddClick,\n        readonly: readonly,\n        required: required,\n        schema: schema,\n        uiSchema: uiSchema,\n        title: title,\n        TitleField: TitleField,\n        formContext: formContext,\n        rawErrors: rawErrors\n      }; // Check if a custom template template was passed in\n\n      var Template = uiSchema[\"ui:ArrayFieldTemplate\"] || ArrayFieldTemplate || DefaultFixedArrayFieldTemplate;\n      return React.createElement(Template, arrayProps);\n    }\n  }, {\n    key: \"renderArrayFieldItem\",\n    value: function renderArrayFieldItem(props) {\n      var key = props.key,\n          index = props.index,\n          _props$canRemove = props.canRemove,\n          canRemove = _props$canRemove === void 0 ? true : _props$canRemove,\n          _props$canMoveUp = props.canMoveUp,\n          canMoveUp = _props$canMoveUp === void 0 ? true : _props$canMoveUp,\n          _props$canMoveDown = props.canMoveDown,\n          canMoveDown = _props$canMoveDown === void 0 ? true : _props$canMoveDown,\n          itemSchema = props.itemSchema,\n          itemData = props.itemData,\n          itemUiSchema = props.itemUiSchema,\n          itemIdSchema = props.itemIdSchema,\n          itemErrorSchema = props.itemErrorSchema,\n          autofocus = props.autofocus,\n          onBlur = props.onBlur,\n          onFocus = props.onFocus,\n          rawErrors = props.rawErrors;\n      var _this$props9 = this.props,\n          disabled = _this$props9.disabled,\n          readonly = _this$props9.readonly,\n          uiSchema = _this$props9.uiSchema,\n          _this$props9$registry = _this$props9.registry,\n          registry = _this$props9$registry === void 0 ? getDefaultRegistry() : _this$props9$registry;\n      var SchemaField = registry.fields.SchemaField;\n\n      var _orderable$removable$ = _objectSpread({\n        orderable: true,\n        removable: true\n      }, uiSchema[\"ui:options\"]),\n          orderable = _orderable$removable$.orderable,\n          removable = _orderable$removable$.removable;\n\n      var has = {\n        moveUp: orderable && canMoveUp,\n        moveDown: orderable && canMoveDown,\n        remove: removable && canRemove\n      };\n      has.toolbar = _Object$keys(has).some(function (key) {\n        return has[key];\n      });\n      return {\n        children: React.createElement(SchemaField, {\n          index: index,\n          schema: itemSchema,\n          uiSchema: itemUiSchema,\n          formData: itemData,\n          errorSchema: itemErrorSchema,\n          idSchema: itemIdSchema,\n          required: this.isItemRequired(itemSchema),\n          onChange: this.onChangeForIndex(index),\n          onBlur: onBlur,\n          onFocus: onFocus,\n          registry: this.props.registry,\n          disabled: this.props.disabled,\n          readonly: this.props.readonly,\n          autofocus: autofocus,\n          rawErrors: rawErrors\n        }),\n        className: \"array-item\",\n        disabled: disabled,\n        hasToolbar: has.toolbar,\n        hasMoveUp: has.moveUp,\n        hasMoveDown: has.moveDown,\n        hasRemove: has.remove,\n        index: index,\n        key: key,\n        onAddIndexClick: this.onAddIndexClick,\n        onDropIndexClick: this.onDropIndexClick,\n        onReorderClick: this.onReorderClick,\n        readonly: readonly\n      };\n    }\n  }, {\n    key: \"itemTitle\",\n    get: function get() {\n      var schema = this.props.schema;\n      return schema.items.title || schema.items.description || \"Item\";\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      // Don't call getDerivedStateFromProps if keyed formdata was just updated.\n      if (prevState.updatedKeyedFormData) {\n        return {\n          updatedKeyedFormData: false\n        };\n      }\n\n      var nextFormData = nextProps.formData;\n      var previousKeyedFormData = prevState.keyedFormData;\n      var newKeyedFormData = nextFormData.length === previousKeyedFormData.length ? previousKeyedFormData.map(function (previousKeyedFormDatum, index) {\n        return {\n          key: previousKeyedFormDatum.key,\n          item: nextFormData[index]\n        };\n      }) : generateKeyedFormData(nextFormData);\n      return {\n        keyedFormData: newKeyedFormData\n      };\n    }\n  }]);\n\n  return ArrayField;\n}(Component);\n\n_defineProperty(ArrayField, \"defaultProps\", {\n  uiSchema: {},\n  formData: [],\n  idSchema: {},\n  required: false,\n  disabled: false,\n  readonly: false,\n  autofocus: false\n});\n\nif (process.env.NODE_ENV !== \"production\") {\n  ArrayField.propTypes = types.fieldProps;\n}\n\nexport default ArrayField;"]},"metadata":{},"sourceType":"module"}