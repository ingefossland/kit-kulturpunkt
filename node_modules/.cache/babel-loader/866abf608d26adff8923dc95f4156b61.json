{"ast":null,"code":"import getVCalendar from \"./getVCalendar\";\nimport getICalQuery from \"./getICalQuery\";\nimport moment from \"moment\";\nimport { v4 as uuidv4 } from 'uuid';\nimport _ from \"lodash\";\nexport const getEventProgram = ({\n  uniqueId,\n  program = {},\n  query = {}\n}) => {\n  let events = [],\n      byId = {};\n  program.events && program.events.map((item, index) => {\n    const id = item.id || uniqueId + \"-\" + index;\n    const event = { ...item,\n      id: id\n    };\n    events.push(event);\n    byId[id] = event;\n  });\n  const iCal = getVCalendar({\n    events\n  });\n  const results = getICalQuery({\n    iCal,\n    query\n  });\n  const items = results.items && results.items.map(item => {\n    return { ...byId[item.id],\n      ...item\n    };\n  });\n  return { ...program,\n    ...results,\n    byId: byId,\n    items: items\n  };\n};","map":{"version":3,"sources":["/Users/inge/Sites/kit-kulturpunkt/src/utils/getEventProgram.js"],"names":["getVCalendar","getICalQuery","moment","v4","uuidv4","_","getEventProgram","uniqueId","program","query","events","byId","map","item","index","id","event","push","iCal","results","items"],"mappings":"AAAA,OAAOA,YAAP,MAAyB,gBAAzB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,EAAE,IAAIC,MAAf,QAA6B,MAA7B;AACA,OAAOC,CAAP,MAAc,QAAd;AAEA,OAAO,MAAMC,eAAe,GAAG,CAAC;AAACC,EAAAA,QAAD;AAAWC,EAAAA,OAAO,GAAG,EAArB;AAAyBC,EAAAA,KAAK,GAAG;AAAjC,CAAD,KAA0C;AAErE,MAAIC,MAAM,GAAG,EAAb;AAAA,MAAiBC,IAAI,GAAG,EAAxB;AAEAH,EAAAA,OAAO,CAACE,MAAR,IAAkBF,OAAO,CAACE,MAAR,CAAeE,GAAf,CAAmB,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAClD,UAAMC,EAAE,GAAGF,IAAI,CAACE,EAAL,IAAWR,QAAQ,GAAG,GAAX,GAAiBO,KAAvC;AACA,UAAME,KAAK,GAAG,EACV,GAAGH,IADO;AAEVE,MAAAA,EAAE,EAAEA;AAFM,KAAd;AAKAL,IAAAA,MAAM,CAACO,IAAP,CAAYD,KAAZ;AACAL,IAAAA,IAAI,CAACI,EAAD,CAAJ,GAAWC,KAAX;AACH,GATiB,CAAlB;AAWA,QAAME,IAAI,GAAGlB,YAAY,CAAC;AAACU,IAAAA;AAAD,GAAD,CAAzB;AACA,QAAMS,OAAO,GAAGlB,YAAY,CAAC;AAACiB,IAAAA,IAAD;AAAOT,IAAAA;AAAP,GAAD,CAA5B;AAEA,QAAMW,KAAK,GAAGD,OAAO,CAACC,KAAR,IAAiBD,OAAO,CAACC,KAAR,CAAcR,GAAd,CAAkBC,IAAI,IAAI;AACrD,WAAO,EACH,GAAGF,IAAI,CAACE,IAAI,CAACE,EAAN,CADJ;AAEH,SAAGF;AAFA,KAAP;AAIH,GAL8B,CAA/B;AAOA,SAAO,EACH,GAAGL,OADA;AAEH,OAAGW,OAFA;AAGHR,IAAAA,IAAI,EAAEA,IAHH;AAIHS,IAAAA,KAAK,EAAEA;AAJJ,GAAP;AAOH,CAhCM","sourcesContent":["import getVCalendar from \"./getVCalendar\"\nimport getICalQuery from \"./getICalQuery\"\nimport moment from \"moment\"\nimport { v4 as uuidv4 } from 'uuid';\nimport _ from \"lodash\"\n\nexport const getEventProgram = ({uniqueId, program = {}, query = {}}) => {\n\n    let events = [], byId = {}\n\n    program.events && program.events.map((item, index) => {\n        const id = item.id || uniqueId + \"-\" + index\n        const event = {\n            ...item,\n            id: id\n        }\n\n        events.push(event)\n        byId[id] = event\n    })\n\n    const iCal = getVCalendar({events}) \n    const results = getICalQuery({iCal, query})\n\n    const items = results.items && results.items.map(item => {\n        return {\n            ...byId[item.id],\n            ...item,\n        }\n    })\n    \n    return {\n        ...program,\n        ...results,\n        byId: byId,\n        items: items\n    }\n\n}"]},"metadata":{},"sourceType":"module"}