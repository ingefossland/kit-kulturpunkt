{"ast":null,"code":"var _jsxFileName = \"/Users/inge/Sites/kit-kulturpunkt/src/components/PreviewIframe/PreviewIframe.js\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { create } from 'jss';\nimport { makeStyles, withStyles, useTheme, jssPreset, StylesProvider } from '@material-ui/core/styles';\nimport NoSsr from '@material-ui/core/NoSsr';\nimport rtl from 'jss-rtl';\nimport Frame from 'react-frame-component';\n\nconst useStyles = theme => ({\n  frame: {\n    width: \"100%\",\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n    height: \"100%\",\n    border: 'none'\n  }\n});\n\nconst PreviewIframe = props => {\n  const {\n    children,\n    classes,\n    ...other\n  } = props;\n  const theme = useTheme();\n  const [state, setState] = useState({\n    ready: false\n  });\n  const instanceRef = React.useRef();\n  const handleRef = React.useCallback(ref => {\n    instanceRef.current = {\n      contentDocument: ref ? ref.node.contentDocument : null,\n      contentWindow: ref ? ref.node.contentWindow : null\n    };\n  }, []);\n\n  const onContentDidMount = () => {\n    setState({\n      ready: true,\n      jss: create({\n        plugins: [...jssPreset().plugins, rtl()],\n        insertionPoint: instanceRef.current.contentWindow['demo-frame-jss']\n      }),\n      sheetsManager: new Map(),\n      container: instanceRef.current.contentDocument.body,\n      window: () => instanceRef.current.contentWindow\n    });\n  };\n\n  const onContentDidUpdate = () => {\n    instanceRef.current.contentDocument.body.dir = theme.direction;\n  }; //    const wrapper = useStyles()\n  // NoSsr fixes a strange concurrency issue with iframe and quick React mount/unmount\n\n\n  return /*#__PURE__*/React.createElement(NoSsr, {\n    defer: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Frame, Object.assign({\n    ref: handleRef,\n    className: classes.frame,\n    contentDidMount: onContentDidMount,\n    contentDidUpdate: onContentDidUpdate\n  }, other, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"demo-frame-jss\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }), state.ready ? /*#__PURE__*/React.createElement(StylesProvider, {\n    jss: state.jss,\n    sheetsManager: state.sheetsManager,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, React.cloneElement(children, {\n    container: state.container,\n    window: state.window\n  })) : null));\n};\n\nPreviewIframe.propTypes = {\n  children: PropTypes.node.isRequired,\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(useStyles)(PreviewIframe);","map":{"version":3,"sources":["/Users/inge/Sites/kit-kulturpunkt/src/components/PreviewIframe/PreviewIframe.js"],"names":["React","useState","PropTypes","create","makeStyles","withStyles","useTheme","jssPreset","StylesProvider","NoSsr","rtl","Frame","useStyles","theme","frame","width","marginLeft","marginRight","height","border","PreviewIframe","props","children","classes","other","state","setState","ready","instanceRef","useRef","handleRef","useCallback","ref","current","contentDocument","node","contentWindow","onContentDidMount","jss","plugins","insertionPoint","sheetsManager","Map","container","body","window","onContentDidUpdate","dir","direction","cloneElement","propTypes","isRequired","object"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { create } from 'jss';\nimport { makeStyles, withStyles, useTheme, jssPreset, StylesProvider } from '@material-ui/core/styles';\nimport NoSsr from '@material-ui/core/NoSsr';\nimport rtl from 'jss-rtl';\nimport Frame from 'react-frame-component';\n\nconst useStyles = theme => ({\n    frame: {\n        width: \"100%\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        height: \"100%\",\n        border: 'none',\n    },\n});\n\nconst PreviewIframe = (props) => {\n    const { children, classes, ...other } = props;\n    const theme = useTheme();\n    const [state, setState] = useState({\n        ready: false,\n    });\n    \n    const instanceRef = React.useRef();\n\n    const handleRef = React.useCallback((ref) => {\n        instanceRef.current = {\n            contentDocument: ref ? ref.node.contentDocument : null,\n            contentWindow: ref ? ref.node.contentWindow : null,\n        };\n    }, []);\n\n    const onContentDidMount = () => {\n        setState({\n            ready: true,\n            jss: create({\n            plugins: [...jssPreset().plugins, rtl()],\n            insertionPoint: instanceRef.current.contentWindow['demo-frame-jss'],\n            }),\n            sheetsManager: new Map(),\n            container: instanceRef.current.contentDocument.body,\n            window: () => instanceRef.current.contentWindow,\n        });\n    };\n\n    const onContentDidUpdate = () => {\n        instanceRef.current.contentDocument.body.dir = theme.direction;\n    };\n\n//    const wrapper = useStyles()\n\n    // NoSsr fixes a strange concurrency issue with iframe and quick React mount/unmount\n    return (\n        <NoSsr defer>\n            <Frame\n                ref={handleRef}\n                className={classes.frame}\n                contentDidMount={onContentDidMount}\n                contentDidUpdate={onContentDidUpdate}\n                {...other}\n            >\n            <div id=\"demo-frame-jss\" />\n                {state.ready ? (\n                <StylesProvider jss={state.jss} sheetsManager={state.sheetsManager}>\n                    {React.cloneElement(children, {\n                    container: state.container,\n                    window: state.window,\n                    })}\n                </StylesProvider>\n                ) : null}\n            </Frame>\n        </NoSsr>\n    )\n}\n\nPreviewIframe.propTypes = {\n    children: PropTypes.node.isRequired,\n    classes: PropTypes.object.isRequired,\n}\n\nexport default withStyles(useStyles)(PreviewIframe);"]},"metadata":{},"sourceType":"module"}