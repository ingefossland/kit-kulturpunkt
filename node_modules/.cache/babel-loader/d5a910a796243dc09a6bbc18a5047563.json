{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ID3v24TagMapper = void 0;\n\nconst GenericTagMapper_1 = require(\"../common/GenericTagMapper\");\n\nconst Util_1 = require(\"../common/Util\");\n\nconst CaseInsensitiveTagMap_1 = require(\"../common/CaseInsensitiveTagMap\");\n/**\n * ID3v2.3/ID3v2.4 tag mappings\n */\n\n\nconst id3v24TagMap = {\n  // id3v2.3\n  TIT2: \"title\",\n  TPE1: \"artist\",\n  \"TXXX:Artists\": \"artists\",\n  TPE2: \"albumartist\",\n  TALB: \"album\",\n  TDRV: \"date\",\n\n  /**\n   * Original release year\n   */\n  TORY: \"originalyear\",\n  TPOS: \"disk\",\n  TCON: \"genre\",\n  APIC: \"picture\",\n  TCOM: \"composer\",\n  \"USLT:description\": \"lyrics\",\n  TSOA: \"albumsort\",\n  TSOT: \"titlesort\",\n  TOAL: \"originalalbum\",\n  TSOP: \"artistsort\",\n  TSO2: \"albumartistsort\",\n  TSOC: \"composersort\",\n  TEXT: \"lyricist\",\n  \"TXXX:Writer\": \"writer\",\n  TPE3: \"conductor\",\n  // 'IPLS:instrument': 'performer:instrument', // ToDo\n  TPE4: \"remixer\",\n  \"IPLS:arranger\": \"arranger\",\n  \"IPLS:engineer\": \"engineer\",\n  \"IPLS:producer\": \"producer\",\n  \"IPLS:DJ-mix\": \"djmixer\",\n  \"IPLS:mix\": \"mixer\",\n  TPUB: \"label\",\n  TIT1: \"grouping\",\n  TIT3: \"subtitle\",\n  TRCK: \"track\",\n  TCMP: \"compilation\",\n  POPM: \"rating\",\n  TBPM: \"bpm\",\n  TMED: \"media\",\n  \"TXXX:CATALOGNUMBER\": \"catalognumber\",\n  \"TXXX:MusicBrainz Album Status\": \"releasestatus\",\n  \"TXXX:MusicBrainz Album Type\": \"releasetype\",\n\n  /**\n   * Release country as documented: https://picard.musicbrainz.org/docs/mappings/#cite_note-0\n   */\n  \"TXXX:MusicBrainz Album Release Country\": \"releasecountry\",\n\n  /**\n   * Release country as implemented // ToDo: report\n   */\n  \"TXXX:RELEASECOUNTRY\": \"releasecountry\",\n  \"TXXX:SCRIPT\": \"script\",\n  TLAN: \"language\",\n  TCOP: \"copyright\",\n  WCOP: \"license\",\n  TENC: \"encodedby\",\n  TSSE: \"encodersettings\",\n  \"TXXX:BARCODE\": \"barcode\",\n  TSRC: \"isrc\",\n  \"TXXX:ASIN\": \"asin\",\n  \"TXXX:originalyear\": \"originalyear\",\n  \"UFID:http://musicbrainz.org\": \"musicbrainz_recordingid\",\n  \"TXXX:MusicBrainz Release Track Id\": \"musicbrainz_trackid\",\n  \"TXXX:MusicBrainz Album Id\": \"musicbrainz_albumid\",\n  \"TXXX:MusicBrainz Artist Id\": \"musicbrainz_artistid\",\n  \"TXXX:MusicBrainz Album Artist Id\": \"musicbrainz_albumartistid\",\n  \"TXXX:MusicBrainz Release Group Id\": \"musicbrainz_releasegroupid\",\n  \"TXXX:MusicBrainz Work Id\": \"musicbrainz_workid\",\n  \"TXXX:MusicBrainz TRM Id\": \"musicbrainz_trmid\",\n  \"TXXX:MusicBrainz Disc Id\": \"musicbrainz_discid\",\n  \"TXXX:ACOUSTID_ID\": \"acoustid_id\",\n  \"TXXX:Acoustid Id\": \"acoustid_id\",\n  \"TXXX:Acoustid Fingerprint\": \"acoustid_fingerprint\",\n  \"TXXX:MusicIP PUID\": \"musicip_puid\",\n  \"TXXX:MusicMagic Fingerprint\": \"musicip_fingerprint\",\n  WOAR: \"website\",\n  // id3v2.4\n  // ToDo: In same sequence as defined at http://id3.org/id3v2.4.0-frames\n  TDRC: \"date\",\n  TYER: \"year\",\n  TDOR: \"originaldate\",\n  // 'TMCL:instrument': 'performer:instrument',\n  \"TIPL:arranger\": \"arranger\",\n  \"TIPL:engineer\": \"engineer\",\n  \"TIPL:producer\": \"producer\",\n  \"TIPL:DJ-mix\": \"djmixer\",\n  \"TIPL:mix\": \"mixer\",\n  TMOO: \"mood\",\n  // additional mappings:\n  SYLT: \"lyrics\",\n  TSST: \"discsubtitle\",\n  TKEY: \"key\",\n  COMM: \"comment\",\n  TOPE: \"originalartist\",\n  // Windows Media Player\n  \"PRIV:AverageLevel\": \"averageLevel\",\n  \"PRIV:PeakLevel\": \"peakLevel\",\n  // Discogs\n  \"TXXX:DISCOGS_ARTIST_ID\": \"discogs_artist_id\",\n  \"TXXX:DISCOGS_ARTISTS\": \"artists\",\n  \"TXXX:DISCOGS_ARTIST_NAME\": \"artists\",\n  \"TXXX:DISCOGS_ALBUM_ARTISTS\": \"albumartist\",\n  \"TXXX:DISCOGS_CATALOG\": \"catalognumber\",\n  \"TXXX:DISCOGS_COUNTRY\": \"releasecountry\",\n  \"TXXX:DISCOGS_DATE\": \"originaldate\",\n  \"TXXX:DISCOGS_LABEL\": \"label\",\n  \"TXXX:DISCOGS_LABEL_ID\": \"discogs_label_id\",\n  \"TXXX:DISCOGS_MASTER_RELEASE_ID\": \"discogs_master_release_id\",\n  \"TXXX:DISCOGS_RATING\": \"discogs_rating\",\n  \"TXXX:DISCOGS_RELEASED\": \"date\",\n  \"TXXX:DISCOGS_RELEASE_ID\": \"discogs_release_id\",\n  \"TXXX:DISCOGS_VOTES\": \"discogs_votes\",\n  \"TXXX:CATALOGID\": \"catalognumber\",\n  \"TXXX:STYLE\": \"genre\",\n  \"TXXX:REPLAYGAIN_TRACK_PEAK\": \"replaygain_track_peak\",\n  \"TXXX:REPLAYGAIN_TRACK_GAIN\": \"replaygain_track_gain\",\n  \"TXXX:REPLAYGAIN_ALBUM_PEAK\": \"replaygain_album_peak\",\n  \"TXXX:REPLAYGAIN_ALBUM_GAIN\": \"replaygain_album_gain\",\n  \"TXXX:MP3GAIN_MINMAX\": \"replaygain_track_minmax\",\n  \"TXXX:MP3GAIN_ALBUM_MINMAX\": \"replaygain_album_minmax\",\n  \"TXXX:MP3GAIN_UNDO\": \"replaygain_undo\",\n  MVNM: \"movement\",\n  MVIN: \"movementIndex\",\n  PCST: \"podcast\",\n  TCAT: \"category\",\n  TDES: \"description\",\n  TDRL: \"date\",\n  TGID: \"podcastId\",\n  TKWD: \"keywords\",\n  WFED: \"podcasturl\"\n};\n\nclass ID3v24TagMapper extends CaseInsensitiveTagMap_1.CaseInsensitiveTagMap {\n  static toRating(popm) {\n    return {\n      source: popm.email,\n      rating: popm.rating > 0 ? (popm.rating - 1) / 254 * GenericTagMapper_1.CommonTagMapper.maxRatingScore : undefined\n    };\n  }\n\n  constructor() {\n    super(['ID3v2.3', 'ID3v2.4'], id3v24TagMap);\n  }\n  /**\n   * Handle post mapping exceptions / correction\n   * @param {string} tag to post map\n   * @param warnings USed to register warnings\n   * @return Common value e.g. \"Buena Vista Social Club\"\n   */\n\n\n  postMap(tag, warnings) {\n    switch (tag.id) {\n      case 'UFID':\n        // decode MusicBrainz Recording Id\n        if (tag.value.owner_identifier === 'http://musicbrainz.org') {\n          tag.id += ':' + tag.value.owner_identifier;\n          tag.value = Util_1.default.decodeString(tag.value.identifier, 'iso-8859-1');\n        }\n\n        break;\n\n      case 'PRIV':\n        switch (tag.value.owner_identifier) {\n          // decode Windows Media Player\n          case 'AverageLevel':\n          case 'PeakValue':\n            tag.id += ':' + tag.value.owner_identifier;\n            tag.value = tag.value.data.length === 4 ? tag.value.data.readUInt32LE(0) : null;\n\n            if (tag.value === null) {\n              warnings.addWarning(`Failed to parse PRIV:PeakValue`);\n            }\n\n            break;\n\n          default:\n            warnings.addWarning(`Unknown PRIV owner-identifier: ${tag.value.owner_identifier}`);\n        }\n\n        break;\n\n      case 'COMM':\n        tag.value = tag.value ? tag.value.text : null;\n        break;\n\n      case 'POPM':\n        tag.value = ID3v24TagMapper.toRating(tag.value);\n        break;\n\n      default:\n        break;\n    }\n  }\n\n}\n\nexports.ID3v24TagMapper = ID3v24TagMapper;","map":{"version":3,"sources":["/Users/inge/Sites/kit-kulturpunkt/node_modules/music-metadata/lib/id3v2/ID3v24TagMapper.js"],"names":["Object","defineProperty","exports","value","ID3v24TagMapper","GenericTagMapper_1","require","Util_1","CaseInsensitiveTagMap_1","id3v24TagMap","TIT2","TPE1","TPE2","TALB","TDRV","TORY","TPOS","TCON","APIC","TCOM","TSOA","TSOT","TOAL","TSOP","TSO2","TSOC","TEXT","TPE3","TPE4","TPUB","TIT1","TIT3","TRCK","TCMP","POPM","TBPM","TMED","TLAN","TCOP","WCOP","TENC","TSSE","TSRC","WOAR","TDRC","TYER","TDOR","TMOO","SYLT","TSST","TKEY","COMM","TOPE","MVNM","MVIN","PCST","TCAT","TDES","TDRL","TGID","TKWD","WFED","CaseInsensitiveTagMap","toRating","popm","source","email","rating","CommonTagMapper","maxRatingScore","undefined","constructor","postMap","tag","warnings","id","owner_identifier","default","decodeString","identifier","data","length","readUInt32LE","addWarning","text"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ID3v24TagMapper = void 0;\nconst GenericTagMapper_1 = require(\"../common/GenericTagMapper\");\nconst Util_1 = require(\"../common/Util\");\nconst CaseInsensitiveTagMap_1 = require(\"../common/CaseInsensitiveTagMap\");\n/**\n * ID3v2.3/ID3v2.4 tag mappings\n */\nconst id3v24TagMap = {\n    // id3v2.3\n    TIT2: \"title\",\n    TPE1: \"artist\",\n    \"TXXX:Artists\": \"artists\",\n    TPE2: \"albumartist\",\n    TALB: \"album\",\n    TDRV: \"date\",\n    /**\n     * Original release year\n     */\n    TORY: \"originalyear\",\n    TPOS: \"disk\",\n    TCON: \"genre\",\n    APIC: \"picture\",\n    TCOM: \"composer\",\n    \"USLT:description\": \"lyrics\",\n    TSOA: \"albumsort\",\n    TSOT: \"titlesort\",\n    TOAL: \"originalalbum\",\n    TSOP: \"artistsort\",\n    TSO2: \"albumartistsort\",\n    TSOC: \"composersort\",\n    TEXT: \"lyricist\",\n    \"TXXX:Writer\": \"writer\",\n    TPE3: \"conductor\",\n    // 'IPLS:instrument': 'performer:instrument', // ToDo\n    TPE4: \"remixer\",\n    \"IPLS:arranger\": \"arranger\",\n    \"IPLS:engineer\": \"engineer\",\n    \"IPLS:producer\": \"producer\",\n    \"IPLS:DJ-mix\": \"djmixer\",\n    \"IPLS:mix\": \"mixer\",\n    TPUB: \"label\",\n    TIT1: \"grouping\",\n    TIT3: \"subtitle\",\n    TRCK: \"track\",\n    TCMP: \"compilation\",\n    POPM: \"rating\",\n    TBPM: \"bpm\",\n    TMED: \"media\",\n    \"TXXX:CATALOGNUMBER\": \"catalognumber\",\n    \"TXXX:MusicBrainz Album Status\": \"releasestatus\",\n    \"TXXX:MusicBrainz Album Type\": \"releasetype\",\n    /**\n     * Release country as documented: https://picard.musicbrainz.org/docs/mappings/#cite_note-0\n     */\n    \"TXXX:MusicBrainz Album Release Country\": \"releasecountry\",\n    /**\n     * Release country as implemented // ToDo: report\n     */\n    \"TXXX:RELEASECOUNTRY\": \"releasecountry\",\n    \"TXXX:SCRIPT\": \"script\",\n    TLAN: \"language\",\n    TCOP: \"copyright\",\n    WCOP: \"license\",\n    TENC: \"encodedby\",\n    TSSE: \"encodersettings\",\n    \"TXXX:BARCODE\": \"barcode\",\n    TSRC: \"isrc\",\n    \"TXXX:ASIN\": \"asin\",\n    \"TXXX:originalyear\": \"originalyear\",\n    \"UFID:http://musicbrainz.org\": \"musicbrainz_recordingid\",\n    \"TXXX:MusicBrainz Release Track Id\": \"musicbrainz_trackid\",\n    \"TXXX:MusicBrainz Album Id\": \"musicbrainz_albumid\",\n    \"TXXX:MusicBrainz Artist Id\": \"musicbrainz_artistid\",\n    \"TXXX:MusicBrainz Album Artist Id\": \"musicbrainz_albumartistid\",\n    \"TXXX:MusicBrainz Release Group Id\": \"musicbrainz_releasegroupid\",\n    \"TXXX:MusicBrainz Work Id\": \"musicbrainz_workid\",\n    \"TXXX:MusicBrainz TRM Id\": \"musicbrainz_trmid\",\n    \"TXXX:MusicBrainz Disc Id\": \"musicbrainz_discid\",\n    \"TXXX:ACOUSTID_ID\": \"acoustid_id\",\n    \"TXXX:Acoustid Id\": \"acoustid_id\",\n    \"TXXX:Acoustid Fingerprint\": \"acoustid_fingerprint\",\n    \"TXXX:MusicIP PUID\": \"musicip_puid\",\n    \"TXXX:MusicMagic Fingerprint\": \"musicip_fingerprint\",\n    WOAR: \"website\",\n    // id3v2.4\n    // ToDo: In same sequence as defined at http://id3.org/id3v2.4.0-frames\n    TDRC: \"date\",\n    TYER: \"year\",\n    TDOR: \"originaldate\",\n    // 'TMCL:instrument': 'performer:instrument',\n    \"TIPL:arranger\": \"arranger\",\n    \"TIPL:engineer\": \"engineer\",\n    \"TIPL:producer\": \"producer\",\n    \"TIPL:DJ-mix\": \"djmixer\",\n    \"TIPL:mix\": \"mixer\",\n    TMOO: \"mood\",\n    // additional mappings:\n    SYLT: \"lyrics\",\n    TSST: \"discsubtitle\",\n    TKEY: \"key\",\n    COMM: \"comment\",\n    TOPE: \"originalartist\",\n    // Windows Media Player\n    \"PRIV:AverageLevel\": \"averageLevel\",\n    \"PRIV:PeakLevel\": \"peakLevel\",\n    // Discogs\n    \"TXXX:DISCOGS_ARTIST_ID\": \"discogs_artist_id\",\n    \"TXXX:DISCOGS_ARTISTS\": \"artists\",\n    \"TXXX:DISCOGS_ARTIST_NAME\": \"artists\",\n    \"TXXX:DISCOGS_ALBUM_ARTISTS\": \"albumartist\",\n    \"TXXX:DISCOGS_CATALOG\": \"catalognumber\",\n    \"TXXX:DISCOGS_COUNTRY\": \"releasecountry\",\n    \"TXXX:DISCOGS_DATE\": \"originaldate\",\n    \"TXXX:DISCOGS_LABEL\": \"label\",\n    \"TXXX:DISCOGS_LABEL_ID\": \"discogs_label_id\",\n    \"TXXX:DISCOGS_MASTER_RELEASE_ID\": \"discogs_master_release_id\",\n    \"TXXX:DISCOGS_RATING\": \"discogs_rating\",\n    \"TXXX:DISCOGS_RELEASED\": \"date\",\n    \"TXXX:DISCOGS_RELEASE_ID\": \"discogs_release_id\",\n    \"TXXX:DISCOGS_VOTES\": \"discogs_votes\",\n    \"TXXX:CATALOGID\": \"catalognumber\",\n    \"TXXX:STYLE\": \"genre\",\n    \"TXXX:REPLAYGAIN_TRACK_PEAK\": \"replaygain_track_peak\",\n    \"TXXX:REPLAYGAIN_TRACK_GAIN\": \"replaygain_track_gain\",\n    \"TXXX:REPLAYGAIN_ALBUM_PEAK\": \"replaygain_album_peak\",\n    \"TXXX:REPLAYGAIN_ALBUM_GAIN\": \"replaygain_album_gain\",\n    \"TXXX:MP3GAIN_MINMAX\": \"replaygain_track_minmax\",\n    \"TXXX:MP3GAIN_ALBUM_MINMAX\": \"replaygain_album_minmax\",\n    \"TXXX:MP3GAIN_UNDO\": \"replaygain_undo\",\n    MVNM: \"movement\",\n    MVIN: \"movementIndex\",\n    PCST: \"podcast\",\n    TCAT: \"category\",\n    TDES: \"description\",\n    TDRL: \"date\",\n    TGID: \"podcastId\",\n    TKWD: \"keywords\",\n    WFED: \"podcasturl\"\n};\nclass ID3v24TagMapper extends CaseInsensitiveTagMap_1.CaseInsensitiveTagMap {\n    static toRating(popm) {\n        return {\n            source: popm.email,\n            rating: popm.rating > 0 ? (popm.rating - 1) / 254 * GenericTagMapper_1.CommonTagMapper.maxRatingScore : undefined\n        };\n    }\n    constructor() {\n        super(['ID3v2.3', 'ID3v2.4'], id3v24TagMap);\n    }\n    /**\n     * Handle post mapping exceptions / correction\n     * @param {string} tag to post map\n     * @param warnings USed to register warnings\n     * @return Common value e.g. \"Buena Vista Social Club\"\n     */\n    postMap(tag, warnings) {\n        switch (tag.id) {\n            case 'UFID': // decode MusicBrainz Recording Id\n                if (tag.value.owner_identifier === 'http://musicbrainz.org') {\n                    tag.id += ':' + tag.value.owner_identifier;\n                    tag.value = Util_1.default.decodeString(tag.value.identifier, 'iso-8859-1');\n                }\n                break;\n            case 'PRIV':\n                switch (tag.value.owner_identifier) {\n                    // decode Windows Media Player\n                    case 'AverageLevel':\n                    case 'PeakValue':\n                        tag.id += ':' + tag.value.owner_identifier;\n                        tag.value = tag.value.data.length === 4 ? tag.value.data.readUInt32LE(0) : null;\n                        if (tag.value === null) {\n                            warnings.addWarning(`Failed to parse PRIV:PeakValue`);\n                        }\n                        break;\n                    default:\n                        warnings.addWarning(`Unknown PRIV owner-identifier: ${tag.value.owner_identifier}`);\n                }\n                break;\n            case 'COMM':\n                tag.value = tag.value ? tag.value.text : null;\n                break;\n            case 'POPM':\n                tag.value = ID3v24TagMapper.toRating(tag.value);\n                break;\n            default:\n                break;\n        }\n    }\n}\nexports.ID3v24TagMapper = ID3v24TagMapper;\n//# sourceMappingURL=ID3v24TagMapper.js.map"]},"metadata":{},"sourceType":"script"}