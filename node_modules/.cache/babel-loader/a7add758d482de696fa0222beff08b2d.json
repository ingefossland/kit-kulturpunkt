{"ast":null,"code":"import _ from 'lodash';\nimport moment from 'moment';\nexport function getEventsByHour(datetime, events) {\n  datetime = moment(datetime).format();\n  var date = {\n    date: moment(datetime).format('YYYY-MM-DD'),\n    datetime: datetime,\n    events: []\n  };\n\n  if (events && events.byHour && events.byHour[datetime]) {\n    date.events = events.byHour[datetime].map(function (id) {\n      return events.byId[id];\n    });\n  }\n\n  return date;\n}\nexport function getEventsByDate(datetime, events) {\n  datetime = moment(datetime).format('YYYY-MM-DD');\n  var date = {\n    date: moment(datetime).format('YYYY-MM-DD'),\n    datetime: datetime,\n    events: []\n  };\n\n  if (events && events.byDate && events.byDate[datetime]) {\n    date.events = events.byDate[datetime].map(function (id) {\n      return events.byId[id];\n    });\n  }\n\n  return date;\n}\nexport function getEvents(_ref) {\n  var items = _ref.items,\n      dtStart = _ref.dtStart,\n      dtEnd = _ref.dtEnd;\n  var dates = [];\n  var hours = [];\n  var byId = {};\n  var byDate = {};\n  var byHour = {};\n\n  var sortedEvents = _.sortBy(items, 'dtStart', 'dtEnd');\n\n  for (var i = 0; i < sortedEvents.length; i++) {\n    var item = sortedEvents[i];\n    var id = item['uniqueId'] || i;\n    var date = moment(item['dtStart']).format('YYYY-MM-DD');\n    var hour = moment(item['dtStart']);\n    hour = moment(hour).set('minute', 0);\n    hour = moment(hour).set('second', 0);\n    hour = moment(hour).format();\n    byId[id] = item;\n\n    if (byDate[date]) {\n      byDate[date].push(id);\n    } else {\n      byDate[date] = [id];\n      dates.push(date);\n    }\n\n    if (byHour[hour]) {\n      byHour[hour].push(id);\n    } else {\n      byHour[hour] = [id];\n      hours.push(hour);\n    }\n  }\n\n  var events = {\n    dates: dates,\n    hours: hours,\n    byId: byId,\n    byDate: byDate,\n    byHour: byHour\n  };\n  return events;\n}","map":{"version":3,"sources":["/Users/inge/Sites/kit-kulturpunkt/node_modules/@kit-ui/schema/node_modules/@kit-ui/admin/es/utils/getEvents.js"],"names":["_","moment","getEventsByHour","datetime","events","format","date","byHour","map","id","byId","getEventsByDate","byDate","getEvents","_ref","items","dtStart","dtEnd","dates","hours","sortedEvents","sortBy","i","length","item","hour","set","push"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport moment from 'moment';\nexport function getEventsByHour(datetime, events) {\n  datetime = moment(datetime).format();\n  var date = {\n    date: moment(datetime).format('YYYY-MM-DD'),\n    datetime: datetime,\n    events: []\n  };\n\n  if (events && events.byHour && events.byHour[datetime]) {\n    date.events = events.byHour[datetime].map(function (id) {\n      return events.byId[id];\n    });\n  }\n\n  return date;\n}\nexport function getEventsByDate(datetime, events) {\n  datetime = moment(datetime).format('YYYY-MM-DD');\n  var date = {\n    date: moment(datetime).format('YYYY-MM-DD'),\n    datetime: datetime,\n    events: []\n  };\n\n  if (events && events.byDate && events.byDate[datetime]) {\n    date.events = events.byDate[datetime].map(function (id) {\n      return events.byId[id];\n    });\n  }\n\n  return date;\n}\nexport function getEvents(_ref) {\n  var items = _ref.items,\n      dtStart = _ref.dtStart,\n      dtEnd = _ref.dtEnd;\n  var dates = [];\n  var hours = [];\n  var byId = {};\n  var byDate = {};\n  var byHour = {};\n\n  var sortedEvents = _.sortBy(items, 'dtStart', 'dtEnd');\n\n  for (var i = 0; i < sortedEvents.length; i++) {\n    var item = sortedEvents[i];\n    var id = item['uniqueId'] || i;\n    var date = moment(item['dtStart']).format('YYYY-MM-DD');\n    var hour = moment(item['dtStart']);\n    hour = moment(hour).set('minute', 0);\n    hour = moment(hour).set('second', 0);\n    hour = moment(hour).format();\n    byId[id] = item;\n\n    if (byDate[date]) {\n      byDate[date].push(id);\n    } else {\n      byDate[date] = [id];\n      dates.push(date);\n    }\n\n    if (byHour[hour]) {\n      byHour[hour].push(id);\n    } else {\n      byHour[hour] = [id];\n      hours.push(hour);\n    }\n  }\n\n  var events = {\n    dates: dates,\n    hours: hours,\n    byId: byId,\n    byDate: byDate,\n    byHour: byHour\n  };\n  return events;\n}"]},"metadata":{},"sourceType":"module"}