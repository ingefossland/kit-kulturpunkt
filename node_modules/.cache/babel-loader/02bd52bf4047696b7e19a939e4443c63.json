{"ast":null,"code":"function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { useRef, useState, useEffect } from 'react';\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport AudioControls from \"./AudioControls\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    player: {\n      backgroundColor: \"white\",\n      display: \"flex\",\n      width: \"100%\",\n      margin: \"auto\",\n      maxWidth: function maxWidth(props) {\n        return props.maxWidth || \"100%\";\n      },\n      maxHeight: function maxHeight(props) {\n        return props.maxHeight || \"100%\";\n      },\n      \"[data-position=absolute] &\": {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      }\n    },\n    controls: {\n      flexGrow: 1,\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"space-between\",\n      minHeight: function minHeight(props) {\n        return props.maxHeight || props.minHeight;\n      },\n      margin: theme.spacing(1),\n      \"[data-position=absolute] &\": {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      }\n    },\n    artwork: {\n      width: function width(props) {\n        return props.artworkSize;\n      },\n      position: \"relative\",\n      margin: theme.spacing(1),\n      \"[data-position=absolute] &\": {\n        position: \"absolute\",\n        top: \"50%\",\n        transform: \"translateY(-50%)\",\n        right: 0,\n        bottom: \"auto\",\n        left: 0,\n        maxWidth: theme.spacing(32),\n        width: \"50%\",\n        margin: \"auto\"\n      }\n    },\n    image: {\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      display: \"block\",\n      width: \"100%\",\n      height: \"100%\"\n    },\n    audio: {\n      display: \"none\"\n    }\n  };\n});\n\nvar AudioPlayer = function AudioPlayer(_ref) {\n  var className = _ref.className,\n      _ref$position = _ref.position,\n      position = _ref$position === void 0 ? \"relative\" : _ref$position,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? undefined : _ref$size,\n      _ref$format = _ref.format,\n      format = _ref$format === void 0 ? undefined : _ref$format,\n      _ref$minHeight = _ref.minHeight,\n      minHeight = _ref$minHeight === void 0 ? undefined : _ref$minHeight,\n      _ref$maxWidth = _ref.maxWidth,\n      maxWidth = _ref$maxWidth === void 0 ? undefined : _ref$maxWidth,\n      _ref$maxHeight = _ref.maxHeight,\n      maxHeight = _ref$maxHeight === void 0 ? undefined : _ref$maxHeight,\n      title = _ref.title,\n      _ref$untitled = _ref.untitled,\n      untitled = _ref$untitled === void 0 ? \"Untitled\" : _ref$untitled,\n      description = _ref.description,\n      _ref$imageUrl = _ref.imageUrl,\n      imageUrl = _ref$imageUrl === void 0 ? undefined : _ref$imageUrl,\n      _ref$audioSources = _ref.audioSources,\n      audioSources = _ref$audioSources === void 0 ? [] : _ref$audioSources,\n      _ref$resources = _ref.resources,\n      resources = _ref$resources === void 0 ? {} : _ref$resources,\n      props = _objectWithoutPropertiesLoose(_ref, [\"className\", \"position\", \"size\", \"format\", \"minHeight\", \"maxWidth\", \"maxHeight\", \"title\", \"untitled\", \"description\", \"imageUrl\", \"audioSources\", \"resources\"]);\n\n  if (format || maxHeight) {\n    position = \"absolute\";\n  }\n\n  if (size === \"large\") {\n    minHeight = 32 * 8;\n  } else if (size === \"medium\") {\n    minHeight = 24 * 8;\n  } else if (size === \"small\") {\n    minHeight = 12 * 8;\n  }\n\n  var artworkSize;\n\n  if (maxHeight) {\n    artworkSize = maxHeight - 96;\n  } else if (minHeight) {\n    artworkSize = minHeight;\n  }\n\n  var classes = useStyles({\n    position: position,\n    format: format,\n    maxWidth: maxWidth,\n    maxHeight: maxHeight,\n    minHeight: minHeight,\n    artworkSize: artworkSize\n  });\n  var playerRef = useRef(null);\n  var imageRef = useRef(null);\n\n  var _useState = useState(null),\n      imageWidth = _useState[0],\n      setImageWidth = _useState[1];\n\n  var _useState2 = useState(null),\n      imageHeight = _useState2[0],\n      setImageHeight = _useState2[1];\n\n  useEffect(function () {\n    if (!imageRef.current) {\n      return;\n    }\n\n    imageRef.current.addEventListener('load', function (event) {\n      console.log('imageEvent', event);\n      var imageWidth = event.target.naturalWidth;\n      var imageHeight = event.target.naturalHeight;\n      setImageWidth(imageWidth);\n      setImageHeight(imageHeight);\n    });\n  }, [imageRef.current]);\n\n  var _useState3 = useState(null),\n      buffered = _useState3[0],\n      setBuffered = _useState3[1];\n\n  var _useState4 = useState(0),\n      currentTime = _useState4[0],\n      setCurrentTime = _useState4[1];\n\n  var _useState5 = useState(0),\n      duration = _useState5[0],\n      setDuration = _useState5[1];\n\n  var _useState6 = useState(null),\n      seeking = _useState6[0],\n      setSeeking = _useState6[1];\n\n  var _useState7 = useState(true),\n      paused = _useState7[0],\n      setPaused = _useState7[1];\n\n  var _useState8 = useState(true),\n      volume = _useState8[0],\n      setVolume = _useState8[1];\n\n  var _useState9 = useState(true),\n      muted = _useState9[0],\n      setMuted = _useState9[1];\n\n  useEffect(function () {\n    if (!playerRef.current) {\n      return;\n    }\n\n    playerRef.current.addEventListener('loadedmetadata', function (event) {\n      var duration = event.target.duration;\n      console.log('event', event);\n      setBuffered(event.target.buffered);\n      setDuration(event.target.duration);\n      setCurrentTime(event.target.currentTime);\n      setPaused(event.target.paused);\n      setMuted(event.target.muted);\n      setVolume(event.target.volume);\n      props.onMetadata && props.onMetadata({\n        duration: duration\n      });\n    });\n    playerRef.current.addEventListener('timeupdate', function (event) {\n      setDuration(event.target.duration);\n      setCurrentTime(event.target.currentTime);\n    });\n    playerRef.current.addEventListener('seeking', function (event) {\n      setCurrentTime(event.target.currentTime);\n      setSeeking(true);\n    });\n    playerRef.current.addEventListener('seeked', function (event) {\n      setCurrentTime(event.target.currentTime);\n      setSeeking(false);\n    });\n    playerRef.current.addEventListener('volumechange', function (event) {\n      setVolume(event.target.volume);\n    });\n    playerRef.current.addEventListener('play', function (event) {\n      setPaused(event.target.paused);\n    });\n    playerRef.current.addEventListener('pause', function (event) {\n      setPaused(event.target.paused);\n    });\n  }, [playerRef.current]);\n\n  var handlePlayPause = function handlePlayPause() {\n    var paused = playerRef.current.paused;\n\n    if (paused) {\n      playerRef.current.play();\n    } else {\n      playerRef.current.pause();\n    }\n\n    setPaused(!paused);\n  };\n\n  var handleSeek = function handleSeek(value) {\n    playerRef.current.currentTime = value;\n  };\n\n  var handleVolume = function handleVolume(value) {\n    playerRef.current.volume = value;\n  };\n\n  var handleMute = function handleMute() {\n    var mute = playerRef.current.mute;\n    playerRef.current.mute = !mute;\n    setMuted(!mute);\n  };\n\n  if (!audioSources.length && resources) {\n    Object.values(resources).map(function (source) {\n      var mimeType = source.mimeType,\n          url = source.url;\n\n      if (mimeType.startsWith('audio') && url) {\n        audioSources.push({\n          src: url,\n          type: mimeType\n        });\n      }\n    });\n  }\n\n  if (!audioSources.length) {\n    return /*#__PURE__*/React.createElement(\"p\", null, \"No audio sources\");\n  }\n\n  if (!title && untitled) {\n    title = untitled;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.player,\n    \"data-layout\": \"audioPlayer\"\n  }, /*#__PURE__*/React.createElement(AudioControls, {\n    className: classes.controls,\n    title: title,\n    description: description,\n    paused: paused,\n    onPlayPause: handlePlayPause,\n    duration: duration,\n    currentTime: currentTime,\n    onSeek: handleSeek\n  }), imageUrl && /*#__PURE__*/React.createElement(Paper, {\n    component: \"figure\",\n    square: true,\n    elevation: 2,\n    className: classes.artwork\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: imageUrl,\n    ref: imageRef,\n    className: classes.image\n  })), /*#__PURE__*/React.createElement(\"audio\", {\n    ref: playerRef,\n    className: classes.audio\n  }, audioSources.map(function (_ref2) {\n    var src = _ref2.src,\n        type = _ref2.type;\n    return /*#__PURE__*/React.createElement(\"source\", {\n      src: src,\n      type: type\n    });\n  }), \"Your browser does not support the audio tag.\"));\n};\n\nAudioPlayer.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  className: PropTypes.string,\n  untitled: PropTypes.string,\n  title: PropTypes.string,\n  description: PropTypes.string,\n\n  /** Audio sources */\n  audioSources: PropTypes.array,\n\n  /** Resources object */\n  resources: PropTypes.node,\n\n  /** Artwork image */\n  imageUrl: PropTypes.string\n} : {};\nexport default AudioPlayer;","map":{"version":3,"sources":["/Users/inge/Sites/kit-kulturpunkt/node_modules/@kit-ui/schema/node_modules/@kit-ui/admin/es/Media/AudioPlayer.js"],"names":["_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","Object","keys","key","i","length","indexOf","React","useRef","useState","useEffect","PropTypes","makeStyles","Paper","AudioControls","useStyles","theme","player","backgroundColor","display","width","margin","maxWidth","props","maxHeight","position","top","right","bottom","left","controls","flexGrow","flexDirection","justifyContent","minHeight","spacing","artwork","artworkSize","transform","image","height","audio","AudioPlayer","_ref","className","_ref$position","_ref$size","size","undefined","_ref$format","format","_ref$minHeight","_ref$maxWidth","_ref$maxHeight","title","_ref$untitled","untitled","description","_ref$imageUrl","imageUrl","_ref$audioSources","audioSources","_ref$resources","resources","classes","playerRef","imageRef","_useState","imageWidth","setImageWidth","_useState2","imageHeight","setImageHeight","current","addEventListener","event","console","log","naturalWidth","naturalHeight","_useState3","buffered","setBuffered","_useState4","currentTime","setCurrentTime","_useState5","duration","setDuration","_useState6","seeking","setSeeking","_useState7","paused","setPaused","_useState8","volume","setVolume","_useState9","muted","setMuted","onMetadata","handlePlayPause","play","pause","handleSeek","value","handleVolume","handleMute","mute","values","map","mimeType","url","startsWith","push","src","type","createElement","onPlayPause","onSeek","component","square","elevation","ref","_ref2","propTypes","process","env","NODE_ENV","string","array","node"],"mappings":"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","sourcesContent":["function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { useRef, useState, useEffect } from 'react';\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport AudioControls from \"./AudioControls\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    player: {\n      backgroundColor: \"white\",\n      display: \"flex\",\n      width: \"100%\",\n      margin: \"auto\",\n      maxWidth: function maxWidth(props) {\n        return props.maxWidth || \"100%\";\n      },\n      maxHeight: function maxHeight(props) {\n        return props.maxHeight || \"100%\";\n      },\n      \"[data-position=absolute] &\": {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      }\n    },\n    controls: {\n      flexGrow: 1,\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"space-between\",\n      minHeight: function minHeight(props) {\n        return props.maxHeight || props.minHeight;\n      },\n      margin: theme.spacing(1),\n      \"[data-position=absolute] &\": {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      }\n    },\n    artwork: {\n      width: function width(props) {\n        return props.artworkSize;\n      },\n      position: \"relative\",\n      margin: theme.spacing(1),\n      \"[data-position=absolute] &\": {\n        position: \"absolute\",\n        top: \"50%\",\n        transform: \"translateY(-50%)\",\n        right: 0,\n        bottom: \"auto\",\n        left: 0,\n        maxWidth: theme.spacing(32),\n        width: \"50%\",\n        margin: \"auto\"\n      }\n    },\n    image: {\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      display: \"block\",\n      width: \"100%\",\n      height: \"100%\"\n    },\n    audio: {\n      display: \"none\"\n    }\n  };\n});\n\nvar AudioPlayer = function AudioPlayer(_ref) {\n  var className = _ref.className,\n      _ref$position = _ref.position,\n      position = _ref$position === void 0 ? \"relative\" : _ref$position,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? undefined : _ref$size,\n      _ref$format = _ref.format,\n      format = _ref$format === void 0 ? undefined : _ref$format,\n      _ref$minHeight = _ref.minHeight,\n      minHeight = _ref$minHeight === void 0 ? undefined : _ref$minHeight,\n      _ref$maxWidth = _ref.maxWidth,\n      maxWidth = _ref$maxWidth === void 0 ? undefined : _ref$maxWidth,\n      _ref$maxHeight = _ref.maxHeight,\n      maxHeight = _ref$maxHeight === void 0 ? undefined : _ref$maxHeight,\n      title = _ref.title,\n      _ref$untitled = _ref.untitled,\n      untitled = _ref$untitled === void 0 ? \"Untitled\" : _ref$untitled,\n      description = _ref.description,\n      _ref$imageUrl = _ref.imageUrl,\n      imageUrl = _ref$imageUrl === void 0 ? undefined : _ref$imageUrl,\n      _ref$audioSources = _ref.audioSources,\n      audioSources = _ref$audioSources === void 0 ? [] : _ref$audioSources,\n      _ref$resources = _ref.resources,\n      resources = _ref$resources === void 0 ? {} : _ref$resources,\n      props = _objectWithoutPropertiesLoose(_ref, [\"className\", \"position\", \"size\", \"format\", \"minHeight\", \"maxWidth\", \"maxHeight\", \"title\", \"untitled\", \"description\", \"imageUrl\", \"audioSources\", \"resources\"]);\n\n  if (format || maxHeight) {\n    position = \"absolute\";\n  }\n\n  if (size === \"large\") {\n    minHeight = 32 * 8;\n  } else if (size === \"medium\") {\n    minHeight = 24 * 8;\n  } else if (size === \"small\") {\n    minHeight = 12 * 8;\n  }\n\n  var artworkSize;\n\n  if (maxHeight) {\n    artworkSize = maxHeight - 96;\n  } else if (minHeight) {\n    artworkSize = minHeight;\n  }\n\n  var classes = useStyles({\n    position: position,\n    format: format,\n    maxWidth: maxWidth,\n    maxHeight: maxHeight,\n    minHeight: minHeight,\n    artworkSize: artworkSize\n  });\n  var playerRef = useRef(null);\n  var imageRef = useRef(null);\n\n  var _useState = useState(null),\n      imageWidth = _useState[0],\n      setImageWidth = _useState[1];\n\n  var _useState2 = useState(null),\n      imageHeight = _useState2[0],\n      setImageHeight = _useState2[1];\n\n  useEffect(function () {\n    if (!imageRef.current) {\n      return;\n    }\n\n    imageRef.current.addEventListener('load', function (event) {\n      console.log('imageEvent', event);\n      var imageWidth = event.target.naturalWidth;\n      var imageHeight = event.target.naturalHeight;\n      setImageWidth(imageWidth);\n      setImageHeight(imageHeight);\n    });\n  }, [imageRef.current]);\n\n  var _useState3 = useState(null),\n      buffered = _useState3[0],\n      setBuffered = _useState3[1];\n\n  var _useState4 = useState(0),\n      currentTime = _useState4[0],\n      setCurrentTime = _useState4[1];\n\n  var _useState5 = useState(0),\n      duration = _useState5[0],\n      setDuration = _useState5[1];\n\n  var _useState6 = useState(null),\n      seeking = _useState6[0],\n      setSeeking = _useState6[1];\n\n  var _useState7 = useState(true),\n      paused = _useState7[0],\n      setPaused = _useState7[1];\n\n  var _useState8 = useState(true),\n      volume = _useState8[0],\n      setVolume = _useState8[1];\n\n  var _useState9 = useState(true),\n      muted = _useState9[0],\n      setMuted = _useState9[1];\n\n  useEffect(function () {\n    if (!playerRef.current) {\n      return;\n    }\n\n    playerRef.current.addEventListener('loadedmetadata', function (event) {\n      var duration = event.target.duration;\n      console.log('event', event);\n      setBuffered(event.target.buffered);\n      setDuration(event.target.duration);\n      setCurrentTime(event.target.currentTime);\n      setPaused(event.target.paused);\n      setMuted(event.target.muted);\n      setVolume(event.target.volume);\n      props.onMetadata && props.onMetadata({\n        duration: duration\n      });\n    });\n    playerRef.current.addEventListener('timeupdate', function (event) {\n      setDuration(event.target.duration);\n      setCurrentTime(event.target.currentTime);\n    });\n    playerRef.current.addEventListener('seeking', function (event) {\n      setCurrentTime(event.target.currentTime);\n      setSeeking(true);\n    });\n    playerRef.current.addEventListener('seeked', function (event) {\n      setCurrentTime(event.target.currentTime);\n      setSeeking(false);\n    });\n    playerRef.current.addEventListener('volumechange', function (event) {\n      setVolume(event.target.volume);\n    });\n    playerRef.current.addEventListener('play', function (event) {\n      setPaused(event.target.paused);\n    });\n    playerRef.current.addEventListener('pause', function (event) {\n      setPaused(event.target.paused);\n    });\n  }, [playerRef.current]);\n\n  var handlePlayPause = function handlePlayPause() {\n    var paused = playerRef.current.paused;\n\n    if (paused) {\n      playerRef.current.play();\n    } else {\n      playerRef.current.pause();\n    }\n\n    setPaused(!paused);\n  };\n\n  var handleSeek = function handleSeek(value) {\n    playerRef.current.currentTime = value;\n  };\n\n  var handleVolume = function handleVolume(value) {\n    playerRef.current.volume = value;\n  };\n\n  var handleMute = function handleMute() {\n    var mute = playerRef.current.mute;\n    playerRef.current.mute = !mute;\n    setMuted(!mute);\n  };\n\n  if (!audioSources.length && resources) {\n    Object.values(resources).map(function (source) {\n      var mimeType = source.mimeType,\n          url = source.url;\n\n      if (mimeType.startsWith('audio') && url) {\n        audioSources.push({\n          src: url,\n          type: mimeType\n        });\n      }\n    });\n  }\n\n  if (!audioSources.length) {\n    return /*#__PURE__*/React.createElement(\"p\", null, \"No audio sources\");\n  }\n\n  if (!title && untitled) {\n    title = untitled;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.player,\n    \"data-layout\": \"audioPlayer\"\n  }, /*#__PURE__*/React.createElement(AudioControls, {\n    className: classes.controls,\n    title: title,\n    description: description,\n    paused: paused,\n    onPlayPause: handlePlayPause,\n    duration: duration,\n    currentTime: currentTime,\n    onSeek: handleSeek\n  }), imageUrl && /*#__PURE__*/React.createElement(Paper, {\n    component: \"figure\",\n    square: true,\n    elevation: 2,\n    className: classes.artwork\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: imageUrl,\n    ref: imageRef,\n    className: classes.image\n  })), /*#__PURE__*/React.createElement(\"audio\", {\n    ref: playerRef,\n    className: classes.audio\n  }, audioSources.map(function (_ref2) {\n    var src = _ref2.src,\n        type = _ref2.type;\n    return /*#__PURE__*/React.createElement(\"source\", {\n      src: src,\n      type: type\n    });\n  }), \"Your browser does not support the audio tag.\"));\n};\n\nAudioPlayer.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  className: PropTypes.string,\n  untitled: PropTypes.string,\n  title: PropTypes.string,\n  description: PropTypes.string,\n\n  /** Audio sources */\n  audioSources: PropTypes.array,\n\n  /** Resources object */\n  resources: PropTypes.node,\n\n  /** Artwork image */\n  imageUrl: PropTypes.string\n} : {};\nexport default AudioPlayer;"]},"metadata":{},"sourceType":"module"}