{"ast":null,"code":"import moment from \"moment\";\nimport _ from \"lodash\";\nexport const getCheckoutSlots = ({\n  slots = {},\n  location,\n  statusById = {},\n  statusByDate = {},\n  calendar = {},\n  query = {}\n}) => {\n  const {\n    event,\n    date\n  } = query;\n  slots.dates = calendar && calendar.dates && calendar.dates.map(d => {\n    const status = statusByDate && statusByDate[d];\n    return {\n      date: d,\n      selected: date === d,\n      ...status\n    };\n  });\n  slots.dates = _.orderBy(slots.dates, 'date', 'asc');\n  let byId = {};\n  slots.items = date && calendar && calendar.byDate[date].map((item, index) => {\n    const parentId = item.id;\n    const parent = calendar && calendar.byId && calendar.byId[parentId];\n    const hour = item.start && moment(item.start).format(\"HHmm\") || index;\n    const id = moment(date).format(\"YYYYMMDD\") + \"-\" + hour;\n    const status = statusById && statusById[id] || statusByDate && statusByDate[date];\n    const selected = id === event;\n    item = { ...parent,\n      ...item,\n      ...status,\n      location: item.location || location,\n      selected: selected,\n      id: id,\n      date: date,\n      hour: hour\n    };\n    byId[id] = item;\n    return item;\n  });\n  slots.items = _.orderBy(slots.items, 'start', 'asc');\n  return { ...slots,\n    byId: byId\n  };\n};","map":{"version":3,"sources":["/Users/inge/Sites/kit-kulturpunkt/src/utils/getCheckoutSlots.js"],"names":["moment","_","getCheckoutSlots","slots","location","statusById","statusByDate","calendar","query","event","date","dates","map","d","status","selected","orderBy","byId","items","byDate","item","index","parentId","id","parent","hour","start","format"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,QAAnB;AACA,OAAOC,CAAP,MAAc,QAAd;AAEA,OAAO,MAAMC,gBAAgB,GAAG,CAAC;AAACC,EAAAA,KAAK,GAAG,EAAT;AAAaC,EAAAA,QAAb;AAAuBC,EAAAA,UAAU,GAAG,EAApC;AAAwCC,EAAAA,YAAY,GAAG,EAAvD;AAA2DC,EAAAA,QAAQ,GAAG,EAAtE;AAA0EC,EAAAA,KAAK,GAAG;AAAlF,CAAD,KAA2F;AAEvH,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAkBF,KAAxB;AAEAL,EAAAA,KAAK,CAACQ,KAAN,GAAcJ,QAAQ,IAAIA,QAAQ,CAACI,KAArB,IAA8BJ,QAAQ,CAACI,KAAT,CAAeC,GAAf,CAAmBC,CAAC,IAAI;AAEhE,UAAMC,MAAM,GAAGR,YAAY,IAAIA,YAAY,CAACO,CAAD,CAA3C;AAEA,WAAO;AACHH,MAAAA,IAAI,EAAEG,CADH;AAEHE,MAAAA,QAAQ,EAAEL,IAAI,KAAKG,CAFhB;AAGH,SAAGC;AAHA,KAAP;AAMH,GAV2C,CAA5C;AAYAX,EAAAA,KAAK,CAACQ,KAAN,GAAcV,CAAC,CAACe,OAAF,CAAUb,KAAK,CAACQ,KAAhB,EAAuB,MAAvB,EAA+B,KAA/B,CAAd;AAEA,MAAIM,IAAI,GAAG,EAAX;AAEAd,EAAAA,KAAK,CAACe,KAAN,GAAcR,IAAI,IAAIH,QAAR,IAAoBA,QAAQ,CAACY,MAAT,CAAgBT,IAAhB,EAAsBE,GAAtB,CAA0B,CAACQ,IAAD,EAAOC,KAAP,KAAiB;AAEzE,UAAMC,QAAQ,GAAGF,IAAI,CAACG,EAAtB;AACA,UAAMC,MAAM,GAAGjB,QAAQ,IAAIA,QAAQ,CAACU,IAArB,IAA6BV,QAAQ,CAACU,IAAT,CAAcK,QAAd,CAA5C;AAEA,UAAMG,IAAI,GAAGL,IAAI,CAACM,KAAL,IAAc1B,MAAM,CAACoB,IAAI,CAACM,KAAN,CAAN,CAAmBC,MAAnB,CAA0B,MAA1B,CAAd,IAAmDN,KAAhE;AACA,UAAME,EAAE,GAAGvB,MAAM,CAACU,IAAD,CAAN,CAAaiB,MAAb,CAAoB,UAApB,IAAkC,GAAlC,GAAwCF,IAAnD;AAEA,UAAMX,MAAM,GAAGT,UAAU,IAAIA,UAAU,CAACkB,EAAD,CAAxB,IAAgCjB,YAAY,IAAIA,YAAY,CAACI,IAAD,CAA3E;AACA,UAAMK,QAAQ,GAAGQ,EAAE,KAAKd,KAAxB;AAGAW,IAAAA,IAAI,GAAG,EACH,GAAGI,MADA;AAEH,SAAGJ,IAFA;AAGH,SAAGN,MAHA;AAIHV,MAAAA,QAAQ,EAAEgB,IAAI,CAAChB,QAAL,IAAiBA,QAJxB;AAKHW,MAAAA,QAAQ,EAAEA,QALP;AAMHQ,MAAAA,EAAE,EAAEA,EAND;AAOHb,MAAAA,IAAI,EAAEA,IAPH;AAQHe,MAAAA,IAAI,EAAEA;AARH,KAAP;AAWAR,IAAAA,IAAI,CAACM,EAAD,CAAJ,GAAWH,IAAX;AAEA,WAAOA,IAAP;AAEH,GA3BiC,CAAlC;AA6BAjB,EAAAA,KAAK,CAACe,KAAN,GAAcjB,CAAC,CAACe,OAAF,CAAUb,KAAK,CAACe,KAAhB,EAAuB,OAAvB,EAAgC,KAAhC,CAAd;AAEA,SAAO,EACH,GAAGf,KADA;AAEHc,IAAAA,IAAI,EAAEA;AAFH,GAAP;AAKH,CAxDM","sourcesContent":["import moment from \"moment\"\nimport _ from \"lodash\"\n\nexport const getCheckoutSlots = ({slots = {}, location, statusById = {}, statusByDate = {}, calendar = {}, query = {}}) => {\n\n    const { event, date } = query\n\n    slots.dates = calendar && calendar.dates && calendar.dates.map(d => {\n\n        const status = statusByDate && statusByDate[d]\n\n        return {\n            date: d,\n            selected: date === d,\n            ...status\n        }\n\n    })\n\n    slots.dates = _.orderBy(slots.dates, 'date', 'asc');\n\n    let byId = {}\n\n    slots.items = date && calendar && calendar.byDate[date].map((item, index) => {\n\n        const parentId = item.id;\n        const parent = calendar && calendar.byId && calendar.byId[parentId]\n\n        const hour = item.start && moment(item.start).format(\"HHmm\") || index;\n        const id = moment(date).format(\"YYYYMMDD\") + \"-\" + hour;\n\n        const status = statusById && statusById[id] || statusByDate && statusByDate[date]\n        const selected = id === event\n\n\n        item = {\n            ...parent,\n            ...item,\n            ...status,\n            location: item.location || location,\n            selected: selected,\n            id: id,\n            date: date,\n            hour: hour\n        }\n\n        byId[id] = item\n\n        return item\n\n    })\n\n    slots.items = _.orderBy(slots.items, 'start', 'asc');\n\n    return {\n        ...slots,\n        byId: byId\n    }\n    \n}"]},"metadata":{},"sourceType":"module"}