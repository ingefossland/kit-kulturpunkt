{"ast":null,"code":"import moment from \"moment\";\nexport const getRRuleFromFormData = (formData = {}) => {\n  if (!formData) {\n    return;\n  }\n\n  const {\n    FREQ,\n    INTERVAL,\n    BYMONTH,\n    BYMONTHDAY,\n    BYDAY,\n    BYSETPOS,\n    ENDS,\n    COUNT,\n    UNTIL\n  } = formData;\n\n  if (!FREQ || FREQ === \"undefined\") {\n    return undefined;\n  }\n\n  let rrule = [];\n  rrule.push(\"FREQ=\" + FREQ);\n\n  if (INTERVAL) {\n    rrule.push(\"INTERVAL=\" + INTERVAL);\n  } // YEARLY\n\n\n  if (FREQ === \"YEARLY\") {\n    if (BYMONTH && BYMONTH.length) {\n      rrule.push(\"BYMONTH=\" + BYMONTH.join(\",\"));\n    }\n  }\n\n  if (FREQ === \"YEARLY\" || FREQ === \"MONTHLY\") {\n    if (BYSETPOS && BYSETPOS.length) {\n      rrule.push(\"BYSETPOS=\" + BYSETPOS.join(\",\"));\n      rrule.push(\"BYDAY=\" + BYDAY.join(\",\"));\n    } else if (BYMONTHDAY && BYMONTHDAY.length) {\n      rrule.push(\"BYMONTHDAY=\" + BYMONTHDAY.join(\",\"));\n    }\n  }\n\n  if (FREQ === \"WEEKLY\" || FREQ === \"HOURLY\" || FREQ === \"MINUTELY\") {\n    if (BYDAY && BYDAY.length) {\n      rrule.push(\"BYDAY=\" + BYDAY.join(\",\"));\n    }\n  } // ends\n\n\n  if (ENDS) {\n    if (UNTIL) {\n      rrule.push(\"UNTIL=\" + moment(UNTIL).format('YYYYMMDD'));\n    }\n\n    if (COUNT) {\n      rrule.push(\"COUNT=\" + COUNT);\n    }\n  }\n\n  return rrule.join(\";\");\n};","map":{"version":3,"sources":["/Users/inge/Sites/kit-kulturpunkt/src/components/EventField/utils/getRRuleFromFormData.js"],"names":["moment","getRRuleFromFormData","formData","FREQ","INTERVAL","BYMONTH","BYMONTHDAY","BYDAY","BYSETPOS","ENDS","COUNT","UNTIL","undefined","rrule","push","length","join","format"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,QAAnB;AAEA,OAAO,MAAMC,oBAAoB,GAAG,CAACC,QAAQ,GAAG,EAAZ,KAAmB;AAEnD,MAAI,CAACA,QAAL,EAAe;AACX;AACH;;AAED,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,QAAR;AAAkBC,IAAAA,OAAlB;AAA2BC,IAAAA,UAA3B;AAAuCC,IAAAA,KAAvC;AAA8CC,IAAAA,QAA9C;AAAwDC,IAAAA,IAAxD;AAA8DC,IAAAA,KAA9D;AAAqEC,IAAAA;AAArE,MAA+ET,QAArF;;AAEA,MAAI,CAACC,IAAD,IAASA,IAAI,KAAK,WAAtB,EAAmC;AAC/B,WAAOS,SAAP;AACH;;AAGD,MAAIC,KAAK,GAAG,EAAZ;AAEAA,EAAAA,KAAK,CAACC,IAAN,CAAW,UAAQX,IAAnB;;AAEA,MAAIC,QAAJ,EAAc;AACVS,IAAAA,KAAK,CAACC,IAAN,CAAW,cAAYV,QAAvB;AACH,GAnBkD,CAqBnD;;;AAEA,MAAID,IAAI,KAAK,QAAb,EAAuB;AAEnB,QAAIE,OAAO,IAAIA,OAAO,CAACU,MAAvB,EAA+B;AAC3BF,MAAAA,KAAK,CAACC,IAAN,CAAW,aAAWT,OAAO,CAACW,IAAR,CAAa,GAAb,CAAtB;AACH;AAEJ;;AAED,MAAIb,IAAI,KAAK,QAAT,IAAqBA,IAAI,KAAK,SAAlC,EAA6C;AAEzC,QAAIK,QAAQ,IAAIA,QAAQ,CAACO,MAAzB,EAAiC;AAC7BF,MAAAA,KAAK,CAACC,IAAN,CAAW,cAAYN,QAAQ,CAACQ,IAAT,CAAc,GAAd,CAAvB;AACAH,MAAAA,KAAK,CAACC,IAAN,CAAW,WAASP,KAAK,CAACS,IAAN,CAAW,GAAX,CAApB;AACH,KAHD,MAGO,IAAIV,UAAU,IAAIA,UAAU,CAACS,MAA7B,EAAqC;AACxCF,MAAAA,KAAK,CAACC,IAAN,CAAW,gBAAcR,UAAU,CAACU,IAAX,CAAgB,GAAhB,CAAzB;AACH;AAEJ;;AAGD,MAAIb,IAAI,KAAK,QAAT,IAAqBA,IAAI,KAAK,QAA9B,IAA0CA,IAAI,KAAK,UAAvD,EAAmE;AAE/D,QAAII,KAAK,IAAIA,KAAK,CAACQ,MAAnB,EAA2B;AACvBF,MAAAA,KAAK,CAACC,IAAN,CAAW,WAASP,KAAK,CAACS,IAAN,CAAW,GAAX,CAApB;AACH;AAEJ,GAjDkD,CAmDnD;;;AAEA,MAAIP,IAAJ,EAAU;AAEN,QAAIE,KAAJ,EAAW;AACPE,MAAAA,KAAK,CAACC,IAAN,CAAW,WAASd,MAAM,CAACW,KAAD,CAAN,CAAcM,MAAd,CAAqB,UAArB,CAApB;AACH;;AAED,QAAIP,KAAJ,EAAW;AACPG,MAAAA,KAAK,CAACC,IAAN,CAAW,WAASJ,KAApB;AACH;AAEJ;;AAGD,SAAOG,KAAK,CAACG,IAAN,CAAW,GAAX,CAAP;AAEH,CApEM","sourcesContent":["import moment from \"moment\"\n\nexport const getRRuleFromFormData = (formData = {}) => {\n\n    if (!formData) {\n        return\n    }\n\n    const { FREQ, INTERVAL, BYMONTH, BYMONTHDAY, BYDAY, BYSETPOS, ENDS, COUNT, UNTIL } = formData\n\n    if (!FREQ || FREQ === \"undefined\") {\n        return undefined\n    }\n\n\n    let rrule = []\n\n    rrule.push(\"FREQ=\"+FREQ)\n\n    if (INTERVAL) {\n        rrule.push(\"INTERVAL=\"+INTERVAL)\n    }\n\n    // YEARLY\n\n    if (FREQ === \"YEARLY\") {\n\n        if (BYMONTH && BYMONTH.length) {\n            rrule.push(\"BYMONTH=\"+BYMONTH.join(\",\"))\n        }\n\n    }\n\n    if (FREQ === \"YEARLY\" || FREQ === \"MONTHLY\") {\n\n        if (BYSETPOS && BYSETPOS.length) {\n            rrule.push(\"BYSETPOS=\"+BYSETPOS.join(\",\"))\n            rrule.push(\"BYDAY=\"+BYDAY.join(\",\"))\n        } else if (BYMONTHDAY && BYMONTHDAY.length) {\n            rrule.push(\"BYMONTHDAY=\"+BYMONTHDAY.join(\",\"))\n        }\n\n    }\n        \n\n    if (FREQ === \"WEEKLY\" || FREQ === \"HOURLY\" || FREQ === \"MINUTELY\") {\n\n        if (BYDAY && BYDAY.length) {\n            rrule.push(\"BYDAY=\"+BYDAY.join(\",\"))\n        }\n    \n    }\n\n    // ends\n\n    if (ENDS) {\n\n        if (UNTIL) {\n            rrule.push(\"UNTIL=\"+moment(UNTIL).format('YYYYMMDD'))\n        }\n    \n        if (COUNT) {\n            rrule.push(\"COUNT=\"+COUNT)\n        }\n    \n    }\n\n    \n    return rrule.join(\";\")\n\n}"]},"metadata":{},"sourceType":"module"}