{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport _getIterator from \"@babel/runtime-corejs2/core-js/get-iterator\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport * as types from \"../../types\";\nimport { getUiOptions, getWidget, guessType, retrieveSchema, getDefaultFormState, getMatchingOption as _getMatchingOption, deepEquals } from \"../../utils\";\n\nvar AnyOfField = /*#__PURE__*/function (_Component) {\n  _inherits(AnyOfField, _Component);\n\n  function AnyOfField(props) {\n    var _this;\n\n    _classCallCheck(this, AnyOfField);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AnyOfField).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onOptionChange\", function (option) {\n      var selectedOption = _parseInt(option, 10);\n\n      var _this$props = _this.props,\n          formData = _this$props.formData,\n          onChange = _this$props.onChange,\n          options = _this$props.options,\n          registry = _this$props.registry;\n      var rootSchema = registry.rootSchema;\n      var newOption = retrieveSchema(options[selectedOption], rootSchema, formData); // If the new option is of type object and the current data is an object,\n      // discard properties added using the old option.\n\n      var newFormData = undefined;\n\n      if (guessType(formData) === \"object\" && (newOption.type === \"object\" || newOption.properties)) {\n        newFormData = _extends({}, formData);\n        var optionsToDiscard = options.slice();\n        optionsToDiscard.splice(selectedOption, 1); // Discard any data added using other options\n\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = _getIterator(optionsToDiscard), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var _option = _step.value;\n\n            if (_option.properties) {\n              for (var key in _option.properties) {\n                if (newFormData.hasOwnProperty(key)) {\n                  delete newFormData[key];\n                }\n              }\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n              _iterator[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      } // Call getDefaultFormState to make sure defaults are populated on change.\n\n\n      onChange(getDefaultFormState(options[selectedOption], newFormData, rootSchema));\n\n      _this.setState({\n        selectedOption: _parseInt(option, 10)\n      });\n    });\n\n    var _this$props2 = _this.props,\n        _formData = _this$props2.formData,\n        _options = _this$props2.options;\n    _this.state = {\n      selectedOption: _this.getMatchingOption(_formData, _options)\n    };\n    return _this;\n  }\n\n  _createClass(AnyOfField, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (!deepEquals(this.props.formData, prevProps.formData) && this.props.idSchema.$id === prevProps.idSchema.$id) {\n        var matchingOption = this.getMatchingOption(this.props.formData, this.props.options);\n\n        if (!prevState || matchingOption === this.state.selectedOption) {\n          return;\n        }\n\n        this.setState({\n          selectedOption: matchingOption\n        });\n      }\n    }\n  }, {\n    key: \"getMatchingOption\",\n    value: function getMatchingOption(formData, options) {\n      var rootSchema = this.props.registry.rootSchema;\n\n      var option = _getMatchingOption(formData, options, rootSchema);\n\n      if (option !== 0) {\n        return option;\n      } // If the form data matches none of the options, use the currently selected\n      // option, assuming it's available; otherwise use the first option\n\n\n      return this && this.state ? this.state.selectedOption : 0;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          baseType = _this$props3.baseType,\n          disabled = _this$props3.disabled,\n          errorSchema = _this$props3.errorSchema,\n          formData = _this$props3.formData,\n          idPrefix = _this$props3.idPrefix,\n          idSchema = _this$props3.idSchema,\n          onBlur = _this$props3.onBlur,\n          onChange = _this$props3.onChange,\n          onFocus = _this$props3.onFocus,\n          options = _this$props3.options,\n          registry = _this$props3.registry,\n          uiSchema = _this$props3.uiSchema,\n          schema = _this$props3.schema;\n      var _SchemaField = registry.fields.SchemaField;\n      var widgets = registry.widgets;\n      var selectedOption = this.state.selectedOption;\n\n      var _getUiOptions = getUiOptions(uiSchema),\n          _getUiOptions$widget = _getUiOptions.widget,\n          widget = _getUiOptions$widget === void 0 ? \"select\" : _getUiOptions$widget,\n          uiOptions = _objectWithoutProperties(_getUiOptions, [\"widget\"]);\n\n      var Widget = getWidget({\n        type: \"number\"\n      }, widget, widgets);\n      var option = options[selectedOption] || null;\n      var optionSchema;\n\n      if (option) {\n        // If the subschema doesn't declare a type, infer the type from the\n        // parent schema\n        optionSchema = option.type ? option : _extends({}, option, {\n          type: baseType\n        });\n      }\n\n      var enumOptions = options.map(function (option, index) {\n        return {\n          label: option.title || \"Option \".concat(index + 1),\n          value: index\n        };\n      });\n      return React.createElement(\"div\", {\n        className: \"panel panel-default panel-body\"\n      }, React.createElement(\"div\", {\n        className: \"form-group\"\n      }, React.createElement(Widget, _extends({\n        id: \"\".concat(idSchema.$id).concat(schema.oneOf ? \"__oneof_select\" : \"__anyof_select\"),\n        schema: {\n          type: \"number\",\n          \"default\": 0\n        },\n        onChange: this.onOptionChange,\n        onBlur: onBlur,\n        onFocus: onFocus,\n        value: selectedOption,\n        options: {\n          enumOptions: enumOptions\n        }\n      }, uiOptions))), option !== null && React.createElement(_SchemaField, {\n        schema: optionSchema,\n        uiSchema: uiSchema,\n        errorSchema: errorSchema,\n        idSchema: idSchema,\n        idPrefix: idPrefix,\n        formData: formData,\n        onChange: onChange,\n        onBlur: onBlur,\n        onFocus: onFocus,\n        registry: registry,\n        disabled: disabled\n      }));\n    }\n  }]);\n\n  return AnyOfField;\n}(Component);\n\nAnyOfField.defaultProps = {\n  disabled: false,\n  errorSchema: {},\n  idSchema: {},\n  uiSchema: {}\n};\n\nif (process.env.NODE_ENV !== \"production\") {\n  AnyOfField.propTypes = {\n    options: PropTypes.arrayOf(PropTypes.object).isRequired,\n    baseType: PropTypes.string,\n    uiSchema: PropTypes.object,\n    idSchema: PropTypes.object,\n    formData: PropTypes.any,\n    errorSchema: PropTypes.object,\n    registry: types.registry.isRequired\n  };\n}\n\nexport default AnyOfField;","map":{"version":3,"sources":["/Users/inge/Sites/kit-kulturpunkt/node_modules/@rjsf/core/dist/es/components/fields/MultiSchemaField.js"],"names":["_objectWithoutProperties","_getIterator","_extends","_parseInt","_classCallCheck","_createClass","_possibleConstructorReturn","_getPrototypeOf","_assertThisInitialized","_inherits","_defineProperty","React","Component","PropTypes","types","getUiOptions","getWidget","guessType","retrieveSchema","getDefaultFormState","getMatchingOption","_getMatchingOption","deepEquals","AnyOfField","_Component","props","_this","call","option","selectedOption","_this$props","formData","onChange","options","registry","rootSchema","newOption","newFormData","undefined","type","properties","optionsToDiscard","slice","splice","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","next","done","_option","value","key","hasOwnProperty","err","setState","_this$props2","_formData","_options","state","componentDidUpdate","prevProps","prevState","idSchema","$id","matchingOption","render","_this$props3","baseType","disabled","errorSchema","idPrefix","onBlur","onFocus","uiSchema","schema","_SchemaField","fields","SchemaField","widgets","_getUiOptions","_getUiOptions$widget","widget","uiOptions","Widget","optionSchema","enumOptions","map","index","label","title","concat","createElement","className","id","oneOf","onOptionChange","defaultProps","process","env","NODE_ENV","propTypes","arrayOf","object","isRequired","string","any"],"mappings":"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","sourcesContent":["import _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport _getIterator from \"@babel/runtime-corejs2/core-js/get-iterator\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport * as types from \"../../types\";\nimport { getUiOptions, getWidget, guessType, retrieveSchema, getDefaultFormState, getMatchingOption as _getMatchingOption, deepEquals } from \"../../utils\";\n\nvar AnyOfField =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AnyOfField, _Component);\n\n  function AnyOfField(props) {\n    var _this;\n\n    _classCallCheck(this, AnyOfField);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AnyOfField).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onOptionChange\", function (option) {\n      var selectedOption = _parseInt(option, 10);\n\n      var _this$props = _this.props,\n          formData = _this$props.formData,\n          onChange = _this$props.onChange,\n          options = _this$props.options,\n          registry = _this$props.registry;\n      var rootSchema = registry.rootSchema;\n      var newOption = retrieveSchema(options[selectedOption], rootSchema, formData); // If the new option is of type object and the current data is an object,\n      // discard properties added using the old option.\n\n      var newFormData = undefined;\n\n      if (guessType(formData) === \"object\" && (newOption.type === \"object\" || newOption.properties)) {\n        newFormData = _extends({}, formData);\n        var optionsToDiscard = options.slice();\n        optionsToDiscard.splice(selectedOption, 1); // Discard any data added using other options\n\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = _getIterator(optionsToDiscard), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var _option = _step.value;\n\n            if (_option.properties) {\n              for (var key in _option.properties) {\n                if (newFormData.hasOwnProperty(key)) {\n                  delete newFormData[key];\n                }\n              }\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n              _iterator[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      } // Call getDefaultFormState to make sure defaults are populated on change.\n\n\n      onChange(getDefaultFormState(options[selectedOption], newFormData, rootSchema));\n\n      _this.setState({\n        selectedOption: _parseInt(option, 10)\n      });\n    });\n\n    var _this$props2 = _this.props,\n        _formData = _this$props2.formData,\n        _options = _this$props2.options;\n    _this.state = {\n      selectedOption: _this.getMatchingOption(_formData, _options)\n    };\n    return _this;\n  }\n\n  _createClass(AnyOfField, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (!deepEquals(this.props.formData, prevProps.formData) && this.props.idSchema.$id === prevProps.idSchema.$id) {\n        var matchingOption = this.getMatchingOption(this.props.formData, this.props.options);\n\n        if (!prevState || matchingOption === this.state.selectedOption) {\n          return;\n        }\n\n        this.setState({\n          selectedOption: matchingOption\n        });\n      }\n    }\n  }, {\n    key: \"getMatchingOption\",\n    value: function getMatchingOption(formData, options) {\n      var rootSchema = this.props.registry.rootSchema;\n\n      var option = _getMatchingOption(formData, options, rootSchema);\n\n      if (option !== 0) {\n        return option;\n      } // If the form data matches none of the options, use the currently selected\n      // option, assuming it's available; otherwise use the first option\n\n\n      return this && this.state ? this.state.selectedOption : 0;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          baseType = _this$props3.baseType,\n          disabled = _this$props3.disabled,\n          errorSchema = _this$props3.errorSchema,\n          formData = _this$props3.formData,\n          idPrefix = _this$props3.idPrefix,\n          idSchema = _this$props3.idSchema,\n          onBlur = _this$props3.onBlur,\n          onChange = _this$props3.onChange,\n          onFocus = _this$props3.onFocus,\n          options = _this$props3.options,\n          registry = _this$props3.registry,\n          uiSchema = _this$props3.uiSchema,\n          schema = _this$props3.schema;\n      var _SchemaField = registry.fields.SchemaField;\n      var widgets = registry.widgets;\n      var selectedOption = this.state.selectedOption;\n\n      var _getUiOptions = getUiOptions(uiSchema),\n          _getUiOptions$widget = _getUiOptions.widget,\n          widget = _getUiOptions$widget === void 0 ? \"select\" : _getUiOptions$widget,\n          uiOptions = _objectWithoutProperties(_getUiOptions, [\"widget\"]);\n\n      var Widget = getWidget({\n        type: \"number\"\n      }, widget, widgets);\n      var option = options[selectedOption] || null;\n      var optionSchema;\n\n      if (option) {\n        // If the subschema doesn't declare a type, infer the type from the\n        // parent schema\n        optionSchema = option.type ? option : _extends({}, option, {\n          type: baseType\n        });\n      }\n\n      var enumOptions = options.map(function (option, index) {\n        return {\n          label: option.title || \"Option \".concat(index + 1),\n          value: index\n        };\n      });\n      return React.createElement(\"div\", {\n        className: \"panel panel-default panel-body\"\n      }, React.createElement(\"div\", {\n        className: \"form-group\"\n      }, React.createElement(Widget, _extends({\n        id: \"\".concat(idSchema.$id).concat(schema.oneOf ? \"__oneof_select\" : \"__anyof_select\"),\n        schema: {\n          type: \"number\",\n          \"default\": 0\n        },\n        onChange: this.onOptionChange,\n        onBlur: onBlur,\n        onFocus: onFocus,\n        value: selectedOption,\n        options: {\n          enumOptions: enumOptions\n        }\n      }, uiOptions))), option !== null && React.createElement(_SchemaField, {\n        schema: optionSchema,\n        uiSchema: uiSchema,\n        errorSchema: errorSchema,\n        idSchema: idSchema,\n        idPrefix: idPrefix,\n        formData: formData,\n        onChange: onChange,\n        onBlur: onBlur,\n        onFocus: onFocus,\n        registry: registry,\n        disabled: disabled\n      }));\n    }\n  }]);\n\n  return AnyOfField;\n}(Component);\n\nAnyOfField.defaultProps = {\n  disabled: false,\n  errorSchema: {},\n  idSchema: {},\n  uiSchema: {}\n};\n\nif (process.env.NODE_ENV !== \"production\") {\n  AnyOfField.propTypes = {\n    options: PropTypes.arrayOf(PropTypes.object).isRequired,\n    baseType: PropTypes.string,\n    uiSchema: PropTypes.object,\n    idSchema: PropTypes.object,\n    formData: PropTypes.any,\n    errorSchema: PropTypes.object,\n    registry: types.registry.isRequired\n  };\n}\n\nexport default AnyOfField;"]},"metadata":{},"sourceType":"module"}