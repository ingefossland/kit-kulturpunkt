{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _utils = require(\"../utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar ReferenceField = function ReferenceField(props) {\n  var schema = props.schema,\n      _props$uiSchema = props.uiSchema,\n      uiSchema = _props$uiSchema === void 0 ? {} : _props$uiSchema,\n      _props$formData = props.formData,\n      formData = _props$formData === void 0 ? {} : _props$formData,\n      formContext = props.formContext;\n  var referenceId = formData.referenceId,\n      _formData$reference = formData.reference,\n      reference = _formData$reference === void 0 ? {} : _formData$reference;\n\n  var getUiSchema = function getUiSchema() {\n    var uiOptions = (0, _utils.getUiOptions)(uiSchema);\n    var fieldset = uiOptions.fieldset || [];\n\n    if (!uiOptions.fieldset && schema.properties) {\n      Object.keys(schema.properties).map(function (name) {\n        var type = schema.properties[name] && schema.properties[name].type || undefined;\n\n        if (type === \"object\") {\n          fieldset.push(name);\n        }\n\n        if (type === \"array\") {\n          fieldset.push(name);\n        }\n      });\n    }\n\n    var uiReference, uiContent;\n\n    if (fieldset && fieldset.includes('reference')) {\n      var uiSchemaReference = uiSchema && uiSchema.reference;\n      uiReference = _extends({\n        \"ui:title\": \"Reference\"\n      }, uiSchemaReference);\n    }\n\n    if (fieldset && fieldset.includes('content')) {\n      var uiSchemaContent = uiSchema && uiSchema.content;\n      uiContent = _extends({\n        \"ui:title\": \"Innhold\"\n      }, uiSchemaContent);\n    }\n\n    var layout = uiOptions.layout || \"module\";\n    return _extends({\n      \"ui:editable\": true,\n      \"ui:deletable\": referenceId && true,\n      \"ui:restorable\": referenceId && true,\n      \"ui:removable\": !referenceId && true,\n      \"ui:layout\": layout,\n      \"ui:fieldset\": fieldset,\n      \"ui:buttons\": (0, _utils.getReferenceButtons)(props),\n      \"ui:nav\": \"tabs\",\n      \"reference\": uiReference,\n      \"content\": uiContent,\n      \"ui:preview\": {\n        \"select\": {\n          \"_action\": \"_action\",\n          \"type\": \"type\",\n          \"title\": \"title\",\n          \"description\": \"description\",\n          \"imageUrl\": \"imageUrl\",\n          \"status\": \"status\",\n          \"referenceId\": \"referenceId\",\n          \"reference\": \"reference\"\n        },\n        prepare: function prepare(_ref) {\n          var _ref$formData = _ref.formData,\n              formData = _ref$formData === void 0 ? {} : _ref$formData;\n          var _action = formData._action,\n              reference = formData.reference,\n              referenceId = formData.referenceId;\n          var status = reference && reference.status;\n\n          if (_action === \"delete\") {\n            status = \"trash\";\n          }\n\n          return {\n            _action: _action,\n            type: reference && reference.documentType,\n            title: reference && reference.title,\n            description: reference && reference.description,\n            imageUrl: reference && reference.imageUrl,\n            status: status,\n            referenceId: referenceId,\n            reference: reference\n          };\n        }\n      }\n    }, uiSchema);\n  };\n\n  var _onChange = function _onChange(formData) {\n    var _action = formData._action,\n        referenceId = formData.referenceId,\n        _formData$reference2 = formData.reference,\n        reference = _formData$reference2 === void 0 ? {} : _formData$reference2; // if no referenceId, action = \"create\"\n\n    if (!referenceId) {\n      formData._action = \"create\";\n    } // if reference dont have a uniqueId, action = \"create\"\n\n\n    if (!reference) {\n      formData.reference = {};\n    }\n\n    if (!reference.uniqueId) {\n      formData.reference._action = \"create\";\n    }\n\n    props.onChange && props.onChange(formData);\n  };\n\n  var ObjectField = props.registry.fields.ObjectField;\n  var newUiSchema = getUiSchema();\n  return /*#__PURE__*/_react.default.createElement(ObjectField, _extends({}, props, {\n    uiSchema: newUiSchema,\n    onChange: _onChange\n  }));\n};\n\nvar _default = ReferenceField;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["/Users/inge/Sites/kit-kulturpunkt/node_modules/@kit-ui/schema/lib/Reference/ReferenceField.js"],"names":["exports","__esModule","default","_react","_interopRequireDefault","require","_utils","obj","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","ReferenceField","props","schema","_props$uiSchema","uiSchema","_props$formData","formData","formContext","referenceId","_formData$reference","reference","getUiSchema","uiOptions","getUiOptions","fieldset","properties","keys","map","name","type","undefined","push","uiReference","uiContent","includes","uiSchemaReference","uiSchemaContent","content","layout","getReferenceButtons","prepare","_ref","_ref$formData","_action","status","documentType","title","description","imageUrl","_onChange","_formData$reference2","uniqueId","onChange","ObjectField","registry","fields","newUiSchema","createElement","_default","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _utils = require(\"../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nvar ReferenceField = function ReferenceField(props) {\n  var schema = props.schema,\n      _props$uiSchema = props.uiSchema,\n      uiSchema = _props$uiSchema === void 0 ? {} : _props$uiSchema,\n      _props$formData = props.formData,\n      formData = _props$formData === void 0 ? {} : _props$formData,\n      formContext = props.formContext;\n  var referenceId = formData.referenceId,\n      _formData$reference = formData.reference,\n      reference = _formData$reference === void 0 ? {} : _formData$reference;\n\n  var getUiSchema = function getUiSchema() {\n    var uiOptions = (0, _utils.getUiOptions)(uiSchema);\n    var fieldset = uiOptions.fieldset || [];\n\n    if (!uiOptions.fieldset && schema.properties) {\n      Object.keys(schema.properties).map(function (name) {\n        var type = schema.properties[name] && schema.properties[name].type || undefined;\n\n        if (type === \"object\") {\n          fieldset.push(name);\n        }\n\n        if (type === \"array\") {\n          fieldset.push(name);\n        }\n      });\n    }\n\n    var uiReference, uiContent;\n\n    if (fieldset && fieldset.includes('reference')) {\n      var uiSchemaReference = uiSchema && uiSchema.reference;\n      uiReference = _extends({\n        \"ui:title\": \"Reference\"\n      }, uiSchemaReference);\n    }\n\n    if (fieldset && fieldset.includes('content')) {\n      var uiSchemaContent = uiSchema && uiSchema.content;\n      uiContent = _extends({\n        \"ui:title\": \"Innhold\"\n      }, uiSchemaContent);\n    }\n\n    var layout = uiOptions.layout || \"module\";\n    return _extends({\n      \"ui:editable\": true,\n      \"ui:deletable\": referenceId && true,\n      \"ui:restorable\": referenceId && true,\n      \"ui:removable\": !referenceId && true,\n      \"ui:layout\": layout,\n      \"ui:fieldset\": fieldset,\n      \"ui:buttons\": (0, _utils.getReferenceButtons)(props),\n      \"ui:nav\": \"tabs\",\n      \"reference\": uiReference,\n      \"content\": uiContent,\n      \"ui:preview\": {\n        \"select\": {\n          \"_action\": \"_action\",\n          \"type\": \"type\",\n          \"title\": \"title\",\n          \"description\": \"description\",\n          \"imageUrl\": \"imageUrl\",\n          \"status\": \"status\",\n          \"referenceId\": \"referenceId\",\n          \"reference\": \"reference\"\n        },\n        prepare: function prepare(_ref) {\n          var _ref$formData = _ref.formData,\n              formData = _ref$formData === void 0 ? {} : _ref$formData;\n          var _action = formData._action,\n              reference = formData.reference,\n              referenceId = formData.referenceId;\n          var status = reference && reference.status;\n\n          if (_action === \"delete\") {\n            status = \"trash\";\n          }\n\n          return {\n            _action: _action,\n            type: reference && reference.documentType,\n            title: reference && reference.title,\n            description: reference && reference.description,\n            imageUrl: reference && reference.imageUrl,\n            status: status,\n            referenceId: referenceId,\n            reference: reference\n          };\n        }\n      }\n    }, uiSchema);\n  };\n\n  var _onChange = function _onChange(formData) {\n    var _action = formData._action,\n        referenceId = formData.referenceId,\n        _formData$reference2 = formData.reference,\n        reference = _formData$reference2 === void 0 ? {} : _formData$reference2; // if no referenceId, action = \"create\"\n\n    if (!referenceId) {\n      formData._action = \"create\";\n    } // if reference dont have a uniqueId, action = \"create\"\n\n\n    if (!reference) {\n      formData.reference = {};\n    }\n\n    if (!reference.uniqueId) {\n      formData.reference._action = \"create\";\n    }\n\n    props.onChange && props.onChange(formData);\n  };\n\n  var ObjectField = props.registry.fields.ObjectField;\n  var newUiSchema = getUiSchema();\n  return /*#__PURE__*/_react.default.createElement(ObjectField, _extends({}, props, {\n    uiSchema: newUiSchema,\n    onChange: _onChange\n  }));\n};\n\nvar _default = ReferenceField;\nexports.default = _default;\nmodule.exports = exports.default;"]},"metadata":{},"sourceType":"script"}