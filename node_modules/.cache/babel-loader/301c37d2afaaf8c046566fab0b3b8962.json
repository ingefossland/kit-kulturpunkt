{"ast":null,"code":"import moment from \"moment\";\nimport _ from \"lodash\";\nimport getCartDiscounts from \"./getCartDiscounts\";\nexport const getCheckoutTicketsCategory = ({\n  items = [],\n  cart = {},\n  ...props\n}) => {\n  const parentId = props.id;\n  const cartItems = items.map((item, index) => {\n    const id = item.id || parentId + \"-\" + index;\n    const cartItem = cart && cart.items && cart.items[id];\n    return { ...item,\n      ...cartItem,\n      id: id\n    };\n  });\n  return {\n    items: cartItems,\n    ...props\n  };\n};\nexport const getCheckoutTickets = ({\n  tickets = {},\n  cart = {}\n}) => {\n  let categories = [];\n\n  if (tickets.categories) {\n    categories = tickets.categories.map((category, index) => {\n      const id = category.id || \"tc\" + index;\n      return getCheckoutTicketsCategory({ ...category,\n        cart: cart && cart.tickets,\n        id: id\n      });\n    });\n  } else {\n    categories = [getCheckoutTicketsCategory({ ...tickets,\n      cart: cart && cart.tickets,\n      id: \"tc\"\n    })];\n  }\n\n  let categoriesById = {};\n  categories.map(category => {\n    categoriesById[category.id] = category;\n  });\n  const discounts = cart && cart.tickets && getCartDiscounts({\n    cart: cart.tickets,\n    ...tickets\n  });\n  tickets = { ...tickets,\n    categories: categories,\n    categoriesById: categoriesById,\n    discounts: discounts\n  };\n  return tickets;\n};","map":{"version":3,"sources":["/Users/inge/Sites/kit-kulturpunkt/src/utils/getCheckoutTickets.js"],"names":["moment","_","getCartDiscounts","getCheckoutTicketsCategory","items","cart","props","parentId","id","cartItems","map","item","index","cartItem","getCheckoutTickets","tickets","categories","category","categoriesById","discounts"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,QAAnB;AACA,OAAOC,CAAP,MAAc,QAAd;AAEA,OAAOC,gBAAP,MAA6B,oBAA7B;AAEA,OAAO,MAAMC,0BAA0B,GAAG,CAAC;AAACC,EAAAA,KAAK,GAAG,EAAT;AAAaC,EAAAA,IAAI,GAAG,EAApB;AAAwB,KAAGC;AAA3B,CAAD,KAAuC;AAE7E,QAAMC,QAAQ,GAAGD,KAAK,CAACE,EAAvB;AAEA,QAAMC,SAAS,GAAGL,KAAK,CAACM,GAAN,CAAU,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAEzC,UAAMJ,EAAE,GAAGG,IAAI,CAACH,EAAL,IAAWD,QAAQ,GAAG,GAAX,GAAiBK,KAAvC;AACA,UAAMC,QAAQ,GAAGR,IAAI,IAAIA,IAAI,CAACD,KAAb,IAAsBC,IAAI,CAACD,KAAL,CAAWI,EAAX,CAAvC;AAEA,WAAO,EACH,GAAGG,IADA;AAEH,SAAGE,QAFA;AAGHL,MAAAA,EAAE,EAAEA;AAHD,KAAP;AAMH,GAXiB,CAAlB;AAaA,SAAO;AACHJ,IAAAA,KAAK,EAAEK,SADJ;AAEH,OAAGH;AAFA,GAAP;AAMH,CAvBM;AAyBP,OAAO,MAAMQ,kBAAkB,GAAG,CAAC;AAACC,EAAAA,OAAO,GAAG,EAAX;AAAeV,EAAAA,IAAI,GAAG;AAAtB,CAAD,KAA+B;AAE7D,MAAIW,UAAU,GAAG,EAAjB;;AAEA,MAAID,OAAO,CAACC,UAAZ,EAAwB;AACpBA,IAAAA,UAAU,GAAGD,OAAO,CAACC,UAAR,CAAmBN,GAAnB,CAAuB,CAACO,QAAD,EAAWL,KAAX,KAAqB;AACrD,YAAMJ,EAAE,GAAGS,QAAQ,CAACT,EAAT,IAAe,OAAKI,KAA/B;AAEA,aAAOT,0BAA0B,CAAC,EAC9B,GAAGc,QAD2B;AAE9BZ,QAAAA,IAAI,EAAEA,IAAI,IAAIA,IAAI,CAACU,OAFW;AAG9BP,QAAAA,EAAE,EAAEA;AAH0B,OAAD,CAAjC;AAKH,KARY,CAAb;AASH,GAVD,MAUO;AACHQ,IAAAA,UAAU,GAAG,CAACb,0BAA0B,CAAC,EACrC,GAAGY,OADkC;AAErCV,MAAAA,IAAI,EAAEA,IAAI,IAAIA,IAAI,CAACU,OAFkB;AAGrCP,MAAAA,EAAE,EAAE;AAHiC,KAAD,CAA3B,CAAb;AAKH;;AAED,MAAIU,cAAc,GAAG,EAArB;AAEAF,EAAAA,UAAU,CAACN,GAAX,CAAeO,QAAQ,IAAI;AACvBC,IAAAA,cAAc,CAACD,QAAQ,CAACT,EAAV,CAAd,GAA8BS,QAA9B;AACH,GAFD;AAIA,QAAME,SAAS,GAAGd,IAAI,IAAIA,IAAI,CAACU,OAAb,IAAwBb,gBAAgB,CAAC;AAACG,IAAAA,IAAI,EAAEA,IAAI,CAACU,OAAZ;AAAqB,OAAGA;AAAxB,GAAD,CAA1D;AAEAA,EAAAA,OAAO,GAAG,EACN,GAAGA,OADG;AAENC,IAAAA,UAAU,EAAEA,UAFN;AAGNE,IAAAA,cAAc,EAAEA,cAHV;AAINC,IAAAA,SAAS,EAAEA;AAJL,GAAV;AAOA,SAAOJ,OAAP;AAEH,CAvCM","sourcesContent":["import moment from \"moment\"\nimport _ from \"lodash\"\n\nimport getCartDiscounts from \"./getCartDiscounts\"\n\nexport const getCheckoutTicketsCategory = ({items = [], cart = {}, ...props}) => {\n\n    const parentId = props.id\n\n    const cartItems = items.map((item, index) => {\n\n        const id = item.id || parentId + \"-\" + index\n        const cartItem = cart && cart.items && cart.items[id]\n\n        return {\n            ...item,\n            ...cartItem,\n            id: id\n        }\n\n    })\n\n    return {\n        items: cartItems,\n        ...props\n    }\n\n\n}\n\nexport const getCheckoutTickets = ({tickets = {}, cart = {}}) => {\n\n    let categories = []\n\n    if (tickets.categories) {\n        categories = tickets.categories.map((category, index) => {\n            const id = category.id || \"tc\"+index\n\n            return getCheckoutTicketsCategory({\n                ...category,\n                cart: cart && cart.tickets,\n                id: id\n            })\n        })\n    } else {\n        categories = [getCheckoutTicketsCategory({\n            ...tickets,\n            cart: cart && cart.tickets,\n            id: \"tc\"\n        })]\n    }\n\n    let categoriesById = {}\n\n    categories.map(category => {\n        categoriesById[category.id] = category\n    })\n    \n    const discounts = cart && cart.tickets && getCartDiscounts({cart: cart.tickets, ...tickets})\n\n    tickets = {\n        ...tickets,\n        categories: categories,\n        categoriesById: categoriesById,\n        discounts: discounts\n    }\n    \n    return tickets\n    \n}"]},"metadata":{},"sourceType":"module"}