{"ast":null,"code":"import icons from \"./icons\";\nexport default {\n  \"select\": {\n    \"imageUrl\": \"imageUrl\",\n    \"title\": \"title\",\n    \"description\": \"description\",\n    \"metadata\": \"metadata\",\n    \"typeLabel\": \"typeLabel\"\n  },\n\n  prepare({\n    formData,\n    formContext\n  }) {\n    const {\n      documentType,\n      content\n    } = formData;\n    const defaultLocale = formContext && formContext.defaultLocale;\n    const currentLocale = formContext && formContext.currentLocale;\n    const locale = defaultLocale || currentLocale || formData.locale;\n    const localeId = \"locale:\" + locale;\n    let metadata = [];\n    const pageIcon = documentType && icons[documentType];\n    const backgroundImage = content && content.backgroundImage;\n    const imageUrl = backgroundImage && backgroundImage.media && backgroundImage.media.imageUrl;\n    const title = content && content.title && content.title[localeId] || formData.title;\n    const description = content && content.description && content.description[localeId];\n    return {\n      imageUrl: imageUrl || pageIcon,\n      title: title || \"Untitled\",\n      description: description,\n      metadata: metadata,\n      typeLabel: documentType\n    };\n  }\n\n};","map":{"version":3,"sources":["/Users/inge/Sites/kit-kulturpunkt/src/schemas/page/uiPreview.js"],"names":["icons","prepare","formData","formContext","documentType","content","defaultLocale","currentLocale","locale","localeId","metadata","pageIcon","backgroundImage","imageUrl","media","title","description","typeLabel"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,SAAlB;AAEA,eAAe;AACX,YAAU;AACN,gBAAa,UADP;AAEN,aAAU,OAFJ;AAGN,mBAAgB,aAHV;AAIN,gBAAa,UAJP;AAKN,iBAAa;AALP,GADC;;AAQXC,EAAAA,OAAO,CAAC;AAACC,IAAAA,QAAD;AAAWC,IAAAA;AAAX,GAAD,EAA0B;AAC7B,UAAM;AAAEC,MAAAA,YAAF;AAAgBC,MAAAA;AAAhB,QAA4BH,QAAlC;AACA,UAAMI,aAAa,GAAGH,WAAW,IAAIA,WAAW,CAACG,aAAjD;AACA,UAAMC,aAAa,GAAGJ,WAAW,IAAIA,WAAW,CAACI,aAAjD;AACA,UAAMC,MAAM,GAAGF,aAAa,IAAIC,aAAjB,IAAkCL,QAAQ,CAACM,MAA1D;AACA,UAAMC,QAAQ,GAAI,YAAYD,MAA9B;AAEA,QAAIE,QAAQ,GAAG,EAAf;AAEA,UAAMC,QAAQ,GAAGP,YAAY,IAAIJ,KAAK,CAACI,YAAD,CAAtC;AACA,UAAMQ,eAAe,GAAGP,OAAO,IAAIA,OAAO,CAACO,eAA3C;AAEA,UAAMC,QAAQ,GAAGD,eAAe,IAAIA,eAAe,CAACE,KAAnC,IAA4CF,eAAe,CAACE,KAAhB,CAAsBD,QAAnF;AAEA,UAAME,KAAK,GAAGV,OAAO,IAAIA,OAAO,CAACU,KAAnB,IAA4BV,OAAO,CAACU,KAAR,CAAcN,QAAd,CAA5B,IAAuDP,QAAQ,CAACa,KAA9E;AACA,UAAMC,WAAW,GAAGX,OAAO,IAAIA,OAAO,CAACW,WAAnB,IAAkCX,OAAO,CAACW,WAAR,CAAoBP,QAApB,CAAtD;AAEA,WAAO;AACHI,MAAAA,QAAQ,EAAEA,QAAQ,IAAIF,QADnB;AAEHI,MAAAA,KAAK,EAAEA,KAAK,IAAI,UAFb;AAGHC,MAAAA,WAAW,EAAEA,WAHV;AAIHN,MAAAA,QAAQ,EAAEA,QAJP;AAKHO,MAAAA,SAAS,EAAEb;AALR,KAAP;AAQH;;AAjCU,CAAf","sourcesContent":["import icons from \"./icons\"\n\nexport default {\n    \"select\": {\n        \"imageUrl\" : \"imageUrl\",\n        \"title\" : \"title\",\n        \"description\" : \"description\",\n        \"metadata\" : \"metadata\",\n        \"typeLabel\": \"typeLabel\"\n    },\n    prepare({formData, formContext}) {\n        const { documentType, content } = formData\n        const defaultLocale = formContext && formContext.defaultLocale\n        const currentLocale = formContext && formContext.currentLocale\n        const locale = defaultLocale || currentLocale || formData.locale\n        const localeId =  \"locale:\" + locale\n\n        let metadata = []\n\n        const pageIcon = documentType && icons[documentType]\n        const backgroundImage = content && content.backgroundImage\n\n        const imageUrl = backgroundImage && backgroundImage.media && backgroundImage.media.imageUrl\n\n        const title = content && content.title && content.title[localeId] || formData.title\n        const description = content && content.description && content.description[localeId]\n\n        return {\n            imageUrl: imageUrl || pageIcon,\n            title: title || \"Untitled\",\n            description: description,\n            metadata: metadata,\n            typeLabel: documentType\n        }\n    \n    }\n  \n}"]},"metadata":{},"sourceType":"module"}