{"ast":null,"code":"export default {\n  \"select\": {\n    \"imageUrl\": \"imageUrl\",\n    \"title\": \"title\",\n    \"description\": \"description\",\n    \"metadata\": \"metadata\",\n    \"typeLabel\": \"typeLabel\"\n  },\n\n  prepare({\n    formData,\n    formContext\n  }) {\n    let {\n      documentType,\n      title,\n      content,\n      description\n    } = formData;\n    const defaultLocale = formContext && formContext.defaultLocale;\n    const currentLocale = formContext && formContext.currentLocale;\n    const locale = defaultLocale || currentLocale || formData.locale;\n    const localeId = \"locale:\" + locale;\n    let metadata = [];\n    const headerImage = content && content.headerImage;\n    const imageUrl = headerImage && headerImage.media && headerImage.media.imageUrl;\n\n    if (content) {\n      title = content.title && content.title[localeId];\n      description = content.description && content.description[localeId];\n      const {\n        location,\n        sections,\n        isPartOf\n      } = content;\n\n      if (location && location.lat && location.lng) {\n        if (location.address) {\n          metadata.push(location.address);\n        } else {\n          metadata.push(\"Sted\");\n        }\n      }\n\n      if (sections && sections.length) {\n        metadata.push(sections.length + ' seksjoner');\n      }\n\n      if (isPartOf && isPartOf.length) {\n        metadata.push(isPartOf.length + ' tema');\n      }\n    }\n\n    return {\n      imageUrl: imageUrl,\n      untitled: \"Ny artikkel\",\n      title: title || \"Uten tittel\",\n      description: description,\n      metadata: metadata,\n      typeLabel: documentType\n    };\n  }\n\n};","map":{"version":3,"sources":["/Users/inge/Sites/kit-kulturpunkt/src/schemas/article/uiPreview.js"],"names":["prepare","formData","formContext","documentType","title","content","description","defaultLocale","currentLocale","locale","localeId","metadata","headerImage","imageUrl","media","location","sections","isPartOf","lat","lng","address","push","length","untitled","typeLabel"],"mappings":"AAAA,eAAe;AACb,YAAU;AACR,gBAAa,UADL;AAER,aAAU,OAFF;AAGR,mBAAgB,aAHR;AAIR,gBAAa,UAJL;AAKR,iBAAa;AALL,GADG;;AAQbA,EAAAA,OAAO,CAAC;AAACC,IAAAA,QAAD;AAAWC,IAAAA;AAAX,GAAD,EAA0B;AAC/B,QAAI;AAAEC,MAAAA,YAAF;AAAgBC,MAAAA,KAAhB;AAAuBC,MAAAA,OAAvB;AAAgCC,MAAAA;AAAhC,QAAgDL,QAApD;AAEA,UAAMM,aAAa,GAAGL,WAAW,IAAIA,WAAW,CAACK,aAAjD;AACA,UAAMC,aAAa,GAAGN,WAAW,IAAIA,WAAW,CAACM,aAAjD;AACA,UAAMC,MAAM,GAAGF,aAAa,IAAIC,aAAjB,IAAkCP,QAAQ,CAACQ,MAA1D;AACA,UAAMC,QAAQ,GAAI,YAAYD,MAA9B;AAEA,QAAIE,QAAQ,GAAG,EAAf;AAEA,UAAMC,WAAW,GAAGP,OAAO,IAAIA,OAAO,CAACO,WAAvC;AACA,UAAMC,QAAQ,GAAGD,WAAW,IAAIA,WAAW,CAACE,KAA3B,IAAoCF,WAAW,CAACE,KAAZ,CAAkBD,QAAvE;;AAEA,QAAIR,OAAJ,EAAa;AAETD,MAAAA,KAAK,GAAGC,OAAO,CAACD,KAAR,IAAiBC,OAAO,CAACD,KAAR,CAAcM,QAAd,CAAzB;AACAJ,MAAAA,WAAW,GAAGD,OAAO,CAACC,WAAR,IAAuBD,OAAO,CAACC,WAAR,CAAoBI,QAApB,CAArC;AAEA,YAAM;AAAEK,QAAAA,QAAF;AAAYC,QAAAA,QAAZ;AAAsBC,QAAAA;AAAtB,UAAmCZ,OAAzC;;AAEA,UAAIU,QAAQ,IAAIA,QAAQ,CAACG,GAArB,IAA4BH,QAAQ,CAACI,GAAzC,EAA8C;AAE1C,YAAIJ,QAAQ,CAACK,OAAb,EAAsB;AAClBT,UAAAA,QAAQ,CAACU,IAAT,CAAcN,QAAQ,CAACK,OAAvB;AACH,SAFD,MAEO;AACHT,UAAAA,QAAQ,CAACU,IAAT,CAAc,MAAd;AACH;AAEJ;;AAED,UAAIL,QAAQ,IAAIA,QAAQ,CAACM,MAAzB,EAAiC;AAC7BX,QAAAA,QAAQ,CAACU,IAAT,CAAcL,QAAQ,CAACM,MAAT,GAAkB,YAAhC;AACH;;AAED,UAAIL,QAAQ,IAAIA,QAAQ,CAACK,MAAzB,EAAiC;AAC7BX,QAAAA,QAAQ,CAACU,IAAT,CAAcJ,QAAQ,CAACK,MAAT,GAAkB,OAAhC;AACH;AAGJ;;AAED,WAAO;AACHT,MAAAA,QAAQ,EAAEA,QADP;AAEHU,MAAAA,QAAQ,EAAE,aAFP;AAGHnB,MAAAA,KAAK,EAAEA,KAAK,IAAI,aAHb;AAIHE,MAAAA,WAAW,EAAEA,WAJV;AAKHK,MAAAA,QAAQ,EAAEA,QALP;AAMHa,MAAAA,SAAS,EAAErB;AANR,KAAP;AASD;;AA1DY,CAAf","sourcesContent":["export default {\n  \"select\": {\n    \"imageUrl\" : \"imageUrl\",\n    \"title\" : \"title\",\n    \"description\" : \"description\",\n    \"metadata\" : \"metadata\",\n    \"typeLabel\": \"typeLabel\"\n  },\n  prepare({formData, formContext}) {\n    let { documentType, title, content, description } = formData\n\n    const defaultLocale = formContext && formContext.defaultLocale\n    const currentLocale = formContext && formContext.currentLocale\n    const locale = defaultLocale || currentLocale || formData.locale\n    const localeId =  \"locale:\" + locale\n\n    let metadata = []\n\n    const headerImage = content && content.headerImage\n    const imageUrl = headerImage && headerImage.media && headerImage.media.imageUrl\n    \n    if (content) {\n\n        title = content.title && content.title[localeId]\n        description = content.description && content.description[localeId]\n\n        const { location, sections, isPartOf } = content\n\n        if (location && location.lat && location.lng) {\n            \n            if (location.address) {\n                metadata.push(location.address)\n            } else {\n                metadata.push(\"Sted\")\n            }\n            \n        }\n\n        if (sections && sections.length) {\n            metadata.push(sections.length + ' seksjoner')\n        }\n\n        if (isPartOf && isPartOf.length) {\n            metadata.push(isPartOf.length + ' tema')\n        }\n        \n                \n    }\n\n    return {\n        imageUrl: imageUrl,\n        untitled: \"Ny artikkel\",\n        title: title || \"Uten tittel\",\n        description: description,\n        metadata: metadata,\n        typeLabel: documentType\n    }\n    \n  }\n  \n}"]},"metadata":{},"sourceType":"module"}