{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _includes = _interopRequireDefault(require(\"core-js/library/fn/array/includes\"));\n\nvar _core = require(\"@rjsf/core\");\n\nvar _shortid = _interopRequireDefault(require(\"shortid\"));\n\nvar _FixedArrayFieldTemplate = _interopRequireDefault(require(\"./FixedArrayFieldTemplate\"));\n\nvar _NormalArrayFieldTemplate = _interopRequireDefault(require(\"./NormalArrayFieldTemplate\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar getWidget = _core.utils.getWidget,\n    getDefaultFormState = _core.utils.getDefaultFormState,\n    getUiOptions = _core.utils.getUiOptions,\n    isMultiSelect = _core.utils.isMultiSelect,\n    isFilesArray = _core.utils.isFilesArray,\n    isFixedItems = _core.utils.isFixedItems,\n    allowAdditionalItems = _core.utils.allowAdditionalItems,\n    optionsList = _core.utils.optionsList,\n    retrieveSchema = _core.utils.retrieveSchema,\n    toIdSchema = _core.utils.toIdSchema,\n    getDefaultRegistry = _core.utils.getDefaultRegistry;\n\nfunction generateRowId() {\n  return _shortid.default.generate();\n}\n\nfunction generateKeyedFormData(formData) {\n  return !Array.isArray(formData) ? [] : formData.map(function (item) {\n    return {\n      key: generateRowId(),\n      item: item\n    };\n  });\n}\n\nfunction keyedToPlainFormData(keyedFormData) {\n  return keyedFormData.map(function (keyedItem) {\n    return keyedItem.item;\n  });\n}\n\nvar ArrayField = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(ArrayField, _Component);\n\n  function ArrayField(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"_getNewFormDataRow\", function (item) {\n      if (item === void 0) {\n        item = undefined;\n      }\n\n      var _this$props = _this.props,\n          schema = _this$props.schema,\n          _this$props$registry = _this$props.registry,\n          registry = _this$props$registry === void 0 ? getDefaultRegistry() : _this$props$registry;\n      var rootSchema = registry.rootSchema;\n      var itemSchema = schema.items;\n\n      if (isFixedItems(schema) && allowAdditionalItems(schema)) {\n        itemSchema = schema.additionalItems;\n      }\n\n      return getDefaultFormState(itemSchema, item, rootSchema);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAddClick\", function (event) {\n      if (event) {\n        event.preventDefault();\n      }\n\n      var onChange = _this.props.onChange;\n      var newKeyedFormDataRow = {\n        key: generateRowId(),\n        item: _this._getNewFormDataRow()\n      };\n      var newKeyedFormData = [].concat(_this.state.keyedFormData, [newKeyedFormDataRow]);\n\n      _this.setState({\n        keyedFormData: newKeyedFormData,\n        updatedKeyedFormData: true\n      }, function () {\n        return onChange(keyedToPlainFormData(newKeyedFormData));\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAddItemClick\", function (item) {\n      var onChange = _this.props.onChange;\n      var newKeyedFormDataRow = {\n        key: generateRowId(),\n        item: _this._getNewFormDataRow(item)\n      };\n      var newKeyedFormData = [].concat(_this.state.keyedFormData, [newKeyedFormDataRow]);\n\n      _this.setState({\n        keyedFormData: newKeyedFormData,\n        updatedKeyedFormData: true\n      }, function () {\n        return onChange(keyedToPlainFormData(newKeyedFormData));\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAddIndexClick\", function (index) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n        }\n\n        var onChange = _this.props.onChange;\n        var newKeyedFormDataRow = {\n          key: generateRowId(),\n          item: _this._getNewFormDataRow()\n        };\n        var newKeyedFormData = [].concat(_this.state.keyedFormData);\n        newKeyedFormData.splice(index, 0, newKeyedFormDataRow);\n\n        _this.setState({\n          keyedFormData: newKeyedFormData,\n          updatedKeyedFormData: true\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData));\n        });\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDropIndexClick\", function (index) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n        }\n\n        var onChange = _this.props.onChange;\n        var keyedFormData = _this.state.keyedFormData; // refs #195: revalidate to ensure properly reindexing errors\n\n        var newErrorSchema;\n\n        if (_this.props.errorSchema) {\n          newErrorSchema = {};\n          var errorSchema = _this.props.errorSchema;\n\n          for (var i in errorSchema) {\n            i = parseInt(i);\n\n            if (i < index) {\n              newErrorSchema[i] = errorSchema[i];\n            } else if (i > index) {\n              newErrorSchema[i - 1] = errorSchema[i];\n            }\n          }\n        }\n\n        var newKeyedFormData = keyedFormData.filter(function (_, i) {\n          return i !== index;\n        });\n\n        _this.setState({\n          keyedFormData: newKeyedFormData,\n          updatedKeyedFormData: true\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema);\n        });\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onReorderClick\", function (index, newIndex) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n          event.target.blur();\n        }\n\n        var onChange = _this.props.onChange;\n        var newErrorSchema;\n\n        if (_this.props.errorSchema) {\n          newErrorSchema = {};\n          var errorSchema = _this.props.errorSchema;\n\n          for (var i in errorSchema) {\n            if (i == index) {\n              newErrorSchema[newIndex] = errorSchema[index];\n            } else if (i == newIndex) {\n              newErrorSchema[index] = errorSchema[newIndex];\n            } else {\n              newErrorSchema[i] = errorSchema[i];\n            }\n          }\n        }\n\n        var keyedFormData = _this.state.keyedFormData;\n\n        function reOrderArray() {\n          // Copy item\n          var _newKeyedFormData = keyedFormData.slice(); // Moves item from index to newIndex\n\n\n          _newKeyedFormData.splice(index, 1);\n\n          _newKeyedFormData.splice(newIndex, 0, keyedFormData[index]);\n\n          return _newKeyedFormData;\n        }\n\n        var newKeyedFormData = reOrderArray();\n\n        _this.setState({\n          keyedFormData: newKeyedFormData\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema);\n        });\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onArrayChange\", function (formData) {\n      var onChange = _this.props.onChange;\n      var newKeyedFormData = [];\n      formData.map(function (item) {\n        newKeyedFormData.push({\n          key: generateRowId(),\n          item: _this._getNewFormDataRow(item)\n        });\n      });\n\n      _this.setState({\n        keyedFormData: newKeyedFormData,\n        updatedKeyedFormData: true\n      }, function () {\n        return onChange(keyedToPlainFormData(newKeyedFormData));\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChangeForIndex\", function (index) {\n      return function (value, errorSchema) {\n        var _extends2;\n\n        var _this$props2 = _this.props,\n            formData = _this$props2.formData,\n            onChange = _this$props2.onChange;\n        var newFormData = formData.map(function (item, i) {\n          // We need to treat undefined items as nulls to have validation.\n          // See https://github.com/tdegrunt/jsonschema/issues/206\n          var jsonValue = typeof value === \"undefined\" ? null : value;\n          return index === i ? jsonValue : item;\n        });\n        onChange(newFormData, errorSchema && _this.props.errorSchema && _extends({}, _this.props.errorSchema, (_extends2 = {}, _extends2[index] = errorSchema, _extends2)));\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSelectChange\", function (value) {\n      _this.props.onChange(value);\n    });\n\n    var _formData = props.formData;\n\n    var _keyedFormData = generateKeyedFormData(_formData);\n\n    _this.state = {\n      keyedFormData: _keyedFormData,\n      updatedKeyedFormData: false\n    };\n    return _this;\n  }\n\n  ArrayField.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    // Don't call getDerivedStateFromProps if keyed formdata was just updated.\n    if (prevState.updatedKeyedFormData) {\n      return {\n        updatedKeyedFormData: false\n      };\n    }\n\n    var nextFormData = nextProps.formData;\n    var previousKeyedFormData = prevState.keyedFormData;\n    var newKeyedFormData = nextFormData.length === previousKeyedFormData.length ? previousKeyedFormData.map(function (previousKeyedFormDatum, index) {\n      return {\n        key: previousKeyedFormDatum.key,\n        item: nextFormData[index]\n      };\n    }) : generateKeyedFormData(nextFormData);\n    return {\n      keyedFormData: newKeyedFormData\n    };\n  };\n\n  var _proto = ArrayField.prototype;\n\n  _proto.isItemRequired = function isItemRequired(itemSchema) {\n    if (Array.isArray(itemSchema.type)) {\n      // While we don't yet support composite/nullable jsonschema types, it's\n      // future-proof to check for requirement against these.\n      return !(0, _includes.default)(itemSchema.type, \"null\");\n    } // All non-null array item types are inherently required by design\n\n\n    return itemSchema.type !== \"null\";\n  };\n\n  _proto.canAddItem = function canAddItem(formItems) {\n    var _this$props3 = this.props,\n        schema = _this$props3.schema,\n        uiSchema = _this$props3.uiSchema;\n\n    var _getUiOptions = getUiOptions(uiSchema),\n        addable = _getUiOptions.addable;\n\n    if (addable !== false) {\n      // if ui:options.addable was not explicitly set to false, we can add\n      // another item if we have not exceeded maxItems yet\n      if (schema.maxItems !== undefined) {\n        addable = formItems.length < schema.maxItems;\n      } else {\n        addable = true;\n      }\n    }\n\n    return addable;\n  };\n\n  _proto.render = function render() {\n    var _this$props4 = this.props,\n        schema = _this$props4.schema,\n        uiSchema = _this$props4.uiSchema,\n        idSchema = _this$props4.idSchema,\n        _this$props4$registry = _this$props4.registry,\n        registry = _this$props4$registry === void 0 ? getDefaultRegistry() : _this$props4$registry;\n    var rootSchema = registry.rootSchema;\n\n    if (!schema.hasOwnProperty(\"items\")) {\n      var fields = registry.fields;\n      var UnsupportedField = fields.UnsupportedField;\n      return /*#__PURE__*/_react.default.createElement(UnsupportedField, {\n        schema: schema,\n        idSchema: idSchema,\n        reason: \"Missing items definition\"\n      });\n    }\n\n    if (isFixedItems(schema)) {\n      return this.renderFixedArray();\n    }\n\n    if (isFilesArray(schema, uiSchema, rootSchema)) {\n      return this.renderFiles();\n    }\n\n    if (isMultiSelect(schema, rootSchema)) {\n      return this.renderMultiSelect();\n    }\n\n    return this.renderNormalArray();\n  };\n\n  _proto.renderNormalArray = function renderNormalArray() {\n    var _this2 = this;\n\n    var _this$props5 = this.props,\n        schema = _this$props5.schema,\n        uiSchema = _this$props5.uiSchema,\n        errorSchema = _this$props5.errorSchema,\n        idSchema = _this$props5.idSchema,\n        name = _this$props5.name,\n        required = _this$props5.required,\n        disabled = _this$props5.disabled,\n        readonly = _this$props5.readonly,\n        autofocus = _this$props5.autofocus,\n        _this$props5$registry = _this$props5.registry,\n        registry = _this$props5$registry === void 0 ? getDefaultRegistry() : _this$props5$registry,\n        onBlur = _this$props5.onBlur,\n        onFocus = _this$props5.onFocus,\n        idPrefix = _this$props5.idPrefix,\n        rawErrors = _this$props5.rawErrors;\n    var title = schema.title === undefined ? name : schema.title;\n    var ArrayFieldTemplate = registry.ArrayFieldTemplate,\n        rootSchema = registry.rootSchema,\n        fields = registry.fields,\n        formContext = registry.formContext;\n    var TitleField = fields.TitleField,\n        DescriptionField = fields.DescriptionField;\n    var itemsSchema = retrieveSchema(schema.items, rootSchema);\n    var formData = keyedToPlainFormData(this.state.keyedFormData);\n    var arrayProps = {\n      canAdd: this.canAddItem(formData),\n      items: this.state.keyedFormData.map(function (keyedItem, index) {\n        var key = keyedItem.key,\n            item = keyedItem.item;\n        var itemSchema = retrieveSchema(schema.items, rootSchema, item);\n        var itemErrorSchema = errorSchema ? errorSchema[index] : undefined;\n        var itemIdPrefix = idSchema.$id + \"_\" + index;\n        var itemIdSchema = toIdSchema(itemSchema, itemIdPrefix, rootSchema, item, idPrefix);\n        return _this2.renderArrayFieldItem({\n          key: key,\n          index: index,\n          canMoveUp: index > 0,\n          canMoveDown: index < formData.length - 1,\n          itemSchema: itemSchema,\n          itemIdSchema: itemIdSchema,\n          itemErrorSchema: itemErrorSchema,\n          itemData: item,\n          itemUiSchema: uiSchema.items,\n          autofocus: autofocus && index === 0,\n          onBlur: onBlur,\n          onFocus: onFocus\n        });\n      }),\n      className: \"field field-array field-array-of-\" + itemsSchema.type,\n      DescriptionField: DescriptionField,\n      disabled: disabled,\n      idSchema: idSchema,\n      uiSchema: uiSchema,\n      onChange: this.onArrayChange,\n      onAddClick: this.onAddClick,\n      onAddItemClick: function onAddItemClick(item) {\n        return _this2.onAddItemClick(item);\n      },\n      readonly: readonly,\n      required: required,\n      schema: schema,\n      title: title,\n      TitleField: TitleField,\n      formContext: formContext,\n      formData: formData,\n      rawErrors: rawErrors,\n      registry: registry\n    }; // Check if a custom render function was passed in\n\n    var Component = uiSchema[\"ui:ArrayFieldTemplate\"] || ArrayFieldTemplate || _NormalArrayFieldTemplate.default;\n    return /*#__PURE__*/_react.default.createElement(Component, arrayProps);\n  };\n\n  _proto.renderMultiSelect = function renderMultiSelect() {\n    var _this$props6 = this.props,\n        schema = _this$props6.schema,\n        idSchema = _this$props6.idSchema,\n        uiSchema = _this$props6.uiSchema,\n        formData = _this$props6.formData,\n        disabled = _this$props6.disabled,\n        readonly = _this$props6.readonly,\n        required = _this$props6.required,\n        label = _this$props6.label,\n        placeholder = _this$props6.placeholder,\n        autofocus = _this$props6.autofocus,\n        onBlur = _this$props6.onBlur,\n        onFocus = _this$props6.onFocus,\n        _this$props6$registry = _this$props6.registry,\n        registry = _this$props6$registry === void 0 ? getDefaultRegistry() : _this$props6$registry,\n        rawErrors = _this$props6.rawErrors;\n    var items = this.props.formData;\n    var widgets = registry.widgets,\n        rootSchema = registry.rootSchema,\n        formContext = registry.formContext;\n    var itemsSchema = retrieveSchema(schema.items, rootSchema, formData);\n    var enumOptions = optionsList(itemsSchema);\n\n    var _getUiOptions$enumOpt = _extends({}, getUiOptions(uiSchema), {\n      enumOptions: enumOptions\n    }),\n        _getUiOptions$enumOpt2 = _getUiOptions$enumOpt.widget,\n        widget = _getUiOptions$enumOpt2 === void 0 ? \"select\" : _getUiOptions$enumOpt2,\n        options = _objectWithoutPropertiesLoose(_getUiOptions$enumOpt, [\"widget\"]);\n\n    var Widget = getWidget(schema, widget, widgets);\n    return /*#__PURE__*/_react.default.createElement(Widget, {\n      id: idSchema && idSchema.$id,\n      multiple: true,\n      onChange: this.onSelectChange,\n      onBlur: onBlur,\n      onFocus: onFocus,\n      options: options,\n      schema: schema,\n      registry: registry,\n      value: items,\n      disabled: disabled,\n      readonly: readonly,\n      required: required,\n      label: label,\n      placeholder: placeholder,\n      formContext: formContext,\n      autofocus: autofocus,\n      rawErrors: rawErrors\n    });\n  };\n\n  _proto.renderFiles = function renderFiles() {\n    var _this$props7 = this.props,\n        schema = _this$props7.schema,\n        uiSchema = _this$props7.uiSchema,\n        idSchema = _this$props7.idSchema,\n        name = _this$props7.name,\n        disabled = _this$props7.disabled,\n        readonly = _this$props7.readonly,\n        autofocus = _this$props7.autofocus,\n        onBlur = _this$props7.onBlur,\n        onFocus = _this$props7.onFocus,\n        _this$props7$registry = _this$props7.registry,\n        registry = _this$props7$registry === void 0 ? getDefaultRegistry() : _this$props7$registry,\n        rawErrors = _this$props7.rawErrors;\n    var title = schema.title || name;\n    var items = this.props.formData;\n    var widgets = registry.widgets,\n        formContext = registry.formContext;\n\n    var _getUiOptions2 = getUiOptions(uiSchema),\n        _getUiOptions2$widget = _getUiOptions2.widget,\n        widget = _getUiOptions2$widget === void 0 ? \"files\" : _getUiOptions2$widget,\n        options = _objectWithoutPropertiesLoose(_getUiOptions2, [\"widget\"]);\n\n    var Widget = getWidget(schema, widget, widgets);\n    return /*#__PURE__*/_react.default.createElement(Widget, {\n      options: options,\n      id: idSchema && idSchema.$id,\n      multiple: true,\n      onChange: this.onSelectChange,\n      onBlur: onBlur,\n      onFocus: onFocus,\n      schema: schema,\n      title: title,\n      value: items,\n      disabled: disabled,\n      readonly: readonly,\n      formContext: formContext,\n      autofocus: autofocus,\n      rawErrors: rawErrors\n    });\n  };\n\n  _proto.renderFixedArray = function renderFixedArray() {\n    var _this3 = this;\n\n    var _this$props8 = this.props,\n        schema = _this$props8.schema,\n        uiSchema = _this$props8.uiSchema,\n        formData = _this$props8.formData,\n        errorSchema = _this$props8.errorSchema,\n        idPrefix = _this$props8.idPrefix,\n        idSchema = _this$props8.idSchema,\n        name = _this$props8.name,\n        required = _this$props8.required,\n        disabled = _this$props8.disabled,\n        readonly = _this$props8.readonly,\n        autofocus = _this$props8.autofocus,\n        _this$props8$registry = _this$props8.registry,\n        registry = _this$props8$registry === void 0 ? getDefaultRegistry() : _this$props8$registry,\n        onBlur = _this$props8.onBlur,\n        onFocus = _this$props8.onFocus,\n        rawErrors = _this$props8.rawErrors;\n    var title = schema.title || name;\n    var items = this.props.formData;\n    var ArrayFieldTemplate = registry.ArrayFieldTemplate,\n        rootSchema = registry.rootSchema,\n        fields = registry.fields,\n        formContext = registry.formContext;\n    var TitleField = fields.TitleField;\n    var itemSchemas = schema.items.map(function (item, index) {\n      return retrieveSchema(item, rootSchema, formData[index]);\n    });\n    var additionalSchema = allowAdditionalItems(schema) ? retrieveSchema(schema.additionalItems, rootSchema, formData) : null;\n\n    if (!items || items.length < itemSchemas.length) {\n      // to make sure at least all fixed items are generated\n      items = items || [];\n      items = items.concat(new Array(itemSchemas.length - items.length));\n    } // These are the props passed into the render function\n\n\n    var arrayProps = {\n      canAdd: this.canAddItem(items) && additionalSchema,\n      className: \"field field-array field-array-fixed-items\",\n      disabled: disabled,\n      idSchema: idSchema,\n      formData: formData,\n      items: this.state.keyedFormData.map(function (keyedItem, index) {\n        var key = keyedItem.key,\n            item = keyedItem.item;\n        var additional = index >= itemSchemas.length;\n        var itemSchema = additional ? retrieveSchema(schema.additionalItems, rootSchema, item) : itemSchemas[index];\n        var itemIdPrefix = idSchema.$id + \"_\" + index;\n        var itemIdSchema = toIdSchema(itemSchema, itemIdPrefix, rootSchema, item, idPrefix);\n        var itemUiSchema = additional ? uiSchema.additionalItems || {} : Array.isArray(uiSchema.items) ? uiSchema.items[index] : uiSchema.items || {};\n        var itemErrorSchema = errorSchema ? errorSchema[index] : undefined;\n        return _this3.renderArrayFieldItem({\n          key: key,\n          index: index,\n          canRemove: additional,\n          canMoveUp: index >= itemSchemas.length + 1,\n          canMoveDown: additional && index < items.length - 1,\n          itemSchema: itemSchema,\n          itemData: item,\n          itemUiSchema: itemUiSchema,\n          itemIdSchema: itemIdSchema,\n          itemErrorSchema: itemErrorSchema,\n          autofocus: autofocus && index === 0,\n          onBlur: onBlur,\n          onFocus: onFocus\n        });\n      }),\n      onChange: this.onArrayChange,\n      onAddClick: this.onAddClick,\n      onAddItemClick: function onAddItemClick(item) {\n        return _this3.onAddItemClick(item);\n      },\n      readonly: readonly,\n      required: required,\n      schema: schema,\n      uiSchema: uiSchema,\n      title: title,\n      TitleField: TitleField,\n      formContext: formContext,\n      rawErrors: rawErrors\n    }; // Check if a custom template template was passed in\n\n    var Template = uiSchema[\"ui:ArrayFieldTemplate\"] || ArrayFieldTemplate || _FixedArrayFieldTemplate.default;\n    return /*#__PURE__*/_react.default.createElement(Template, arrayProps);\n  };\n\n  _proto.renderArrayFieldItem = function renderArrayFieldItem(props) {\n    var key = props.key,\n        index = props.index,\n        _props$canRemove = props.canRemove,\n        canRemove = _props$canRemove === void 0 ? true : _props$canRemove,\n        _props$canMoveUp = props.canMoveUp,\n        canMoveUp = _props$canMoveUp === void 0 ? true : _props$canMoveUp,\n        _props$canMoveDown = props.canMoveDown,\n        canMoveDown = _props$canMoveDown === void 0 ? true : _props$canMoveDown,\n        itemSchema = props.itemSchema,\n        itemData = props.itemData,\n        itemUiSchema = props.itemUiSchema,\n        itemIdSchema = props.itemIdSchema,\n        itemErrorSchema = props.itemErrorSchema,\n        autofocus = props.autofocus,\n        onBlur = props.onBlur,\n        onFocus = props.onFocus,\n        rawErrors = props.rawErrors;\n    var _this$props9 = this.props,\n        disabled = _this$props9.disabled,\n        readonly = _this$props9.readonly,\n        uiSchema = _this$props9.uiSchema,\n        _this$props9$registry = _this$props9.registry,\n        registry = _this$props9$registry === void 0 ? getDefaultRegistry() : _this$props9$registry;\n    var SchemaField = registry.fields.SchemaField;\n\n    var _orderable$removable$ = _extends({\n      orderable: true,\n      removable: true\n    }, uiSchema[\"ui:options\"]),\n        orderable = _orderable$removable$.orderable,\n        removable = _orderable$removable$.removable;\n\n    var has = {\n      moveUp: orderable && canMoveUp,\n      moveDown: orderable && canMoveDown,\n      remove: removable && canRemove\n    };\n    has.toolbar = Object.keys(has).some(function (key) {\n      return has[key];\n    });\n    return {\n      children: /*#__PURE__*/_react.default.createElement(SchemaField, {\n        index: index,\n        schema: itemSchema,\n        uiSchema: itemUiSchema,\n        formData: itemData,\n        errorSchema: itemErrorSchema,\n        idSchema: itemIdSchema,\n        required: this.isItemRequired(itemSchema),\n        onChange: this.onChangeForIndex(index),\n        onBlur: onBlur,\n        onFocus: onFocus,\n        registry: this.props.registry,\n        disabled: this.props.disabled,\n        readonly: this.props.readonly,\n        autofocus: autofocus,\n        rawErrors: rawErrors\n      }),\n      className: \"array-item\",\n      disabled: disabled,\n      hasToolbar: has.toolbar,\n      hasMoveUp: has.moveUp,\n      hasMoveDown: has.moveDown,\n      hasRemove: has.remove,\n      index: index,\n      key: key,\n      onAddIndexClick: this.onAddIndexClick,\n      onDropIndexClick: this.onDropIndexClick,\n      onReorderClick: this.onReorderClick,\n      readonly: readonly\n    };\n  };\n\n  _createClass(ArrayField, [{\n    key: \"itemTitle\",\n    get: function get() {\n      var schema = this.props.schema;\n      return schema.items.title || schema.items.description || \"Item\";\n    }\n  }]);\n\n  return ArrayField;\n}(_react.Component);\n\n_defineProperty(ArrayField, \"defaultProps\", {\n  uiSchema: {},\n  formData: [],\n  idSchema: {},\n  required: false,\n  disabled: false,\n  readonly: false,\n  autofocus: false\n});\n\nvar _default = ArrayField;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["/Users/inge/Sites/kit-kulturpunkt/node_modules/@kit-ui/schema/lib/ArrayField/ArrayField.js"],"names":["exports","__esModule","default","_react","_interopRequireWildcard","require","_includes","_interopRequireDefault","_core","_shortid","_FixedArrayFieldTemplate","_NormalArrayFieldTemplate","obj","_getRequireWildcardCache","WeakMap","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","keys","i","length","indexOf","_extends","assign","arguments","apply","_defineProperties","props","descriptor","enumerable","configurable","writable","_createClass","Constructor","protoProps","staticProps","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","create","constructor","__proto__","_defineProperty","value","getWidget","utils","getDefaultFormState","getUiOptions","isMultiSelect","isFilesArray","isFixedItems","allowAdditionalItems","optionsList","retrieveSchema","toIdSchema","getDefaultRegistry","generateRowId","generate","generateKeyedFormData","formData","Array","isArray","map","item","keyedToPlainFormData","keyedFormData","keyedItem","ArrayField","_Component","_this","undefined","_this$props","schema","_this$props$registry","registry","rootSchema","itemSchema","items","additionalItems","event","preventDefault","onChange","newKeyedFormDataRow","_getNewFormDataRow","newKeyedFormData","concat","state","setState","updatedKeyedFormData","index","splice","newErrorSchema","errorSchema","parseInt","filter","_","newIndex","blur","reOrderArray","_newKeyedFormData","slice","push","_extends2","_this$props2","newFormData","jsonValue","_formData","_keyedFormData","getDerivedStateFromProps","nextProps","prevState","nextFormData","previousKeyedFormData","previousKeyedFormDatum","_proto","isItemRequired","type","canAddItem","formItems","_this$props3","uiSchema","_getUiOptions","addable","maxItems","render","_this$props4","idSchema","_this$props4$registry","fields","UnsupportedField","createElement","reason","renderFixedArray","renderFiles","renderMultiSelect","renderNormalArray","_this2","_this$props5","name","required","disabled","readonly","autofocus","_this$props5$registry","onBlur","onFocus","idPrefix","rawErrors","title","ArrayFieldTemplate","formContext","TitleField","DescriptionField","itemsSchema","arrayProps","canAdd","itemErrorSchema","itemIdPrefix","$id","itemIdSchema","renderArrayFieldItem","canMoveUp","canMoveDown","itemData","itemUiSchema","className","onArrayChange","onAddClick","onAddItemClick","Component","_this$props6","label","placeholder","_this$props6$registry","widgets","enumOptions","_getUiOptions$enumOpt","_getUiOptions$enumOpt2","widget","options","Widget","id","multiple","onSelectChange","_this$props7","_this$props7$registry","_getUiOptions2","_getUiOptions2$widget","_this3","_this$props8","_this$props8$registry","itemSchemas","additionalSchema","additional","canRemove","Template","_props$canRemove","_props$canMoveUp","_props$canMoveDown","_this$props9","_this$props9$registry","SchemaField","_orderable$removable$","orderable","removable","moveUp","moveDown","remove","toolbar","some","children","onChangeForIndex","hasToolbar","hasMoveUp","hasMoveDown","hasRemove","onAddIndexClick","onDropIndexClick","onReorderClick","description","_default","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _includes = _interopRequireDefault(require(\"core-js/library/fn/array/includes\"));\n\nvar _core = require(\"@rjsf/core\");\n\nvar _shortid = _interopRequireDefault(require(\"shortid\"));\n\nvar _FixedArrayFieldTemplate = _interopRequireDefault(require(\"./FixedArrayFieldTemplate\"));\n\nvar _NormalArrayFieldTemplate = _interopRequireDefault(require(\"./NormalArrayFieldTemplate\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar getWidget = _core.utils.getWidget,\n    getDefaultFormState = _core.utils.getDefaultFormState,\n    getUiOptions = _core.utils.getUiOptions,\n    isMultiSelect = _core.utils.isMultiSelect,\n    isFilesArray = _core.utils.isFilesArray,\n    isFixedItems = _core.utils.isFixedItems,\n    allowAdditionalItems = _core.utils.allowAdditionalItems,\n    optionsList = _core.utils.optionsList,\n    retrieveSchema = _core.utils.retrieveSchema,\n    toIdSchema = _core.utils.toIdSchema,\n    getDefaultRegistry = _core.utils.getDefaultRegistry;\n\nfunction generateRowId() {\n  return _shortid.default.generate();\n}\n\nfunction generateKeyedFormData(formData) {\n  return !Array.isArray(formData) ? [] : formData.map(function (item) {\n    return {\n      key: generateRowId(),\n      item: item\n    };\n  });\n}\n\nfunction keyedToPlainFormData(keyedFormData) {\n  return keyedFormData.map(function (keyedItem) {\n    return keyedItem.item;\n  });\n}\n\nvar ArrayField = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(ArrayField, _Component);\n\n  function ArrayField(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"_getNewFormDataRow\", function (item) {\n      if (item === void 0) {\n        item = undefined;\n      }\n\n      var _this$props = _this.props,\n          schema = _this$props.schema,\n          _this$props$registry = _this$props.registry,\n          registry = _this$props$registry === void 0 ? getDefaultRegistry() : _this$props$registry;\n      var rootSchema = registry.rootSchema;\n      var itemSchema = schema.items;\n\n      if (isFixedItems(schema) && allowAdditionalItems(schema)) {\n        itemSchema = schema.additionalItems;\n      }\n\n      return getDefaultFormState(itemSchema, item, rootSchema);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAddClick\", function (event) {\n      if (event) {\n        event.preventDefault();\n      }\n\n      var onChange = _this.props.onChange;\n      var newKeyedFormDataRow = {\n        key: generateRowId(),\n        item: _this._getNewFormDataRow()\n      };\n      var newKeyedFormData = [].concat(_this.state.keyedFormData, [newKeyedFormDataRow]);\n\n      _this.setState({\n        keyedFormData: newKeyedFormData,\n        updatedKeyedFormData: true\n      }, function () {\n        return onChange(keyedToPlainFormData(newKeyedFormData));\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAddItemClick\", function (item) {\n      var onChange = _this.props.onChange;\n      var newKeyedFormDataRow = {\n        key: generateRowId(),\n        item: _this._getNewFormDataRow(item)\n      };\n      var newKeyedFormData = [].concat(_this.state.keyedFormData, [newKeyedFormDataRow]);\n\n      _this.setState({\n        keyedFormData: newKeyedFormData,\n        updatedKeyedFormData: true\n      }, function () {\n        return onChange(keyedToPlainFormData(newKeyedFormData));\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAddIndexClick\", function (index) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n        }\n\n        var onChange = _this.props.onChange;\n        var newKeyedFormDataRow = {\n          key: generateRowId(),\n          item: _this._getNewFormDataRow()\n        };\n        var newKeyedFormData = [].concat(_this.state.keyedFormData);\n        newKeyedFormData.splice(index, 0, newKeyedFormDataRow);\n\n        _this.setState({\n          keyedFormData: newKeyedFormData,\n          updatedKeyedFormData: true\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData));\n        });\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDropIndexClick\", function (index) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n        }\n\n        var onChange = _this.props.onChange;\n        var keyedFormData = _this.state.keyedFormData; // refs #195: revalidate to ensure properly reindexing errors\n\n        var newErrorSchema;\n\n        if (_this.props.errorSchema) {\n          newErrorSchema = {};\n          var errorSchema = _this.props.errorSchema;\n\n          for (var i in errorSchema) {\n            i = parseInt(i);\n\n            if (i < index) {\n              newErrorSchema[i] = errorSchema[i];\n            } else if (i > index) {\n              newErrorSchema[i - 1] = errorSchema[i];\n            }\n          }\n        }\n\n        var newKeyedFormData = keyedFormData.filter(function (_, i) {\n          return i !== index;\n        });\n\n        _this.setState({\n          keyedFormData: newKeyedFormData,\n          updatedKeyedFormData: true\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema);\n        });\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onReorderClick\", function (index, newIndex) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n          event.target.blur();\n        }\n\n        var onChange = _this.props.onChange;\n        var newErrorSchema;\n\n        if (_this.props.errorSchema) {\n          newErrorSchema = {};\n          var errorSchema = _this.props.errorSchema;\n\n          for (var i in errorSchema) {\n            if (i == index) {\n              newErrorSchema[newIndex] = errorSchema[index];\n            } else if (i == newIndex) {\n              newErrorSchema[index] = errorSchema[newIndex];\n            } else {\n              newErrorSchema[i] = errorSchema[i];\n            }\n          }\n        }\n\n        var keyedFormData = _this.state.keyedFormData;\n\n        function reOrderArray() {\n          // Copy item\n          var _newKeyedFormData = keyedFormData.slice(); // Moves item from index to newIndex\n\n\n          _newKeyedFormData.splice(index, 1);\n\n          _newKeyedFormData.splice(newIndex, 0, keyedFormData[index]);\n\n          return _newKeyedFormData;\n        }\n\n        var newKeyedFormData = reOrderArray();\n\n        _this.setState({\n          keyedFormData: newKeyedFormData\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema);\n        });\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onArrayChange\", function (formData) {\n      var onChange = _this.props.onChange;\n      var newKeyedFormData = [];\n      formData.map(function (item) {\n        newKeyedFormData.push({\n          key: generateRowId(),\n          item: _this._getNewFormDataRow(item)\n        });\n      });\n\n      _this.setState({\n        keyedFormData: newKeyedFormData,\n        updatedKeyedFormData: true\n      }, function () {\n        return onChange(keyedToPlainFormData(newKeyedFormData));\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChangeForIndex\", function (index) {\n      return function (value, errorSchema) {\n        var _extends2;\n\n        var _this$props2 = _this.props,\n            formData = _this$props2.formData,\n            onChange = _this$props2.onChange;\n        var newFormData = formData.map(function (item, i) {\n          // We need to treat undefined items as nulls to have validation.\n          // See https://github.com/tdegrunt/jsonschema/issues/206\n          var jsonValue = typeof value === \"undefined\" ? null : value;\n          return index === i ? jsonValue : item;\n        });\n        onChange(newFormData, errorSchema && _this.props.errorSchema && _extends({}, _this.props.errorSchema, (_extends2 = {}, _extends2[index] = errorSchema, _extends2)));\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSelectChange\", function (value) {\n      _this.props.onChange(value);\n    });\n\n    var _formData = props.formData;\n\n    var _keyedFormData = generateKeyedFormData(_formData);\n\n    _this.state = {\n      keyedFormData: _keyedFormData,\n      updatedKeyedFormData: false\n    };\n    return _this;\n  }\n\n  ArrayField.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    // Don't call getDerivedStateFromProps if keyed formdata was just updated.\n    if (prevState.updatedKeyedFormData) {\n      return {\n        updatedKeyedFormData: false\n      };\n    }\n\n    var nextFormData = nextProps.formData;\n    var previousKeyedFormData = prevState.keyedFormData;\n    var newKeyedFormData = nextFormData.length === previousKeyedFormData.length ? previousKeyedFormData.map(function (previousKeyedFormDatum, index) {\n      return {\n        key: previousKeyedFormDatum.key,\n        item: nextFormData[index]\n      };\n    }) : generateKeyedFormData(nextFormData);\n    return {\n      keyedFormData: newKeyedFormData\n    };\n  };\n\n  var _proto = ArrayField.prototype;\n\n  _proto.isItemRequired = function isItemRequired(itemSchema) {\n    if (Array.isArray(itemSchema.type)) {\n      // While we don't yet support composite/nullable jsonschema types, it's\n      // future-proof to check for requirement against these.\n      return !(0, _includes.default)(itemSchema.type, \"null\");\n    } // All non-null array item types are inherently required by design\n\n\n    return itemSchema.type !== \"null\";\n  };\n\n  _proto.canAddItem = function canAddItem(formItems) {\n    var _this$props3 = this.props,\n        schema = _this$props3.schema,\n        uiSchema = _this$props3.uiSchema;\n\n    var _getUiOptions = getUiOptions(uiSchema),\n        addable = _getUiOptions.addable;\n\n    if (addable !== false) {\n      // if ui:options.addable was not explicitly set to false, we can add\n      // another item if we have not exceeded maxItems yet\n      if (schema.maxItems !== undefined) {\n        addable = formItems.length < schema.maxItems;\n      } else {\n        addable = true;\n      }\n    }\n\n    return addable;\n  };\n\n  _proto.render = function render() {\n    var _this$props4 = this.props,\n        schema = _this$props4.schema,\n        uiSchema = _this$props4.uiSchema,\n        idSchema = _this$props4.idSchema,\n        _this$props4$registry = _this$props4.registry,\n        registry = _this$props4$registry === void 0 ? getDefaultRegistry() : _this$props4$registry;\n    var rootSchema = registry.rootSchema;\n\n    if (!schema.hasOwnProperty(\"items\")) {\n      var fields = registry.fields;\n      var UnsupportedField = fields.UnsupportedField;\n      return /*#__PURE__*/_react.default.createElement(UnsupportedField, {\n        schema: schema,\n        idSchema: idSchema,\n        reason: \"Missing items definition\"\n      });\n    }\n\n    if (isFixedItems(schema)) {\n      return this.renderFixedArray();\n    }\n\n    if (isFilesArray(schema, uiSchema, rootSchema)) {\n      return this.renderFiles();\n    }\n\n    if (isMultiSelect(schema, rootSchema)) {\n      return this.renderMultiSelect();\n    }\n\n    return this.renderNormalArray();\n  };\n\n  _proto.renderNormalArray = function renderNormalArray() {\n    var _this2 = this;\n\n    var _this$props5 = this.props,\n        schema = _this$props5.schema,\n        uiSchema = _this$props5.uiSchema,\n        errorSchema = _this$props5.errorSchema,\n        idSchema = _this$props5.idSchema,\n        name = _this$props5.name,\n        required = _this$props5.required,\n        disabled = _this$props5.disabled,\n        readonly = _this$props5.readonly,\n        autofocus = _this$props5.autofocus,\n        _this$props5$registry = _this$props5.registry,\n        registry = _this$props5$registry === void 0 ? getDefaultRegistry() : _this$props5$registry,\n        onBlur = _this$props5.onBlur,\n        onFocus = _this$props5.onFocus,\n        idPrefix = _this$props5.idPrefix,\n        rawErrors = _this$props5.rawErrors;\n    var title = schema.title === undefined ? name : schema.title;\n    var ArrayFieldTemplate = registry.ArrayFieldTemplate,\n        rootSchema = registry.rootSchema,\n        fields = registry.fields,\n        formContext = registry.formContext;\n    var TitleField = fields.TitleField,\n        DescriptionField = fields.DescriptionField;\n    var itemsSchema = retrieveSchema(schema.items, rootSchema);\n    var formData = keyedToPlainFormData(this.state.keyedFormData);\n    var arrayProps = {\n      canAdd: this.canAddItem(formData),\n      items: this.state.keyedFormData.map(function (keyedItem, index) {\n        var key = keyedItem.key,\n            item = keyedItem.item;\n        var itemSchema = retrieveSchema(schema.items, rootSchema, item);\n        var itemErrorSchema = errorSchema ? errorSchema[index] : undefined;\n        var itemIdPrefix = idSchema.$id + \"_\" + index;\n        var itemIdSchema = toIdSchema(itemSchema, itemIdPrefix, rootSchema, item, idPrefix);\n        return _this2.renderArrayFieldItem({\n          key: key,\n          index: index,\n          canMoveUp: index > 0,\n          canMoveDown: index < formData.length - 1,\n          itemSchema: itemSchema,\n          itemIdSchema: itemIdSchema,\n          itemErrorSchema: itemErrorSchema,\n          itemData: item,\n          itemUiSchema: uiSchema.items,\n          autofocus: autofocus && index === 0,\n          onBlur: onBlur,\n          onFocus: onFocus\n        });\n      }),\n      className: \"field field-array field-array-of-\" + itemsSchema.type,\n      DescriptionField: DescriptionField,\n      disabled: disabled,\n      idSchema: idSchema,\n      uiSchema: uiSchema,\n      onChange: this.onArrayChange,\n      onAddClick: this.onAddClick,\n      onAddItemClick: function onAddItemClick(item) {\n        return _this2.onAddItemClick(item);\n      },\n      readonly: readonly,\n      required: required,\n      schema: schema,\n      title: title,\n      TitleField: TitleField,\n      formContext: formContext,\n      formData: formData,\n      rawErrors: rawErrors,\n      registry: registry\n    }; // Check if a custom render function was passed in\n\n    var Component = uiSchema[\"ui:ArrayFieldTemplate\"] || ArrayFieldTemplate || _NormalArrayFieldTemplate.default;\n    return /*#__PURE__*/_react.default.createElement(Component, arrayProps);\n  };\n\n  _proto.renderMultiSelect = function renderMultiSelect() {\n    var _this$props6 = this.props,\n        schema = _this$props6.schema,\n        idSchema = _this$props6.idSchema,\n        uiSchema = _this$props6.uiSchema,\n        formData = _this$props6.formData,\n        disabled = _this$props6.disabled,\n        readonly = _this$props6.readonly,\n        required = _this$props6.required,\n        label = _this$props6.label,\n        placeholder = _this$props6.placeholder,\n        autofocus = _this$props6.autofocus,\n        onBlur = _this$props6.onBlur,\n        onFocus = _this$props6.onFocus,\n        _this$props6$registry = _this$props6.registry,\n        registry = _this$props6$registry === void 0 ? getDefaultRegistry() : _this$props6$registry,\n        rawErrors = _this$props6.rawErrors;\n    var items = this.props.formData;\n    var widgets = registry.widgets,\n        rootSchema = registry.rootSchema,\n        formContext = registry.formContext;\n    var itemsSchema = retrieveSchema(schema.items, rootSchema, formData);\n    var enumOptions = optionsList(itemsSchema);\n\n    var _getUiOptions$enumOpt = _extends({}, getUiOptions(uiSchema), {\n      enumOptions: enumOptions\n    }),\n        _getUiOptions$enumOpt2 = _getUiOptions$enumOpt.widget,\n        widget = _getUiOptions$enumOpt2 === void 0 ? \"select\" : _getUiOptions$enumOpt2,\n        options = _objectWithoutPropertiesLoose(_getUiOptions$enumOpt, [\"widget\"]);\n\n    var Widget = getWidget(schema, widget, widgets);\n    return /*#__PURE__*/_react.default.createElement(Widget, {\n      id: idSchema && idSchema.$id,\n      multiple: true,\n      onChange: this.onSelectChange,\n      onBlur: onBlur,\n      onFocus: onFocus,\n      options: options,\n      schema: schema,\n      registry: registry,\n      value: items,\n      disabled: disabled,\n      readonly: readonly,\n      required: required,\n      label: label,\n      placeholder: placeholder,\n      formContext: formContext,\n      autofocus: autofocus,\n      rawErrors: rawErrors\n    });\n  };\n\n  _proto.renderFiles = function renderFiles() {\n    var _this$props7 = this.props,\n        schema = _this$props7.schema,\n        uiSchema = _this$props7.uiSchema,\n        idSchema = _this$props7.idSchema,\n        name = _this$props7.name,\n        disabled = _this$props7.disabled,\n        readonly = _this$props7.readonly,\n        autofocus = _this$props7.autofocus,\n        onBlur = _this$props7.onBlur,\n        onFocus = _this$props7.onFocus,\n        _this$props7$registry = _this$props7.registry,\n        registry = _this$props7$registry === void 0 ? getDefaultRegistry() : _this$props7$registry,\n        rawErrors = _this$props7.rawErrors;\n    var title = schema.title || name;\n    var items = this.props.formData;\n    var widgets = registry.widgets,\n        formContext = registry.formContext;\n\n    var _getUiOptions2 = getUiOptions(uiSchema),\n        _getUiOptions2$widget = _getUiOptions2.widget,\n        widget = _getUiOptions2$widget === void 0 ? \"files\" : _getUiOptions2$widget,\n        options = _objectWithoutPropertiesLoose(_getUiOptions2, [\"widget\"]);\n\n    var Widget = getWidget(schema, widget, widgets);\n    return /*#__PURE__*/_react.default.createElement(Widget, {\n      options: options,\n      id: idSchema && idSchema.$id,\n      multiple: true,\n      onChange: this.onSelectChange,\n      onBlur: onBlur,\n      onFocus: onFocus,\n      schema: schema,\n      title: title,\n      value: items,\n      disabled: disabled,\n      readonly: readonly,\n      formContext: formContext,\n      autofocus: autofocus,\n      rawErrors: rawErrors\n    });\n  };\n\n  _proto.renderFixedArray = function renderFixedArray() {\n    var _this3 = this;\n\n    var _this$props8 = this.props,\n        schema = _this$props8.schema,\n        uiSchema = _this$props8.uiSchema,\n        formData = _this$props8.formData,\n        errorSchema = _this$props8.errorSchema,\n        idPrefix = _this$props8.idPrefix,\n        idSchema = _this$props8.idSchema,\n        name = _this$props8.name,\n        required = _this$props8.required,\n        disabled = _this$props8.disabled,\n        readonly = _this$props8.readonly,\n        autofocus = _this$props8.autofocus,\n        _this$props8$registry = _this$props8.registry,\n        registry = _this$props8$registry === void 0 ? getDefaultRegistry() : _this$props8$registry,\n        onBlur = _this$props8.onBlur,\n        onFocus = _this$props8.onFocus,\n        rawErrors = _this$props8.rawErrors;\n    var title = schema.title || name;\n    var items = this.props.formData;\n    var ArrayFieldTemplate = registry.ArrayFieldTemplate,\n        rootSchema = registry.rootSchema,\n        fields = registry.fields,\n        formContext = registry.formContext;\n    var TitleField = fields.TitleField;\n    var itemSchemas = schema.items.map(function (item, index) {\n      return retrieveSchema(item, rootSchema, formData[index]);\n    });\n    var additionalSchema = allowAdditionalItems(schema) ? retrieveSchema(schema.additionalItems, rootSchema, formData) : null;\n\n    if (!items || items.length < itemSchemas.length) {\n      // to make sure at least all fixed items are generated\n      items = items || [];\n      items = items.concat(new Array(itemSchemas.length - items.length));\n    } // These are the props passed into the render function\n\n\n    var arrayProps = {\n      canAdd: this.canAddItem(items) && additionalSchema,\n      className: \"field field-array field-array-fixed-items\",\n      disabled: disabled,\n      idSchema: idSchema,\n      formData: formData,\n      items: this.state.keyedFormData.map(function (keyedItem, index) {\n        var key = keyedItem.key,\n            item = keyedItem.item;\n        var additional = index >= itemSchemas.length;\n        var itemSchema = additional ? retrieveSchema(schema.additionalItems, rootSchema, item) : itemSchemas[index];\n        var itemIdPrefix = idSchema.$id + \"_\" + index;\n        var itemIdSchema = toIdSchema(itemSchema, itemIdPrefix, rootSchema, item, idPrefix);\n        var itemUiSchema = additional ? uiSchema.additionalItems || {} : Array.isArray(uiSchema.items) ? uiSchema.items[index] : uiSchema.items || {};\n        var itemErrorSchema = errorSchema ? errorSchema[index] : undefined;\n        return _this3.renderArrayFieldItem({\n          key: key,\n          index: index,\n          canRemove: additional,\n          canMoveUp: index >= itemSchemas.length + 1,\n          canMoveDown: additional && index < items.length - 1,\n          itemSchema: itemSchema,\n          itemData: item,\n          itemUiSchema: itemUiSchema,\n          itemIdSchema: itemIdSchema,\n          itemErrorSchema: itemErrorSchema,\n          autofocus: autofocus && index === 0,\n          onBlur: onBlur,\n          onFocus: onFocus\n        });\n      }),\n      onChange: this.onArrayChange,\n      onAddClick: this.onAddClick,\n      onAddItemClick: function onAddItemClick(item) {\n        return _this3.onAddItemClick(item);\n      },\n      readonly: readonly,\n      required: required,\n      schema: schema,\n      uiSchema: uiSchema,\n      title: title,\n      TitleField: TitleField,\n      formContext: formContext,\n      rawErrors: rawErrors\n    }; // Check if a custom template template was passed in\n\n    var Template = uiSchema[\"ui:ArrayFieldTemplate\"] || ArrayFieldTemplate || _FixedArrayFieldTemplate.default;\n    return /*#__PURE__*/_react.default.createElement(Template, arrayProps);\n  };\n\n  _proto.renderArrayFieldItem = function renderArrayFieldItem(props) {\n    var key = props.key,\n        index = props.index,\n        _props$canRemove = props.canRemove,\n        canRemove = _props$canRemove === void 0 ? true : _props$canRemove,\n        _props$canMoveUp = props.canMoveUp,\n        canMoveUp = _props$canMoveUp === void 0 ? true : _props$canMoveUp,\n        _props$canMoveDown = props.canMoveDown,\n        canMoveDown = _props$canMoveDown === void 0 ? true : _props$canMoveDown,\n        itemSchema = props.itemSchema,\n        itemData = props.itemData,\n        itemUiSchema = props.itemUiSchema,\n        itemIdSchema = props.itemIdSchema,\n        itemErrorSchema = props.itemErrorSchema,\n        autofocus = props.autofocus,\n        onBlur = props.onBlur,\n        onFocus = props.onFocus,\n        rawErrors = props.rawErrors;\n    var _this$props9 = this.props,\n        disabled = _this$props9.disabled,\n        readonly = _this$props9.readonly,\n        uiSchema = _this$props9.uiSchema,\n        _this$props9$registry = _this$props9.registry,\n        registry = _this$props9$registry === void 0 ? getDefaultRegistry() : _this$props9$registry;\n    var SchemaField = registry.fields.SchemaField;\n\n    var _orderable$removable$ = _extends({\n      orderable: true,\n      removable: true\n    }, uiSchema[\"ui:options\"]),\n        orderable = _orderable$removable$.orderable,\n        removable = _orderable$removable$.removable;\n\n    var has = {\n      moveUp: orderable && canMoveUp,\n      moveDown: orderable && canMoveDown,\n      remove: removable && canRemove\n    };\n    has.toolbar = Object.keys(has).some(function (key) {\n      return has[key];\n    });\n    return {\n      children: /*#__PURE__*/_react.default.createElement(SchemaField, {\n        index: index,\n        schema: itemSchema,\n        uiSchema: itemUiSchema,\n        formData: itemData,\n        errorSchema: itemErrorSchema,\n        idSchema: itemIdSchema,\n        required: this.isItemRequired(itemSchema),\n        onChange: this.onChangeForIndex(index),\n        onBlur: onBlur,\n        onFocus: onFocus,\n        registry: this.props.registry,\n        disabled: this.props.disabled,\n        readonly: this.props.readonly,\n        autofocus: autofocus,\n        rawErrors: rawErrors\n      }),\n      className: \"array-item\",\n      disabled: disabled,\n      hasToolbar: has.toolbar,\n      hasMoveUp: has.moveUp,\n      hasMoveDown: has.moveDown,\n      hasRemove: has.remove,\n      index: index,\n      key: key,\n      onAddIndexClick: this.onAddIndexClick,\n      onDropIndexClick: this.onDropIndexClick,\n      onReorderClick: this.onReorderClick,\n      readonly: readonly\n    };\n  };\n\n  _createClass(ArrayField, [{\n    key: \"itemTitle\",\n    get: function get() {\n      var schema = this.props.schema;\n      return schema.items.title || schema.items.description || \"Item\";\n    }\n  }]);\n\n  return ArrayField;\n}(_react.Component);\n\n_defineProperty(ArrayField, \"defaultProps\", {\n  uiSchema: {},\n  formData: [],\n  idSchema: {},\n  required: false,\n  disabled: false,\n  readonly: false,\n  autofocus: false\n});\n\nvar _default = ArrayField;\nexports.default = _default;\nmodule.exports = exports.default;"]},"metadata":{},"sourceType":"script"}