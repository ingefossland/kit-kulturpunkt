{"ast":null,"code":"import moment from 'moment';\nimport \"moment/locale/nb\";\nimport \"moment/locale/nn\";\nimport \"moment/locale/sv\";\nimport { getEvents, getEventsByDate } from \"..\";\nexport var getCalendar = function getCalendar(_ref) {\n  var date = _ref.date,\n      _ref$items = _ref.items,\n      items = _ref$items === void 0 ? [] : _ref$items;\n  var dt = moment(date).format('YYYY-MM-DD');\n  var dtStart = moment(dt).startOf('month').startOf('isoWeek').format('YYYY-MM-DD');\n  var dtEnd = moment(dt).endOf('month').endOf('isoWeek').format('YYYY-MM-DD');\n  var weeks = moment(dtEnd).diff(dtStart, 'week');\n  var events = [];\n\n  if (items.length) {\n    events = getEvents({\n      items: items,\n      dtStart: dtStart,\n      dtEnd: dtEnd\n    });\n  }\n\n  var rows = [];\n\n  for (var w = 0; w <= weeks; w++) {\n    var datetime = moment(dtStart).add(w, 'weeks');\n    datetime = moment(datetime).set('hour', 0);\n    datetime = moment(datetime).set('minute', 0);\n    datetime = moment(datetime).set('second', 0);\n    var cols = [];\n    var week = datetime;\n\n    for (var d = 0; d <= 6; d++) {\n      datetime = moment(week).add(d, 'days');\n\n      var _date = getEventsByDate(datetime, events);\n\n      cols.push(_date);\n    }\n\n    rows.push(cols);\n  }\n\n  return {\n    dt: dt,\n    dtStart: dtStart,\n    dtEnd: dtEnd,\n    rows: rows,\n    events: events\n  };\n};\nexport default getCalendar;","map":{"version":3,"sources":["/Users/inge/Sites/kit-kulturpunkt/node_modules/@kit-ui/schema/node_modules/@kit-ui/admin/es/utils/getCalendar.js"],"names":["moment","getEvents","getEventsByDate","getCalendar","_ref","date","_ref$items","items","dt","format","dtStart","startOf","dtEnd","endOf","weeks","diff","events","length","rows","w","datetime","add","set","cols","week","d","_date","push"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,QAAnB;AACA,OAAO,kBAAP;AACA,OAAO,kBAAP;AACA,OAAO,kBAAP;AACA,SAASC,SAAT,EAAoBC,eAApB,QAA2C,IAA3C;AACA,OAAO,IAAIC,WAAW,GAAG,SAASA,WAAT,CAAqBC,IAArB,EAA2B;AAClD,MAAIC,IAAI,GAAGD,IAAI,CAACC,IAAhB;AAAA,MACIC,UAAU,GAAGF,IAAI,CAACG,KADtB;AAAA,MAEIA,KAAK,GAAGD,UAAU,KAAK,KAAK,CAApB,GAAwB,EAAxB,GAA6BA,UAFzC;AAGA,MAAIE,EAAE,GAAGR,MAAM,CAACK,IAAD,CAAN,CAAaI,MAAb,CAAoB,YAApB,CAAT;AACA,MAAIC,OAAO,GAAGV,MAAM,CAACQ,EAAD,CAAN,CAAWG,OAAX,CAAmB,OAAnB,EAA4BA,OAA5B,CAAoC,SAApC,EAA+CF,MAA/C,CAAsD,YAAtD,CAAd;AACA,MAAIG,KAAK,GAAGZ,MAAM,CAACQ,EAAD,CAAN,CAAWK,KAAX,CAAiB,OAAjB,EAA0BA,KAA1B,CAAgC,SAAhC,EAA2CJ,MAA3C,CAAkD,YAAlD,CAAZ;AACA,MAAIK,KAAK,GAAGd,MAAM,CAACY,KAAD,CAAN,CAAcG,IAAd,CAAmBL,OAAnB,EAA4B,MAA5B,CAAZ;AACA,MAAIM,MAAM,GAAG,EAAb;;AAEA,MAAIT,KAAK,CAACU,MAAV,EAAkB;AAChBD,IAAAA,MAAM,GAAGf,SAAS,CAAC;AACjBM,MAAAA,KAAK,EAAEA,KADU;AAEjBG,MAAAA,OAAO,EAAEA,OAFQ;AAGjBE,MAAAA,KAAK,EAAEA;AAHU,KAAD,CAAlB;AAKD;;AAED,MAAIM,IAAI,GAAG,EAAX;;AAEA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIL,KAArB,EAA4BK,CAAC,EAA7B,EAAiC;AAC/B,QAAIC,QAAQ,GAAGpB,MAAM,CAACU,OAAD,CAAN,CAAgBW,GAAhB,CAAoBF,CAApB,EAAuB,OAAvB,CAAf;AACAC,IAAAA,QAAQ,GAAGpB,MAAM,CAACoB,QAAD,CAAN,CAAiBE,GAAjB,CAAqB,MAArB,EAA6B,CAA7B,CAAX;AACAF,IAAAA,QAAQ,GAAGpB,MAAM,CAACoB,QAAD,CAAN,CAAiBE,GAAjB,CAAqB,QAArB,EAA+B,CAA/B,CAAX;AACAF,IAAAA,QAAQ,GAAGpB,MAAM,CAACoB,QAAD,CAAN,CAAiBE,GAAjB,CAAqB,QAArB,EAA+B,CAA/B,CAAX;AACA,QAAIC,IAAI,GAAG,EAAX;AACA,QAAIC,IAAI,GAAGJ,QAAX;;AAEA,SAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAI,CAArB,EAAwBA,CAAC,EAAzB,EAA6B;AAC3BL,MAAAA,QAAQ,GAAGpB,MAAM,CAACwB,IAAD,CAAN,CAAaH,GAAb,CAAiBI,CAAjB,EAAoB,MAApB,CAAX;;AAEA,UAAIC,KAAK,GAAGxB,eAAe,CAACkB,QAAD,EAAWJ,MAAX,CAA3B;;AAEAO,MAAAA,IAAI,CAACI,IAAL,CAAUD,KAAV;AACD;;AAEDR,IAAAA,IAAI,CAACS,IAAL,CAAUJ,IAAV;AACD;;AAED,SAAO;AACLf,IAAAA,EAAE,EAAEA,EADC;AAELE,IAAAA,OAAO,EAAEA,OAFJ;AAGLE,IAAAA,KAAK,EAAEA,KAHF;AAILM,IAAAA,IAAI,EAAEA,IAJD;AAKLF,IAAAA,MAAM,EAAEA;AALH,GAAP;AAOD,CA9CM;AA+CP,eAAeb,WAAf","sourcesContent":["import moment from 'moment';\nimport \"moment/locale/nb\";\nimport \"moment/locale/nn\";\nimport \"moment/locale/sv\";\nimport { getEvents, getEventsByDate } from \"..\";\nexport var getCalendar = function getCalendar(_ref) {\n  var date = _ref.date,\n      _ref$items = _ref.items,\n      items = _ref$items === void 0 ? [] : _ref$items;\n  var dt = moment(date).format('YYYY-MM-DD');\n  var dtStart = moment(dt).startOf('month').startOf('isoWeek').format('YYYY-MM-DD');\n  var dtEnd = moment(dt).endOf('month').endOf('isoWeek').format('YYYY-MM-DD');\n  var weeks = moment(dtEnd).diff(dtStart, 'week');\n  var events = [];\n\n  if (items.length) {\n    events = getEvents({\n      items: items,\n      dtStart: dtStart,\n      dtEnd: dtEnd\n    });\n  }\n\n  var rows = [];\n\n  for (var w = 0; w <= weeks; w++) {\n    var datetime = moment(dtStart).add(w, 'weeks');\n    datetime = moment(datetime).set('hour', 0);\n    datetime = moment(datetime).set('minute', 0);\n    datetime = moment(datetime).set('second', 0);\n    var cols = [];\n    var week = datetime;\n\n    for (var d = 0; d <= 6; d++) {\n      datetime = moment(week).add(d, 'days');\n\n      var _date = getEventsByDate(datetime, events);\n\n      cols.push(_date);\n    }\n\n    rows.push(cols);\n  }\n\n  return {\n    dt: dt,\n    dtStart: dtStart,\n    dtEnd: dtEnd,\n    rows: rows,\n    events: events\n  };\n};\nexport default getCalendar;"]},"metadata":{},"sourceType":"module"}