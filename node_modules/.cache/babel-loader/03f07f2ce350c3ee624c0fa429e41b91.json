{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ImageBase from \"./ImageBase\";\nimport MarkerDefault from \"./ImageAnnotationsMarkerDefault\";\nimport { withResizeDetector } from 'react-resize-detector';\nimport { getImagePointEvent } from \"./utils/getImagePoint\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n    list: {\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    }\n  };\n});\n\nvar ImageAnnotations = function ImageAnnotations(_ref) {\n  var className = _ref.className,\n      imageUrl = _ref.imageUrl,\n      _ref$imageCropdata = _ref.imageCropdata,\n      imageCropdata = _ref$imageCropdata === void 0 ? {} : _ref$imageCropdata,\n      _ref$imageFocalpoint = _ref.imageFocalpoint,\n      imageFocalpoint = _ref$imageFocalpoint === void 0 ? {} : _ref$imageFocalpoint,\n      _ref$imageFilters = _ref.imageFilters,\n      imageFilters = _ref$imageFilters === void 0 ? {} : _ref$imageFilters,\n      _ref$imageAnnotations = _ref.imageAnnotations,\n      imageAnnotations = _ref$imageAnnotations === void 0 ? [] : _ref$imageAnnotations,\n      markerTemplate = _ref.markerTemplate,\n      onChange = _ref.onChange,\n      props = _objectWithoutPropertiesLoose(_ref, [\"className\", \"imageUrl\", \"imageCropdata\", \"imageFocalpoint\", \"imageFilters\", \"imageAnnotations\", \"markerTemplate\", \"onChange\"]);\n\n  var _useState = useState(false),\n      isDragging = _useState[0],\n      setIsDragging = _useState[1];\n\n  var _useState2 = useState(false),\n      parentRef = _useState2[0],\n      setParentRef = _useState2[1];\n\n  var handleLoad = function handleLoad(_ref2) {\n    var cropboxRef = _ref2.cropboxRef;\n    setParentRef(cropboxRef);\n  };\n\n  var handleClick = function handleClick(event) {\n    var point = getImagePointEvent(event);\n    setIsDragging(false);\n    var newFormData;\n\n    if (imageAnnotations.length) {\n      newFormData = [].concat(imageAnnotations, [point]);\n    } else {\n      newFormData = [point];\n    }\n\n    onChange && onChange(newFormData);\n  };\n\n  var handleIndexChange = function handleIndexChange(data, index) {\n    var marker = _extends({}, imageAnnotations[index], data);\n\n    var newFormData = imageAnnotations.map(function (item, i) {\n      var jsonValue = typeof marker === \"undefined\" ? null : marker;\n      return index === i ? jsonValue : item;\n    });\n    onChange && onChange(newFormData);\n  };\n\n  var MarkerTemplate;\n\n  if (markerTemplate) {\n    MarkerTemplate = markerTemplate;\n  } else {\n    MarkerTemplate = MarkerDefault;\n  }\n\n  var classes = useStyles();\n  var MarkerList = withResizeDetector(function (_ref3) {\n    var width = _ref3.width,\n        height = _ref3.height;\n\n    var handleStart = function handleStart(event, data, index) {\n      setIsDragging(true);\n    };\n\n    var handleDrag = function handleDrag(event, data, index) {//        setIsDragging(true)\n    };\n\n    var handleStop = function handleStop(event, data, index) {\n      var x = data.x;\n      var y = data.y;\n      var left = x / width * 100;\n      var top = y / height * 100;\n      var fx = (x / width - 0.5) * 2;\n      var fy = (y / height - 0.5) * -2;\n      var coords = {\n        left: left,\n        top: top,\n        x: fx,\n        y: fy\n      };\n      console.log('COORDS', coords);\n      handleIndexChange(coords, index);\n      setIsDragging(false);\n    };\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.list,\n      onClick: !isDragging ? onChange && handleClick : undefined\n    }, imageAnnotations && imageAnnotations.length && imageAnnotations.map(function (marker, index) {\n      var left = marker.left || 0;\n      var top = marker.top || 0;\n      var x = left * width / 100;\n      var y = top * height / 100;\n\n      if (!onChange) {\n        return /*#__PURE__*/React.createElement(MarkerTemplate, _extends({}, marker, {\n          index: index,\n          key: index,\n          position: {\n            x: x,\n            y: y\n          }\n        }));\n      }\n\n      return /*#__PURE__*/React.createElement(MarkerTemplate, _extends({}, marker, {\n        index: index,\n        key: index,\n        position: {\n          x: x,\n          y: y\n        },\n        onStart: function onStart(event, data) {\n          return handleStart(event, data, index);\n        },\n        onDrag: function onDrag(event, data) {\n          return handleDrag(event, data, index);\n        },\n        onStop: function onStop(event, data) {\n          return handleStop(event, data, index);\n        }\n      }));\n    }) || \"\");\n  });\n  return /*#__PURE__*/React.createElement(ImageBase, _extends({\n    className: className || classes.root\n  }, props, {\n    imageUrl: imageUrl,\n    imageCropdata: imageCropdata,\n    imageFocalpoint: imageFocalpoint,\n    imageFilters: imageFilters,\n    onLoad: handleLoad\n  }), /*#__PURE__*/React.createElement(MarkerList, null));\n};\n\nexport default ImageAnnotations;","map":{"version":3,"sources":["/Users/inge/Sites/kit-kulturpunkt/node_modules/@kit-ui/schema/node_modules/@kit-ui/admin/es/Media/ImageAnnotationsBase.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","useState","useRef","useEffect","makeStyles","ImageBase","MarkerDefault","withResizeDetector","getImagePointEvent","useStyles","theme","root","position","top","right","bottom","left","list","ImageAnnotations","_ref","className","imageUrl","_ref$imageCropdata","imageCropdata","_ref$imageFocalpoint","imageFocalpoint","_ref$imageFilters","imageFilters","_ref$imageAnnotations","imageAnnotations","markerTemplate","onChange","props","_useState","isDragging","setIsDragging","_useState2","parentRef","setParentRef","handleLoad","_ref2","cropboxRef","handleClick","event","point","newFormData","concat","handleIndexChange","data","index","marker","map","item","jsonValue","MarkerTemplate","classes","MarkerList","_ref3","width","height","handleStart","handleDrag","handleStop","x","y","fx","fy","coords","console","log","createElement","onClick","undefined","onStart","onDrag","onStop","onLoad"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ImageBase from \"./ImageBase\";\nimport MarkerDefault from \"./ImageAnnotationsMarkerDefault\";\nimport { withResizeDetector } from 'react-resize-detector';\nimport { getImagePointEvent } from \"./utils/getImagePoint\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n    list: {\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    }\n  };\n});\n\nvar ImageAnnotations = function ImageAnnotations(_ref) {\n  var className = _ref.className,\n      imageUrl = _ref.imageUrl,\n      _ref$imageCropdata = _ref.imageCropdata,\n      imageCropdata = _ref$imageCropdata === void 0 ? {} : _ref$imageCropdata,\n      _ref$imageFocalpoint = _ref.imageFocalpoint,\n      imageFocalpoint = _ref$imageFocalpoint === void 0 ? {} : _ref$imageFocalpoint,\n      _ref$imageFilters = _ref.imageFilters,\n      imageFilters = _ref$imageFilters === void 0 ? {} : _ref$imageFilters,\n      _ref$imageAnnotations = _ref.imageAnnotations,\n      imageAnnotations = _ref$imageAnnotations === void 0 ? [] : _ref$imageAnnotations,\n      markerTemplate = _ref.markerTemplate,\n      onChange = _ref.onChange,\n      props = _objectWithoutPropertiesLoose(_ref, [\"className\", \"imageUrl\", \"imageCropdata\", \"imageFocalpoint\", \"imageFilters\", \"imageAnnotations\", \"markerTemplate\", \"onChange\"]);\n\n  var _useState = useState(false),\n      isDragging = _useState[0],\n      setIsDragging = _useState[1];\n\n  var _useState2 = useState(false),\n      parentRef = _useState2[0],\n      setParentRef = _useState2[1];\n\n  var handleLoad = function handleLoad(_ref2) {\n    var cropboxRef = _ref2.cropboxRef;\n    setParentRef(cropboxRef);\n  };\n\n  var handleClick = function handleClick(event) {\n    var point = getImagePointEvent(event);\n    setIsDragging(false);\n    var newFormData;\n\n    if (imageAnnotations.length) {\n      newFormData = [].concat(imageAnnotations, [point]);\n    } else {\n      newFormData = [point];\n    }\n\n    onChange && onChange(newFormData);\n  };\n\n  var handleIndexChange = function handleIndexChange(data, index) {\n    var marker = _extends({}, imageAnnotations[index], data);\n\n    var newFormData = imageAnnotations.map(function (item, i) {\n      var jsonValue = typeof marker === \"undefined\" ? null : marker;\n      return index === i ? jsonValue : item;\n    });\n    onChange && onChange(newFormData);\n  };\n\n  var MarkerTemplate;\n\n  if (markerTemplate) {\n    MarkerTemplate = markerTemplate;\n  } else {\n    MarkerTemplate = MarkerDefault;\n  }\n\n  var classes = useStyles();\n  var MarkerList = withResizeDetector(function (_ref3) {\n    var width = _ref3.width,\n        height = _ref3.height;\n\n    var handleStart = function handleStart(event, data, index) {\n      setIsDragging(true);\n    };\n\n    var handleDrag = function handleDrag(event, data, index) {//        setIsDragging(true)\n    };\n\n    var handleStop = function handleStop(event, data, index) {\n      var x = data.x;\n      var y = data.y;\n      var left = x / width * 100;\n      var top = y / height * 100;\n      var fx = (x / width - 0.5) * 2;\n      var fy = (y / height - 0.5) * -2;\n      var coords = {\n        left: left,\n        top: top,\n        x: fx,\n        y: fy\n      };\n      console.log('COORDS', coords);\n      handleIndexChange(coords, index);\n      setIsDragging(false);\n    };\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.list,\n      onClick: !isDragging ? onChange && handleClick : undefined\n    }, imageAnnotations && imageAnnotations.length && imageAnnotations.map(function (marker, index) {\n      var left = marker.left || 0;\n      var top = marker.top || 0;\n      var x = left * width / 100;\n      var y = top * height / 100;\n\n      if (!onChange) {\n        return /*#__PURE__*/React.createElement(MarkerTemplate, _extends({}, marker, {\n          index: index,\n          key: index,\n          position: {\n            x: x,\n            y: y\n          }\n        }));\n      }\n\n      return /*#__PURE__*/React.createElement(MarkerTemplate, _extends({}, marker, {\n        index: index,\n        key: index,\n        position: {\n          x: x,\n          y: y\n        },\n        onStart: function onStart(event, data) {\n          return handleStart(event, data, index);\n        },\n        onDrag: function onDrag(event, data) {\n          return handleDrag(event, data, index);\n        },\n        onStop: function onStop(event, data) {\n          return handleStop(event, data, index);\n        }\n      }));\n    }) || \"\");\n  });\n  return /*#__PURE__*/React.createElement(ImageBase, _extends({\n    className: className || classes.root\n  }, props, {\n    imageUrl: imageUrl,\n    imageCropdata: imageCropdata,\n    imageFocalpoint: imageFocalpoint,\n    imageFilters: imageFilters,\n    onLoad: handleLoad\n  }), /*#__PURE__*/React.createElement(MarkerList, null));\n};\n\nexport default ImageAnnotations;"]},"metadata":{},"sourceType":"module"}