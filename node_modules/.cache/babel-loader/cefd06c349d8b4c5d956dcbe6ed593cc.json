{"ast":null,"code":"function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { useRef, useState, useEffect } from 'react';\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport VideoControls from \"./VideoControls\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    player: {\n      backgroundColor: \"black\",\n      color: \"white\",\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    video: {\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      display: \"block\",\n      width: \"100%\",\n      height: \"auto\",\n      maxWidth: \"100%\",\n      maxHeight: \"100%\",\n      margin: \"auto\"\n    },\n    controls: {\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"space-between\",\n      margin: theme.spacing(1)\n    }\n  };\n});\n\nvar VideoPlayer = function VideoPlayer(_ref) {\n  var className = _ref.className,\n      _ref$position = _ref.position,\n      position = _ref$position === void 0 ? \"absolute\" : _ref$position,\n      _ref$minHeight = _ref.minHeight,\n      minHeight = _ref$minHeight === void 0 ? undefined : _ref$minHeight,\n      _ref$maxWidth = _ref.maxWidth,\n      maxWidth = _ref$maxWidth === void 0 ? undefined : _ref$maxWidth,\n      _ref$maxHeight = _ref.maxHeight,\n      maxHeight = _ref$maxHeight === void 0 ? undefined : _ref$maxHeight,\n      _ref$format = _ref.format,\n      format = _ref$format === void 0 ? undefined : _ref$format,\n      title = _ref.title,\n      description = _ref.description,\n      _ref$imageUrl = _ref.imageUrl,\n      imageUrl = _ref$imageUrl === void 0 ? undefined : _ref$imageUrl,\n      _ref$videoUrl = _ref.videoUrl,\n      videoUrl = _ref$videoUrl === void 0 ? undefined : _ref$videoUrl,\n      _ref$videoType = _ref.videoType,\n      videoType = _ref$videoType === void 0 ? undefined : _ref$videoType,\n      _ref$videoSources = _ref.videoSources,\n      videoSources = _ref$videoSources === void 0 ? [] : _ref$videoSources,\n      _ref$resources = _ref.resources,\n      resources = _ref$resources === void 0 ? {} : _ref$resources,\n      props = _objectWithoutPropertiesLoose(_ref, [\"className\", \"position\", \"minHeight\", \"maxWidth\", \"maxHeight\", \"format\", \"title\", \"description\", \"imageUrl\", \"videoUrl\", \"videoType\", \"videoSources\", \"resources\"]); //    size = size === \"large\" && 32 || size === \"medium\" && 24 || size === \"small\" && 12\n\n\n  var playerRef = useRef(null);\n\n  var _useState = useState(null),\n      buffered = _useState[0],\n      setBuffered = _useState[1];\n\n  var _useState2 = useState(0),\n      currentTime = _useState2[0],\n      setCurrentTime = _useState2[1];\n\n  var _useState3 = useState(0),\n      duration = _useState3[0],\n      setDuration = _useState3[1];\n\n  var _useState4 = useState(null),\n      seeking = _useState4[0],\n      setSeeking = _useState4[1];\n\n  var _useState5 = useState(true),\n      paused = _useState5[0],\n      setPaused = _useState5[1];\n\n  var _useState6 = useState(true),\n      volume = _useState6[0],\n      setVolume = _useState6[1];\n\n  var _useState7 = useState(true),\n      muted = _useState7[0],\n      setMuted = _useState7[1];\n\n  var _useState8 = useState(null),\n      videoWidth = _useState8[0],\n      setVideoWidth = _useState8[1];\n\n  var _useState9 = useState(null),\n      videoHeight = _useState9[0],\n      setVideoHeight = _useState9[1];\n\n  var _useState10 = useState(null),\n      videoRatio = _useState10[0],\n      setVideoRatio = _useState10[1]; //    const [maxWidth, setMaxWidth] = useState(null)\n\n\n  var _useState11 = useState(null),\n      scale = _useState11[0],\n      setScale = _useState11[1];\n\n  var _useState12 = useState(null),\n      ratio = _useState12[0],\n      setRatio = _useState12[1];\n\n  var classes = useStyles();\n  useEffect(function () {\n    if (format && format.includes(\":\")) {\n      var wh = format.split(\":\");\n      setRatio(wh[1] / wh[0]);\n    } else if (videoWidth && videoHeight) {\n      setRatio(videoHeight / videoWidth);\n    }\n  }, [format, videoWidth, videoHeight]);\n  useEffect(function () {\n    if (!playerRef.current) {\n      return;\n    }\n\n    playerRef.current.addEventListener('loadedmetadata', function (event) {\n      var offsetWidth = event.target.offsetWidth;\n      var videoWidth = event.target.videoWidth;\n      var videoHeight = event.target.videoHeight;\n      var scale = offsetWidth / videoWidth;\n      var duration = event.target.duration;\n      console.log('event', event);\n      setVideoWidth(videoWidth);\n      setVideoHeight(videoHeight);\n      setVideoRatio(videoHeight / videoWidth);\n      setBuffered(event.target.buffered);\n      setDuration(event.target.duration);\n      setCurrentTime(event.target.currentTime);\n      setPaused(event.target.paused);\n      setMuted(event.target.muted);\n      setVolume(event.target.volume);\n      props.onMetadata && props.onMetadata({\n        videoWidth: videoWidth,\n        videoHeight: videoHeight,\n        duration: duration\n      });\n    });\n    playerRef.current.addEventListener('canplay', function (event) {\n      /*\n      setBuffered(event.target.buffered)\n      setDuration(event.target.duration)\n      setCurrentTime(event.target.currentTime)\n      setPaused(event.target.paused)\n      setMuted(event.target.muted)\n      setVolume(event.target.volume)\n      */\n    });\n    playerRef.current.addEventListener('timeupdate', function (event) {\n      setDuration(event.target.duration);\n      setCurrentTime(event.target.currentTime);\n    });\n    playerRef.current.addEventListener('seeking', function (event) {\n      setCurrentTime(event.target.currentTime);\n      setSeeking(true);\n    });\n    playerRef.current.addEventListener('seeked', function (event) {\n      setCurrentTime(event.target.currentTime);\n      setSeeking(false);\n    });\n    playerRef.current.addEventListener('volumechange', function (event) {\n      setVolume(event.target.volume);\n    });\n    playerRef.current.addEventListener('play', function (event) {\n      setPaused(event.target.paused);\n    });\n    playerRef.current.addEventListener('pause', function (event) {\n      setPaused(event.target.paused);\n    });\n  }, [playerRef.current]);\n\n  var handlePlayPause = function handlePlayPause() {\n    var paused = playerRef.current.paused;\n\n    if (paused) {\n      playerRef.current.play();\n    } else {\n      playerRef.current.pause();\n    }\n\n    setPaused(!paused);\n  };\n\n  var handleSeek = function handleSeek(value) {\n    playerRef.current.currentTime = value;\n  };\n\n  var handleVolume = function handleVolume(value) {\n    playerRef.current.volume = value;\n  };\n\n  var handleMute = function handleMute() {\n    var mute = playerRef.current.mute;\n    playerRef.current.mute = !mute;\n    setMuted(!mute);\n  };\n\n  if (!videoSources.length && resources) {\n    Object.values(resources).map(function (source) {\n      var mimeType = source.mimeType,\n          url = source.url;\n\n      if (mimeType.startsWith('video') && url) {\n        videoSources.push({\n          src: url,\n          type: mimeType\n        });\n      }\n    });\n  }\n\n  if (!videoSources.length) {\n    return /*#__PURE__*/React.createElement(\"p\", null, \"No video sources\");\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.player,\n    \"data-layout\": \"videoPlayer\"\n  }, /*#__PURE__*/React.createElement(\"video\", {\n    ref: playerRef,\n    className: classes.video,\n    poster: imageUrl\n  }, videoSources.map(function (_ref2) {\n    var src = _ref2.src,\n        type = _ref2.type;\n    return /*#__PURE__*/React.createElement(\"source\", {\n      src: src,\n      type: type\n    });\n  }), \"Your browser does not support the video tag.\"), duration && /*#__PURE__*/React.createElement(VideoControls, {\n    className: classes.controls,\n    title: title,\n    description: description,\n    paused: paused,\n    onPlayPause: handlePlayPause,\n    duration: duration,\n    currentTime: currentTime,\n    onSeek: handleSeek\n  }));\n};\n\nVideoPlayer.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  className: PropTypes.string,\n  untitled: PropTypes.string,\n  title: PropTypes.string,\n  description: PropTypes.string,\n\n  /** Video sources */\n  videoSources: PropTypes.array,\n\n  /** Resources object */\n  resources: PropTypes.node,\n\n  /** Poster image */\n  imageUrl: PropTypes.string\n} : {};\nexport default VideoPlayer;","map":{"version":3,"sources":["/Users/inge/Sites/kit-kulturpunkt/node_modules/@kit-ui/schema/node_modules/@kit-ui/admin/es/Media/VideoPlayer.js"],"names":["_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","Object","keys","key","i","length","indexOf","React","useRef","useState","useEffect","PropTypes","makeStyles","VideoControls","useStyles","theme","player","backgroundColor","color","position","top","right","bottom","left","display","alignItems","justifyContent","video","width","height","maxWidth","maxHeight","margin","controls","flexDirection","spacing","VideoPlayer","_ref","className","_ref$position","_ref$minHeight","minHeight","undefined","_ref$maxWidth","_ref$maxHeight","_ref$format","format","title","description","_ref$imageUrl","imageUrl","_ref$videoUrl","videoUrl","_ref$videoType","videoType","_ref$videoSources","videoSources","_ref$resources","resources","props","playerRef","_useState","buffered","setBuffered","_useState2","currentTime","setCurrentTime","_useState3","duration","setDuration","_useState4","seeking","setSeeking","_useState5","paused","setPaused","_useState6","volume","setVolume","_useState7","muted","setMuted","_useState8","videoWidth","setVideoWidth","_useState9","videoHeight","setVideoHeight","_useState10","videoRatio","setVideoRatio","_useState11","scale","setScale","_useState12","ratio","setRatio","classes","includes","wh","split","current","addEventListener","event","offsetWidth","console","log","onMetadata","handlePlayPause","play","pause","handleSeek","value","handleVolume","handleMute","mute","values","map","mimeType","url","startsWith","push","src","type","createElement","ref","poster","_ref2","onPlayPause","onSeek","propTypes","process","env","NODE_ENV","string","untitled","array","node"],"mappings":"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","sourcesContent":["function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { useRef, useState, useEffect } from 'react';\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport VideoControls from \"./VideoControls\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    player: {\n      backgroundColor: \"black\",\n      color: \"white\",\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    video: {\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      display: \"block\",\n      width: \"100%\",\n      height: \"auto\",\n      maxWidth: \"100%\",\n      maxHeight: \"100%\",\n      margin: \"auto\"\n    },\n    controls: {\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"space-between\",\n      margin: theme.spacing(1)\n    }\n  };\n});\n\nvar VideoPlayer = function VideoPlayer(_ref) {\n  var className = _ref.className,\n      _ref$position = _ref.position,\n      position = _ref$position === void 0 ? \"absolute\" : _ref$position,\n      _ref$minHeight = _ref.minHeight,\n      minHeight = _ref$minHeight === void 0 ? undefined : _ref$minHeight,\n      _ref$maxWidth = _ref.maxWidth,\n      maxWidth = _ref$maxWidth === void 0 ? undefined : _ref$maxWidth,\n      _ref$maxHeight = _ref.maxHeight,\n      maxHeight = _ref$maxHeight === void 0 ? undefined : _ref$maxHeight,\n      _ref$format = _ref.format,\n      format = _ref$format === void 0 ? undefined : _ref$format,\n      title = _ref.title,\n      description = _ref.description,\n      _ref$imageUrl = _ref.imageUrl,\n      imageUrl = _ref$imageUrl === void 0 ? undefined : _ref$imageUrl,\n      _ref$videoUrl = _ref.videoUrl,\n      videoUrl = _ref$videoUrl === void 0 ? undefined : _ref$videoUrl,\n      _ref$videoType = _ref.videoType,\n      videoType = _ref$videoType === void 0 ? undefined : _ref$videoType,\n      _ref$videoSources = _ref.videoSources,\n      videoSources = _ref$videoSources === void 0 ? [] : _ref$videoSources,\n      _ref$resources = _ref.resources,\n      resources = _ref$resources === void 0 ? {} : _ref$resources,\n      props = _objectWithoutPropertiesLoose(_ref, [\"className\", \"position\", \"minHeight\", \"maxWidth\", \"maxHeight\", \"format\", \"title\", \"description\", \"imageUrl\", \"videoUrl\", \"videoType\", \"videoSources\", \"resources\"]);\n\n  //    size = size === \"large\" && 32 || size === \"medium\" && 24 || size === \"small\" && 12\n  var playerRef = useRef(null);\n\n  var _useState = useState(null),\n      buffered = _useState[0],\n      setBuffered = _useState[1];\n\n  var _useState2 = useState(0),\n      currentTime = _useState2[0],\n      setCurrentTime = _useState2[1];\n\n  var _useState3 = useState(0),\n      duration = _useState3[0],\n      setDuration = _useState3[1];\n\n  var _useState4 = useState(null),\n      seeking = _useState4[0],\n      setSeeking = _useState4[1];\n\n  var _useState5 = useState(true),\n      paused = _useState5[0],\n      setPaused = _useState5[1];\n\n  var _useState6 = useState(true),\n      volume = _useState6[0],\n      setVolume = _useState6[1];\n\n  var _useState7 = useState(true),\n      muted = _useState7[0],\n      setMuted = _useState7[1];\n\n  var _useState8 = useState(null),\n      videoWidth = _useState8[0],\n      setVideoWidth = _useState8[1];\n\n  var _useState9 = useState(null),\n      videoHeight = _useState9[0],\n      setVideoHeight = _useState9[1];\n\n  var _useState10 = useState(null),\n      videoRatio = _useState10[0],\n      setVideoRatio = _useState10[1]; //    const [maxWidth, setMaxWidth] = useState(null)\n\n\n  var _useState11 = useState(null),\n      scale = _useState11[0],\n      setScale = _useState11[1];\n\n  var _useState12 = useState(null),\n      ratio = _useState12[0],\n      setRatio = _useState12[1];\n\n  var classes = useStyles();\n  useEffect(function () {\n    if (format && format.includes(\":\")) {\n      var wh = format.split(\":\");\n      setRatio(wh[1] / wh[0]);\n    } else if (videoWidth && videoHeight) {\n      setRatio(videoHeight / videoWidth);\n    }\n  }, [format, videoWidth, videoHeight]);\n  useEffect(function () {\n    if (!playerRef.current) {\n      return;\n    }\n\n    playerRef.current.addEventListener('loadedmetadata', function (event) {\n      var offsetWidth = event.target.offsetWidth;\n      var videoWidth = event.target.videoWidth;\n      var videoHeight = event.target.videoHeight;\n      var scale = offsetWidth / videoWidth;\n      var duration = event.target.duration;\n      console.log('event', event);\n      setVideoWidth(videoWidth);\n      setVideoHeight(videoHeight);\n      setVideoRatio(videoHeight / videoWidth);\n      setBuffered(event.target.buffered);\n      setDuration(event.target.duration);\n      setCurrentTime(event.target.currentTime);\n      setPaused(event.target.paused);\n      setMuted(event.target.muted);\n      setVolume(event.target.volume);\n      props.onMetadata && props.onMetadata({\n        videoWidth: videoWidth,\n        videoHeight: videoHeight,\n        duration: duration\n      });\n    });\n    playerRef.current.addEventListener('canplay', function (event) {\n      /*\n      setBuffered(event.target.buffered)\n      setDuration(event.target.duration)\n      setCurrentTime(event.target.currentTime)\n      setPaused(event.target.paused)\n      setMuted(event.target.muted)\n      setVolume(event.target.volume)\n      */\n    });\n    playerRef.current.addEventListener('timeupdate', function (event) {\n      setDuration(event.target.duration);\n      setCurrentTime(event.target.currentTime);\n    });\n    playerRef.current.addEventListener('seeking', function (event) {\n      setCurrentTime(event.target.currentTime);\n      setSeeking(true);\n    });\n    playerRef.current.addEventListener('seeked', function (event) {\n      setCurrentTime(event.target.currentTime);\n      setSeeking(false);\n    });\n    playerRef.current.addEventListener('volumechange', function (event) {\n      setVolume(event.target.volume);\n    });\n    playerRef.current.addEventListener('play', function (event) {\n      setPaused(event.target.paused);\n    });\n    playerRef.current.addEventListener('pause', function (event) {\n      setPaused(event.target.paused);\n    });\n  }, [playerRef.current]);\n\n  var handlePlayPause = function handlePlayPause() {\n    var paused = playerRef.current.paused;\n\n    if (paused) {\n      playerRef.current.play();\n    } else {\n      playerRef.current.pause();\n    }\n\n    setPaused(!paused);\n  };\n\n  var handleSeek = function handleSeek(value) {\n    playerRef.current.currentTime = value;\n  };\n\n  var handleVolume = function handleVolume(value) {\n    playerRef.current.volume = value;\n  };\n\n  var handleMute = function handleMute() {\n    var mute = playerRef.current.mute;\n    playerRef.current.mute = !mute;\n    setMuted(!mute);\n  };\n\n  if (!videoSources.length && resources) {\n    Object.values(resources).map(function (source) {\n      var mimeType = source.mimeType,\n          url = source.url;\n\n      if (mimeType.startsWith('video') && url) {\n        videoSources.push({\n          src: url,\n          type: mimeType\n        });\n      }\n    });\n  }\n\n  if (!videoSources.length) {\n    return /*#__PURE__*/React.createElement(\"p\", null, \"No video sources\");\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.player,\n    \"data-layout\": \"videoPlayer\"\n  }, /*#__PURE__*/React.createElement(\"video\", {\n    ref: playerRef,\n    className: classes.video,\n    poster: imageUrl\n  }, videoSources.map(function (_ref2) {\n    var src = _ref2.src,\n        type = _ref2.type;\n    return /*#__PURE__*/React.createElement(\"source\", {\n      src: src,\n      type: type\n    });\n  }), \"Your browser does not support the video tag.\"), duration && /*#__PURE__*/React.createElement(VideoControls, {\n    className: classes.controls,\n    title: title,\n    description: description,\n    paused: paused,\n    onPlayPause: handlePlayPause,\n    duration: duration,\n    currentTime: currentTime,\n    onSeek: handleSeek\n  }));\n};\n\nVideoPlayer.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  className: PropTypes.string,\n  untitled: PropTypes.string,\n  title: PropTypes.string,\n  description: PropTypes.string,\n\n  /** Video sources */\n  videoSources: PropTypes.array,\n\n  /** Resources object */\n  resources: PropTypes.node,\n\n  /** Poster image */\n  imageUrl: PropTypes.string\n} : {};\nexport default VideoPlayer;"]},"metadata":{},"sourceType":"module"}